---
layout: post
title: "A tool to navigate the achivement in the source tree"
date: 2016-09-21 02:13:20 +0800
comments: true
categories: prolog
---




We go to [github][1], then download the souce code,
go on looking into the code, dame it! So many codes ,so many branches,
how to figure out the develop process?

Maybe you can use the [sourceTree][2] to help you visulize the source tree,
or the right below tool for helping navigating the source tree in the time
and compare with each other continually.


+ [1. 源码比较目录](#compare)
+ [2. 文件细节](#detail)
+ [3. 时间变化表](#time)
+ [4. 列出简要信息](#short)
+ [5. shell code for navigating the source tree in the git repository](#code)

<!--more-->


<h2 id="compare">1. 比较目录</h2>

[color block languages][3] for modify,maybe you need sometimes in your blogs writing life.


+ [1: 正在比较变动前 6ced089 和变动后 3d8b517](#1)
+ [2: 正在比较变动前 3d8b517 和变动后 ccd942c](#2)
+ [3: 正在比较变动前 ccd942c 和变动后 0b3607d](#3)
+ [4: 正在比较变动前 0b3607d 和变动后 acf4ec3](#4)
+ [5: 正在比较变动前 acf4ec3 和变动后 c1ad93f](#5)
+ [6: 正在比较变动前 c1ad93f 和变动后 c7c8226](#6)
+ [7: 正在比较变动前 c7c8226 和变动后 0cd29ea](#7)
+ [8: 正在比较变动前 0cd29ea 和变动后 13f7fbf](#8)
+ [9: 正在比较变动前 13f7fbf 和变动后 5520d75](#9)
+ [10: 正在比较变动前 5520d75 和变动后 8656a39](#10)
+ [11: 正在比较变动前 8656a39 和变动后 7421981](#11)
+ [12: 正在比较变动前 7421981 和变动后 bfcb63b](#12)
+ [13: 正在比较变动前 bfcb63b 和变动后 84afd69](#13)
+ [14: 正在比较变动前 84afd69 和变动后 c2bfd3f](#14)
+ [15: 正在比较变动前 c2bfd3f 和变动后 fa364fc](#15)
+ [16: 正在比较变动前 fa364fc 和变动后 3c900f4](#16)
+ [17: 正在比较变动前 3c900f4 和变动后 65cc1c3](#17)
+ [18: 正在比较变动前 65cc1c3 和变动后 20e1f21](#18)
+ [19: 正在比较变动前 20e1f21 和变动后 e2e9fc1](#19)
+ [20: 正在比较变动前 e2e9fc1 和变动后 4b72d15](#20)
+ [21: 正在比较变动前 4b72d15 和变动后 54248f7](#21)
+ [22: 正在比较变动前 54248f7 和变动后 3b9a773](#22)
+ [23: 正在比较变动前 3b9a773 和变动后 1e9a910](#23)
+ [24: 正在比较变动前 1e9a910 和变动后 6dc1cf5](#24)
+ [25: 正在比较变动前 6dc1cf5 和变动后 76ea35d](#25)
+ [26: 正在比较变动前 76ea35d 和变动后 2a2728b](#26)
+ [27: 正在比较变动前 2a2728b 和变动后 7f9fc82](#27)
+ [28: 正在比较变动前 7f9fc82 和变动后 5baddb5](#28)
+ [29: 正在比较变动前 5baddb5 和变动后 95bfe7f](#29)
+ [30: 正在比较变动前 95bfe7f 和变动后 f1322fa](#30)
+ [31: 正在比较变动前 f1322fa 和变动后 474bea8](#31)
+ [32: 正在比较变动前 474bea8 和变动后 262cb2a](#32)
+ [33: 正在比较变动前 262cb2a 和变动后 e7e6033](#33)
+ [34: 正在比较变动前 e7e6033 和变动后 e17bf44](#34)
+ [35: 正在比较变动前 e17bf44 和变动后 6596aa1](#35)
+ [36: 正在比较变动前 6596aa1 和变动后 87e8982](#36)
+ [37: 正在比较变动前 87e8982 和变动后 cb6aada](#37)
+ [38: 正在比较变动前 cb6aada 和变动后 7c8125b](#38)
+ [39: 正在比较变动前 7c8125b 和变动后 6a38f95](#39)
+ [40: 正在比较变动前 6a38f95 和变动后 ebb86cd](#40)
+ [41: 正在比较变动前 ebb86cd 和变动后 1549e44](#41)
+ [42: 正在比较变动前 1549e44 和变动后 61ddca2](#42)
+ [43: 正在比较变动前 61ddca2 和变动后 26f07e7](#43)
+ [44: 正在比较变动前 26f07e7 和变动后 f78b4f8](#44)
+ [45: 正在比较变动前 f78b4f8 和变动后 3109362](#45)
+ [46: 正在比较变动前 3109362 和变动后 df0ab09](#46)
+ [47: 正在比较变动前 df0ab09 和变动后 73e976b](#47)
+ [48: 正在比较变动前 73e976b 和变动后 090c25d](#48)
+ [49: 正在比较变动前 090c25d 和变动后 daed8bf](#49)
+ [50: 正在比较变动前 daed8bf 和变动后 528b9af](#50)
+ [51: 正在比较变动前 528b9af 和变动后 e594ae6](#51)
+ [52: 正在比较变动前 e594ae6 和变动后 bbefbf7](#52)
+ [53: 正在比较变动前 bbefbf7 和变动后 0cc5421](#53)
+ [54: 正在比较变动前 0cc5421 和变动后 dbc602d](#54)
+ [55: 正在比较变动前 dbc602d 和变动后 a2456df](#55)
+ [56: 正在比较变动前 a2456df 和变动后 20c6017](#56)
+ [57: 正在比较变动前 20c6017 和变动后 f694d77](#57)
+ [58: 正在比较变动前 f694d77 和变动后 af5d96d](#58)
+ [59: 正在比较变动前 af5d96d 和变动后 ab4b616](#59)
+ [60: 正在比较变动前 ab4b616 和变动后 74bd19d](#60)
+ [61: 正在比较变动前 74bd19d 和变动后 8ffff6f](#61)
+ [62: 正在比较变动前 8ffff6f 和变动后 ac3423a](#62)
+ [63: 正在比较变动前 ac3423a 和变动后 57932e4](#63)
+ [64: 正在比较变动前 57932e4 和变动后 315b16e](#64)
+ [65: 正在比较变动前 315b16e 和变动后 898b5d2](#65)
+ [66: 正在比较变动前 898b5d2 和变动后 4279a49](#66)
+ [67: 正在比较变动前 4279a49 和变动后 c173073](#67)
+ [68: 正在比较变动前 c173073 和变动后 107c515](#68)
+ [69: 正在比较变动前 107c515 和变动后 8f574bb](#69)
+ [70: 正在比较变动前 8f574bb 和变动后 d7088dd](#70)
+ [71: 正在比较变动前 d7088dd 和变动后 94ed05d](#71)
+ [72: 正在比较变动前 94ed05d 和变动后 f481060](#72)
+ [73: 正在比较变动前 f481060 和变动后 ce492ef](#73)
+ [74: 正在比较变动前 ce492ef 和变动后 ddef555](#74)
+ [75: 正在比较变动前 ddef555 和变动后 af27fdd](#75)
+ [76: 正在比较变动前 af27fdd 和变动后 f390238](#76)
+ [77: 正在比较变动前 f390238 和变动后 c5f7d82](#77)
+ [78: 正在比较变动前 c5f7d82 和变动后 acf6467](#78)
+ [79: 正在比较变动前 acf6467 和变动后 6656a2d](#79)
+ [80: 正在比较变动前 6656a2d 和变动后 256c9ce](#80)
+ [81: 正在比较变动前 256c9ce 和变动后 bf4ebea](#81)
+ [82: 正在比较变动前 bf4ebea 和变动后 70aec99](#82)
+ [83: 正在比较变动前 70aec99 和变动后 e06e6ba](#83)
+ [84: 正在比较变动前 e06e6ba 和变动后 0fd12ca](#84)
+ [85: 正在比较变动前 0fd12ca 和变动后 67c4157](#85)
+ [86: 正在比较变动前 67c4157 和变动后 b972e2b](#86)
+ [87: 正在比较变动前 b972e2b 和变动后 8bbc84c](#87)
+ [88: 正在比较变动前 8bbc84c 和变动后 033fa14](#88)
+ [89: 正在比较变动前 033fa14 和变动后 fdb5a9e](#89)
+ [90: 正在比较变动前 fdb5a9e 和变动后 6ec582e](#90)
+ [91: 正在比较变动前 6ec582e 和变动后 68b53b8](#91)
+ [92: 正在比较变动前 68b53b8 和变动后 46e8f3c](#92)
+ [93: 正在比较变动前 46e8f3c 和变动后 3162d88](#93)
+ [94: 正在比较变动前 3162d88 和变动后 714b2e0](#94)
+ [95: 正在比较变动前 714b2e0 和变动后 af7a387](#95)
+ [96: 正在比较变动前 af7a387 和变动后 7b434e3](#96)
+ [97: 正在比较变动前 7b434e3 和变动后 dcbcb4d](#97)
+ [98: 正在比较变动前 dcbcb4d 和变动后 50a3dbc](#98)
+ [99: 正在比较变动前 50a3dbc 和变动后 a97e8e1](#99)
+ [100: 正在比较变动前 a97e8e1 和变动后 9513a9b](#100)
+ [101: 正在比较变动前 9513a9b 和变动后 7163f60](#101)
+ [102: 正在比较变动前 7163f60 和变动后 b2f4aef](#102)
+ [103: 正在比较变动前 b2f4aef 和变动后 ba30c25](#103)
+ [104: 正在比较变动前 ba30c25 和变动后 0eea41b](#104)
+ [105: 正在比较变动前 0eea41b 和变动后 c1691bd](#105)
+ [106: 正在比较变动前 c1691bd 和变动后 3de9fc2](#106)
+ [107: 正在比较变动前 3de9fc2 和变动后 cb34d89](#107)
+ [108: 正在比较变动前 cb34d89 和变动后 7f0e20f](#108)
+ [109: 正在比较变动前 7f0e20f 和变动后 c16a7a7](#109)
+ [110: 正在比较变动前 c16a7a7 和变动后 8bbb08c](#110)
+ [111: 正在比较变动前 8bbb08c 和变动后 34c8b1a](#111)
+ [112: 正在比较变动前 34c8b1a 和变动后 d883d06](#112)
+ [113: 正在比较变动前 d883d06 和变动后 66ac0a0](#113)
+ [114: 正在比较变动前 66ac0a0 和变动后 ab5a102](#114)
+ [115: 正在比较变动前 ab5a102 和变动后 65f43b8](#115)
+ [116: 正在比较变动前 65f43b8 和变动后 c6de3d1](#116)
+ [117: 正在比较变动前 c6de3d1 和变动后 cab2231](#117)
+ [118: 正在比较变动前 cab2231 和变动后 008c5e6](#118)
+ [119: 正在比较变动前 008c5e6 和变动后 dba5c72](#119)
+ [120: 正在比较变动前 dba5c72 和变动后 eff64ee](#120)
+ [121: 正在比较变动前 eff64ee 和变动后 89eb423](#121)
+ [122: 正在比较变动前 89eb423 和变动后 2346997](#122)
+ [123: 正在比较变动前 2346997 和变动后 d22d50e](#123)
+ [124: 正在比较变动前 d22d50e 和变动后 e64cc35](#124)
+ [125: 正在比较变动前 e64cc35 和变动后 763a529](#125)
+ [126: 正在比较变动前 763a529 和变动后 d962f81](#126)
+ [127: 正在比较变动前 d962f81 和变动后 63a5cd7](#127)
+ [128: 正在比较变动前 63a5cd7 和变动后 ce95c3c](#128)
+ [129: 正在比较变动前 ce95c3c 和变动后 44cd5a6](#129)
+ [130: 正在比较变动前 44cd5a6 和变动后 c0c5e18](#130)
+ [131: 正在比较变动前 c0c5e18 和变动后 603344f](#131)
+ [132: 正在比较变动前 603344f 和变动后 2679253](#132)
+ [133: 正在比较变动前 2679253 和变动后 a5e20f8](#133)
+ [134: 正在比较变动前 a5e20f8 和变动后 bc3c502](#134)
+ [135: 正在比较变动前 bc3c502 和变动后 7ec98aa](#135)
+ [136: 正在比较变动前 7ec98aa 和变动后 984d3b9](#136)
+ [137: 正在比较变动前 984d3b9 和变动后 4401e20](#137)
+ [138: 正在比较变动前 4401e20 和变动后 2247466](#138)
+ [139: 正在比较变动前 2247466 和变动后 f4a9322](#139)
+ [140: 正在比较变动前 f4a9322 和变动后 0d2712a](#140)
+ [141: 正在比较变动前 0d2712a 和变动后 3518985](#141)
+ [142: 正在比较变动前 3518985 和变动后 322ca62](#142)
+ [143: 正在比较变动前 322ca62 和变动后 c4bf9ea](#143)
+ [144: 正在比较变动前 c4bf9ea 和变动后 2a6dafd](#144)
+ [145: 正在比较变动前 2a6dafd 和变动后 145615e](#145)
+ [146: 正在比较变动前 145615e 和变动后 f16acca](#146)
+ [147: 正在比较变动前 f16acca 和变动后 4e2d9f1](#147)
+ [148: 正在比较变动前 4e2d9f1 和变动后 6359c9c](#148)
+ [149: 正在比较变动前 6359c9c 和变动后 00537d0](#149)
+ [150: 正在比较变动前 00537d0 和变动后 acadc39](#150)
+ [151: 正在比较变动前 acadc39 和变动后 51359c6](#151)
+ [152: 正在比较变动前 51359c6 和变动后 73047b3](#152)
+ [153: 正在比较变动前 73047b3 和变动后 e4c4586](#153)
+ [154: 正在比较变动前 e4c4586 和变动后 7b991bb](#154)
+ [155: 正在比较变动前 7b991bb 和变动后 fa1518f](#155)
+ [156: 正在比较变动前 fa1518f 和变动后 8593ed6](#156)
+ [157: 正在比较变动前 8593ed6 和变动后 cc53b1e](#157)
+ [158: 正在比较变动前 cc53b1e 和变动后 202a241](#158)
+ [159: 正在比较变动前 202a241 和变动后 858b5fb](#159)
+ [160: 正在比较变动前 858b5fb 和变动后 260b62d](#160)
+ [161: 正在比较变动前 260b62d 和变动后 a6886ca](#161)
+ [162: 正在比较变动前 a6886ca 和变动后 41914a2](#162)
+ [163: 正在比较变动前 41914a2 和变动后 05a5fd2](#163)
+ [164: 正在比较变动前 05a5fd2 和变动后 fd6c59b](#164)
+ [165: 正在比较变动前 fd6c59b 和变动后 121e68f](#165)

<h2 id="detail">2. 文件细节</h2>

<h2 id="1"> 1: 正在比较变动前 6ced089 和变动后 3d8b517 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitmodules b/.gitmodules
index f1b9cf5..a63cbff 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -1,3 +1,6 @@
 [submodule "Prolog-Library-Collection"]
 	path = Prolog-Library-Collection
 	url = https://github.com/wouterbeek/Prolog-Library-Collection.git
+[submodule "plHtml"]
+	path = plHtml
+	url = https://github.com/wouterbeek/plHtml.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 4a51c6e..184c33e 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 4a51c6e0936179bff57fda23686219e6a6cd3c9b
+Subproject commit 184c33eecf561c109919a7f765de0b1e53d99d00
diff --git a/plHtml b/plHtml
new file mode 160000
index 0000000..2c45ebc
--- /dev/null
+++ b/plHtml
@@ -0,0 +1 @@
+Subproject commit 2c45ebcd3f946c1e207a69ece1e2d730d4d090ed
 
```
 
<h2 id="2"> 2: 正在比较变动前 3d8b517 和变动后 ccd942c </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 184c33e..03d4b46 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 184c33eecf561c109919a7f765de0b1e53d99d00
+Subproject commit 03d4b46ba9c6f658828ff843e5785c221ffc3a57
diff --git a/plHtml b/plHtml
index 2c45ebc..50743da 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 2c45ebcd3f946c1e207a69ece1e2d730d4d090ed
+Subproject commit 50743daad8dd0f3664e1cafbc14523a423314f84
 
```
 
<h2 id="3"> 3: 正在比较变动前 ccd942c 和变动后 0b3607d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index c62d146..200c034 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -41,7 +41,7 @@
   ]
 ).
 :- reexport(
-  gv(gv_color),
+  plGraphViz(gv_color),
   [
     color//1, % +Color:compound
     colorList//1 % +ColorList:list(compound)
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 81d51df..728640e 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -68,7 +68,7 @@ check_minimum(V, Min1):-
 
 gv_attrs_download:-
   gv_attrs_url(Url),
-  download_html(Url, Dom, [html_dialect(html4)]),
+  download_html(Url, Dom, [html_dialect(html4),verbose(silent)]),
 
   xpath(Dom, //table(@align=center), TableDom),
   % @tbd This does not work, since in `record_name(Element, Name)`,
diff --git a/gv_color.pl b/gv_color.pl
index fd22d35..ad18728 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -81,7 +81,7 @@ gv_color_url('http://www.graphviz.org/doc/info/colors.html').
 
 gv_color_download:-
   gv_color_url(Url),
-  download_html(Url, Dom, [html_dialect(html4)]),
+  download_html(Url, Dom, [html_dialect(html4),verbose(silent)]),
   xpath(Dom, //table(1), TableDom1),
   xpath(Dom, //table(2), TableDom2),
   maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]).
 
```
 
<h2 id="4"> 4: 正在比较变动前 0b3607d 和变动后 acf4ec3 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 728640e..b360039 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -14,16 +14,21 @@
 */
 
 :- use_module(library(apply)).
+:- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
 :- use_module(dcg(dcg_content)).
 :- use_module(dcg(dcg_generic)).
+:- use_module(generics(db_ext)).
+:- use_module(os(file_ext)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
 :- use_module(plGraphViz(gv_attr_type)). % DCGs implementing attribute types.
 
+:- db_add_novel(user:prolog_file_type(log, logging)).
+
 %! gv_attr(
 %!   ?Name:atom,
 %!   ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
@@ -33,9 +38,18 @@
 %!   ?Notes:atom
 %! ) is nondet.
 
-:- dynamic(gv_attr/6).
+:- persistent(
+  gv_attr(
+    name:atom,
+    used_by:list(oneof([cluster,edge,graph,node,subgraph])),
+    types:list(atom),
+    default,
+    minimum,
+    notes:atom
+  )
+).
 
-:- initialization(gv_attrs_download).
+:- initialization(gv_attrs_init).
 
 
 
@@ -64,7 +78,20 @@ check_minimum(V, Min1):-
 
 
 
-% Download attributes from graphviz.org
+% INITIALIZATION
+
+%! assert_gv_attr_row(+Row:list(atom)) is det.
+
+assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
+  dcg_phrase(translate_usedby(UsedBy2), UsedBy1),
+  once(dcg_phrase(translate_type(Types2), Types1)),
+  sort(UsedBy2, UsedBy3),
+  translate_default(Default1, Default2),
+  assert_gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes).
+
+
+%! gv_attrs_downloads is det.
+% Downloads the table describing GraphViz attributes from `graphviz.org`.
 
 gv_attrs_download:-
   gv_attrs_url(Url),
@@ -76,16 +103,56 @@ gv_attrs_download:-
   %%%%xpath(Dom, /html/body/table, TableDom),
 
   html_to_table(TableDom, _, Rows),
-  maplist(assert_gv_attr, Rows).
+  maplist(assert_gv_attr_row, Rows).
+
+
+%! gv_attrs_file(-File:atom) is det.
+
+gv_attrs_file(File):-
+  absolute_file_name(
+    data(gv_attrs),
+    File,
+    [access(write),file_type(logging)]
+  ).
+
+
+%! gv_attrs_init is det.
+
+gv_attrs_init:-
+  gv_attrs_file(File),
+  safe_db_attach(File),
+  file_age(File, Age),
+  gv_attrs_update(Age).
+
+
+%! gv_attrs_update(+Age:float) is det.
+
+% The persistent store is still fresh.
+gv_attrs_update(Age):-
+  once(gv_attr(_, _, _, _, _, _)),
+  Age < 3600, !.
+% The persistent store has become stale, so refresh it.
+gv_attrs_update(_):-
+  retractall_gv_attr(_, _, _, _, _, _),
+  gv_attrs_download.
+
+
+%! gv_attrs_url(-Url:url) is det.
 
 gv_attrs_url('http://www.graphviz.org/doc/info/attrs.html').
 
-assert_gv_attr([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
-  dcg_phrase(translate_usedby(UsedBy2), UsedBy1),
-  once(dcg_phrase(translate_type(Types2), Types1)),
-  sort(UsedBy2, UsedBy3),
-  translate_default(Default1, Default2),
-  assert(gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes)).
+
+%! safe_db_attach(+File:atom) is det.
+
+safe_db_attach(File):-
+  exists_file(File), !,
+  db_attach(File, []).
+safe_db_attach(File):-
+  touch_file(File),
+  safe_db_attach(File).
+
+
+%! translate_default(+Default1:atom, -Default2:atom) is det.
 
 % The empty string is represented by the empty atom.
 translate_default('""', ''):- !.
@@ -93,12 +160,20 @@ translate_default('""', ''):- !.
 translate_default('<none>', _):- !.
 translate_default(Default, Default).
 
+
+%! translate_type(-Types:list(atom))// is det.
+
 translate_type([H|T]) -->
   {gv_attr_type(H)},
   atom(H),
   whites,
   translate_type(T).
-translate_type([]) --> [].
+translate_type([]) --> !, [].
+
+
+%! translated_usedby(
+%!   -UsedBy:list(oneof([cluster,edge,graph,node,subgraph]))
+%! )// is det.
 
 translate_usedby([cluster|T]) --> `C`, !, translate_usedby(T).
 translate_usedby([edge|T]) --> `E`, !, translate_usedby(T).
diff --git a/gv_color.pl b/gv_color.pl
index ad18728..cf92f56 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -18,20 +18,25 @@
 
 :- use_module(library(apply)).
 :- use_module(library(lists)).
+:- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
 :- use_module(dcg(dcg_abnf)).
 :- use_module(dcg(dcg_cardinal)).
+:- use_module(generics(db_ext)).
+:- use_module(os(file_ext)).
 :- use_module(sparql(sparql_char)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
+:- db_add_novel(user:prolog_file_type(log, logging)).
+
 %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
 
-:- dynamic(gv_color/2).
+:- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)).
 
-:- initialization(gv_color_download).
+:- initialization(gv_color_init).
 
 
 
@@ -75,9 +80,9 @@ wc_weight(Float) -->
 
 
 
-% Initialization.
+% INITIALIZATION
 
-gv_color_url('http://www.graphviz.org/doc/info/colors.html').
+%! gv_color_download is det.
 
 gv_color_download:-
   gv_color_url(Url),
@@ -91,6 +96,52 @@ assert_color_table(Colorscheme, TableDom):-
   append(Rows, Cells),
   forall(
     member(Cell, Cells),
-    assert(gv_color(Colorscheme, Cell))
+    assert_gv_color(Colorscheme, Cell)
+  ).
+
+
+%! gv_color_file(-File:atom) is det.
+
+gv_color_file(File):-
+  absolute_file_name(
+    data(gv_color),
+    File,
+    [access(write),file_type(logging)]
   ).
 
+
+%! gv_color_init is det.
+
+gv_color_init:-
+  gv_color_file(File),
+  safe_db_attach(File),
+  file_age(File, Age),
+  gv_color_update(Age).
+
+
+%! gv_color_update(+Age:float) is det.
+
+% The persistent store is still fresh.
+gv_color_update(Age):-
+  once(gv_color(_, _)),
+  Age < 3600, !.
+% The persistent store has become stale, so refresh it.
+gv_color_update(_):-
+  retractall_gv_color(_, _),
+  gv_color_download.
+
+
+%! gv_color_url(-Url:url) is det.
+
+gv_color_url('http://www.graphviz.org/doc/info/colors.html').
+
+
+%! safe_db_attach(+File:atom) is det.
+
+safe_db_attach(File):-
+  exists_file(File), !,
+  db_attach(File, []).
+safe_db_attach(File):-
+  touch_file(File),
+  safe_db_attach(File).
+
 
```
 
<h2 id="5"> 5: 正在比较变动前 acf4ec3 和变动后 c1ad93f </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index b360039..fa499d0 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -130,7 +130,7 @@ gv_attrs_init:-
 % The persistent store is still fresh.
 gv_attrs_update(Age):-
   once(gv_attr(_, _, _, _, _, _)),
-  Age < 3600, !.
+  Age < 8640000, !.
 % The persistent store has become stale, so refresh it.
 gv_attrs_update(_):-
   retractall_gv_attr(_, _, _, _, _, _),
diff --git a/gv_color.pl b/gv_color.pl
index cf92f56..70e0495 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -124,7 +124,7 @@ gv_color_init:-
 % The persistent store is still fresh.
 gv_color_update(Age):-
   once(gv_color(_, _)),
-  Age < 3600, !.
+  Age < 8640000, !.
 % The persistent store has become stale, so refresh it.
 gv_color_update(_):-
   retractall_gv_color(_, _),
 
```
 
<h2 id="6"> 6: 正在比较变动前 c1ad93f 和变动后 c7c8226 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 03d4b46..af1a250 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 03d4b46ba9c6f658828ff843e5785c221ffc3a57
+Subproject commit af1a250d6074d0ab61a525fd064bfd555c5815a1
diff --git a/plHtml b/plHtml
index 50743da..81eb731 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 50743daad8dd0f3664e1cafbc14523a423314f84
+Subproject commit 81eb731eb46d98979c8f2862cfbf0e0aca9c1ef8
 
```
 
<h2 id="7"> 7: 正在比较变动前 c7c8226 和变动后 0cd29ea </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/load.pl b/load.pl
index d502d58..4b117d1 100644
--- a/load.pl
+++ b/load.pl
@@ -1,11 +1,11 @@
 % Load file for plGraphViz.
 
-:- multifile(user:prolog/3).
 :- dynamic(user:prolog/3).
-user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
+:- multifile(user:prolog/3).
+   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
 
 :- use_module(load_project).
-:- load_project([
+:- load_project(plGraphViz, [
     plc-'Prolog-Library-Collection',
     plHtml
 ]).
diff --git a/load_project.pl b/load_project.pl
index 3eae83d..5599b5e 100644
--- a/load_project.pl
+++ b/load_project.pl
@@ -1,7 +1,8 @@
 :- module(
   load_project,
   [
-    load_project/1, % +ChildProjects:list(or([atom,pair(atom)]))
+    load_project/2, % +Parent:atom
+                    % +ChildProjects:list(or([atom,pair(atom)]))
     load_subproject/2, % +ParentFileSearchPath:atom
                        % +Child:or([atom,pair(atom)])
     set_data_subdirectory/1 % +ParentDirectory:atom
@@ -16,19 +17,24 @@ Generic code for loading a project:
   * Load the index of subprojects onto the file search path.
 
 @author Wouter Beek
-@version 2014/05/27
+@version 2014/06/14
 */
 
-:- use_module(library(ansi_term)).
+:- use_module(library(ansi_term)). % Colorized terminal messages.
 :- use_module(library(apply)).
 
+:- dynamic(user:project/2).
+:- multifile(user:project/2).
+:- dynamic(user:project/3).
+:- multifile(user:project/3).
 
 
-load_project(ChildProjects):-
-  user:project(_, _, ParentFsp),
+
+load_project(Parent, ChildProjects):-
+  parent_alias(Parent, ParentFsp),
 
   % Entry point.
-  source_file(load_project(_), ThisFile),
+  source_file(load_project(_,_), ThisFile),
   file_directory_name(ThisFile, ThisDir),
   assert(user:file_search_path(ParentFsp, ThisDir)),
   assert(user:file_search_path(project, ThisDir)),
@@ -38,7 +44,7 @@ load_project(ChildProjects):-
 
   % Load the root of submodules onto the file search path.
   maplist(load_subproject(ParentFsp), ChildProjects),
-  
+
   % Load the index into the file search path.
   load_project_index(ParentFsp).
 
@@ -77,8 +83,20 @@ load_subproject_file_search_path(_, ChildFsp, ChildDir):-
 
 load_project_index(Fsp):-
   Spec =.. [Fsp,index],
-  absolute_file_name(Spec, File, [access(read),file_type(prolog)]),
+  absolute_file_name(
+    Spec,
+    File,
+    [access(read),file_errors(fail),file_type(prolog)]
+  ), !,
   ensure_loaded(File).
+load_project_index(_).
+
+
+%! parent_alias(+Parent:atom, -ParentFsp:atom) is det.
+
+parent_alias(Parent, ParentFsp):-
+  user:project(Parent, _, ParentFsp), !.
+parent_alias(Parent, Parent).
 
 
 %! set_data_subdirectory(+ParentDirectory:atom) is det.
 
```
 
<h2 id="8"> 8: 正在比较变动前 0cd29ea 和变动后 13f7fbf </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index af1a250..5b34b01 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit af1a250d6074d0ab61a525fd064bfd555c5815a1
+Subproject commit 5b34b01ab0cc82a56e6fd90fc26e75da22f5a0fe
diff --git a/plHtml b/plHtml
index 81eb731..08480c4 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 81eb731eb46d98979c8f2862cfbf0e0aca9c1ef8
+Subproject commit 08480c40acaee5f70bfb21e3c641bef1e7d258bd
 
```
 
<h2 id="9"> 9: 正在比较变动前 13f7fbf 和变动后 5520d75 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 200c034..f9a0e7f 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -29,18 +29,13 @@
     smoothType//1, % +SmoothType:atom
     %splineType//1,
     %startType//1,
+    string//1, % ?Content:atom
     style//2 % +Context:oneof([cluster,edge,node])
              % +Style:atom
     %viewPort//1
   ]
 ).
 :- reexport(
-  library(dcg/basics),
-  [
-    string//1 % +String:atom
-  ]
-).
-:- reexport(
   plGraphViz(gv_color),
   [
     color//1, % +Color:compound
@@ -383,6 +378,13 @@ smoothType(triangle).
 % @tbd startType
 
 
+%! string(?Content:atom)// .
+% A GraphViz string.
+
+string(Content) -->
+  atom(Content).
+
+
 %! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet.
 
 style(Context, Style) -->
diff --git a/gv_attrs.pl b/gv_attrs.pl
index fa499d0..dd0145a 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -68,7 +68,7 @@ gv_attr(Context, N=V1, N=V2):-
   ;
     Dcg =.. [Type,V1]
   ),
-  dcg_phrase(Dcg, V2),
+  once(dcg_phrase(Dcg, V2)),
   check_minimum(V1, Minimum).
 
 check_minimum(_, ''):- !.
diff --git a/gv_color.pl b/gv_color.pl
index 70e0495..19d6e05 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -23,6 +23,7 @@
 
 :- use_module(dcg(dcg_abnf)).
 :- use_module(dcg(dcg_cardinal)).
+:- use_module(dcg(dcg_content)).
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
 :- use_module(sparql(sparql_char)).
@@ -46,14 +47,17 @@
 %   2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)`
 %   3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))`
 
-color(rgb(Red,Green,Blue)) -->
+color(rgb(Red,Green,Blue)) --> !,
   `#`,
   '#'(3, hex_color, [Red,Green,Blue]).
-color(rgbs(Red,Green,Blue,Alpha)) -->
+color(rgbs(Red,Green,Blue,Alpha)) --> !,
   `#`,
   '#'(4, hex_color, [Red,Green,Blue,Alpha]).
-color(hsv(Hue,Saturation,Value)) -->
+color(hsv(Hue,Saturation,Value)) --> !,
   '#'(3, hsv_color, [Hue,Saturation,Value]).
+color(Name) -->
+  {gv_color(_, Name)},
+  atom(Name).
 
 hex_color(I) -->
   {W1 is I / 16},
diff --git a/gv_file.pl b/gv_file.pl
index 827f680..fe63e28 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -1,16 +1,13 @@
 :- module(
   gv_file,
   [
-    graph_to_gv_file/3, % +Options:list(nvpair)
+    gif_to_gv_file/3, % +Options:list(nvpair)
                         % +GraphInterchangeFormat:compound
                         % ?ToFile:atom
     graph_to_svg_dom/3, % +Options:list(nvpair)
                         % +GraphInterchangeFormat:compound
                         % -SvgDom:list(compound)
-    open_dot/1, % +File:file
-    tree_to_gv_file/3 % +Options:list(nvpair)
-                      % +Tree:compound
-                      % ?ToFile:atom
+    open_dot/1 % +File:file
   ]
 ).
 
@@ -81,7 +78,7 @@ user:prolog_file_type(xdot, xdot).
 
 
 
-%! graph_to_gv_file(
+%! gif_to_gv_file(
 %!   +Options:list(nvpair),
 %!   +GIF:compound,
 %!   -ToFile:atom
@@ -99,7 +96,7 @@ user:prolog_file_type(xdot, xdot).
 % @arg GIF A compound term representing a graph.
 % @arg ToFile The atomic name of a file.
 
-graph_to_gv_file(O1, GIF, ToFile):-
+gif_to_gv_file(O1, GIF, ToFile):-
   once(phrase(gv_graph(GIF), Codes)),
   to_gv_file(O1, Codes, ToFile).
 
@@ -117,7 +114,7 @@ graph_to_gv_file(O1, GIF, ToFile):-
 graph_to_svg_dom(O1, GIF, SvgDom):-
   % Make sure the file type of the output file is SvgDom.
   merge_options([to_file_type=svg], O1, O2),
-  graph_to_gv_file(O2, GIF, ToFile),
+  gif_to_gv_file(O2, GIF, ToFile),
   file_to_svg(ToFile, SvgDom),
   safe_delete_file(ToFile).
 
@@ -133,33 +130,6 @@ open_dot(File):-
   run_program(Program, [File]).
 
 
-%! tree_to_gv_file(+Options:list(nvpair), +Tree:compound, ?ToFile:atom) is det.
-% Stores the given tree term into a GraphViz file.
-%
-% The following options are supported:
-%   * =|method(+Method:oneof([dot,sfdp])|=
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
-%   * =|to_file_type(+FileType:oneof([jpeg,pdf,svg,xdot])|=
-%     The file type of the generated GraphViz file.
-%
-% @arg Options A list of name-value pairs.
-% @arg Tree A compound term representing a tree.
-% @arg ToFile The atomic name of the generated file.
-
-tree_to_gv_file(O1, Tree, ToFile):-
-  once(phrase(gv_tree(O1, Tree), Codes)),
-  to_gv_file(O1, Codes, ToFile).
-
-gv_tree(O1, T) -->
-  {
-    tree_to_ugraph(T, UG),
-    merge_options([edge_labels(false)], O1, O2),
-    export_ugraph(O2, UG, G_Term)
-  },
-  gv_graph(G_Term).
-
-
 
 % SUPPORT PREDICATES %
 
diff --git a/gv_gif.pl b/gv_gif.pl
new file mode 100644
index 0000000..becf7e2
--- /dev/null
+++ b/gv_gif.pl
@@ -0,0 +1,109 @@
+:- module(
+  gv_gif,
+  [
+    create_gif/3, % +Edges:ordset
+                  % -Gif:compound
+                  % +Options:list(nvpair)
+    create_gif/4 % +Vertices:ordset
+                 % +Edges:ordset
+                 % -Gif:compound
+                 % +Options:list(nvpair)
+  ]
+).
+
+/** <module> GraphViz Graph Interchange Format (GIF)
+
+Support for creating GIF representations.
+
+@author Wouter Beek
+@version 2014/06
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(ordsets)).
+
+:- use_module(generics(list_ext)).
+
+:- use_module(plRdf(rdf_name)). % Meta-DCG.
+
+
+
+%! create_gif(+Edges:ordset, -Gif:compound, +Options:list(nvpair)) is det.
+
+create_gif(Es, Gif, Options):-
+  edges_to_vertices(Es, Vs),
+  create_gif(Vs, Es, Gif, Options).
+
+%! create_gif(
+%!   +Vertices:ordset,
+%!   +Edges:ordset,
+%!   -Gif:compound,
+%!   +Options:list(nvpair)
+%! ) is det.
+
+create_gif(Vs, Es, graph(V_Terms,E_Terms,G_Attrs), Options):-
+  maplist(vertex_term0(Vs, Options), Vs, V_Terms),
+  maplist(edge_term0(Vs, Options), Es, E_Terms),
+  G_Attrs = [directed=true].
+
+edge_term0(Vs, Options, E, E_Term):-
+  edge_term(Vs, E, E_Term, Options).
+
+vertex_term0(Vs, Options, V, V_Term):-
+  vertex_term(Vs, V, V_Term, Options).
+
+
+%! edge_term(
+%!   +Vertices:ordset,
+%!   +Edge:pair,
+%!   -EdgeTerm:compound,
+%!   +Options:list(nvpair)
+%! ) is det.
+
+edge_term(Vs, E, edge(FromId,ToId,E_Attrs), _):-
+  edge_components(E, FromV, _, ToV),
+  nth0chk(FromId, Vs, FromV),
+  nth0chk(ToId, Vs, ToV),
+  E_Attrs = [].
+
+
+%! vertex_term(
+%!   +Vertices:ordset,
+%!   +Vertex,
+%!   -VertexTerm:compound,
+%!   +Options:list(nvpair)
+%! ) is det.
+
+vertex_term(Vs, V, vertex(Id,V,V_Attrs), Options):-
+  nth0chk(Id, Vs, V),
+  
+  % Label.
+  option(vertex_label(VertexLabel), Options, =),
+  call(VertexLabel, V, V_Label),
+  
+  V_Attrs = [label=V_Label].
+
+vertex_label(V, V_Label):-
+  dcg_with_output_to(atom(V_Label), rdf_term_name([literal_ellipsis(50)], V)).
+
+
+
+% Helpers
+
+%! edge_components(+Edge:compound, -FromVertex, -EdgeType, -ToVertex) is det.
+%! edge_components(-Edge:compound, +FromVertex, ?EdgeType, +ToVertex) is det.
+
+edge_components(FromV-EdgeType-ToV, FromV, EdgeType, ToV):-
+  nonvar(EdgeType).
+edge_components(FromV-ToV, FromV, EdgeType, ToV):-
+  var(EdgeType).
+
+
+%! edges_to_vertices(+Edges:ordset, -Vertices:ordset) is det.
+
+edges_to_vertices([], []):- !.
+edges_to_vertices([S-_-O|T], S3):-
+  edges_to_vertices(T, S1),
+  ord_add_element(S1, S, S2),
+  ord_add_element(S2, O, S3).
+
diff --git a/gv_tree.pl b/gv_tree.pl
new file mode 100644
index 0000000..4412a90
--- /dev/null
+++ b/gv_tree.pl
@@ -0,0 +1,39 @@
+:- module(
+  gv_tree,
+  [
+    tree_to_gv_file/3 % +Options:list(nvpair)
+                      % +Tree:compound
+                      % ?ToFile:atom
+  ]
+).
+
+/** <module> GraphViz tree
+
+Export trees to GraphViz.
+
+@author Wouter Beek
+@version 2014/06
+*/
+
+:- use_module(library(aggregate)).
+
+:- use_module(generics(trees)).
+
+:- use_module(plGraphViz(gv_file)).
+:- use_module(plGraphViz(gv_gif)).
+
+
+%! tree_to_gv_file(+Options:list(nvpair), +Tree:compound, ?ToFile:atom) is det.
+% Stores the given tree term into a GraphViz file.
+%
+% Options are passed on to create_gif/3 and gif_to_gv_file/3.
+
+tree_to_gv_file(Options, Tree, ToFile):-
+  tree_to_gif(Tree, Gif, Options),
+  gif_to_gv_file(Options, Gif, ToFile).
+
+
+tree_to_gif(H-T, Gif, Options):-
+  tree_to_vertices_edges(Tree, Vs, Es),
+  create_gif(Vs, Es, Gif, Options).
+
 
```
 
<h2 id="10"> 10: 正在比较变动前 5520d75 和变动后 8656a39 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index f9a0e7f..7a64c82 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -191,7 +191,7 @@ doubleList1(Float) -->
   double(Float).
 
 
-%! escString(+String:atom)// ,
+%! escString(+String:atom)// .
 % @tbd Support for context-dependent replacements.
 
 escString(String) -->
 
```
 
<h2 id="11"> 11: 正在比较变动前 8656a39 和变动后 7421981 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index fe63e28..c780692 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -1,12 +1,12 @@
 :- module(
   gv_file,
   [
-    gif_to_gv_file/3, % +Options:list(nvpair)
-                        % +GraphInterchangeFormat:compound
-                        % ?ToFile:atom
-    graph_to_svg_dom/3, % +Options:list(nvpair)
-                        % +GraphInterchangeFormat:compound
+    gif_to_gv_file/3, % +GraphInterchangeFormat:compound
+                      % ?ToFile:atom
+                      % +Options:list(nvpair)
+    graph_to_svg_dom/3, % +GraphInterchangeFormat:compound
                         % -SvgDom:list(compound)
+                        % +Options:list(nvpair)
     open_dot/1 % +File:file
   ]
 ).
@@ -20,11 +20,12 @@ Also converts between GraphViz DOT formatted files
 and GraphViz output files or SVG DOM structures.
 
 @author Wouter Beek
-@version 2011-2013/09, 2013/11-2014/01, 2014/05
+@version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07
 */
 
 :- use_module(library(option)).
 :- use_module(library(process)).
+:- use_module(library(predicate_options)). % Declarations.
 
 :- use_module(generics(codes_ext)).
 :- use_module(generics(db_ext)).
@@ -48,73 +49,76 @@ and GraphViz output files or SVG DOM structures.
 :- multifile(user:prolog_file_type/2).
 
 % Register DOT.
-user:prolog_file_type(dot, dot).
-user:prolog_file_type(dot, graphviz).
-user:file_type_program(dot, dotty).
-user:file_type_program(dot, dotx).
-user:module_uses(gv_file, file_type(dot)).
+:- db_add_novel(user:prolog_file_type(dot, dot)).
+:- db_add_novel(user:prolog_file_type(dot, graphviz)).
+:- db_add_novel(user:file_type_program(dot, dotty)).
+:- db_add_novel(user:file_type_program(dot, dotx)).
+:- db_add_novel(user:module_uses(gv_file, file_type(dot))).
 
 % Register JPG/JPEG.
-user:prolog_file_type(jpeg, jpeg).
-user:prolog_file_type(jpeg, graphviz_output).
-user:prolog_file_type(jpg, jpeg).
-user:prolog_file_type(jpg, graphviz_output).
+:- db_add_novel(user:prolog_file_type(jpeg, jpeg)).
+:- db_add_novel(user:prolog_file_type(jpeg, graphviz_output)).
+:- db_add_novel(user:prolog_file_type(jpg, jpeg)).
+:- db_add_novel(user:prolog_file_type(jpg, graphviz_output)).
 
 % Register PDF.
-user:prolog_file_type(pdf, pdf).
-user:prolog_file_type(pdf, graphviz_output).
+:- db_add_novel(user:prolog_file_type(pdf, pdf)).
+:- db_add_novel(user:prolog_file_type(pdf, graphviz_output)).
 
 % Register PNG.
-user:prolog_file_type(png, png).
-user:prolog_file_type(png, graphviz_output).
+:- db_add_novel(user:prolog_file_type(png, png)).
+:- db_add_novel(user:prolog_file_type(png, graphviz_output)).
 
 % Register SVG.
-user:prolog_file_type(svg, graphviz_output).
-user:prolog_file_type(svg, svg).
+:- db_add_novel(user:prolog_file_type(svg, graphviz_output)).
+:- db_add_novel(user:prolog_file_type(svg, svg)).
 
 % Register XDOT.
-user:prolog_file_type(xdot, graphviz_output).
-user:prolog_file_type(xdot, xdot).
-
-
-
-%! gif_to_gv_file(
-%!   +Options:list(nvpair),
-%!   +GIF:compound,
-%!   -ToFile:atom
-%! ) is det.
+:- db_add_novel(user:prolog_file_type(xdot, graphviz_output)).
+:- db_add_novel(user:prolog_file_type(xdot, xdot)).
+
+:- predicate_options(graph_to_svg_dom/3, 3, [
+     pass_to(gif_to_gv_file/3, 3)
+   ]).
+:- predicate_options(gif_to_gv_file/3, 3, [
+     pass_to(to_gv_file/3, 3)
+   ]).
+:- predicate_options(to_gv_file/3, 3, [
+     pass_to(convert_gv/3, 3)
+   ]).
+:- predicate_options(convert_gv/3, 3, [
+     method(+oneof([dot,sfdp])),
+     to_file_type(+oneof([dot,jpeg,pdf,svg,xdot]))
+   ]).
+
+
+
+%! gif_to_gv_file(+Gif:compound, -ToFile:atom, +Options:list(nvpair)) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
 %   * =|method(+Method:oneof([dot,sfdp])|=
 %     The algorithm used by GraphViz for positioning the tree nodes.
 %     Either =dot= (default) or =sfdp=.
-%   * =|to_file_type(+FileType:oneof([jpeg,pdf,svg,xdot])|=
+%   * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|=
 %     The file type of the generated GraphViz file.
-%
-% @arg Options A list of name-value pairs.
-% @arg GIF A compound term representing a graph.
-% @arg ToFile The atomic name of a file.
+%     Default: `pdf`.
 
-gif_to_gv_file(O1, GIF, ToFile):-
-  once(phrase(gv_graph(GIF), Codes)),
-  to_gv_file(O1, Codes, ToFile).
+gif_to_gv_file(Gif, ToFile, Options):-
+  once(phrase(gv_graph(Gif), Codes)),
+  to_gv_file(Codes, ToFile, Options).
 
 
 %! graph_to_svg_dom(
-%!   +Options:list(nvpair),
 %!   +GraphInterchangeFormat:compound,
-%!   -SvgDom:list(compound)
+%!   -SvgDom:list(compound),
+%!   +Options:list(nvpair)
 %! ) is det.
-% The following options are supported:
-%   * =|method(+Method:oneof([dot,sfdp])|=
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
 
-graph_to_svg_dom(O1, GIF, SvgDom):-
+graph_to_svg_dom(Gif, SvgDom, Options1):-
   % Make sure the file type of the output file is SvgDom.
-  merge_options([to_file_type=svg], O1, O2),
-  gif_to_gv_file(O2, GIF, ToFile),
+  merge_options([to_file_type=svg], Options1, Options2),
+  gif_to_gv_file(Gif, ToFile, Options2),
   file_to_svg(ToFile, SvgDom),
   safe_delete_file(ToFile).
 
@@ -133,31 +137,23 @@ open_dot(File):-
 
 % SUPPORT PREDICATES %
 
-%! convert_gv(+Options:list(nvpair), +FromFile:atom, ?ToFile:atom) is det.
+%! convert_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det.
 % Converts a GraphViz DOT file to an image file, using a specific
 % visualization method.
-%
-% The following options are supported:
-%   * =|method(+Method:oneof([dot,sfdp])|=
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
-%   * =|to_file_type(+FileType:oneof([jpeg,pdf,svg,xdot])|=
-%     The file type of the generated GraphViz file.
-%
-% @arg Options
-% @arg FromFile
-% @arg ToFile
 
-convert_gv(O1, FromFile, ToFile):-
+convert_gv(FromFile, ToFile, Options):-
+  option(to_file_type(dot), Options), !,
+  rename_file(FromFile, ToFile).
+convert_gv(FromFile, ToFile, Options):-
   % The input file must be readable.
   access_file(FromFile, read),
 
   % The method option.
-  option(method(Method), O1, dot),
+  option(method(Method), Options, dot),
   must_be(oneof([dot,sfdp]), Method),
 
   % The file type option.
-  option(to_file_type(ToFileType), O1, pdf),
+  option(to_file_type(ToFileType), Options, pdf),
   prolog_file_type(ToExtension, ToFileType),
   prolog_file_type(ToExtension, graphviz_output), !,
 
@@ -189,15 +185,10 @@ convert_gv(O1, FromFile, ToFile):-
   process_wait(PID, exit(ShellStatus)),
   exit_code_handler('GraphViz', ShellStatus).
 
-%! to_gv_file(+Options:list(nvpair), +Codes:list(code), ?ToFile:atom) is det.
-% The following options are supported:
-%   * =|method(+Method:oneof([dot,sfdp])|=
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
-%   * =|to_file_type(+FileType:oneof([jpeg,pdf,svg,xdot])|=
-%     The file type of the generated GraphViz file.
 
-to_gv_file(O1, Codes, ToFile):-
+%! to_gv_file(+Codes:list(code), ?ToFile:atom, +Options:list(nvpair)) is det.
+
+to_gv_file(Codes, ToFile, Options):-
   absolute_file_name(
     data(tmp),
     FromFile,
@@ -208,13 +199,13 @@ to_gv_file(O1, Codes, ToFile):-
     put_codes(Out, Codes),
     close(Out)
   ),
-  convert_gv(O1, FromFile, ToFile),
+  convert_gv(FromFile, ToFile, Options),
 
-  % DEB: Store DOT file.
-  ignore((
-    file_type_alternative(ToFile, graphviz, DOT_File),
-    safe_copy_file(FromFile, DOT_File)
-  )),
+  %%%%% DEB: Store DOT file.
+  %%%%ignore((
+  %%%%  file_type_alternative(ToFile, graphviz, DOT_File),
+  %%%%  safe_copy_file(FromFile, DOT_File)
+  %%%%)),
 
   safe_delete_file(FromFile).
 
diff --git a/gv_tree.pl b/gv_tree.pl
index 4412a90..afeb8f6 100644
--- a/gv_tree.pl
+++ b/gv_tree.pl
@@ -1,9 +1,9 @@
 :- module(
   gv_tree,
   [
-    tree_to_gv_file/3 % +Options:list(nvpair)
-                      % +Tree:compound
+    tree_to_gv_file/3 % +Tree:compound
                       % ?ToFile:atom
+                      % +Options:list(nvpair)
   ]
 ).
 
@@ -12,7 +12,7 @@
 Export trees to GraphViz.
 
 @author Wouter Beek
-@version 2014/06
+@version 2014/06-2014/07
 */
 
 :- use_module(library(aggregate)).
@@ -23,14 +23,18 @@ Export trees to GraphViz.
 :- use_module(plGraphViz(gv_gif)).
 
 
-%! tree_to_gv_file(+Options:list(nvpair), +Tree:compound, ?ToFile:atom) is det.
+%! tree_to_gv_file(
+%!   +Tree:compound,
+%!   ?ToFile:atom,
+%!   +Options:list(nvpair)
+%! ) is det.
 % Stores the given tree term into a GraphViz file.
 %
 % Options are passed on to create_gif/3 and gif_to_gv_file/3.
 
-tree_to_gv_file(Options, Tree, ToFile):-
+tree_to_gv_file(Tree, ToFile, Options):-
   tree_to_gif(Tree, Gif, Options),
-  gif_to_gv_file(Options, Gif, ToFile).
+  gif_to_gv_file(Gif, ToFile, Options).
 
 
 tree_to_gif(H-T, Gif, Options):-
 
```
 
<h2 id="12"> 12: 正在比较变动前 7421981 和变动后 bfcb63b </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index c780692..9cb1f95 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -4,9 +4,9 @@
     gif_to_gv_file/3, % +GraphInterchangeFormat:compound
                       % ?ToFile:atom
                       % +Options:list(nvpair)
-    graph_to_svg_dom/3, % +GraphInterchangeFormat:compound
-                        % -SvgDom:list(compound)
-                        % +Options:list(nvpair)
+    gif_to_svg_dom/3, % +GraphInterchangeFormat:compound
+                      % -SvgDom:list(compound)
+                      % +Options:list(nvpair)
     open_dot/1 % +File:file
   ]
 ).
@@ -77,7 +77,7 @@ and GraphViz output files or SVG DOM structures.
 :- db_add_novel(user:prolog_file_type(xdot, graphviz_output)).
 :- db_add_novel(user:prolog_file_type(xdot, xdot)).
 
-:- predicate_options(graph_to_svg_dom/3, 3, [
+:- predicate_options(gif_to_svg_dom/3, 3, [
      pass_to(gif_to_gv_file/3, 3)
    ]).
 :- predicate_options(gif_to_gv_file/3, 3, [
@@ -109,13 +109,13 @@ gif_to_gv_file(Gif, ToFile, Options):-
   to_gv_file(Codes, ToFile, Options).
 
 
-%! graph_to_svg_dom(
+%! gif_to_svg_dom(
 %!   +GraphInterchangeFormat:compound,
 %!   -SvgDom:list(compound),
 %!   +Options:list(nvpair)
 %! ) is det.
 
-graph_to_svg_dom(Gif, SvgDom, Options1):-
+gif_to_svg_dom(Gif, SvgDom, Options1):-
   % Make sure the file type of the output file is SvgDom.
   merge_options([to_file_type=svg], Options1, Options2),
   gif_to_gv_file(Gif, ToFile, Options2),
 
```
 
<h2 id="13"> 13: 正在比较变动前 bfcb63b 和变动后 84afd69 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 9cb1f95..98cb0a2 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -1,8 +1,13 @@
 :- module(
   gv_file,
   [
+    file_to_gv/2, % +File:atom
+                  % +Options:list(nvpair)
+    file_to_gv/3, % +FromFile:atom
+                  % ?ToFile:atom
+                  % +Options:list(nvpair)
     gif_to_gv_file/3, % +GraphInterchangeFormat:compound
-                      % ?ToFile:atom
+                      % +ToFile:atom
                       % +Options:list(nvpair)
     gif_to_svg_dom/3, % +GraphInterchangeFormat:compound
                       % -SvgDom:list(compound)
@@ -23,6 +28,7 @@ and GraphViz output files or SVG DOM structures.
 @version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07
 */
 
+:- use_module(library(memfile)).
 :- use_module(library(option)).
 :- use_module(library(process)).
 :- use_module(library(predicate_options)). % Declarations.
@@ -77,74 +83,60 @@ and GraphViz output files or SVG DOM structures.
 :- db_add_novel(user:prolog_file_type(xdot, graphviz_output)).
 :- db_add_novel(user:prolog_file_type(xdot, xdot)).
 
-:- predicate_options(gif_to_svg_dom/3, 3, [
-     pass_to(gif_to_gv_file/3, 3)
-   ]).
-:- predicate_options(gif_to_gv_file/3, 3, [
-     pass_to(to_gv_file/3, 3)
+:- predicate_options(codes_to_gv_file/3, 3, [
+     pass_to(file_to_gv/3, 3)
    ]).
-:- predicate_options(to_gv_file/3, 3, [
-     pass_to(convert_gv/3, 3)
+:- predicate_options(file_to_gv/2, 2, [
+     pass_to(file_to_gv/3, 3)
    ]).
-:- predicate_options(convert_gv/3, 3, [
+:- predicate_options(file_to_gv/3, 3, [
      method(+oneof([dot,sfdp])),
      to_file_type(+oneof([dot,jpeg,pdf,svg,xdot]))
    ]).
+:- predicate_options(gif_to_svg_dom/3, 3, [
+     pass_to(gif_to_gv_file/3, 3)
+   ]).
+:- predicate_options(gif_to_gv_file/3, 3, [
+     pass_to(codes_to_gv_file/3, 3)
+   ]).
 
 
 
-%! gif_to_gv_file(+Gif:compound, -ToFile:atom, +Options:list(nvpair)) is det.
-% Returns a file containing a GraphViz visualization of the given graph.
-%
-% The following options are supported:
-%   * =|method(+Method:oneof([dot,sfdp])|=
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
-%   * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|=
-%     The file type of the generated GraphViz file.
-%     Default: `pdf`.
-
-gif_to_gv_file(Gif, ToFile, Options):-
-  once(phrase(gv_graph(Gif), Codes)),
-  to_gv_file(Codes, ToFile, Options).
-
-
-%! gif_to_svg_dom(
-%!   +GraphInterchangeFormat:compound,
-%!   -SvgDom:list(compound),
+%! codes_to_gv_file(
+%!   +Codes:list(code),
+%!   +ToFile:atom,
 %!   +Options:list(nvpair)
 %! ) is det.
 
-gif_to_svg_dom(Gif, SvgDom, Options1):-
-  % Make sure the file type of the output file is SvgDom.
-  merge_options([to_file_type=svg], Options1, Options2),
-  gif_to_gv_file(Gif, ToFile, Options2),
-  file_to_svg(ToFile, SvgDom),
-  safe_delete_file(ToFile).
-
-
-%! open_dot(+File:atom) is det.
-% Opens the given DOT file.
-%
-% @tbd Test support on Windows.
-% @tbd Test support on OS-X.
-
-open_dot(File):-
-  once(find_program_by_file_type(dot, Program)),
-  run_program(Program, [File]).
+codes_to_gv_file(Codes, ToFile, Options):-
+  access_file(ToFile, write),
+  setup_call_cleanup(
+    new_memory_file(MemFile),
+    (
+      setup_call_cleanup(
+        open(MemFile, write, Write, [encoding(utf8),type(test)]),
+        put_codes(Write, Codes),
+        close(Write)
+      ),
+      file_to_gv(MemFile, ToFile, Options)
+    ),
+    free_memory_file(MemFile)
+  ).
 
 
+%! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det.
 
-% SUPPORT PREDICATES %
+file_to_gv(FromFile, Options):-
+  file_to_gv(FromFile, _, Options).
 
-%! convert_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det.
+%! file_to_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det.
 % Converts a GraphViz DOT file to an image file, using a specific
 % visualization method.
 
-convert_gv(FromFile, ToFile, Options):-
+file_to_gv(FromFile, ToFile, Options):-
   option(to_file_type(dot), Options), !,
   rename_file(FromFile, ToFile).
-convert_gv(FromFile, ToFile, Options):-
+file_to_gv(FromFile, ToFile, Options):-
   % The input file must be readable.
   access_file(FromFile, read),
 
@@ -186,26 +178,43 @@ convert_gv(FromFile, ToFile, Options):-
   exit_code_handler('GraphViz', ShellStatus).
 
 
-%! to_gv_file(+Codes:list(code), ?ToFile:atom, +Options:list(nvpair)) is det.
+%! gif_to_gv_file(+Gif:compound, +ToFile:atom, +Options:list(nvpair)) is det.
+% Returns a file containing a GraphViz visualization of the given graph.
+%
+% The following options are supported:
+%   * =|method(+Method:oneof([dot,sfdp])|=
+%     The algorithm used by GraphViz for positioning the tree nodes.
+%     Either =dot= (default) or =sfdp=.
+%   * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|=
+%     The file type of the generated GraphViz file.
+%     Default: `pdf`.
+
+gif_to_gv_file(Gif, ToFile, Options):-
+  once(phrase(gv_graph(Gif), Codes)),
+  codes_to_gv_file(Codes, ToFile, Options).
+
+
+%! gif_to_svg_dom(
+%!   +GraphInterchangeFormat:compound,
+%!   -SvgDom:list(compound),
+%!   +Options:list(nvpair)
+%! ) is det.
+
+gif_to_svg_dom(Gif, SvgDom, Options1):-
+  % Make sure the file type of the output file is SvgDom.
+  merge_options([to_file_type=svg], Options1, Options2),
+  gif_to_gv_file(Gif, ToFile, Options2),
+  file_to_svg(ToFile, SvgDom),
+  safe_delete_file(ToFile).
 
-to_gv_file(Codes, ToFile, Options):-
-  absolute_file_name(
-    data(tmp),
-    FromFile,
-    [access(write),file_type(graphviz)]
-  ),
-  setup_call_cleanup(
-    open(FromFile, write, Out, [encoding(utf8),type(test)]),
-    put_codes(Out, Codes),
-    close(Out)
-  ),
-  convert_gv(FromFile, ToFile, Options),
 
-  %%%%% DEB: Store DOT file.
-  %%%%ignore((
-  %%%%  file_type_alternative(ToFile, graphviz, DOT_File),
-  %%%%  safe_copy_file(FromFile, DOT_File)
-  %%%%)),
+%! open_dot(+File:atom) is det.
+% Opens the given DOT file.
+%
+% @tbd Test support on Windows.
+% @tbd Test support on OS-X.
 
-  safe_delete_file(FromFile).
+open_dot(File):-
+  once(find_program_by_file_type(dot, Program)),
+  run_program(Program, [File]).
 
 
```
 
<h2 id="14"> 14: 正在比较变动前 84afd69 和变动后 c2bfd3f </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_gif.pl b/gv_gif.pl
index becf7e2..908b9bc 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -16,16 +16,35 @@
 Support for creating GIF representations.
 
 @author Wouter Beek
-@version 2014/06
+@version 2014/06-2014/07
 */
 
 :- use_module(library(apply)).
+:- use_module(library(lambda)).
+:- use_module(library(option)).
 :- use_module(library(ordsets)).
+:- use_module(library(predicate_options)). % Declarations.
 
 :- use_module(generics(list_ext)).
+:- use_module(generics(option_ext)).
+:- use_module(graph_theory(graph_generic)).
 
 :- use_module(plRdf(rdf_name)). % Meta-DCG.
 
+:- predicate_options(create_gif/3, 3, [
+     pass_to(create_gif/4, 4)
+   ]).
+:- predicate_options(create_gif/4, 4, [
+     pass_to(vertex_term/3, 3),
+     pass_to(edge_term/3, 3),
+     graph_label(+atom)
+   ]).
+:- predicate_options(edge_term/3, 3, [
+   ]).
+:- predicate_options(vertex_term/3, 3, [
+     vertex_label(+atom)
+   ]).
+
 
 
 %! create_gif(+Edges:ordset, -Gif:compound, +Options:list(nvpair)) is det.
@@ -40,17 +59,28 @@ create_gif(Es, Gif, Options):-
 %!   -Gif:compound,
 %!   +Options:list(nvpair)
 %! ) is det.
-
-create_gif(Vs, Es, graph(V_Terms,E_Terms,G_Attrs), Options):-
-  maplist(vertex_term0(Vs, Options), Vs, V_Terms),
-  maplist(edge_term0(Vs, Options), Es, E_Terms),
-  G_Attrs = [directed=true].
-
-edge_term0(Vs, Options, E, E_Term):-
-  edge_term(Vs, E, E_Term, Options).
-
-vertex_term0(Vs, Options, V, V_Term):-
-  vertex_term(Vs, V, V_Term, Options).
+% The following options are supported:
+%   * =|graph_label(+LabelFunction)|=
+%     The functions that assigns names to graphs.
+%     No default.
+
+create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
+  % Vertex terms.
+  maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Options), Vs, VTerms),
+  
+  % Edge terms.
+  maplist(\E^ETerm^edge_term(Vs, E, ETerm, Options), Es, ETerms),
+  
+  % Graph attributes.
+  (
+    option(graph_label(LabelFunction), Options)
+  ->
+    call(LabelFunction, Graph, GraphLabel)
+  ;
+    true
+  ),
+  
+  merge_options([directed=true,label=GraphLabel], GAttrs).
 
 
 %! edge_term(
@@ -60,11 +90,13 @@ vertex_term0(Vs, Options, V, V_Term):-
 %!   +Options:list(nvpair)
 %! ) is det.
 
-edge_term(Vs, E, edge(FromId,ToId,E_Attrs), _):-
-  edge_components(E, FromV, _, ToV),
+edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):-
+  edge_components(E, FromV, ToV),
+  
   nth0chk(FromId, Vs, FromV),
   nth0chk(ToId, Vs, ToV),
-  E_Attrs = [].
+  
+  EAttrs = [].
 
 
 %! vertex_term(
@@ -73,37 +105,16 @@ edge_term(Vs, E, edge(FromId,ToId,E_Attrs), _):-
 %!   -VertexTerm:compound,
 %!   +Options:list(nvpair)
 %! ) is det.
+% The following options are supported:
+%   * =|vertex_label(+LabelFunction)|=
+%     A function that assigns labels to vertices.
 
-vertex_term(Vs, V, vertex(Id,V,V_Attrs), Options):-
+vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):-
   nth0chk(Id, Vs, V),
   
   % Label.
-  option(vertex_label(VertexLabel), Options, =),
-  call(VertexLabel, V, V_Label),
+  option(vertex_label(LabelFunction), Options, =),
+  call(LabelFunction, V, VLabel),
   
-  V_Attrs = [label=V_Label].
-
-vertex_label(V, V_Label):-
-  dcg_with_output_to(atom(V_Label), rdf_term_name([literal_ellipsis(50)], V)).
-
-
-
-% Helpers
-
-%! edge_components(+Edge:compound, -FromVertex, -EdgeType, -ToVertex) is det.
-%! edge_components(-Edge:compound, +FromVertex, ?EdgeType, +ToVertex) is det.
-
-edge_components(FromV-EdgeType-ToV, FromV, EdgeType, ToV):-
-  nonvar(EdgeType).
-edge_components(FromV-ToV, FromV, EdgeType, ToV):-
-  var(EdgeType).
-
-
-%! edges_to_vertices(+Edges:ordset, -Vertices:ordset) is det.
-
-edges_to_vertices([], []):- !.
-edges_to_vertices([S-_-O|T], S3):-
-  edges_to_vertices(T, S1),
-  ord_add_element(S1, S, S2),
-  ord_add_element(S2, O, S3).
+  VAttrs = [label=VLabel].
 
 
```
 
<h2 id="15"> 15: 正在比较变动前 c2bfd3f 和变动后 fa364fc </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 9888973..68443ba 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -76,13 +76,13 @@ gv_compass_pt(sw) --> `sw`.
 gv_compass_pt(w) --> `w`.
 
 
-%! gv_edge_operator(+Directed:boolean)// .
+%! gv_edge_operator(+Directedness:boolean)// .
 % The binary edge operator between two vertices.
 % The operator that is used depends on whether the graph is directed or
 % undirected.
 %
-% @arg Directed Whether an edge is directed (operator `->`) or
-%               undirected (operator `--`).
+% @arg Directedness Whether an edge is directed (operator `->`) or
+%                   undirected (operator `--`).
 
 gv_edge_operator(false) --> !, `--`.
 gv_edge_operator(true) --> arrow(right, 2).
@@ -90,14 +90,14 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 %! gv_edge_statement(
 %!   +Indent:nonneg,
-%!   +Directed:boolean,
+%!   +Directedness:boolean,
 %!   +GraphAttributes:list(nvpair),
 %!   +EdgeTerm:compound
 %! )// is det.
 % A GraphViz statement describing an edge.
 %
 % @arg Indent The indentation level at which the edge statement is written.
-% @arg Directed Whether the graph is directed or not.
+% @arg Directedness Whether the graph is directed or not.
 % @arg GraphAttributes The attributes of the graph. Some of these attributes
 %      may be used in the edge statement (e.g., the colorscheme).
 % @arg EdgeTerm A compound term in the GIFormat, representing an edge.
@@ -106,11 +106,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 %      at the from and/or to location.
 % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
 
-gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
+gv_edge_statement(I, Directedness, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
   gv_node_id(FromId), ` `,
 
-  gv_edge_operator(Directed), ` `,
+  gv_edge_operator(Directedness), ` `,
 
   gv_node_id(ToId), ` `,
 
@@ -148,11 +148,11 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 %! gv_graph(+GraphTerm:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
-%   1. `directonality(+Directed:oneof([directed,undirected]))`
-%      A directed graph uses the keyword `digraph`.
-%      An undirected graph uses the keyword `graph`.
-%   2. `name(+GraphName:atom)`
-%   3. `strict(+StrictGraph:boolean)`
+%   * `directedness(+boolean)`
+%      Whether the graph is directed (`true`) or undirected (`false`).
+%      Default: `false`.
+%   * `name(+GraphName:atom)`
+%   * `strict(+StrictGraph:boolean)`
 %      This forbids the creation of self-arcs and multi-edges;
 %      they are ignored in the input file.
 %      Only in combinattion with directionality `directed`.
@@ -185,7 +185,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
     select_nvpair(strict=Strict, GAttrs1, GAttrs2, false),
-    select_nvpair(directed=Directed, GAttrs2, GAttrs3, true),
+    select_nvpair(directedness=Directedness, GAttrs2, GAttrs3, true),
     select_nvpair(name=GName, GAttrs3, GAttrs4, noname),
     add_default_nvpair(GAttrs4, overlap, false, GAttrs5),
     I = 0
@@ -195,24 +195,24 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), ` `,
+  gv_graph_type(Directedness), ` `,
   gv_id(GName), ` `,
   bracketed(
     curly,
-    gv_graph1(
+    gv_graph0(
       I,
       NewVTerms, SharedVAttrs, RankedVTerms,
       NewETerms, SharedEAttrs,
-      Directed, GAttrs5
+      Directedness, GAttrs5
     )
-  ),
+  ),                                                      
   newline.
 
-gv_graph1(
+gv_graph0(
   I,
   NewVTerms, SharedVAttrs, RankedVTerms,
   NewETerms, SharedEAttrs,
-  Directed, GAttrs
+  Directedness, GAttrs
 ) -->
   newline,
 
@@ -254,10 +254,10 @@ gv_graph1(
   },
 
   % The rank edges.
-  '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges),
+  '*'(gv_edge_statement(NewI, Directedness, GAttrs), RankEdges),
 
   % The non-rank edges.
-  '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms),
+  '*'(gv_edge_statement(NewI, Directedness, GAttrs), NewETerms),
 
   % Note that we do not include a newline here.
 
@@ -265,7 +265,7 @@ gv_graph1(
   indent(I).
 
 
-%! gv_graph_type(+Directed:boolean)// .
+%! gv_graph_type(+Directedness:boolean)// .
 % The type of graph that is represented.
 
 gv_graph_type(false) --> `graph`.
diff --git a/gv_gif.pl b/gv_gif.pl
index 908b9bc..4a3e75f 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -35,14 +35,25 @@ Support for creating GIF representations.
      pass_to(create_gif/4, 4)
    ]).
 :- predicate_options(create_gif/4, 4, [
-     pass_to(vertex_term/3, 3),
      pass_to(edge_term/3, 3),
-     graph_label(+atom)
+     pass_to(graph_attributes/2, 2),
+     pass_to(vertex_term/3, 3)
    ]).
 :- predicate_options(edge_term/3, 3, [
    ]).
+:- predicate_options(graph_attributes/2, 2, [
+     directedness(+boolean),
+     graph_colorscheme(+oneof([none,svg,x11]),
+     graph_label(+atom)
+   ]).
+
 :- predicate_options(vertex_term/3, 3, [
-     vertex_label(+atom)
+     vertex_color(+atom),
+     vertex_coordinates(+atom),
+     vertex_image(+atom),
+     vertex_label(+atom),
+     vertex_peripheries(+atom),
+     vertex_shape(+atom)
    ]).
 
 
@@ -60,6 +71,8 @@ create_gif(Es, Gif, Options):-
 %!   +Options:list(nvpair)
 %! ) is det.
 % The following options are supported:
+%   * =|graph_colorscheme(+oneof([none,svg,x11]))
+%     No default.
 %   * =|graph_label(+LabelFunction)|=
 %     The functions that assigns names to graphs.
 %     No default.
@@ -72,15 +85,7 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
   maplist(\E^ETerm^edge_term(Vs, E, ETerm, Options), Es, ETerms),
   
   % Graph attributes.
-  (
-    option(graph_label(LabelFunction), Options)
-  ->
-    call(LabelFunction, Graph, GraphLabel)
-  ;
-    true
-  ),
-  
-  merge_options([directed=true,label=GraphLabel], GAttrs).
+  graph_attributes(GAttrs, Options).
 
 
 %! edge_term(
@@ -89,14 +94,69 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
 %!   -EdgeTerm:compound,
 %!   +Options:list(nvpair)
 %! ) is det.
+% The following options are supported:
+%   * =|edge_arrowhead(+atom)|=
+%   * =|edge_color(+atom)|=
+%   * =|edge_label(+atom)|=
+%   * =|edge_style(+atom)|=
 
 edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):-
   edge_components(E, FromV, ToV),
-  
   nth0chk(FromId, Vs, FromV),
   nth0chk(ToId, Vs, ToV),
   
-  EAttrs = [].
+  % Arrowhead
+  if_option(edge_arrowhead(ArrowheadFunction), Options,
+    call(ArrowheadFunction, E, EArrowhead)
+  ),
+  
+  % Color.
+  if_option(edge_color(ColorFunction), Options,
+    call(ColorFunction, E, EColor)
+  ),
+  
+  % Label.
+  if_option(edge_label(LabelFunction), Options,
+    call(LabelFunction, E, ELabel)
+  ),
+  
+  % Style.
+  if_option(edge_style(StyleFunction), Options,
+    call(StyleFunction, E, EStyle)
+  ),
+  
+  EAttrs = [arrowHead=EArrowhead,color=EColor,label=ELabel,style=EStyle].
+
+
+%! graph_attributes(
+%!   -GraphAttributes:list(nvpair),
+%!   +Options:list(nvpair)
+%! ) is det.
+% The following options are supported:
+%   * =|directedness(+boolean)|=
+%     Whether the graph is directed (`true`) or undirected (`false`).
+%     Default: `false`.
+%   * =|graph_colorscheme(+oneof([none,svg,x11]))|=
+%     The colorscheme from which the color in this graph are taken.
+%     Default: `svg`.
+%   * =|graph_label(+atom)|=
+%     The graph label.
+%     No default.
+
+graph_attributes(GAttrs, Options):-
+  % Directedness.
+  option(directedness(Directedness), Options, false),
+  
+  % Colorscheme.
+  if_option(graph_colorscheme(Colorscheme), Options, true),
+  
+  % Label.
+  if_option(graph_label(GLabel), Options, true),
+  
+  merge_options(
+    [colorscheme=Colorscheme,directedness=Directedness,label=GLabel],
+    GAttrs
+  ).
 
 
 %! vertex_term(
@@ -106,15 +166,66 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):-
 %!   +Options:list(nvpair)
 %! ) is det.
 % The following options are supported:
+%   * =|vertex_color(+ColorFunction)|=
+%     A function that assigns colors to vertices.
+%     No default.
+%   * =|vertex_coordinate(+CoordinateFunction)|=
+%     A function that assigns coordinates to vertices.
+%     No default.
+%   * =|vertex_image(+ImageFunction)|=
+%     A function that assinges images to vertices.
+%     No default.
 %   * =|vertex_label(+LabelFunction)|=
 %     A function that assigns labels to vertices.
+%     No default.
+%   * =|vertex_peripheries(+PeripheriesFunction)|=
+%     A function that assinges peripheries to vertices.
+%     No default.
+%   * =|vertex_shape(+ShapeFunction)|=
+%     A function that assinges shapes to vertices.
+%     No default.
 
 vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):-
   nth0chk(Id, Vs, V),
   
+  % Color.
+  if_option(vertex_color(ColorFunction), Options,
+    call(ColorFunction, V, VColor)
+  ),
+  
+  % Coordinates.
+  %%%%if_option(vertex_coordinate(CoordinateFunction), Options,
+  %%%%  call(CoordinateFunction, V, VCoordinates)
+  %%%%),
+  
+  % Image.
+  if_option(image(ImageFunction), Options,
+    call(ImageFunction, V, VImage)
+  ),
+  
   % Label.
-  option(vertex_label(LabelFunction), Options, =),
-  call(LabelFunction, V, VLabel),
+  if_option(vertex_label(LabelFunction), Options,
+    call(LabelFunction, V, VLabel)
+  ),
+  
+  % Peripheries.
+  if_option(vertex_peripheries(PeripheriesFunction), Options,
+    call(PeripheriesFunction, V, VPeripheries)
+  ),
+  
+  % Shape.
+  if_option(vertex_shape(ShapeFunction), Options,
+    call(ShapeFunction, V, VShape)
+  ),
   
-  VAttrs = [label=VLabel].
+  merge_options(
+    [
+      color=VColor,
+      image=VImage,
+      label=VLabel,
+      peripheries=VPeripheries,
+      shape=VShape
+    ],
+    VAttrs
+  ).
 
 
```
 
<h2 id="16"> 16: 正在比较变动前 fa364fc 和变动后 3c900f4 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_gif.pl b/gv_gif.pl
index 4a3e75f..ef2f7f2 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -43,7 +43,7 @@ Support for creating GIF representations.
    ]).
 :- predicate_options(graph_attributes/2, 2, [
      directedness(+boolean),
-     graph_colorscheme(+oneof([none,svg,x11]),
+     graph_colorscheme(+oneof([none,svg,x11])),
      graph_label(+atom)
    ]).
 
@@ -109,23 +109,23 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):-
   if_option(edge_arrowhead(ArrowheadFunction), Options,
     call(ArrowheadFunction, E, EArrowhead)
   ),
-  
   % Color.
   if_option(edge_color(ColorFunction), Options,
     call(ColorFunction, E, EColor)
   ),
-  
   % Label.
   if_option(edge_label(LabelFunction), Options,
     call(LabelFunction, E, ELabel)
   ),
-  
   % Style.
   if_option(edge_style(StyleFunction), Options,
     call(StyleFunction, E, EStyle)
   ),
   
-  EAttrs = [arrowHead=EArrowhead,color=EColor,label=ELabel,style=EStyle].
+  merge_options(
+    [arrowHead=EArrowhead,color=EColor,label=ELabel,style=EStyle],
+    EAttrs
+  ).
 
 
 %! graph_attributes(
@@ -146,10 +146,8 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):-
 graph_attributes(GAttrs, Options):-
   % Directedness.
   option(directedness(Directedness), Options, false),
-  
   % Colorscheme.
   if_option(graph_colorscheme(Colorscheme), Options, true),
-  
   % Label.
   if_option(graph_label(GLabel), Options, true),
   
@@ -169,9 +167,6 @@ graph_attributes(GAttrs, Options):-
 %   * =|vertex_color(+ColorFunction)|=
 %     A function that assigns colors to vertices.
 %     No default.
-%   * =|vertex_coordinate(+CoordinateFunction)|=
-%     A function that assigns coordinates to vertices.
-%     No default.
 %   * =|vertex_image(+ImageFunction)|=
 %     A function that assinges images to vertices.
 %     No default.
@@ -192,27 +187,18 @@ vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):-
   if_option(vertex_color(ColorFunction), Options,
     call(ColorFunction, V, VColor)
   ),
-  
-  % Coordinates.
-  %%%%if_option(vertex_coordinate(CoordinateFunction), Options,
-  %%%%  call(CoordinateFunction, V, VCoordinates)
-  %%%%),
-  
   % Image.
   if_option(image(ImageFunction), Options,
     call(ImageFunction, V, VImage)
   ),
-  
   % Label.
   if_option(vertex_label(LabelFunction), Options,
     call(LabelFunction, V, VLabel)
   ),
-  
   % Peripheries.
   if_option(vertex_peripheries(PeripheriesFunction), Options,
     call(PeripheriesFunction, V, VPeripheries)
   ),
-  
   % Shape.
   if_option(vertex_shape(ShapeFunction), Options,
     call(ShapeFunction, V, VShape)
 
```
 
<h2 id="17"> 17: 正在比较变动前 3c900f4 和变动后 65cc1c3 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_gif.pl b/gv_gif.pl
index ef2f7f2..6d78ac3 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -40,6 +40,10 @@ Support for creating GIF representations.
      pass_to(vertex_term/3, 3)
    ]).
 :- predicate_options(edge_term/3, 3, [
+     edge_arrowhead(+atom),
+     edge_color(+atom),
+     edge_label(+atom),
+     edge_style(+atom)
    ]).
 :- predicate_options(graph_attributes/2, 2, [
      directedness(+boolean),
 
```
 
<h2 id="18"> 18: 正在比较变动前 65cc1c3 和变动后 20e1f21 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 98cb0a2..25b0cd3 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -110,18 +110,14 @@ and GraphViz output files or SVG DOM structures.
 
 codes_to_gv_file(Codes, ToFile, Options):-
   access_file(ToFile, write),
+  absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]),
   setup_call_cleanup(
-    new_memory_file(MemFile),
-    (
-      setup_call_cleanup(
-        open(MemFile, write, Write, [encoding(utf8),type(test)]),
-        put_codes(Write, Codes),
-        close(Write)
-      ),
-      file_to_gv(MemFile, ToFile, Options)
-    ),
-    free_memory_file(MemFile)
-  ).
+    open(TmpFile, write, Write, [encoding(utf8)]),
+    put_codes(Write, Codes),
+    close(Write)
+  ),
+  file_to_gv(TmpFile, ToFile, Options),
+  delete_file(TmpFile).
 
 
 %! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det.
@@ -137,9 +133,6 @@ file_to_gv(FromFile, ToFile, Options):-
   option(to_file_type(dot), Options), !,
   rename_file(FromFile, ToFile).
 file_to_gv(FromFile, ToFile, Options):-
-  % The input file must be readable.
-  access_file(FromFile, read),
-
   % The method option.
   option(method(Method), Options, dot),
   must_be(oneof([dot,sfdp]), Method),
diff --git a/gv_gif.pl b/gv_gif.pl
index 6d78ac3..e3a6933 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -84,10 +84,10 @@ create_gif(Es, Gif, Options):-
 create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
   % Vertex terms.
   maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Options), Vs, VTerms),
-  
+
   % Edge terms.
   maplist(\E^ETerm^edge_term(Vs, E, ETerm, Options), Es, ETerms),
-  
+
   % Graph attributes.
   graph_attributes(GAttrs, Options).
 
@@ -104,11 +104,11 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
 %   * =|edge_label(+atom)|=
 %   * =|edge_style(+atom)|=
 
-edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):-
+edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):-
   edge_components(E, FromV, ToV),
   nth0chk(FromId, Vs, FromV),
   nth0chk(ToId, Vs, ToV),
-  
+
   % Arrowhead
   if_option(edge_arrowhead(ArrowheadFunction), Options,
     call(ArrowheadFunction, E, EArrowhead)
@@ -125,9 +125,9 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):-
   if_option(edge_style(StyleFunction), Options,
     call(StyleFunction, E, EStyle)
   ),
-  
+
   merge_options(
-    [arrowHead=EArrowhead,color=EColor,label=ELabel,style=EStyle],
+    [arrowhead=EArrowhead,color=EColor,label=ELabel,style=EStyle],
     EAttrs
   ).
 
@@ -154,7 +154,7 @@ graph_attributes(GAttrs, Options):-
   if_option(graph_colorscheme(Colorscheme), Options, true),
   % Label.
   if_option(graph_label(GLabel), Options, true),
-  
+
   merge_options(
     [colorscheme=Colorscheme,directedness=Directedness,label=GLabel],
     GAttrs
@@ -186,7 +186,7 @@ graph_attributes(GAttrs, Options):-
 
 vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):-
   nth0chk(Id, Vs, V),
-  
+
   % Color.
   if_option(vertex_color(ColorFunction), Options,
     call(ColorFunction, V, VColor)
@@ -207,7 +207,7 @@ vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):-
   if_option(vertex_shape(ShapeFunction), Options,
     call(ShapeFunction, V, VShape)
   ),
-  
+
   merge_options(
     [
       color=VColor,
 
```
 
<h2 id="19"> 19: 正在比较变动前 20e1f21 和变动后 e2e9fc1 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 25b0cd3..2d2ed12 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -146,11 +146,8 @@ file_to_gv(FromFile, ToFile, Options):-
   (
     var(ToFile)
   ->
-    absolute_file_name(
-      data(export),
-      ToFile,
-      [access(write),file_type(ToFileType)]
-    )
+    user:prolog_file_type(ToExtension, ToFileType),
+    file_alternative(FromFile, _, _, ToExtension, ToFile)
   ;
     is_absolute_file_name(ToFile),
     % The given output file must match a certain file extension.
 
```
 
<h2 id="20"> 20: 正在比较变动前 e2e9fc1 和变动后 4b72d15 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 2d2ed12..9eaf66b 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -28,20 +28,16 @@ and GraphViz output files or SVG DOM structures.
 @version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07
 */
 
-:- use_module(library(memfile)).
 :- use_module(library(option)).
 :- use_module(library(process)).
 :- use_module(library(predicate_options)). % Declarations.
 
 :- use_module(generics(codes_ext)).
 :- use_module(generics(db_ext)).
-:- use_module(generics(error_ext)).
-:- use_module(generics(trees)).
 :- use_module(os(file_ext)).
 :- use_module(os(run_ext)).
 :- use_module(os(safe_file)).
 :- use_module(svg(svg_file)).
-:- use_module(ugraph(ugraph_export)).
 
 :- use_module(plGraphViz(gv_dot)).
 
diff --git a/gv_gif.pl b/gv_gif.pl
index e3a6933..48ecd2f 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -27,7 +27,7 @@ Support for creating GIF representations.
 
 :- use_module(generics(list_ext)).
 :- use_module(generics(option_ext)).
-:- use_module(graph_theory(graph_generic)).
+:- use_module(graph_theory(graph_theory)).
 
 :- use_module(plRdf(rdf_name)). % Meta-DCG.
 
 
```
 
<h2 id="21"> 21: 正在比较变动前 4b72d15 和变动后 54248f7 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_gif.pl b/gv_gif.pl
index 48ecd2f..2fad4c4 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -105,7 +105,7 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
 %   * =|edge_style(+atom)|=
 
 edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):-
-  edge_components(E, FromV, ToV),
+  edge(E, FromV, ToV),
   nth0chk(FromId, Vs, FromV),
   nth0chk(ToId, Vs, ToV),
 
 
```
 
<h2 id="22"> 22: 正在比较变动前 54248f7 和变动后 3b9a773 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_gif.pl b/gv_gif.pl
index 2fad4c4..48ecd2f 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -105,7 +105,7 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
 %   * =|edge_style(+atom)|=
 
 edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):-
-  edge(E, FromV, ToV),
+  edge_components(E, FromV, ToV),
   nth0chk(FromId, Vs, FromV),
   nth0chk(ToId, Vs, ToV),
 
 
```
 
<h2 id="23"> 23: 正在比较变动前 3b9a773 和变动后 1e9a910 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_gif.pl b/gv_gif.pl
index 48ecd2f..d59e5f8 100644
--- a/gv_gif.pl
+++ b/gv_gif.pl
@@ -65,7 +65,7 @@ Support for creating GIF representations.
 %! create_gif(+Edges:ordset, -Gif:compound, +Options:list(nvpair)) is det.
 
 create_gif(Es, Gif, Options):-
-  edges_to_vertices(Es, Vs),
+  graph_theory:edges_to_vertices(Es, Vs),
   create_gif(Vs, Es, Gif, Options).
 
 %! create_gif(
@@ -105,7 +105,7 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
 %   * =|edge_style(+atom)|=
 
 edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):-
-  edge_components(E, FromV, ToV),
+  graph_theory:edge_components(E, FromV, ToV),
   nth0chk(FromId, Vs, FromV),
   nth0chk(ToId, Vs, ToV),
 
 
```
 
<h2 id="24"> 24: 正在比较变动前 1e9a910 和变动后 6dc1cf5 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index b25c15b..bd24270 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1 +1,3 @@
 *~
+*#
+*.db
diff --git a/.gitmodules b/.gitmodules
deleted file mode 100644
index a63cbff..0000000
--- a/.gitmodules
+++ /dev/null
@@ -1,6 +0,0 @@
-[submodule "Prolog-Library-Collection"]
-	path = Prolog-Library-Collection
-	url = https://github.com/wouterbeek/Prolog-Library-Collection.git
-[submodule "plHtml"]
-	path = plHtml
-	url = https://github.com/wouterbeek/plHtml.git
diff --git a/LICENSE.txt b/LICENSE.txt
new file mode 100644
index 0000000..c7b7798
--- /dev/null
+++ b/LICENSE.txt
@@ -0,0 +1,21 @@
+The MIT License (MIT)
+
+Copyright (c) 2015 Wouter Beek
+
+Permission is hereby granted, free of charge, to any person obtaining a copy
+of this software and associated documentation files (the "Software"), to deal
+in the Software without restriction, including without limitation the rights
+to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+copies of the Software, and to permit persons to whom the Software is
+furnished to do so, subject to the following conditions:
+
+The above copyright notice and this permission notice shall be included in
+all copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
+THE SOFTWARE.
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
deleted file mode 160000
index 5b34b01..0000000
--- a/Prolog-Library-Collection
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 5b34b01ab0cc82a56e6fd90fc26e75da22f5a0fe
diff --git a/README.md b/README.md
new file mode 100644
index 0000000..23a45db
--- /dev/null
+++ b/README.md
@@ -0,0 +1,151 @@
+plGraphViz
+==========
+
+This library allows you to easily export graphs represented as Prolog terms
+using [GraphViz](http://www.graphviz.org/), an advanced graph drawing library.
+The Prolog terms have the following form:
+
+~~~prolog
+graph(Vertices, Edges, GraphAttrs)
+~~~
+
+`Vertices` and `Edges` are lists of compound terms of the following form:
+
+~~~prolog
+vertex(Id, VertexAttrs)
+edge(FromId, ToId, EdgeAttrs)
+~~~
+
+`Id` identifies a vertex and may or may not occur in any of the edges
+(i.e., unconnected vertices are allowed).
+`FromId` and `ToId` may occur in the list of vertices,
+in order to draw an edge between vertices with set attributes.
+
+Attributes have the form `Name=Value`.
+`GraphAttrs` are attributes of the graph.
+`VertexAttrs` are attributes of the vertex.
+`EdgeAttrs` are attributes of the edge.
+
+Attribute values are given as Prolog terms as well,
+and are type-checked before exporting.
+Many of the GraphViz attributes are supported.
+New ones are added on an as-needed bases
+(open an issue on Github if you want to see a specific feature added!).
+HTML-like labels are supported, allowing complex tables to be shown
+inside vertices.
+
+---
+
+### Installation
+
+~~~shell
+$ git clone https://github.com/wouterbeek/plGraphViz.git
+$ cd plGraphViz
+$ git submodule update --init
+~~~
+
+### Example
+
+~~~prolog
+$ swipl run.pl
+?- export_graph_to_gv_file(
+     graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]),
+     File,
+     [method(sfdp),output(png)]
+   ).
+   File = 'PATH/plGraphViz/data/tmp.png'
+~~~
+
+![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png "Example graph.")
+
+The graphic can be saved to a different file by instantiating
+the `File` argument.
+
+---
+
+### 'Method' option
+
+Option `method(+atom)` sets the drawing method that is used by GraphViz
+ to place the vertices and edges.
+The following values are supported.
+
+| **Value**       | **Description**         |
+| `circo`         | Circular layout.        |
+| `dot` (default) | Directed graph.         |
+| `fdp`           | Undirected graph.       |
+| `neato`         | Undirected graph.       |
+| `osage`         | Tree map.               |
+| `sfdp`          | Large undirected graph. |
+| `twopi`         | Radical layouts.        |
+
+---
+
+### 'Output' option
+
+Option `output(+atom)` sets the type of file the graph is written to.
+The following values are supported.
+
+| **Value**             | **Description**                       |
+|:---------------------:|:--------------------------------------|
+| `bmp`                 | Windows Bitmap Format                 |
+| `canon`               |                                       |
+| `dot`                 |                                       |
+| `gv`,  `xdot`, `xdot1.2`, `xdot1.4` | DOT                     |
+| `cgimage`             | CGImage bitmap format                 |
+| `cmap`                | Client-side imagemap (deprecated)     |
+| `eps`                 | Encapsulated PostScript               |
+| `exr`                 | OpenEXR                               |
+| `fig`                 |                                       |
+| `gd`, `gd2`           | GD/GD2 formats                        |
+| `gif`                 |                                       |
+| `gtk`                 | GTK canvas                            |
+| `ico`                 | Icon Image File Format                |
+| `imap`                |                                       |
+| `cmapx`               | Server-side and client-side imagemaps |
+| `imap_np`, `cmapx_np` | Server-side and client-side imagemaps |
+| `ismap`               | Server-side imagemap (deprecated)     |
+| `jp2`                 | JPEG 2000                             |
+| `jpg`, `jpeg`, `jpe`  | JPEG                                  |
+| `pct`, `pict`         | PICT                                  |
+| `pdf` (default)       | Portable Document Format (PDF)        |
+| `pic`                 | Kernighan's PIC graphics language     |
+| `plain`, `plain-ext`  | Simple text format                    |
+| `png`                 | Portable Network Graphics format      |
+| `pov`                 | POV-Ray markup language (prototype)   |
+| `ps`                  | PostScript                            |
+| `ps2`                 | PostScript for PDF                    |
+| `psd`                 | PSD                                   |
+| `sgi`                 | SGI                                   |
+| `svg`, `svgz`         | Scalable Vector Graphics              |
+| `tga`                 | Truevision TGA                        |
+| `tif`, `tiff`         | TIFF (Tag Image File Format)          |
+| `tk`                  | TK graphics                           |
+| `vml`, `vmlz`         | Vector Markup Language (VML)          |
+| `vrml`                | VRML                                  |
+| `wbmp`                | Wireless BitMap format                |
+| `webp`                | Image format for the Web              |
+| `xlib`, `x11`         | Xlib canvas                           |
+
+---
+
+### HTML-like labels
+
+Example of using HTML-like labels:
+
+~~~prolog
+export_graph_to_gv_file(
+  graph(
+    [vertex(1,[]),vertex(2,[label=html(table([tr([td(a),td(b)]),tr([td(c),td(d)])]))])],
+    [edge(1,2,[label='From 1 to 2.'])],
+    []
+  ),
+  File,
+  []
+).
+~~~
+
+![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example2.png "Example graph with HTML-like labels.")
+
+---
+
+Developed during 2013-2014 by [Wouter Beek](http://www.wouterbeek.com).
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
new file mode 100644
index 0000000..bcc7654
--- /dev/null
+++ b/data/gv_attrs_scrape.pl
@@ -0,0 +1,119 @@
+:- module(
+  gv_attrs_scrape,
+  [
+    gv_attrs_scrape/1 % +File
+  ]
+).
+
+/** <module> GraphViz: Scrape attributes
+
+Writes compound terms of the following form to file:
+
+```prolog
+gv_attr(
+  ?Name,
+  ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
+  ?Types:list(atom),
+  ?Default,
+  ?Minimum,
+  ?Notes
+) is nondet.
+```
+
+@author Wouter Beek
+@version 2015/10, 2016/07
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(debug)).
+:- use_module(library(gv/gv_attr_type)).
+:- use_module(library(http/http_download)).
+:- use_module(library(lists)).
+:- use_module(library(os/io)).
+:- use_module(library(pl_term)).
+:- use_module(library(print_ext)).
+:- use_module(library(xpath)).
+:- use_module(library(xpath/xpath_table)).
+:- use_module(library(yall)).
+
+
+
+
+
+%! gv_attrs_scrape(+File) is det.
+
+gv_attrs_scrape(File):-
+  debug(gv, "Updating the GraphViz attributes table.", []),
+  call_to_stream(File, [In,Meta,Meta]>>gv_attrs_download(In)).
+
+
+gv_attrs_download(Write):-
+  gv_attrs_iri(Iri),
+  html_download(Iri, Dom),
+  xpath_chk(Dom, //table(@align=lower_case(center)), TableDom),
+  xpath_table(TableDom, _, Rows),
+  maplist(write_attr_row(Write), Rows).
+
+
+write_attr_row(Write, [Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
+  atom_phrase(translate_usedby(UsedBy2), UsedBy1),
+  once(atom_phrase(translate_type(Types2), Types1)),
+  sort(UsedBy2, UsedBy3),
+  translate_default(Default1, Default2),
+  with_output_to(
+    Write,
+    write_fact(gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes))
+  ).
+
+gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html').
+
+
+
+
+
+% HELPERS %
+
+%! translate_default(+Default1, -Default2) is det.
+
+% The empty string is represented by the empty atom.
+translate_default('""', ''):- !.
+% The absence of a default value is represented by an uninstantiated variable.
+translate_default('<none>', _):- !.
+translate_default(Default, Default).
+
+
+
+%! translate_type(-Types:list(atom))// is det.
+
+translate_type([H|T]) -->
+  gv_attr_type(H),
+  whites,
+  translate_type(T).
+translate_type([H]) -->
+  gv_attr_type(H).
+translate_type([]) --> "".
+
+
+
+%! translated_usedby(
+%!   -UsedBy:list(oneof([cluster,edge,graph,node,subgraph]))
+%! )// is det.
+
+translate_usedby([cluster|T]) -->
+  "C", !,
+  translate_usedby(T).
+translate_usedby([edge|T]) -->
+  "E", !,
+  translate_usedby(T).
+translate_usedby([graph|T]) -->
+  "G", !,
+  translate_usedby(T).
+translate_usedby([node|T]) -->
+  "N", !,
+  translate_usedby(T).
+translate_usedby([subgraph|T]) -->
+  "S", !,
+  translate_usedby(T).
+translate_usedby([]) -->
+  "".
diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl
new file mode 100644
index 0000000..102a02a
--- /dev/null
+++ b/data/gv_color_scrape.pl
@@ -0,0 +1,52 @@
+:- module(
+  gv_color_scrape,
+  [
+    gv_color_scrape/1 % +File
+  ]
+).
+
+/** <module> GraphViz: Scrape colors
+
+@author Wouter Beek
+@version 2015/10, 2016/07
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(debug)).
+:- use_module(library(http/http_download)).
+:- use_module(library(lists)).
+:- use_module(library(os/io)).
+:- use_module(library(pl_term)).
+:- use_module(library(print_ext)).
+:- use_module(library(xpath)).
+:- use_module(library(xpath/xpath_table)).
+:- use_module(library(yall)).
+
+
+
+
+
+%! gv_color_scrape(+File) is det.
+
+gv_color_scrape(File):-
+  debug(io, "Updating the GraphViz color table.", []),
+  call_to_stream(File, [In,Meta,Meta]>>gv_color_download(In)).
+
+
+gv_color_download(Write):-
+  gv_color_iri(Iri),
+  html_download(Iri, Dom),
+  xpath_chk(Dom, //table(1), TableDom1),
+  xpath_chk(Dom, //table(2), TableDom2),
+  maplist(write_color_table(Write), [x11,svg], [TableDom1,TableDom2]).
+
+
+write_color_table(Write, Colorscheme, TableDom):-
+  xpath_table(TableDom, _, Rows),
+  append(Rows, Cells),
+  forall(
+    member(Cell, Cells),
+    with_output_to(Write, write_fact(gv_color(Colorscheme, Cell)))
+  ).
+
+gv_color_iri('http://www.graphviz.org/doc/info/colors.html').
diff --git a/example1.png b/example1.png
new file mode 100644
index 0000000..31e7ba6
Binary files /dev/null and b/example1.png differ
diff --git a/example2.png b/example2.png
new file mode 100644
index 0000000..6e44b16
Binary files /dev/null and b/example2.png differ
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
deleted file mode 100644
index 7a64c82..0000000
--- a/gv_attr_type.pl
+++ /dev/null
@@ -1,417 +0,0 @@
-:- module(
-  gv_attr_type,
-  [
-    gv_attr_type/1, % ?Type:atom
-    addDouble//1, % +Double:float
-    addPoint//1, % +Point:compound
-    arrowType//1, % +ArrowType:atom
-    bool//1, % +Boolean:boolean
-    clusterMode//1, % +ClusterMode:atom
-    dirType//1, % +DirectionType:oneof([back,both,forward,none])
-    double//1, % +Double:float
-    doubleList//1, % +Doubles:list(float)
-    escString//1,
-    %layerList//1,
-    %layerRange//1,
-    lblString//1,
-    int//1, % +Integer:integer
-    outputMode//1, % +OutputMode:atom
-    %packMode//1,
-    pagedir//1, % +Pagedir:atom
-    point//1, % +Point:compound
-    pointList//1, % +Points:list(compound)
-    %portPos//1,
-    quadType//1, % +QuadType:atom
-    rankType//1, % +RankType:atom
-    rankdir//1, % +RankDirection:atom
-    rect//1, % +Rectangle:compound
-    shape//1,
-    smoothType//1, % +SmoothType:atom
-    %splineType//1,
-    %startType//1,
-    string//1, % ?Content:atom
-    style//2 % +Context:oneof([cluster,edge,node])
-             % +Style:atom
-    %viewPort//1
-  ]
-).
-:- reexport(
-  plGraphViz(gv_color),
-  [
-    color//1, % +Color:compound
-    colorList//1 % +ColorList:list(compound)
-  ]
-).
-
-/** <module> GraphViz attribute types
-
-@author Wouter Beek
-@version 2014/06
-*/
-
-:- use_module(dcg(dcg_abnf)).
-:- use_module(dcg(dcg_cardinal)).
-:- use_module(dcg(dcg_content)).
-
-:- use_module(plGraphViz(gv_html)).
-
-
-
-%! gv_attr_type(?Type:atom) is nondet.
-
-gv_attr_type(addDouble).
-gv_attr_type(addPoint).
-gv_attr_type(arrowType).
-gv_attr_type(bool).
-gv_attr_type(color).
-gv_attr_type(colorList).
-gv_attr_type(clusterMode).
-gv_attr_type(dirType).
-gv_attr_type(double).
-gv_attr_type(doubleList).
-gv_attr_type(escString).
-gv_attr_type(layerList).
-gv_attr_type(layerRange).
-gv_attr_type(lblString).
-gv_attr_type(int).
-gv_attr_type(outputMode).
-gv_attr_type(packMode).
-gv_attr_type(pagedir).
-gv_attr_type(point).
-gv_attr_type(pointList).
-gv_attr_type(portPos).
-gv_attr_type(quadType).
-gv_attr_type(rankType).
-gv_attr_type(rankdir).
-gv_attr_type(rect).
-gv_attr_type(shape).
-gv_attr_type(smoothType).
-gv_attr_type(splineType).
-gv_attr_type(startType).
-gv_attr_type(string).
-gv_attr_type(style).
-gv_attr_type(viewPort).
-
-
-%! addDouble(+Float:float)// .
-% An *addDouble* is represented by a Prolog float.
-
-addDouble(Float) -->
-  '?'(`+`),
-  double(Float).
-
-
-%! addPoint(+Point:compound)// .
-% An *addPoint* is represented by a compound of the following form:
-% `point(X:float,Y:float,InputOnly:boolean)`.
-
-addPoint(Point) -->
-  '?'(`+`),
-  point(Point).
-
-
-%! arrowType(+ArrowType:atom)// .
-
-arrowType(V) -->
-  {arrowType(V)},
-  atom(V).
-
-arrowType(V):-
-  primitive_shape(V).
-arrowType(V):-
-  derived(V).
-arrowType(V):-
-  backwards_compatible(V).
-
-primitive_shape(box).
-primitive_shape(crow).
-primitive_shape(circle).
-primitive_shape(diamond).
-primitive_shape(dot).
-primitive_shape(inv).
-primitive_shape(none).
-primitive_shape(normal).
-primitive_shape(tee).
-primitive_shape(vee).
-
-derived(odot).
-derived(invdot).
-derived(invodot).
-derived(obox).
-derived(odiamond).
-
-backwards_compatible(ediamond).
-backwards_compatible(empty).
-backwards_compatible(halfopen).
-backwards_compatible(invempty).
-backwards_compatible(open).
-
-
-bool(false) --> `false`.
-bool(false) --> `no`.
-bool(true) --> `true`.
-bool(true) --> `yes`.
-
-
-%! clusterMode(+ClusterMode:atom)// .
-
-clusterMode(V) -->
-  {clusterMode(V)},
-  atom(V).
-
-clusterMode(global).
-clusterMode(local).
-clusterMode(none).
-
-
-%! dirType(+DirectionType:oneof([back,both,forward,none]))// .
-
-dirType(DirType) -->
-  {dirType(DirType)},
-  atom(DirType).
-
-dirType(back).
-dirType(both).
-dirType(forward).
-dirType(none).
-
-
-double(Double1) -->
-  % float//1 will check for float type.
-  {Double2 is Double1 * 1.0},
-  float(Double2).
-
-
-doubleList([H|T]) -->
-  double(H),
-  '*'(doubleList1, T).
-
-doubleList1(Float) -->
-  `:`,
-  double(Float).
-
-
-%! escString(+String:atom)// .
-% @tbd Support for context-dependent replacements.
-
-escString(String) -->
-  atom(String).
-
-
-% @tbd layerList
-
-
-% @tbd layerRange
-
-
-lblString(V) -->
-  escString(V).
-lblString(V) -->
-  gv_html_like_label(V).
-
-
-int(V) -->
-  integer(V).
-
-
-outputMode(V) -->
-  {outputMode(V)},
-  atom(V).
-
-outputMode(breadthfirst).
-outputMode(edgesfirst).
-outputMode(nodesfirst).
-
-
-% @tbd packMode
-
-
-pagedir(V) -->
-  {pagedir(V)},
-  atom(V).
-
-pagedir('BL').
-pagedir('BR').
-pagedir('LB').
-pagedir('LT').
-pagedir('RB').
-pagedir('RT').
-pagedir('TL').
-pagedir('TR').
-
-
-%! point(+Point:compound)// .
-% A *point* is represented by a compound of the following form:
-% `point(X:float,Y:float,InputOnly:boolean)`.
-
-point(point(X,Y,InputOnly)) -->
-  float(X),
-  `,`,
-  float(Y),
-  input_only(InputOnly).
-
-input_only(false) --> [].
-input_only(true) --> `!`.
-
-
-pointList(Points) -->
-  '*'(point, Points).
-
-
-% @tbd portPos
-
-
-quadType(V) -->
-  {quadType(V)},
-  atom(V).
-
-quadType(fast).
-quadType(none).
-quadType(normal).
-
-
-rankType(V) -->
-  {rankType(V)},
-  atom(V).
-
-rankType(max).
-rankType(min).
-rankType(same).
-rankType(sink).
-rankType(source).
-
-
-rankdir(V) -->
-  {rankdir(V)},
-  atom(V).
-
-rankdir('BT').
-rankdir('LR').
-rankdir('RL').
-rankdir('TB').
-
-
-rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  float(LowerLeftX), `,`,
-  float(LowerLeftY), `,`,
-  float(UpperRightX), `,`,
-  float(UpperRightY).
-
-
-shape(V) -->
-  {polygon_based_shape(V)},
-  atom(V).
-
-polygon_based_shape(assembly).
-polygon_based_shape(box).
-polygon_based_shape(box3d).
-polygon_based_shape(cds).
-polygon_based_shape(circle).
-polygon_based_shape(component).
-polygon_based_shape(diamond).
-polygon_based_shape(doublecircle).
-polygon_based_shape(doubleoctagon).
-polygon_based_shape(egg).
-polygon_based_shape(ellipse).
-polygon_based_shape(fivepoverhang).
-polygon_based_shape(folder).
-polygon_based_shape(hexagon).
-polygon_based_shape(house).
-polygon_based_shape(insulator).
-polygon_based_shape(invhouse).
-polygon_based_shape(invtrapezium).
-polygon_based_shape(invtriangle).
-polygon_based_shape(larrow).
-polygon_based_shape(lpromoter).
-polygon_based_shape('Mcircle').
-polygon_based_shape('Mdiamond').
-polygon_based_shape('Msquare').
-polygon_based_shape(none).
-polygon_based_shape(note).
-polygon_based_shape(noverhang).
-polygon_based_shape(octagon).
-polygon_based_shape(oval).
-polygon_based_shape(parallelogram).
-polygon_based_shape(pentagon).
-polygon_based_shape(plaintext).
-polygon_based_shape(point).
-polygon_based_shape(polygon).
-polygon_based_shape(primersite).
-polygon_based_shape(promoter).
-polygon_based_shape(proteasesite).
-polygon_based_shape(proteinstab).
-polygon_based_shape(rarrow).
-polygon_based_shape(rect).
-polygon_based_shape(rectangle).
-polygon_based_shape(restrictionsite).
-polygon_based_shape(ribosite).
-polygon_based_shape(rnastab).
-polygon_based_shape(rpromoter).
-polygon_based_shape(septagon).
-polygon_based_shape(signature).
-polygon_based_shape(square).
-polygon_based_shape(tab).
-polygon_based_shape(terminator).
-polygon_based_shape(threepoverhang).
-polygon_based_shape(trapezium).
-polygon_based_shape(triangle).
-polygon_based_shape(tripleoctagon).
-polygon_based_shape(utr).
-
-
-smoothType(V) -->
-  {smoothType(V)},
-  atom(V).
-
-smoothType(avg_dist).
-smoothType(graph_dist).
-smoothType(none).
-smoothType(power_dist).
-smoothType(rng).
-smoothType(spring).
-smoothType(triangle).
-
-
-% @tbd splineType
-
-
-% @tbd startType
-
-
-%! string(?Content:atom)// .
-% A GraphViz string.
-
-string(Content) -->
-  atom(Content).
-
-
-%! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet.
-
-style(Context, Style) -->
-  {style(Context, Style)},
-  atom(Style).
-
-style(cluster, bold).
-style(cluster, dashed).
-style(cluster, dotted).
-style(cluster, filled).
-style(cluster, rounded).
-style(cluster, solid).
-style(cluster, striped).
-style(edge, bold).
-style(edge, dashed).
-style(edge, dotted).
-style(edge, solid).
-style(node, bold).
-style(node, dashed).
-style(node, diagonals).
-style(node, dotted).
-style(node, filled).
-style(node, rounded).
-style(node, solid).
-style(node, striped).
-style(node, wedged).
-
-
-% @tbd viewPort
-
diff --git a/gv_attrs.pl b/gv_attrs.pl
deleted file mode 100644
index dd0145a..0000000
--- a/gv_attrs.pl
+++ /dev/null
@@ -1,184 +0,0 @@
-:- module(
-  gv_attrs,
-  [
-    gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph])
-              % +Attr1:nvpair
-              % +Attr2:nvpair
-  ]
-).
-
-/** <module> GraphViz attributes v2
-
-@author Wouter Beek
-@version 2014/06
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(persistency)).
-:- use_module(library(xpath)).
-
-:- use_module(dcg(dcg_content)).
-:- use_module(dcg(dcg_generic)).
-:- use_module(generics(db_ext)).
-:- use_module(os(file_ext)).
-
-:- use_module(plHtml(html)).
-:- use_module(plHtml(html_table)).
-
-:- use_module(plGraphViz(gv_attr_type)). % DCGs implementing attribute types.
-
-:- db_add_novel(user:prolog_file_type(log, logging)).
-
-%! gv_attr(
-%!   ?Name:atom,
-%!   ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
-%!   ?Types:list(atom),
-%!   ?Default,
-%!   ?Minimum,
-%!   ?Notes:atom
-%! ) is nondet.
-
-:- persistent(
-  gv_attr(
-    name:atom,
-    used_by:list(oneof([cluster,edge,graph,node,subgraph])),
-    types:list(atom),
-    default,
-    minimum,
-    notes:atom
-  )
-).
-
-:- initialization(gv_attrs_init).
-
-
-
-gv_attr(Context, N=V, N=V):-
-  var(V), !,
-  gv_attr(N, UsedBy, _, V, _, _),
-  memberchk(Context, UsedBy).
-gv_attr(Context, N=V1, N=V2):-
-  gv_attr(N, UsedBy, Types, _, Minimum, _),
-  memberchk(Context, UsedBy),
-  member(Type, Types),
-  (
-    Type == style
-  ->
-    Dcg =.. [Type,Context,V1]
-  ;
-    Dcg =.. [Type,V1]
-  ),
-  once(dcg_phrase(Dcg, V2)),
-  check_minimum(V1, Minimum).
-
-check_minimum(_, ''):- !.
-check_minimum(V, Min1):-
-  atom_number(Min1, Min2),
-  Min2 =< V.
-
-
-
-% INITIALIZATION
-
-%! assert_gv_attr_row(+Row:list(atom)) is det.
-
-assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
-  dcg_phrase(translate_usedby(UsedBy2), UsedBy1),
-  once(dcg_phrase(translate_type(Types2), Types1)),
-  sort(UsedBy2, UsedBy3),
-  translate_default(Default1, Default2),
-  assert_gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes).
-
-
-%! gv_attrs_downloads is det.
-% Downloads the table describing GraphViz attributes from `graphviz.org`.
-
-gv_attrs_download:-
-  gv_attrs_url(Url),
-  download_html(Url, Dom, [html_dialect(html4),verbose(silent)]),
-
-  xpath(Dom, //table(@align=center), TableDom),
-  % @tbd This does not work, since in `record_name(Element, Name)`,
-  %      `Element` is a signleton list whereas a compound term is expected.
-  %%%%xpath(Dom, /html/body/table, TableDom),
-
-  html_to_table(TableDom, _, Rows),
-  maplist(assert_gv_attr_row, Rows).
-
-
-%! gv_attrs_file(-File:atom) is det.
-
-gv_attrs_file(File):-
-  absolute_file_name(
-    data(gv_attrs),
-    File,
-    [access(write),file_type(logging)]
-  ).
-
-
-%! gv_attrs_init is det.
-
-gv_attrs_init:-
-  gv_attrs_file(File),
-  safe_db_attach(File),
-  file_age(File, Age),
-  gv_attrs_update(Age).
-
-
-%! gv_attrs_update(+Age:float) is det.
-
-% The persistent store is still fresh.
-gv_attrs_update(Age):-
-  once(gv_attr(_, _, _, _, _, _)),
-  Age < 8640000, !.
-% The persistent store has become stale, so refresh it.
-gv_attrs_update(_):-
-  retractall_gv_attr(_, _, _, _, _, _),
-  gv_attrs_download.
-
-
-%! gv_attrs_url(-Url:url) is det.
-
-gv_attrs_url('http://www.graphviz.org/doc/info/attrs.html').
-
-
-%! safe_db_attach(+File:atom) is det.
-
-safe_db_attach(File):-
-  exists_file(File), !,
-  db_attach(File, []).
-safe_db_attach(File):-
-  touch_file(File),
-  safe_db_attach(File).
-
-
-%! translate_default(+Default1:atom, -Default2:atom) is det.
-
-% The empty string is represented by the empty atom.
-translate_default('""', ''):- !.
-% The absence of a default value is represented by an uninstantiated variable.
-translate_default('<none>', _):- !.
-translate_default(Default, Default).
-
-
-%! translate_type(-Types:list(atom))// is det.
-
-translate_type([H|T]) -->
-  {gv_attr_type(H)},
-  atom(H),
-  whites,
-  translate_type(T).
-translate_type([]) --> !, [].
-
-
-%! translated_usedby(
-%!   -UsedBy:list(oneof([cluster,edge,graph,node,subgraph]))
-%! )// is det.
-
-translate_usedby([cluster|T]) --> `C`, !, translate_usedby(T).
-translate_usedby([edge|T]) --> `E`, !, translate_usedby(T).
-translate_usedby([graph|T]) --> `G`, !, translate_usedby(T).
-translate_usedby([node|T]) --> `N`, !, translate_usedby(T).
-translate_usedby([subgraph|T]) --> `S`, !, translate_usedby(T).
-translate_usedby([]) --> [].
-
diff --git a/gv_color.pl b/gv_color.pl
deleted file mode 100644
index 19d6e05..0000000
--- a/gv_color.pl
+++ /dev/null
@@ -1,151 +0,0 @@
-:- module(
-  gv_color,
-  [
-    gv_color/2, % ?Colorscheme:oneof([svg,x11])
-                % ?Color:atom
-    color//1, % +Color:compound
-    colorList//1 % +Pairs:list(pair(compound,float))
-  ]
-).
-
-/** <module> GraphViz color
-
-@author Wouter Beek
-@tbd Color value `transparent` is only available in the output formats
-     ps, svg, fig, vmrl, and the bitmap formats.
-@version 2014/06
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(lists)).
-:- use_module(library(persistency)).
-:- use_module(library(xpath)).
-
-:- use_module(dcg(dcg_abnf)).
-:- use_module(dcg(dcg_cardinal)).
-:- use_module(dcg(dcg_content)).
-:- use_module(generics(db_ext)).
-:- use_module(os(file_ext)).
-:- use_module(sparql(sparql_char)).
-
-:- use_module(plHtml(html)).
-:- use_module(plHtml(html_table)).
-
-:- db_add_novel(user:prolog_file_type(log, logging)).
-
-%! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
-
-:- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)).
-
-:- initialization(gv_color_init).
-
-
-
-% color(+Color:compound)// .
-% A *color* is represented by a compound term of one of the following forms:
-%   1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)`
-%   2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)`
-%   3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))`
-
-color(rgb(Red,Green,Blue)) --> !,
-  `#`,
-  '#'(3, hex_color, [Red,Green,Blue]).
-color(rgbs(Red,Green,Blue,Alpha)) --> !,
-  `#`,
-  '#'(4, hex_color, [Red,Green,Blue,Alpha]).
-color(hsv(Hue,Saturation,Value)) --> !,
-  '#'(3, hsv_color, [Hue,Saturation,Value]).
-color(Name) -->
-  {gv_color(_, Name)},
-  atom(Name).
-
-hex_color(I) -->
-  {W1 is I / 16},
-  'HEX'(W1),
-  {W2 is I mod 16},
-  'HEX'(W2).
-
-hsv_color(D, Head, Tail):-
-  format(codes(Head,Tail), '~2f', [D]).
-
-
-%! colorList(+Pairs:list(pair(compound,float)))// .
-
-colorList(Pairs) -->
-  '+'(wc, Pairs).
-
-wc(Color-Float) -->
-  color(Color),
-  '?'(wc_weight(Float)).
-
-wc_weight(Float) -->
-  `;`,
-  float(Float).
-
-
-
-% INITIALIZATION
-
-%! gv_color_download is det.
-
-gv_color_download:-
-  gv_color_url(Url),
-  download_html(Url, Dom, [html_dialect(html4),verbose(silent)]),
-  xpath(Dom, //table(1), TableDom1),
-  xpath(Dom, //table(2), TableDom2),
-  maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]).
-
-assert_color_table(Colorscheme, TableDom):-
-  html_to_table(TableDom, _, Rows),
-  append(Rows, Cells),
-  forall(
-    member(Cell, Cells),
-    assert_gv_color(Colorscheme, Cell)
-  ).
-
-
-%! gv_color_file(-File:atom) is det.
-
-gv_color_file(File):-
-  absolute_file_name(
-    data(gv_color),
-    File,
-    [access(write),file_type(logging)]
-  ).
-
-
-%! gv_color_init is det.
-
-gv_color_init:-
-  gv_color_file(File),
-  safe_db_attach(File),
-  file_age(File, Age),
-  gv_color_update(Age).
-
-
-%! gv_color_update(+Age:float) is det.
-
-% The persistent store is still fresh.
-gv_color_update(Age):-
-  once(gv_color(_, _)),
-  Age < 8640000, !.
-% The persistent store has become stale, so refresh it.
-gv_color_update(_):-
-  retractall_gv_color(_, _),
-  gv_color_download.
-
-
-%! gv_color_url(-Url:url) is det.
-
-gv_color_url('http://www.graphviz.org/doc/info/colors.html').
-
-
-%! safe_db_attach(+File:atom) is det.
-
-safe_db_attach(File):-
-  exists_file(File), !,
-  db_attach(File, []).
-safe_db_attach(File):-
-  touch_file(File),
-  safe_db_attach(File).
-
diff --git a/gv_dot.pl b/gv_dot.pl
deleted file mode 100644
index 68443ba..0000000
--- a/gv_dot.pl
+++ /dev/null
@@ -1,496 +0,0 @@
-:- module(
-  gv_dot,
-  [
-    gv_graph//1 % +GraphTerm:compound
-  ]
-).
-
-/** <module> GraphViz DOT generator
-
-DCG rules for GraphViz DOT file generation.
-
-Methods for writing to the GraphViz DOT format.
-
-In GraphViz vertices are called 'nodes'.
-
-@author Wouter Beek
-@see http://www.graphviz.org/content/dot-language
-@version 2013/07, 2013/09, 2014/03-2014/06
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(lists)).
-:- use_module(library(ordsets)).
-
-:- use_module(dcg(dcg_abnf)).
-:- use_module(dcg(dcg_ascii)).
-:- use_module(dcg(dcg_content)).
-:- use_module(dcg(dcg_generic)).
-:- use_module(dcg(dcg_meta)).
-:- use_module(dcg(dcg_os)).
-
-:- use_module(plGraphViz(gv_attrs)).
-:- use_module(plGraphViz(gv_html)).
-:- use_module(plGraphViz(gv_numeral)).
-
-
-
-%! gv_attribute(+Attribute:nvpair)// is det.
-% A single GraphViz attribute.
-% We assume that the attribute has already been validated.
-
-gv_attribute(Name=Val) -->
-  gv_id(Name), `=`, gv_id(Val), `;`.
-
-
-%! gv_attribute_list(
-%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
-%!   +GraphAttributes:list(nvpair),
-%!   +Attributes:list(nvpair)
-%! )// .
-% ~~~{.abnf}
-% attr_list = "[" [a_list] "]" [attr_list]
-% a_list = ID "=" ID [","] [a_list]
-% ~~~
-
-% Attributes occur between square brackets.
-gv_attribute_list(Context, _, Attrs1) -->
-  {maplist(gv_attr(Context), Attrs1, Attrs2)},
-  bracketed(square, '*'(gv_attribute, Attrs2)).
-
-
-%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
-% ~~~
-% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
-% ~~~
-
-gv_compass_pt('_') --> `_`.
-gv_compass_pt(c) --> `c`.
-gv_compass_pt(e) --> `e`.
-gv_compass_pt(n) --> `n`.
-gv_compass_pt(ne) --> `ne`.
-gv_compass_pt(nw) --> `nw`.
-gv_compass_pt(s) --> `s`.
-gv_compass_pt(se) --> `se`.
-gv_compass_pt(sw) --> `sw`.
-gv_compass_pt(w) --> `w`.
-
-
-%! gv_edge_operator(+Directedness:boolean)// .
-% The binary edge operator between two vertices.
-% The operator that is used depends on whether the graph is directed or
-% undirected.
-%
-% @arg Directedness Whether an edge is directed (operator `->`) or
-%                   undirected (operator `--`).
-
-gv_edge_operator(false) --> !, `--`.
-gv_edge_operator(true) --> arrow(right, 2).
-
-
-%! gv_edge_statement(
-%!   +Indent:nonneg,
-%!   +Directedness:boolean,
-%!   +GraphAttributes:list(nvpair),
-%!   +EdgeTerm:compound
-%! )// is det.
-% A GraphViz statement describing an edge.
-%
-% @arg Indent The indentation level at which the edge statement is written.
-% @arg Directedness Whether the graph is directed or not.
-% @arg GraphAttributes The attributes of the graph. Some of these attributes
-%      may be used in the edge statement (e.g., the colorscheme).
-% @arg EdgeTerm A compound term in the GIFormat, representing an edge.
-%
-% @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1
-%      at the from and/or to location.
-% @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
-
-gv_edge_statement(I, Directedness, GAttrs, edge(FromId,ToId,EAttrs)) -->
-  indent(I),
-  gv_node_id(FromId), ` `,
-
-  gv_edge_operator(Directedness), ` `,
-
-  gv_node_id(ToId), ` `,
-
-  % We want `colorscheme/1` from the edges and
-  % `directionality/1` from the graph.
-  gv_attribute_list(edge, GAttrs, EAttrs),
-  newline.
-
-
-%! gv_generic_attributes_statement(
-%!   +Kind:oneof([edge,graph,node]),
-%!   +Indent:integer,
-%!   +GraphAttributes:list(nvpair),
-%!   +CategoryAttributes:list(nvpair)
-%! )//
-% A GraphViz statement describing generic attributes for a category of items.
-%
-% @arg Kind The category of items for to the attributes apply.
-%      Possible values: `edge`, `graph`, and `node`.
-% @arg Indent An integer indicating the number of tabs.
-% @arg GraphAttributes A list of name-value pairs.
-% @arg CategoryAttributes A list of name-value pairs.
-%
-% ~~~
-% attr_stmt = (graph / node / edge) attr_list
-% ~~~
-
-gv_generic_attributes_statement(_, _, _, []) --> [], !.
-gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
-  indent(I),
-  gv_kind(Kind), ` `,
-  gv_attribute_list(Kind, GraphAttrs, KindAttrs), newline.
-
-
-%! gv_graph(+GraphTerm:compound)//
-% The follow graph attributes are supported,
-% beyond the GraphViz attributes for graphs:
-%   * `directedness(+boolean)`
-%      Whether the graph is directed (`true`) or undirected (`false`).
-%      Default: `false`.
-%   * `name(+GraphName:atom)`
-%   * `strict(+StrictGraph:boolean)`
-%      This forbids the creation of self-arcs and multi-edges;
-%      they are ignored in the input file.
-%      Only in combinattion with directionality `directed`.
-%
-% ~~~{.abnf}
-% graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
-% ~~~
-%
-% `GraphTerm` is a compound term of the following form:
-% ~~~{.pl}
-% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
-% ~~~
-%
-% `RankedVertexTerms` is a list of compound terms of the following form:
-% ~~~{.pl}
-% rank(RankNode,ContentNodes)
-% ~~~
-%
-% @tbd Add support for subgraphs (arbitrary nesting).
-% @tbd Add support for escape strings:
-%      http://www.graphviz.org/doc/info/attrs.html#k:escString
-% @tbd Assert attributes that are generic with respect to a subgraph.
-% @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
-
-gv_graph(graph(VTerms, ETerms, GAttrs)) -->
-  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
-
-gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
-  {
-    shared_attributes(VTerms, SharedVAttrs, NewVTerms),
-    shared_attributes(ETerms, SharedEAttrs, NewETerms),
-    select_nvpair(strict=Strict, GAttrs1, GAttrs2, false),
-    select_nvpair(directedness=Directedness, GAttrs2, GAttrs3, true),
-    select_nvpair(name=GName, GAttrs3, GAttrs4, noname),
-    add_default_nvpair(GAttrs4, overlap, false, GAttrs5),
-    I = 0
-  },
-
-  % The first statement in the GraphViz output.
-  % States that this file represents a graph according to the GraphViz format.
-  indent(I),
-  gv_strict(Strict),
-  gv_graph_type(Directedness), ` `,
-  gv_id(GName), ` `,
-  bracketed(
-    curly,
-    gv_graph0(
-      I,
-      NewVTerms, SharedVAttrs, RankedVTerms,
-      NewETerms, SharedEAttrs,
-      Directedness, GAttrs5
-    )
-  ),                                                      
-  newline.
-
-gv_graph0(
-  I,
-  NewVTerms, SharedVAttrs, RankedVTerms,
-  NewETerms, SharedEAttrs,
-  Directedness, GAttrs
-) -->
-  newline,
-
-  % The following lines are indented.
-  {NewI is I + 1},
-
-  % Attributes that apply to the graph as a whole.
-  gv_generic_attributes_statement(graph, NewI, GAttrs, GAttrs),
-
-  % Attributes that are the same for all nodes.
-  gv_generic_attributes_statement(node, NewI, GAttrs, SharedVAttrs),
-
-  % Attributes that are the same for all edges.
-  gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs),
-
-  % Only add a newline if some content was written in the previous three
-  % lines.
-  ({(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])} -> `` ; newline),
-
-  % The list of GraphViz nodes.
-  '*'(gv_node_statement(NewI, GAttrs), NewVTerms),
-  ({NewVTerms == []} -> `` ; newline),
-
-  % The ranked GraphViz nodes (displayed at the same height).
-  '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms),
-  ({RankedVTerms == []} -> `` ; newline),
-
-  {
-    findall(
-      edge(FromId,ToId,[]),
-      (
-        nth0(Index1, RankedVTerms, rank(vertex(FromId,_,_),_)),
-        nth0(Index2, RankedVTerms, rank(vertex(ToId,_,_),_)),
-        % We assume that the rank vertices are nicely ordered.
-        succ(Index1, Index2)
-      ),
-      RankEdges
-    )
-  },
-
-  % The rank edges.
-  '*'(gv_edge_statement(NewI, Directedness, GAttrs), RankEdges),
-
-  % The non-rank edges.
-  '*'(gv_edge_statement(NewI, Directedness, GAttrs), NewETerms),
-
-  % Note that we do not include a newline here.
-
-  % We want to indent the closing curly brace.
-  indent(I).
-
-
-%! gv_graph_type(+Directedness:boolean)// .
-% The type of graph that is represented.
-
-gv_graph_type(false) --> `graph`.
-gv_graph_type(true) --> `digraph`.
-
-
-%! gv_id(?Atom:atom)// is det.
-% Parse a GraphViz identifier.
-% There are 4 variants:
-%   1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters,
-%      underscores (`_`) or digits (`[0-9]`), not beginning with a digit.
-%   2. A numeral `[-]?(.[0-9]+ | [0-9]+(.[0-9]*)? )`.
-%   3. Any double-quoted string (`"..."`) possibly containing
-%      escaped quotes (`\"`).
-%      In quoted strings in DOT, the only escaped character is
-%      double-quote (`"`). That is, in quoted strings, the dyad `\"`
-%      is converted to `"`. All other characters are left unchanged.
-%      In particular, `\\` remains `\\`.
-%      Layout engines may apply additional escape sequences.
-%   4. An HTML string (`<...>`).
-%
-% @tbd Add support for HTML-like labels:
-%      http://www.graphviz.org/doc/info/shapes.html#html
-%      This requires an XML grammar!
-
-% HTML strings (variant 4).
-gv_id(Atom) -->
-  dcg_atom_codes(gv_html_like_label, Atom), !.
-% Alpha-numeric strings (variant 1).
-gv_id(Atom) -->
-  {atom_codes(Atom, [H|T])},
-  gv_id_first(H),
-  gv_id_rest(T), !,
-  % Variant 1 identifiers should not be (case-variants of) a
-  % GraphViz keyword.
-  {\+ gv_keyword([H|T])}.
-% Numerals (variant 2)
-gv_id(N) -->
-  {number(N)}, !,
-  gv_numeral(N).
-% Double-quoted strings (variant 3).
-% The quotes are already part of the given atom.
-gv_id(Atom) -->
-  {
-    atom_codes(Atom, [H|T]),
-    append(S, [H], T)
-  },
-  dcg_between(double_quote(H), gv_quoted_string(S)), !.
-% Double-quoted strings (variant 3).
-% The quotes are not in the given atom. They are written anyway.
-gv_id(Atom) -->
-  quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !.
-
-gv_id_first(X) --> ascii_letter(X).
-gv_id_first(X) --> underscore(X).
-
-gv_id_rest([]) --> [].
-gv_id_rest([H|T]) -->
-  (ascii_alpha_numeric(H) ; underscore(H)),
-  gv_id_rest(T).
-
-
-%! gv_keyword(+Codes:list(code)) is semidet.
-% Succeeds if the given codes for a GraphViz reserved keyword.
-
-gv_keyword(Codes):-
-  % Obviously, the keywords do not occur on the difference list input.
-  % So we must use phrase/[2,3].
-  phrase(gv_keyword, Codes).
-
-%! gv_keyword// .
-% GraphViz has reserved keywords that cannot be used as identifiers.
-% GraphViz keywords are case-insensitive.
-
-gv_keyword --> `digraph`.
-gv_keyword --> `edge`.
-gv_keyword --> `graph`.
-gv_keyword --> `node`.
-gv_keyword --> `strict`.
-gv_keyword --> `subgraph`.
-
-
-%! gv_kind(+Kind:oneof([edge,graph,node]))// .
-
-gv_kind(edge) --> `edge`.
-gv_kind(graph) --> `graph`.
-gv_kind(node) --> `node`.
-
-
-%! gv_node_id(+NodeId:atom)// .
-% GraphViz node identifiers can be of the following two types:
-%   1. A GraphViz identifier, see gv_id//1.
-%   2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0.
-%
-% @tbd Add support for GraphViz port indicators
-%      inside GraphViz node identifiers.
-
-gv_node_id(Id) -->
-  gv_id(Id).
-%gv_node_id(_) -->
-%  gv_id(_),
-%  gv_port.
-
-
-%! gv_node_statement(
-%!   +Indent:integer,
-%!   +GraphAttributes,
-%!   +VertexTerm:compound
-%! )// .
-% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes').
-
-gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
-  indent(I),
-  gv_node_id(Id), ` `,
-  gv_attribute_list(node, GraphAttrs, VAttrs), newline.
-
-
-gv_port -->
-  gv_port_location,
-  '?'(gv_port_angle).
-gv_port -->
-  gv_port_angle,
-  '?'(gv_port_location).
-gv_port -->
-  `:`,
-  gv_compass_pt(_).
-
-gv_port_angle -->
-  `@`,
-  gv_id(_).
-
-gv_port_location -->
-  `:`,
-  gv_id(_).
-gv_port_location -->
-  `:`,
-  bracketed(
-    round,
-    (
-      gv_id(_),
-      `,`,
-      gv_id(_)
-    )
-  ).
-
-
-gv_quoted_string([]) --> [].
-% Just to be sure, we do not allow the double quote
-% that closes the string to be escaped.
-gv_quoted_string([X]) -->
-  {X \== 92}, !,
-  [X].
-% A double quote is only allowed if it is escaped by a backslash.
-gv_quoted_string([92,34|T]) --> !,
-  gv_quoted_string(T).
-% Add the backslash escape character.
-gv_quoted_string([34|T]) --> !,
-  `\\\"`,
-  gv_quoted_string(T).
-% All other characters are allowed without escaping.
-gv_quoted_string([H|T]) -->
-  [H],
-  gv_quoted_string(T).
-
-
-gv_ranked_node_collection(
-  I,
-  GraphAttrs,
-  rank(Rank_V_Term,Content_V_Terms)
-) -->
-  indent(I),
-  bracketed(curly, (
-    newline,
-
-    % The rank attribute.
-    {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), `;`, newline,
-
-    '*'(gv_node_statement(NewI, GraphAttrs), [Rank_V_Term|Content_V_Terms]),
-
-    % We want to indent the closing curly brace.
-    indent(I)
-  )),
-  newline.
-
-
-%! gv_strict(+Strict:boolean)// is det.
-% The keyword denoting that the graph is strict, i.e., has no self-arcs and
-% no multi-edges.
-% This only applies to directed graphs.
-
-gv_strict(false) --> [].
-gv_strict(true) --> `strict `.
-
-
-
-% Helpers
-
-add_default_nvpair(Attrs1, N, Default, Attrs2):-
-  add_default_nvpair(Attrs1, N, Default, _, Attrs2).
-
-add_default_nvpair(Attrs, N, _, V, Attrs):-
-  memberchk(N=V, Attrs), !.
-add_default_nvpair(Attrs1, N, Default, Default, Attrs2):-
-  ord_add_element(Attrs1, N=Default, Attrs2).
-
-select_nvpair(N=V, Attrs1, Attrs2, _):-
-  memberchk(N=V, Attrs1), !,
-  select(N=V, Attrs1, Attrs2).
-select_nvpair(_=Default, Attrs, Attrs, Default).
-
-
-extract_shared([], []):- !.
-extract_shared(Argss, Shared):-
-  ord_intersection(Argss, Shared).
-
-remove_shared_attributes(Shared, Args1, Args2):-
-  ord_subtract(Args1, Shared, Args2).
-
-shared_attributes(Terms1, Shared, Terms2):-
-  maplist(term_components(Func), Terms1, Args1, Args2, Args3a),
-  extract_shared(Args3a, Shared),
-  maplist(remove_shared_attributes(Shared), Args3a, Args3b),
-  maplist(term_components(Func), Terms2, Args1, Args2, Args3b).
-
-term_components(Func, Term, Arg1, Arg2, Arg3):-
-  Term =.. [Func,Arg1,Arg2,Arg3].
-
diff --git a/gv_file.pl b/gv_file.pl
deleted file mode 100644
index 9eaf66b..0000000
--- a/gv_file.pl
+++ /dev/null
@@ -1,206 +0,0 @@
-:- module(
-  gv_file,
-  [
-    file_to_gv/2, % +File:atom
-                  % +Options:list(nvpair)
-    file_to_gv/3, % +FromFile:atom
-                  % ?ToFile:atom
-                  % +Options:list(nvpair)
-    gif_to_gv_file/3, % +GraphInterchangeFormat:compound
-                      % +ToFile:atom
-                      % +Options:list(nvpair)
-    gif_to_svg_dom/3, % +GraphInterchangeFormat:compound
-                      % -SvgDom:list(compound)
-                      % +Options:list(nvpair)
-    open_dot/1 % +File:file
-  ]
-).
-
-/** <module> GraphViz file
-
-Predicates for converting GIF-formatted terms
-into GraphViz output files or SVG DOM structures.
-
-Also converts between GraphViz DOT formatted files
-and GraphViz output files or SVG DOM structures.
-
-@author Wouter Beek
-@version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07
-*/
-
-:- use_module(library(option)).
-:- use_module(library(process)).
-:- use_module(library(predicate_options)). % Declarations.
-
-:- use_module(generics(codes_ext)).
-:- use_module(generics(db_ext)).
-:- use_module(os(file_ext)).
-:- use_module(os(run_ext)).
-:- use_module(os(safe_file)).
-:- use_module(svg(svg_file)).
-
-:- use_module(plGraphViz(gv_dot)).
-
-:- dynamic(user:file_type_program/2).
-:- multifile(user:file_type_program/2).
-
-:- dynamic(user:module_uses/2).
-:- multifile(user:module_uses/2).
-
-:- dynamic(user:prolog_file_type/2).
-:- multifile(user:prolog_file_type/2).
-
-% Register DOT.
-:- db_add_novel(user:prolog_file_type(dot, dot)).
-:- db_add_novel(user:prolog_file_type(dot, graphviz)).
-:- db_add_novel(user:file_type_program(dot, dotty)).
-:- db_add_novel(user:file_type_program(dot, dotx)).
-:- db_add_novel(user:module_uses(gv_file, file_type(dot))).
-
-% Register JPG/JPEG.
-:- db_add_novel(user:prolog_file_type(jpeg, jpeg)).
-:- db_add_novel(user:prolog_file_type(jpeg, graphviz_output)).
-:- db_add_novel(user:prolog_file_type(jpg, jpeg)).
-:- db_add_novel(user:prolog_file_type(jpg, graphviz_output)).
-
-% Register PDF.
-:- db_add_novel(user:prolog_file_type(pdf, pdf)).
-:- db_add_novel(user:prolog_file_type(pdf, graphviz_output)).
-
-% Register PNG.
-:- db_add_novel(user:prolog_file_type(png, png)).
-:- db_add_novel(user:prolog_file_type(png, graphviz_output)).
-
-% Register SVG.
-:- db_add_novel(user:prolog_file_type(svg, graphviz_output)).
-:- db_add_novel(user:prolog_file_type(svg, svg)).
-
-% Register XDOT.
-:- db_add_novel(user:prolog_file_type(xdot, graphviz_output)).
-:- db_add_novel(user:prolog_file_type(xdot, xdot)).
-
-:- predicate_options(codes_to_gv_file/3, 3, [
-     pass_to(file_to_gv/3, 3)
-   ]).
-:- predicate_options(file_to_gv/2, 2, [
-     pass_to(file_to_gv/3, 3)
-   ]).
-:- predicate_options(file_to_gv/3, 3, [
-     method(+oneof([dot,sfdp])),
-     to_file_type(+oneof([dot,jpeg,pdf,svg,xdot]))
-   ]).
-:- predicate_options(gif_to_svg_dom/3, 3, [
-     pass_to(gif_to_gv_file/3, 3)
-   ]).
-:- predicate_options(gif_to_gv_file/3, 3, [
-     pass_to(codes_to_gv_file/3, 3)
-   ]).
-
-
-
-%! codes_to_gv_file(
-%!   +Codes:list(code),
-%!   +ToFile:atom,
-%!   +Options:list(nvpair)
-%! ) is det.
-
-codes_to_gv_file(Codes, ToFile, Options):-
-  access_file(ToFile, write),
-  absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]),
-  setup_call_cleanup(
-    open(TmpFile, write, Write, [encoding(utf8)]),
-    put_codes(Write, Codes),
-    close(Write)
-  ),
-  file_to_gv(TmpFile, ToFile, Options),
-  delete_file(TmpFile).
-
-
-%! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det.
-
-file_to_gv(FromFile, Options):-
-  file_to_gv(FromFile, _, Options).
-
-%! file_to_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det.
-% Converts a GraphViz DOT file to an image file, using a specific
-% visualization method.
-
-file_to_gv(FromFile, ToFile, Options):-
-  option(to_file_type(dot), Options), !,
-  rename_file(FromFile, ToFile).
-file_to_gv(FromFile, ToFile, Options):-
-  % The method option.
-  option(method(Method), Options, dot),
-  must_be(oneof([dot,sfdp]), Method),
-
-  % The file type option.
-  option(to_file_type(ToFileType), Options, pdf),
-  prolog_file_type(ToExtension, ToFileType),
-  prolog_file_type(ToExtension, graphviz_output), !,
-
-  % The output file is either given or created.
-  (
-    var(ToFile)
-  ->
-    user:prolog_file_type(ToExtension, ToFileType),
-    file_alternative(FromFile, _, _, ToExtension, ToFile)
-  ;
-    is_absolute_file_name(ToFile),
-    % The given output file must match a certain file extension.
-    file_name_extension(_, ToExtension, ToFile)
-  ),
-  % Now that we have the output file we can prevent the
-  % file type / file extension translation predicates from bakctracking.
-  !,
-
-  % Run the GraphViz conversion command in the shell.
-  format(atom(OutputType), '-T~w', [ToExtension]),
-  process_create(
-    path(Method),
-    [OutputType,FromFile,'-o',ToFile],
-    [process(PID)]
-  ),
-  process_wait(PID, exit(ShellStatus)),
-  exit_code_handler('GraphViz', ShellStatus).
-
-
-%! gif_to_gv_file(+Gif:compound, +ToFile:atom, +Options:list(nvpair)) is det.
-% Returns a file containing a GraphViz visualization of the given graph.
-%
-% The following options are supported:
-%   * =|method(+Method:oneof([dot,sfdp])|=
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
-%   * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|=
-%     The file type of the generated GraphViz file.
-%     Default: `pdf`.
-
-gif_to_gv_file(Gif, ToFile, Options):-
-  once(phrase(gv_graph(Gif), Codes)),
-  codes_to_gv_file(Codes, ToFile, Options).
-
-
-%! gif_to_svg_dom(
-%!   +GraphInterchangeFormat:compound,
-%!   -SvgDom:list(compound),
-%!   +Options:list(nvpair)
-%! ) is det.
-
-gif_to_svg_dom(Gif, SvgDom, Options1):-
-  % Make sure the file type of the output file is SvgDom.
-  merge_options([to_file_type=svg], Options1, Options2),
-  gif_to_gv_file(Gif, ToFile, Options2),
-  file_to_svg(ToFile, SvgDom),
-  safe_delete_file(ToFile).
-
-
-%! open_dot(+File:atom) is det.
-% Opens the given DOT file.
-%
-% @tbd Test support on Windows.
-% @tbd Test support on OS-X.
-
-open_dot(File):-
-  once(find_program_by_file_type(dot, Program)),
-  run_program(Program, [File]).
-
diff --git a/gv_gif.pl b/gv_gif.pl
deleted file mode 100644
index d59e5f8..0000000
--- a/gv_gif.pl
+++ /dev/null
@@ -1,221 +0,0 @@
-:- module(
-  gv_gif,
-  [
-    create_gif/3, % +Edges:ordset
-                  % -Gif:compound
-                  % +Options:list(nvpair)
-    create_gif/4 % +Vertices:ordset
-                 % +Edges:ordset
-                 % -Gif:compound
-                 % +Options:list(nvpair)
-  ]
-).
-
-/** <module> GraphViz Graph Interchange Format (GIF)
-
-Support for creating GIF representations.
-
-@author Wouter Beek
-@version 2014/06-2014/07
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(lambda)).
-:- use_module(library(option)).
-:- use_module(library(ordsets)).
-:- use_module(library(predicate_options)). % Declarations.
-
-:- use_module(generics(list_ext)).
-:- use_module(generics(option_ext)).
-:- use_module(graph_theory(graph_theory)).
-
-:- use_module(plRdf(rdf_name)). % Meta-DCG.
-
-:- predicate_options(create_gif/3, 3, [
-     pass_to(create_gif/4, 4)
-   ]).
-:- predicate_options(create_gif/4, 4, [
-     pass_to(edge_term/3, 3),
-     pass_to(graph_attributes/2, 2),
-     pass_to(vertex_term/3, 3)
-   ]).
-:- predicate_options(edge_term/3, 3, [
-     edge_arrowhead(+atom),
-     edge_color(+atom),
-     edge_label(+atom),
-     edge_style(+atom)
-   ]).
-:- predicate_options(graph_attributes/2, 2, [
-     directedness(+boolean),
-     graph_colorscheme(+oneof([none,svg,x11])),
-     graph_label(+atom)
-   ]).
-
-:- predicate_options(vertex_term/3, 3, [
-     vertex_color(+atom),
-     vertex_coordinates(+atom),
-     vertex_image(+atom),
-     vertex_label(+atom),
-     vertex_peripheries(+atom),
-     vertex_shape(+atom)
-   ]).
-
-
-
-%! create_gif(+Edges:ordset, -Gif:compound, +Options:list(nvpair)) is det.
-
-create_gif(Es, Gif, Options):-
-  graph_theory:edges_to_vertices(Es, Vs),
-  create_gif(Vs, Es, Gif, Options).
-
-%! create_gif(
-%!   +Vertices:ordset,
-%!   +Edges:ordset,
-%!   -Gif:compound,
-%!   +Options:list(nvpair)
-%! ) is det.
-% The following options are supported:
-%   * =|graph_colorscheme(+oneof([none,svg,x11]))
-%     No default.
-%   * =|graph_label(+LabelFunction)|=
-%     The functions that assigns names to graphs.
-%     No default.
-
-create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):-
-  % Vertex terms.
-  maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Options), Vs, VTerms),
-
-  % Edge terms.
-  maplist(\E^ETerm^edge_term(Vs, E, ETerm, Options), Es, ETerms),
-
-  % Graph attributes.
-  graph_attributes(GAttrs, Options).
-
-
-%! edge_term(
-%!   +Vertices:ordset,
-%!   +Edge:pair,
-%!   -EdgeTerm:compound,
-%!   +Options:list(nvpair)
-%! ) is det.
-% The following options are supported:
-%   * =|edge_arrowhead(+atom)|=
-%   * =|edge_color(+atom)|=
-%   * =|edge_label(+atom)|=
-%   * =|edge_style(+atom)|=
-
-edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):-
-  graph_theory:edge_components(E, FromV, ToV),
-  nth0chk(FromId, Vs, FromV),
-  nth0chk(ToId, Vs, ToV),
-
-  % Arrowhead
-  if_option(edge_arrowhead(ArrowheadFunction), Options,
-    call(ArrowheadFunction, E, EArrowhead)
-  ),
-  % Color.
-  if_option(edge_color(ColorFunction), Options,
-    call(ColorFunction, E, EColor)
-  ),
-  % Label.
-  if_option(edge_label(LabelFunction), Options,
-    call(LabelFunction, E, ELabel)
-  ),
-  % Style.
-  if_option(edge_style(StyleFunction), Options,
-    call(StyleFunction, E, EStyle)
-  ),
-
-  merge_options(
-    [arrowhead=EArrowhead,color=EColor,label=ELabel,style=EStyle],
-    EAttrs
-  ).
-
-
-%! graph_attributes(
-%!   -GraphAttributes:list(nvpair),
-%!   +Options:list(nvpair)
-%! ) is det.
-% The following options are supported:
-%   * =|directedness(+boolean)|=
-%     Whether the graph is directed (`true`) or undirected (`false`).
-%     Default: `false`.
-%   * =|graph_colorscheme(+oneof([none,svg,x11]))|=
-%     The colorscheme from which the color in this graph are taken.
-%     Default: `svg`.
-%   * =|graph_label(+atom)|=
-%     The graph label.
-%     No default.
-
-graph_attributes(GAttrs, Options):-
-  % Directedness.
-  option(directedness(Directedness), Options, false),
-  % Colorscheme.
-  if_option(graph_colorscheme(Colorscheme), Options, true),
-  % Label.
-  if_option(graph_label(GLabel), Options, true),
-
-  merge_options(
-    [colorscheme=Colorscheme,directedness=Directedness,label=GLabel],
-    GAttrs
-  ).
-
-
-%! vertex_term(
-%!   +Vertices:ordset,
-%!   +Vertex,
-%!   -VertexTerm:compound,
-%!   +Options:list(nvpair)
-%! ) is det.
-% The following options are supported:
-%   * =|vertex_color(+ColorFunction)|=
-%     A function that assigns colors to vertices.
-%     No default.
-%   * =|vertex_image(+ImageFunction)|=
-%     A function that assinges images to vertices.
-%     No default.
-%   * =|vertex_label(+LabelFunction)|=
-%     A function that assigns labels to vertices.
-%     No default.
-%   * =|vertex_peripheries(+PeripheriesFunction)|=
-%     A function that assinges peripheries to vertices.
-%     No default.
-%   * =|vertex_shape(+ShapeFunction)|=
-%     A function that assinges shapes to vertices.
-%     No default.
-
-vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):-
-  nth0chk(Id, Vs, V),
-
-  % Color.
-  if_option(vertex_color(ColorFunction), Options,
-    call(ColorFunction, V, VColor)
-  ),
-  % Image.
-  if_option(image(ImageFunction), Options,
-    call(ImageFunction, V, VImage)
-  ),
-  % Label.
-  if_option(vertex_label(LabelFunction), Options,
-    call(LabelFunction, V, VLabel)
-  ),
-  % Peripheries.
-  if_option(vertex_peripheries(PeripheriesFunction), Options,
-    call(PeripheriesFunction, V, VPeripheries)
-  ),
-  % Shape.
-  if_option(vertex_shape(ShapeFunction), Options,
-    call(ShapeFunction, V, VShape)
-  ),
-
-  merge_options(
-    [
-      color=VColor,
-      image=VImage,
-      label=VLabel,
-      peripheries=VPeripheries,
-      shape=VShape
-    ],
-    VAttrs
-  ).
-
diff --git a/gv_html.pl b/gv_html.pl
deleted file mode 100644
index b8d3190..0000000
--- a/gv_html.pl
+++ /dev/null
@@ -1,60 +0,0 @@
-:- module(
-  gv_html,
-  [
-    gv_html_like_label//1 % +Codes:list(code)
-  ]
-).
-
-/** <module> GraphViz HTML
-
-@author Wouter Beek
-@version 2013/07, 2013/09, 2014/03-2014/06
-*/
-
-:- use_module(dcg(dcg_content)).
-
-:- use_module(plHtml(html_dcg)).
-
-
-
-%! gv_html_label(+Codes:list(code))// .
-%
-% @see http://www.graphviz.org/doc/info/shapes.html#html
-
-gv_html_label --> gv_html_text, !.
-gv_html_label --> gv_html_table, !.
-gv_html_label --> [].
-
-gv_html_like_label --> bracketed(angular, gv_html_label).
-
-gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
-
-gv_html_table --> html_element(table, _, gv_html_rows).
-gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
-
-gv_html_rows --> gv_html_row, gv_html_rows.
-gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
-gv_html_rows --> gv_html_row.
-
-gv_html_row --> html_element(tr, _, gv_html_cells).
-
-gv_html_cell --> html_element(td, _, gv_html_label).
-gv_html_cell --> html_element(td, _, html_element(img, _)).
-
-gv_html_cells --> gv_html_cell, gv_html_cells.
-gv_html_cells --> gv_html_cell.
-gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
-
-gv_html_text --> gv_html_textitem, gv_html_text.
-gv_html_text --> gv_html_textitem.
-
-gv_html_textitem --> html_string, !.
-gv_html_textitem --> html_entity, !.
-gv_html_textitem --> html_element(br, _), !.
-gv_html_textitem --> html_element(font, _, gv_html_text), !.
-gv_html_textitem --> html_element(i, _, gv_html_text), !.
-gv_html_textitem --> html_element(b, _, gv_html_text), !.
-gv_html_textitem --> html_element(u, _, gv_html_text), !.
-gv_html_textitem --> html_element(sub, _, gv_html_text), !.
-gv_html_textitem --> html_element(sup, _, gv_html_text), !.
-
diff --git a/gv_numeral.pl b/gv_numeral.pl
deleted file mode 100644
index 9b82fc0..0000000
--- a/gv_numeral.pl
+++ /dev/null
@@ -1,71 +0,0 @@
-:- module(
-  gv_numeral,
-  [
-    gv_numeral//1 % ?Value:number
-  ]
-).
-
-/** <module> GraphViz numeral
-
-@author Wouter Beek
-@version 2014/05-2014/06
-*/
-
-:- use_module(dcg(dcg_abnf)).
-:- use_module(dcg(dcg_cardinal)).
-:- use_module(math(math_ext)).
-
-
-
-%! gv_numeral(?Value:number)// .
-% ~~~{.bnf}
-% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
-% ~~~
-
-gv_numeral(N) -->
-  {nonvar(N)},
-  {number_sign_parts(N, Sign, Abs)},
-  ({Sign =:= -1} -> `-` ; ``),
-  gv_numeral_abs(Abs).
-gv_numeral(N) -->
-  {var(N)},
-  'sign?'(Sign),
-  gv_numeral_abs(Abs),
-  {number_sign_parts(N, Sign, Abs)}.
-
-
-gv_numeral_abs(N) -->
-  {nonvar(N)},
-  {number_integer_parts(N, N1, N2)},
-  (
-    {N2 =:= 0}
-  ->
-    integer(N1)
-  ;
-    {N1 =:= 0}
-  ->
-    `.`,
-    integer(N2)
-  ;
-    integer(N1),
-    '?'((`.`, 'integer?'(N2)))
-  ).
-gv_numeral_abs(N) -->
-  {var(N)},
-  (
-    `.`,
-    integer(N2)
-  ->
-    {N1 = 0}
-  ;
-    integer(N1),
-    (
-      `.`
-    ->
-      'integer?'(N2)
-    ;
-      {N2 = 0}
-    )
-  ),
-  {number_integer_parts(N, N1, N2)}.
-
diff --git a/gv_tree.pl b/gv_tree.pl
deleted file mode 100644
index afeb8f6..0000000
--- a/gv_tree.pl
+++ /dev/null
@@ -1,43 +0,0 @@
-:- module(
-  gv_tree,
-  [
-    tree_to_gv_file/3 % +Tree:compound
-                      % ?ToFile:atom
-                      % +Options:list(nvpair)
-  ]
-).
-
-/** <module> GraphViz tree
-
-Export trees to GraphViz.
-
-@author Wouter Beek
-@version 2014/06-2014/07
-*/
-
-:- use_module(library(aggregate)).
-
-:- use_module(generics(trees)).
-
-:- use_module(plGraphViz(gv_file)).
-:- use_module(plGraphViz(gv_gif)).
-
-
-%! tree_to_gv_file(
-%!   +Tree:compound,
-%!   ?ToFile:atom,
-%!   +Options:list(nvpair)
-%! ) is det.
-% Stores the given tree term into a GraphViz file.
-%
-% Options are passed on to create_gif/3 and gif_to_gv_file/3.
-
-tree_to_gv_file(Tree, ToFile, Options):-
-  tree_to_gif(Tree, Gif, Options),
-  gif_to_gv_file(Gif, ToFile, Options).
-
-
-tree_to_gif(H-T, Gif, Options):-
-  tree_to_vertices_edges(Tree, Vs, Es),
-  create_gif(Vs, Es, Gif, Options).
-
diff --git a/index.pl b/index.pl
deleted file mode 100644
index 7461d13..0000000
--- a/index.pl
+++ /dev/null
@@ -1,2 +0,0 @@
-% Index of project plGraphViz (empty).
-
diff --git a/load.pl b/load.pl
deleted file mode 100644
index 4b117d1..0000000
--- a/load.pl
+++ /dev/null
@@ -1,12 +0,0 @@
-% Load file for plGraphViz.
-
-:- dynamic(user:prolog/3).
-:- multifile(user:prolog/3).
-   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
-
-:- use_module(load_project).
-:- load_project(plGraphViz, [
-    plc-'Prolog-Library-Collection',
-    plHtml
-]).
-
diff --git a/load_project.pl b/load_project.pl
deleted file mode 100644
index 5599b5e..0000000
--- a/load_project.pl
+++ /dev/null
@@ -1,120 +0,0 @@
-:- module(
-  load_project,
-  [
-    load_project/2, % +Parent:atom
-                    % +ChildProjects:list(or([atom,pair(atom)]))
-    load_subproject/2, % +ParentFileSearchPath:atom
-                       % +Child:or([atom,pair(atom)])
-    set_data_subdirectory/1 % +ParentDirectory:atom
-  ]
-).
-
-/** <module> Load project
-
-Generic code for loading a project:
-  * Create a subdirectory for data.
-  * Load the root of subprojects onto the file search path.
-  * Load the index of subprojects onto the file search path.
-
-@author Wouter Beek
-@version 2014/06/14
-*/
-
-:- use_module(library(ansi_term)). % Colorized terminal messages.
-:- use_module(library(apply)).
-
-:- dynamic(user:project/2).
-:- multifile(user:project/2).
-:- dynamic(user:project/3).
-:- multifile(user:project/3).
-
-
-
-load_project(Parent, ChildProjects):-
-  parent_alias(Parent, ParentFsp),
-
-  % Entry point.
-  source_file(load_project(_,_), ThisFile),
-  file_directory_name(ThisFile, ThisDir),
-  assert(user:file_search_path(ParentFsp, ThisDir)),
-  assert(user:file_search_path(project, ThisDir)),
-
-  % Set the data subdirectory.
-  set_data_subdirectory(ThisDir),
-
-  % Load the root of submodules onto the file search path.
-  maplist(load_subproject(ParentFsp), ChildProjects),
-
-  % Load the index into the file search path.
-  load_project_index(ParentFsp).
-
-
-
-%! load_subproject(
-%!   +ParentFileSearchPath:atom,
-%!   +Child:or([atom,pair(atom)])
-%! ) is det.
-
-load_subproject(ParentFsp, ChildFsp-ChildDir):- !,
-  load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir),
-  load_project_index(ChildFsp).
-load_subproject(ParentFsp, Child):-
-  load_subproject(ParentFsp, Child-Child).
-
-
-%! load_subproject_file_search_path(
-%!   +ParentFileSearchPath:atom,
-%!   +ChildFileSearchPath:atom,
-%!   +ChildDirectory:atom
-%! ) is det.
-
-% The file search path for the subproject has already been set.
-load_subproject_file_search_path(_, ChildFsp, _):-
-  user:file_search_path(ChildFsp, _).
-load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir):-
-  Spec =.. [ParentFsp,ChildDir],
-  absolute_file_name(Spec, _, [access(read),file_type(directory)]), !,
-  assert(user:file_search_path(ChildFsp, Spec)).
-load_subproject_file_search_path(_, ChildFsp, ChildDir):-
-  print_message(warning, missing_subproject_directory(ChildFsp,ChildDir)).
-
-
-%! load_project_index(+FileSearchPath:atom) is det.
-
-load_project_index(Fsp):-
-  Spec =.. [Fsp,index],
-  absolute_file_name(
-    Spec,
-    File,
-    [access(read),file_errors(fail),file_type(prolog)]
-  ), !,
-  ensure_loaded(File).
-load_project_index(_).
-
-
-%! parent_alias(+Parent:atom, -ParentFsp:atom) is det.
-
-parent_alias(Parent, ParentFsp):-
-  user:project(Parent, _, ParentFsp), !.
-parent_alias(Parent, Parent).
-
-
-%! set_data_subdirectory(+ParentDirectory:atom) is det.
-
-set_data_subdirectory(ParentDir):-
-  directory_file_path(ParentDir, data, DataDir),
-  make_directory_path(DataDir),
-  assert(user:file_search_path(data, DataDir)).
-
-
-
-:- multifile(prolog:message//1).
-
-prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -->
-  [
-    'The ~a submodule is not present.'-[ChildFsp], nl,
-    'Check whether subdirectory ~a is present in your project directory:'-[ChildDir], nl,
-    '    git submodule init', nl,
-    '    git submodule update'
-  ].
-
diff --git a/pack.pl b/pack.pl
new file mode 100644
index 0000000..989108a
--- /dev/null
+++ b/pack.pl
@@ -0,0 +1,9 @@
+author('Wouter Beek', 'me@wouterbeek.com').
+download('https://github.com/wouterbeek/plGraphViz/release/*.zip').
+home('https://github.com/wouterbeek/plGraphViz').
+maintainer('Wouter Beek', 'me@wouterbeek.com').
+name(plGraphViz).
+packager('Wouter Beek', 'me@wouterbeek.com').
+requires('Prolog-Library-Collection').
+title(plGraphViz).
+version('0.0.1').
diff --git a/plHtml b/plHtml
deleted file mode 160000
index 08480c4..0000000
--- a/plHtml
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 08480c40acaee5f70bfb21e3c641bef1e7d258bd
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
new file mode 100644
index 0000000..083dbb2
--- /dev/null
+++ b/prolog/fca/fca_viz.pl
@@ -0,0 +1,101 @@
+:- module(
+  fca_viz,
+  [
+    fca_export_graph/2, % +Context, -ExportGraph
+    fca_export_graph/3, % +Context, -ExportGraph, :Opts
+    fca_viz/2,          % +Context, ?File
+    fca_viz/3           % +Context, ?File, :Opts
+  ]
+).
+
+/** <module> FCA visualization
+
+@author Wouter Beek
+@version 2015/11-2016/01
+*/
+
+:- use_module(library(aggregate)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(dcg/dcg_pl)).
+:- use_module(library(fca/fca)).
+:- use_module(library(graph/build_export_graph)).
+:- use_module(library(graph/s/s_graph)).
+:- use_module(library(gv/gv_file)).
+:- use_module(library(option)).
+:- use_module(library(ordsets)).
+
+:- meta_predicate(fca_export_graph(+,?,:)).
+:- meta_predicate(fca_viz(+,?,:)).
+
+:- predicate_options(fca_export_graph/3, 3, [
+     concept_label(+callable)
+   ]).
+:- predicate_options(fca_viz/3, 3, [
+     pass_to(fca_export_graph/3, 3),
+     pass_to(graph_viz/3, 3)
+   ]).
+
+is_meta(concept_label).
+
+
+
+
+
+%! fca_export_graph(+Context:compound, -ExportGraph:compound) is det.
+% Wrapper around fca_export_graph/3 with default options.
+
+fca_export_graph(Context, ExportG):-
+  fca_export_graph(Context, ExportG, []).
+
+
+%! fca_export_graph(
+%!   +Context:compound,
+%!   -ExportGraph:compound,
+%!   :Options:list(compound)
+%! ) is det.
+% The following optios are supported:
+%   * concept_label(+callable)
+%     DCG writing the labels for individual concepts.
+
+fca_export_graph(Context, ExportG, Opts1):-
+  fca_hasse(Context, Hasse),
+  meta_options(is_meta, Opts1, Opts2),
+  option(concept_label(Label_3), Opts2, concept_label),
+  merge_options(
+    [
+      vertex_label(Label_3),
+      vertex_rank(fca:concept_cardinality)
+    ],
+    Opts2,
+    Opts3
+  ),
+  build_export_graph(Hasse, ExportG, Opts3).
+
+
+
+%! fca_viz(+Context:compound, ?File:atom) is det.
+% Wrapper around fca_viz/3 with default options.
+
+fca_viz(Context, File):-
+  fca_viz(Context, File, []).
+
+
+%! fca_viz(+Context:compound, ?File:atom, :Options:list(compound)) is det.
+
+fca_viz(Context, File, Opts1):-
+  meta_options(is_meta, Opts1, Opts2),
+  statistics(process_cputime, Time1),
+  fca_export_graph(Context, ExportG, Opts2),
+  ExportG = graph(_,_,Es,_),
+  aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N),
+  ignore(option(number_of_vertices(N), Opts2)),
+  statistics(process_cputime, Time2),
+  Time is Time2 - Time1,
+  ignore(option(process_cputime(Time), Opts2)),
+  graph_viz(ExportG, File, Opts2).
+
+
+
+%! concept_label(+Concept:compound)// is det.
+
+concept_label(concept(Os,As)) --> set(Os), " / ", set(As).
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
new file mode 100644
index 0000000..5134069
--- /dev/null
+++ b/prolog/graph/build_export_graph.pl
@@ -0,0 +1,369 @@
+:- module(
+  build_export_graph,
+  [
+    build_export_graph/2, % +Graph, -ExportGraph
+    build_export_graph/3 % +Graph
+                         % -ExportGraph:compound
+                         % +Options:list(compound)
+  ]
+).
+
+/** <module> Build graph representation for exporting
+
+Support for building GIF representations.
+
+# Graph Intermediate Format (GIF)
+
+## Graph
+
+```prolog
+graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(compound))
+```
+
+### Edge
+
+```prolog
+edge(FromVertexId,ToVertexId,Attributes:list(compound))
+```
+
+### Rank
+
+```prolog
+RankVertex:compound-ContentVertices:ordset(compound)
+```
+
+### Vertex
+
+```prolog
+vertex(Id,Attributes:list(compound))
+```
+
+# Property functions
+
+Edge label:
+  1. [[graph_edge]] edge_label/2
+
+Vertex coordinates:
+  1. [[circle_coords]] circular_coord/4
+  2. [[random_coords]] random_coord/4
+
+---
+
+@author Wouter Beek
+@version 2015/07, 2015/09-2016/01
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(graph/s/s_graph)).
+:- use_module(library(list_ext)).
+:- use_module(library(option_ext)).
+:- use_module(library(ordsets)).
+:- use_module(library(pairs)).
+
+:- predicate_options(build_export_graph/4, 4, [
+     pass_to(edge_term/3, 3),
+     pass_to(graph_attributes/2, 2),
+     pass_to(vertex_term/3, 3)
+   ]).
+:- predicate_options(edge_term/3, 3, [
+     edge_arrowhead(+callable),
+     edge_color(+callable),
+     edge_id(+callable),
+     edge_label(+callable),
+     edge_penwidth(+callable),
+     edge_style(+callable)
+   ]).
+:- predicate_options(graph_attributes/2, 2, [
+     graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8'])),
+     graph_colorscheme(+oneof([none,svg,x11])),
+     graph_directed(+boolean),
+     graph_fontsize(+float),
+     graph_label(+atom),
+     graph_overlap(+boolean)
+   ]).
+:- predicate_options(vertex_term/3, 3, [
+     vertex_color(+callable),
+     vertex_id(+callable),
+     vertex_image(+callable),
+     vertex_label(+callable),
+     vertex_peripheries(+callable),
+     vertex_position(+callable),
+     vertex_rank(+callable),
+     vertex_shape(+callable),
+     vertex_uri(+callable)
+   ]).
+
+:- meta_predicate(build_export_graph(+,-,:)).
+
+is_meta(edge_arrowhead).
+is_meta(edge_color).
+is_meta(edge_id).
+is_meta(edge_label).
+is_meta(edge_penwidth).
+is_meta(edge_style).
+is_meta(vertex_color).
+is_meta(vertex_id).
+is_meta(vertex_image).
+is_meta(vertex_label).
+is_meta(vertex_peripheries).
+is_meta(vertex_position).
+is_meta(vertex_rank).
+is_meta(vertex_shape).
+is_meta(vertex_uri).
+
+
+
+
+
+%! build_export_graph(+Graph, -ExportGraph:compound) is det.
+% Wrapper around build_export_graph/3 with default options.
+
+build_export_graph(G, ExportG):-
+  build_export_graph(G, ExportG, []).
+
+
+%! build_export_graph(
+%!   +Graph,
+%!   -ExportGraph:compound,
+%!   +Options:list(compound)
+%! ) is det.
+% Graph is either:
+%   * a coumpound term `graph(Vs,Es)`, or
+%   * an unlabeled graph as defined by `library(ugraph)`.
+%
+% The following options are supported:
+%   * `vertex_rank(:RankFunction)`
+%     Assigns a non-negative integer to each vertex.
+%     No default.
+
+build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):-
+  graph_components(G, Vs, Es),
+  meta_options(is_meta, Opts1, Opts2),
+  maplist(vertex_term0(Vs, Opts2), Vs, VTerms1),
+  build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2),
+  maplist(edge_term0(Vs, Opts2), Es, ETerms),
+  graph_attributes(GAttrs, Opts2).
+
+vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts).
+
+edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts).
+
+graph_components(graph(Vs,Es), Vs, Es):- !.
+graph_components(G, Vs, Es):-
+  s_graph_components(G, Vs, Es).
+
+build_export_ranks(Vs, VTerms, VRanks, [], Opts):-
+  option(vertex_rank(VRank_2), Opts), !,
+  maplist(VRank_2, Vs, Ranks),
+  pairs_keys_values(Pairs, Ranks, VTerms),
+  group_pairs_by_key(Pairs, GroupedPairs),
+  build_export_rank_terms(GroupedPairs, VRanks).
+build_export_ranks(_, VTerms, [], VTerms, _).
+
+build_export_rank_terms([N-VTerms|T1], [RankTerm-VTerms|T2]):- !,
+  build_export_rank_term(N, RankTerm),
+  build_export_rank_terms(T1, T2).
+build_export_rank_terms([], []).
+
+build_export_rank_term(N, vertex(Id,[label(""),shape(none)])):-
+  format(atom(Id), "r~d", [N]).
+
+
+
+%! edge_term(
+%!   +Vertices:ordset(compound),
+%!   +Edge:compound,
+%!   -EdgeTerm:compound,
+%!   +Options:list(compound)
+%! ) is det.
+% The following options are supported:
+%   * `edge_arrowhead(+callable)`
+%     No default.
+%   * `edge_color(+callable)`
+%     No default.
+%   * `edge_id(+callable)`
+%     Function that assignes the unique identifiers for an edge's
+%     incident vertices.
+%   * `edge_label(+callable)`
+%     No default.
+%   * `edge_penwidth(+callable)`
+%     No default.
+%   * `edge_style(+callable)`
+%     No default.
+
+edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
+  % Arrowhead
+  if_option(edge_arrowhead(Arrowhead_2), Opts,
+    call(Arrowhead_2, E, EArrowhead)
+  ),
+  
+  % Color.
+  if_option(edge_color(ColorFunction), Opts, call(ColorFunction, E, EColor)),
+  
+  % Id.
+  (   option(edge_id(Id_2), Opts)
+  ->  call(Id_2, E, FromId, ToId)
+  ;   edge_components(E, FromV, ToV),
+      nth0chk(FromId, Vs, FromV),
+      nth0chk(ToId, Vs, ToV)
+  ),
+  
+  % Label.
+  if_option(edge_label(ELabel_3), Opts, string_phrase(dcg_call(ELabel_3, E), ELabel)),
+  
+  % Penwidth.
+  if_option(edge_penwidth(Penwidth_2), Opts, call(Penwidth_2, E, EPenwidth)),
+  
+  % Style.
+  if_option(edge_style(Style_2), Opts, call(Style_2, E, EStyle)),
+  
+  exclude(
+    option_has_var_value,
+    [
+      arrowhead(EArrowhead),
+      color(EColor),
+      label(ELabel),
+      penwidth(EPenwidth),
+      style(EStyle)
+    ],
+    EAttrs
+  ).
+
+
+
+%! graph_attributes(
+%!   -GraphAttributes:list(compound),
+%!   +Options:list(compound)
+%! ) is det.
+% The following options are supported:
+%   * `graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8']))`
+%     The name of the character set that is used to encode text in the graph.
+%     Default: `UTF-8`.
+%   * `graph_colorscheme(+oneof([none,svg,x11]))`
+%     The colorscheme from which the color in this graph are taken.
+%     Default: `x11`.
+%   * `graph_directed(+boolean)`
+%     Whether the graph is directed (`true`) or undirected (`false`).
+%     Default: `false`.
+%   * `graph_fontsize(+float)`
+%     The font size of text in the graph.
+%     Default: `11.0`.
+%   * `graph_label(+atom)`
+%     The graph label.
+%     No default.
+%   * `graph_overlap(+boolean)`
+%     Whether the vertices are allowed to overlap.
+%     Default: `false`.
+
+graph_attributes(GAttrs, Opts):-
+  % Characer set.
+  option(graph_charset(Charset), Opts, 'UTF-8'),
+  % Colorscheme.
+  option(graph_colorscheme(Colorscheme), Opts, x11),
+  % Directed.
+  option(graph_directed(Directed), Opts, false),
+  % Fontsize.
+  option(graph_fontsize(Fontsize), Opts, 11.0),
+  % Label.
+  % Defaults to the empty string.
+  option(graph_label(GLabel), Opts, '""'),
+  % Overlap.
+  option(graph_overlap(Overlap), Opts, false),
+  exclude(
+    option_has_var_value,
+    [
+      charset(Charset),
+      colorscheme(Colorscheme),
+      directed(Directed),
+      fontsize(Fontsize),
+      label(GLabel),
+      overlap(Overlap)
+    ],
+    GAttrs
+  ).
+
+
+
+%! vertex_term(
+%!   +Vertices:ordset(compound),
+%!   +Vertex:compound,
+%!   -VertexTerm:compound,
+%!   +Options:list(compound)
+%! ) is det.
+% The following options are supported:
+%   * `vertex_color(:ColorFunction)`
+%     A function that assigns colors to vertices.
+%     No default.
+%   * `vertex_id(:ColorFunction)`
+%     A functions that assigns unique identifiers to vertices.
+%   * `vertex_image(:ImageFunction)`
+%     A function that assigns images to vertices.
+%     No default.
+%   * `vertex_label(:LabelFunction)`
+%     A function that assigns labels to vertices.
+%     No default.
+%   * `vertex_peripheries(:PeripheriesFunction)`
+%     A function that assinges peripheries to vertices.
+%     No default.
+%   * `vertex_position(:PositionFunction)`
+%     No default.
+%   * `vertex_shape(:ShapeFunction)`
+%     A function that assinges shapes to vertices.
+%     No default.
+%   * `vertex_uri(:UriFunction)`
+
+vertex_term(Vs, V, vertex(VId,VAttrs), Opts):-
+  % Color.
+  if_option(vertex_color(Color_2), Opts, call(Color_2, V, VColor)),
+  
+  % Id.
+  (option(vertex_id(Id_2), Opts) -> call(Id_2, V, VId) ; nth0chk(VId, Vs, V)),
+  
+  % Image.
+  ignore(if_option(vertex_image(Image_2), Opts, call(Image_2, V, VImage))),
+
+  % Label.
+  if_option(vertex_label(VLabel_2), Opts, string_phrase(dcg_call(VLabel_2, V), VLabel)),
+
+  % Peripheries.
+  if_option(vertex_peripheries(Peripheries_2), Opts,
+    call(Peripheries_2, V, VPeripheries)
+  ),
+
+  % Position.
+  if_option(vertex_position(Position_4), Opts,
+    call(Position_4, Vs, Opts, V, VPosition)
+  ),
+
+  % Shape.
+  if_option(vertex_shape(Shape_2), Opts, call(Shape_2, V, VShape)),
+  
+  % URI
+  if_option(vertex_uri(Uri_2), Opts, call(Uri_2, V, VUri)),
+
+  exclude(
+    option_has_var_value,
+    [
+      color(VColor),
+      image(VImage),
+      label(VLabel),
+      peripheries(VPeripheries),
+      pos(VPosition),
+      shape(VShape),
+      'URL'(VUri)
+    ],
+    VAttrs
+  ).
+
+
+
+
+
+% HELPERS %
+
+%! edge_components(+Edge:compound, -FromV, -ToV) is det.
+
+edge_components(edge(FromV,_,ToV), FromV, ToV):- !.
+edge_components(edge(FromV,ToV), FromV, ToV):- !.
+edge_components(FromV-ToV, FromV, ToV):- !.
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
new file mode 100644
index 0000000..f55fce5
--- /dev/null
+++ b/prolog/gv/gv_attr_type.pl
@@ -0,0 +1,421 @@
+:- module(
+  gv_attr_type,
+  [
+    gv_attr_type//1, % ?Type:atom
+    addDouble//1, % +Double:float
+    addPoint//1, % +Point:compound
+    arrowType//1, % +ArrowType:atom
+    bool//1, % +Boolean:boolean
+    clusterMode//1, % +ClusterMode:atom
+    dirType//1, % +DirectionType:oneof([back,both,forward,none])
+    double//1, % +Double:float
+    doubleList//1, % +Doubles:list(float)
+    escString//1,
+    %layerList//1,
+    %layerRange//1,
+    lblString//1,
+    int//1, % +Integer:integer
+    outputMode//1, % +OutputMode:atom
+    %packMode//1,
+    pagedir//1, % +Pagedir:atom
+    point//1, % +Point:compound
+    pointList//1, % +Points:list(compound)
+    %portPos//1,
+    quadType//1, % +QuadType:atom
+    rankType//1, % +RankType:atom
+    rankdir//1, % +RankDirection:atom
+    rect//1, % +Rectangle:compound
+    shape//1,
+    smoothType//1, % +SmoothType:atom
+    %splineType//1,
+    %startType//1,
+    string//1, % ?Content:atom
+    style//2 % +Context:oneof([cluster,edge,node])
+             % +Style:atom
+    %viewPort//1
+  ]
+).
+:- reexport(
+  library(gv/gv_color),
+  [
+    color//1, % +Color:compound
+    colorList//1 % +ColorList:list(compound)
+  ]
+).
+
+/** <module> GraphViz attribute types
+
+@author Wouter Beek
+@version 2015/07, 2015/11, 2016/02
+*/
+
+:- use_module(library(dcg/dcg_ext), except([string//1])).
+:- use_module(library(gv/gv_html)).
+
+
+
+
+
+%! gv_attr_type(?Type:atom) is nondet.
+
+gv_attr_type(addDouble)   --> "addDouble".
+gv_attr_type(addPoint)    --> "addPoint".
+gv_attr_type(arrowType)   --> "arrowType".
+gv_attr_type(bool)        --> "bool".
+gv_attr_type(color)       --> "color".
+gv_attr_type(colorList)   --> "colorList".
+gv_attr_type(clusterMode) --> "clusterMode".
+gv_attr_type(dirType)     --> "dirType".
+gv_attr_type(double)      --> "double".
+gv_attr_type(doubleList)  --> "doubleList".
+gv_attr_type(escString)   --> "escString".
+gv_attr_type(layerList)   --> "layerList".
+gv_attr_type(layerRange)  --> "layerRange".
+gv_attr_type(lblString)   --> "lblString".
+gv_attr_type(int)         --> "int".
+gv_attr_type(outputMode)  --> "outputMode".
+gv_attr_type(packMode)    --> "packMode".
+gv_attr_type(pagedir)     --> "pagedir".
+gv_attr_type(point)       --> "point".
+gv_attr_type(pointList)   --> "pointList".
+gv_attr_type(portPos)     --> "portPos".
+gv_attr_type(quadType)    --> "quadType".
+gv_attr_type(rankType)    --> "rankType".
+gv_attr_type(rankdir)     --> "rankdir".
+gv_attr_type(rect)        --> "rect".
+gv_attr_type(shape)       --> "shape".
+gv_attr_type(smoothType)  --> "smoothType".
+gv_attr_type(splineType)  --> "splineType".
+gv_attr_type(startType)   --> "startType".
+gv_attr_type(string)      --> "string".
+gv_attr_type(style)       --> "style".
+gv_attr_type(viewPort)    --> "viewPort".
+
+
+
+%! addDouble(+Float:float)// .
+% An *addDouble* is represented by a Prolog float.
+
+addDouble(N) --> ("+", ! ; ""), float(N).
+
+
+
+%! addPoint(+Point:compound)// .
+% An *addPoint* is represented by a compound of the following form:
+% `point(X:float,Y:float,InputOnly:boolean)`.
+
+addPoint(Point) --> ("+", ! ; ""), point(Point).
+
+
+
+%! arrowType(+ArrowType:atom)// .
+
+arrowType(V) --> primitive_shape(V).
+arrowType(V) --> derived(V).
+arrowType(V) --> backwards_compatible(V).
+
+primitive_shape(box)     --> "box".
+primitive_shape(crow)    --> "crow".
+primitive_shape(circle)  --> "circle".
+primitive_shape(diamond) --> "diamond".
+primitive_shape(dot)     --> "dot".
+primitive_shape(inv)     --> "inv".
+primitive_shape(none)    --> "none".
+primitive_shape(normal)  --> "normal".
+primitive_shape(tee)     --> "tee".
+primitive_shape(vee)     --> "vee".
+
+derived(odot)     --> "odot".
+derived(invdot)   --> "invdot".
+derived(invodot)  --> "invodot".
+derived(obox)     --> "obox".
+derived(odiamond) --> "odiamond".
+
+backwards_compatible(ediamond) --> "ediamond".
+backwards_compatible(empty)    --> "empty".
+backwards_compatible(halfopen) --> "halfopen".
+backwards_compatible(invempty) --> "invempty".
+backwards_compatible(open)     --> "open".
+
+
+
+%! bool(+Value:boolean)// .
+
+bool(false) --> "false".
+bool(false) --> "no".
+bool(true)  --> "true".
+bool(true)  --> "yes".
+
+
+
+%! clusterMode(+ClusterMode:atom)// .
+
+clusterMode(global) --> "global".
+clusterMode(local) --> "local".
+clusterMode(none) --> "none".
+
+
+
+%! dirType(+DirectionType:oneof([back,both,forward,none]))// .
+
+dirType(back) --> "back".
+dirType(both) --> "both".
+dirType(forward) --> "forward".
+dirType(none) --> "none".
+
+
+
+%! double(+Double:float)// .
+
+double(N) --> float(N).
+
+
+
+%! doubleList(+Doubles:list(float))// .
+
+doubleList([H|T]) --> double(H), (":", !, doubleList(T) ; {T = []}).
+
+
+
+%! escString(+String:or([atom,string]))// .
+% @tbd Support for context-dependent replacements.
+
+escString(S1) -->
+  {(  string(S1)
+  ->  string_phrase(escape_double_quotes, S1, S2)
+  ;   atom_phrase(escape_double_quotes, S1, S2)
+  )},
+  "\"", atom(S2), "\"".
+
+escape_double_quotes, [0'\\,0'"] --> [0'"], !, escape_double_quotes.
+escape_double_quotes, [X]        --> [X],   !, escape_double_quotes.
+escape_double_quotes             --> "".
+
+
+
+% @tbd layerList
+
+
+
+% @tbd layerRange
+
+
+
+%! lblString(+String:compound)// .
+
+lblString(html_like_label(V)) --> gv_html_like_label(V).
+lblString(V) --> escString(V).
+
+
+
+%! int(+Integer:integer)// .
+
+int(V) --> integer(V).
+
+
+
+%! outputMode(+OutputMode:atom)// .
+
+outputMode(breadthfirst) --> "breadthfirst".
+outputMode(edgesfirst)   --> "edgesfirst".
+outputMode(nodesfirst)   --> "nodesfirst".
+
+
+
+% @tbd packMode
+
+
+
+%! pagedir(+PageDirection:atom)// .
+
+pagedir('BL') --> "BL".
+pagedir('BR') --> "BR".
+pagedir('LB') --> "LB".
+pagedir('LT') --> "LT".
+pagedir('RB') --> "RB".
+pagedir('RT') --> "RT".
+pagedir('TL') --> "TL".
+pagedir('TR') --> "TR".
+
+
+
+%! point(+Point:compound)// .
+% A *point* is represented by a compound of the following form:
+% `point(X:float,Y:float,Changeable:boolean)`.
+
+point(point(X,Y,Changeable)) -->
+  float(X), ",", float(Y),
+  input_changeable(Changeable).
+
+input_changeable(false) --> "".
+input_changeable(true) --> "!".
+
+
+
+%! pointList(+Points:list(compound))// .
+
+pointList(Points) -->
+  *(point, Points).
+
+
+
+% @tbd portPos
+
+
+
+%! quadType(+QuadType:atom)// .
+
+quadType(fast) --> "fast".
+quadType(none) --> "none".
+quadType(normal) --> "normal".
+
+
+
+%! rankType(+RankType:atom)// .
+
+rankType(max) --> "max".
+rankType(min) --> "min".
+rankType(same) --> "same".
+rankType(sink) --> "sink".
+rankType(source) --> "source".
+
+
+
+%! rankdir(+RankDirection:oneof(['BT','LR','RL','TB']))// .
+
+rankdir('BT') --> "BT".
+rankdir('LR') --> "LR".
+rankdir('RL') --> "RL".
+rankdir('TB') --> "TB".
+
+
+
+%! rect(+Rectangle:compound)// .
+
+rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
+  float(LowerLeftX), ",",
+  float(LowerLeftY), ",",
+  float(UpperRightX), ",",
+  float(UpperRightY).
+
+
+
+%! shape(+Shape:atom)// .
+
+shape(V) --> {polygon_based_shape(V)}, atom(V).
+
+polygon_based_shape(assembly).
+polygon_based_shape(box).
+polygon_based_shape(box3d).
+polygon_based_shape(cds).
+polygon_based_shape(circle).
+polygon_based_shape(component).
+polygon_based_shape(diamond).
+polygon_based_shape(doublecircle).
+polygon_based_shape(doubleoctagon).
+polygon_based_shape(egg).
+polygon_based_shape(ellipse).
+polygon_based_shape(fivepoverhang).
+polygon_based_shape(folder).
+polygon_based_shape(hexagon).
+polygon_based_shape(house).
+polygon_based_shape(insulator).
+polygon_based_shape(invhouse).
+polygon_based_shape(invtrapezium).
+polygon_based_shape(invtriangle).
+polygon_based_shape(larrow).
+polygon_based_shape(lpromoter).
+polygon_based_shape('Mcircle').
+polygon_based_shape('Mdiamond').
+polygon_based_shape('Msquare').
+polygon_based_shape(none).
+polygon_based_shape(note).
+polygon_based_shape(noverhang).
+polygon_based_shape(octagon).
+polygon_based_shape(oval).
+polygon_based_shape(parallelogram).
+polygon_based_shape(pentagon).
+polygon_based_shape(plaintext).
+polygon_based_shape(point).
+polygon_based_shape(polygon).
+polygon_based_shape(primersite).
+polygon_based_shape(promoter).
+polygon_based_shape(proteasesite).
+polygon_based_shape(proteinstab).
+polygon_based_shape(rarrow).
+polygon_based_shape(rect).
+polygon_based_shape(rectangle).
+polygon_based_shape(restrictionsite).
+polygon_based_shape(ribosite).
+polygon_based_shape(rnastab).
+polygon_based_shape(rpromoter).
+polygon_based_shape(septagon).
+polygon_based_shape(signature).
+polygon_based_shape(square).
+polygon_based_shape(tab).
+polygon_based_shape(terminator).
+polygon_based_shape(threepoverhang).
+polygon_based_shape(trapezium).
+polygon_based_shape(triangle).
+polygon_based_shape(tripleoctagon).
+polygon_based_shape(utr).
+
+
+
+%! smoothType(+SmoothType:atom)// .
+
+smoothType(V) --> {smoothType(V)}, atom(V).
+
+smoothType(avg_dist).
+smoothType(graph_dist).
+smoothType(none).
+smoothType(power_dist).
+smoothType(rng).
+smoothType(spring).
+smoothType(triangle).
+
+
+
+% @tbd splineType
+
+
+
+% @tbd startType
+
+
+
+%! string(?String:atom)// .
+% A GraphViz string.
+
+string(Content) --> "\"", atom(Content), "\"".
+
+
+
+%! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet.
+
+style(Context, Style) --> {style(Context, Style)}, atom(Style).
+
+style(cluster, bold).
+style(cluster, dashed).
+style(cluster, dotted).
+style(cluster, filled).
+style(cluster, rounded).
+style(cluster, solid).
+style(cluster, striped).
+style(edge, bold).
+style(edge, dashed).
+style(edge, dotted).
+style(edge, solid).
+style(node, bold).
+style(node, dashed).
+style(node, diagonals).
+style(node, dotted).
+style(node, filled).
+style(node, rounded).
+style(node, solid).
+style(node, striped).
+style(node, wedged).
+
+
+
+% @tbd viewPort
diff --git a/prolog/gv/gv_attrs.data b/prolog/gv/gv_attrs.data
new file mode 100644
index 0000000..95fc680
--- /dev/null
+++ b/prolog/gv/gv_attrs.data
@@ -0,0 +1,169 @@
+gv_attr('Damping',[graph],[double],'0.99','0.0','neato only').
+gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only').
+gv_attr('URL',[cluster,edge,graph,node],[escString],_G59448,'','svg, postscript, map only').
+gv_attr('_background',[graph],[string],_G59644,'','').
+gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only').
+gv_attr(arrowhead,[edge],[arrowType],normal,'','').
+gv_attr(arrowsize,[edge],[double],'1.0','0.0','').
+gv_attr(arrowtail,[edge],[arrowType],normal,'','').
+gv_attr(bb,[graph],[rect],'','','write only').
+gv_attr(bgcolor,[cluster,graph],[color,colorList],_G60571,'','').
+gv_attr(center,[graph],[bool],false,'','').
+gv_attr(charset,[graph],[string],'"UTF-8"','','').
+gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only').
+gv_attr(color,[cluster,edge,node],[color,colorList],black,'','').
+gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','').
+gv_attr(comment,[edge,graph,node],[string],'','','').
+gv_attr(compound,[graph],[bool],false,'','dot only').
+gv_attr(concentrate,[graph],[bool],false,'','').
+gv_attr(constraint,[edge],[bool],true,'','dot only').
+gv_attr(decorate,[edge],[bool],false,'','').
+gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only').
+gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only').
+gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only').
+gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','').
+gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only').
+gv_attr(distortion,[node],[double],'0.0','-100.0','').
+gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only').
+gv_attr(edgeURL,[edge],[escString],'','','svg, map only').
+gv_attr(edgehref,[edge],[escString],'','','svg, map only').
+gv_attr(edgetarget,[edge],[escString],_G63711,'','svg, map only').
+gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only').
+gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only').
+gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot').
+gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','').
+gv_attr(fixedsize,[node],[bool,string],false,'','').
+gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','').
+gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','').
+gv_attr(fontnames,[graph],[string],'','','svg only').
+gv_attr(fontpath,[graph],[string],'system-dependent','','').
+gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','').
+gv_attr(forcelabels,[graph],[bool],true,'','').
+gv_attr(gradientangle,[cluster,graph,node],[int],'','','').
+gv_attr(group,[node],[string],'','','dot only').
+gv_attr(headURL,[edge],[escString],'','','svg, map only').
+gv_attr(head_lp,[edge],[point],'','','write only').
+gv_attr(headclip,[edge],[bool],true,'','').
+gv_attr(headhref,[edge],[escString],'','','svg, map only').
+gv_attr(headlabel,[edge],[lblString],'','','').
+gv_attr(headport,[edge],[portPos],center,'','').
+gv_attr(headtarget,[edge],[escString],_G4892,'','svg, map only').
+gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only').
+gv_attr(height,[node],[double],'0.5','0.02','').
+gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only').
+gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only').
+gv_attr(image,[node],[string],'','','').
+gv_attr(imagepath,[graph],[string],'','','').
+gv_attr(imagescale,[node],[bool,string],false,'','').
+gv_attr(inputscale,[graph],[double],_G6250,'','fdp, neato only').
+gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','').
+gv_attr(labelURL,[edge],[escString],'','','svg, map only').
+gv_attr(label_scheme,[graph],[int],'0','0','sfdp only').
+gv_attr(labelangle,[edge],[double],'-25.0','-180.0','').
+gv_attr(labeldistance,[edge],[double],'1.0','0.0','').
+gv_attr(labelfloat,[edge],[bool],false,'','').
+gv_attr(labelfontcolor,[edge],[color],black,'','').
+gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','').
+gv_attr(labelfontsize,[edge],[double],'14.0','1.0','').
+gv_attr(labelhref,[edge],[escString],'','','svg, map only').
+gv_attr(labeljust,[cluster,graph],[string],'"c"','','').
+gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','').
+gv_attr(labeltarget,[edge],[escString],_G8276,'','svg, map only').
+gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only').
+gv_attr(landscape,[graph],[bool],false,'','').
+gv_attr(layer,[cluster,edge,node],[layerRange],'','','').
+gv_attr(layerlistsep,[graph],[string],'","','','').
+gv_attr(layers,[graph],[layerList],'','','').
+gv_attr(layerselect,[graph],[layerRange],'','','').
+gv_attr(layersep,[graph],[string],'" :\\t"','','').
+gv_attr(layout,[graph],[string],'','','').
+gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only').
+gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only').
+gv_attr(levelsgap,[graph],[double],'0.0','','neato only').
+gv_attr(lhead,[edge],[string],'','','dot only').
+gv_attr(lheight,[cluster,graph],[double],'','','write only').
+gv_attr(lp,[cluster,edge,graph],[point],'','','write only').
+gv_attr(ltail,[edge],[string],'','','dot only').
+gv_attr(lwidth,[cluster,graph],[double],'','','write only').
+gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','').
+gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only').
+gv_attr(mclimit,[graph],[double],'1.0','','dot only').
+gv_attr(mindist,[graph],[double],'1.0','0.0','circo only').
+gv_attr(minlen,[edge],[int],'1','0','dot only').
+gv_attr(mode,[graph],[string],major,'','neato only').
+gv_attr(model,[graph],[string],shortpath,'','neato only').
+gv_attr(mosek,[graph],[bool],false,'','neato only').
+gv_attr(nodesep,[graph],[double],'0.25','0.02','').
+gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','').
+gv_attr(normalize,[graph],[double,bool],false,'','not dot').
+gv_attr(notranslate,[graph],[bool],false,'','neato only').
+gv_attr(nslimitnslimit1,[graph],[double],'','','dot only').
+gv_attr(ordering,[graph,node],[string],'','','dot only').
+gv_attr(orientation,[node],[double],'0.0','360.0','').
+gv_attr(orientation,[graph],[string],'','','').
+gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','').
+gv_attr(overlap,[graph],[string,bool],true,'','not dot').
+gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only').
+gv_attr(overlap_shrink,[graph],[bool],true,'','prism only').
+gv_attr(pack,[graph],[bool,int],false,'','').
+gv_attr(packmode,[graph],[packMode],node,'','').
+gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','').
+gv_attr(page,[graph],[double,point],'','','').
+gv_attr(pagedir,[graph],[pagedir],'BL','','').
+gv_attr(pencolor,[cluster],[color],black,'','').
+gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','').
+gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','').
+gv_attr(pin,[node],[bool],false,'','fdp, neato only').
+gv_attr(pos,[edge,node],[point,splineType],'','','').
+gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only').
+gv_attr(quantum,[graph],[double],'0.0','0.0','').
+gv_attr(rank,[subgraph],[rankType],'','','dot only').
+gv_attr(rankdir,[graph],[rankdir],'TB','','dot only').
+gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only').
+gv_attr(ratio,[graph],[double,string],'','','').
+gv_attr(rects,[node],[rect],'','','write only').
+gv_attr(regular,[node],[bool],false,'','').
+gv_attr(remincross,[graph],[bool],true,'','dot only').
+gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only').
+gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only').
+gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only').
+gv_attr(rotate,[graph],[int],'0','','').
+gv_attr(rotation,[graph],[double],'0','','sfdp only').
+gv_attr(samehead,[edge],[string],'','','dot only').
+gv_attr(sametail,[edge],[string],'','','dot only').
+gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','').
+gv_attr(scale,[graph],[double,point],'','','not dot').
+gv_attr(searchsize,[graph],[int],'30','','dot only').
+gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot').
+gv_attr(shape,[node],[shape],ellipse,'','').
+gv_attr(shapefile,[node],[string],'','','').
+gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only').
+gv_attr(sides,[node],[int],'4','0','').
+gv_attr(size,[graph],[double,point],'','','').
+gv_attr(skew,[node],[double],'0.0','-100.0','').
+gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only').
+gv_attr(sortv,[cluster,graph,node],[int],'0','0','').
+gv_attr(splines,[graph],[bool,string],'','','').
+gv_attr(start,[graph],[startType],'','','fdp, neato only').
+gv_attr(style,[cluster,edge,graph,node],[style],'','','').
+gv_attr(stylesheet,[graph],[string],'','','svg only').
+gv_attr(tailURL,[edge],[escString],'','','svg, map only').
+gv_attr(tail_lp,[edge],[point],'','','write only').
+gv_attr(tailclip,[edge],[bool],true,'','').
+gv_attr(tailhref,[edge],[escString],'','','svg, map only').
+gv_attr(taillabel,[edge],[lblString],'','','').
+gv_attr(tailport,[edge],[portPos],center,'','').
+gv_attr(tailtarget,[edge],[escString],_G21528,'','svg, map only').
+gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only').
+gv_attr(target,[cluster,edge,graph,node],[escString,string],_G21878,'','svg, map only').
+gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only').
+gv_attr(truecolor,[graph],[bool],'','','bitmap output only').
+gv_attr(vertices,[node],[pointList],'','','write only').
+gv_attr(viewport,[graph],[viewPort],'','','').
+gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot').
+gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','').
+gv_attr(width,[node],[double],'0.75','0.01','').
+gv_attr(xdotversion,[graph],[string],'','','xdot only').
+gv_attr(xlabel,[edge,node],[lblString],'','','').
+gv_attr(xlp,[edge,node],[point],'','','write only').
+gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','').
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
new file mode 100644
index 0000000..4a92d5b
--- /dev/null
+++ b/prolog/gv/gv_attrs.pl
@@ -0,0 +1,76 @@
+:- module(
+  gv_attrs,
+  [
+    gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph])
+                     % +Attr
+  ]
+).
+:- ensure_loaded(library('gv/gv_attrs.data')).
+
+/** <module> GraphViz attributes
+
+@author Wouter Beek
+@version 2015/07-2015/08, 2015/10, 2016/03
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(error)).
+:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
+:- use_module(library(lists)).
+:- use_module(library(os/file_ext)).
+
+
+
+
+
+%! gv_attr_value(+Context, +Attr)// is det.
+% Uses the default value in case Value is uninstantiated.
+% Otherwise, performs a typecheck and converts the given value.
+%
+% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`.
+
+% Use the default if no value is given.
+gv_attr_value(Context, Name=Value) -->
+  {
+    var(Value),
+    gv_attr(Name, UsedBy, _, DefaultValue, _, _),
+    % Check validity of context.
+    memberchk(Context, UsedBy)
+  }, !,
+  gv_attr_value(Context, Name=DefaultValue).
+gv_attr_value(Context, Name=Value) -->
+  {
+    % Check the validity of the context argument.
+    gv_attr(Name, UsedBy, Types, _, Minimum, _),
+    memberchk(Context, UsedBy),
+
+    %  Pick a value type non-deterministically.
+    member(Type, Types),
+
+    % The `style` type is the only one that requires the context argument.
+    (   Type == style
+    ->  Dcg =.. [Type,Context]
+    ;   Dcg =.. [Type]
+    ),
+
+    % Check validity of Value w.r.t. minimum value -- if available.
+    check_minimum(Value, Minimum)
+  }, !,
+  dcg_call(gv_attr_type:Dcg, Value).
+gv_attr_value(_, Name=_) -->
+  {existence_error(gv_attr, Name)}.
+
+
+
+
+
+% HELPERS %
+
+%! check_minimum(+Value:atom, +Minimum:number) is semidet.
+% Trivially succeeds if no minimum value is available for a given attribute.
+
+check_minimum(_, ''):- !.
+check_minimum(V, Min1):-
+  atom_number(Min1, Min2),
+  Min2 =< V.
diff --git a/prolog/gv/gv_color.data b/prolog/gv/gv_color.data
new file mode 100644
index 0000000..166b13c
--- /dev/null
+++ b/prolog/gv/gv_color.data
@@ -0,0 +1,802 @@
+gv_color(x11,aliceblue).
+gv_color(x11,antiquewhite).
+gv_color(x11,antiquewhite1).
+gv_color(x11,antiquewhite2).
+gv_color(x11,antiquewhite3).
+gv_color(x11,antiquewhite4).
+gv_color(x11,aquamarine).
+gv_color(x11,aquamarine1).
+gv_color(x11,aquamarine2).
+gv_color(x11,aquamarine3).
+gv_color(x11,aquamarine4).
+gv_color(x11,azure).
+gv_color(x11,azure1).
+gv_color(x11,azure2).
+gv_color(x11,azure3).
+gv_color(x11,azure4).
+gv_color(x11,beige).
+gv_color(x11,bisque).
+gv_color(x11,bisque1).
+gv_color(x11,bisque2).
+gv_color(x11,bisque3).
+gv_color(x11,bisque4).
+gv_color(x11,black).
+gv_color(x11,blanchedalmond).
+gv_color(x11,blue).
+gv_color(x11,blue1).
+gv_color(x11,blue2).
+gv_color(x11,blue3).
+gv_color(x11,blue4).
+gv_color(x11,blueviolet).
+gv_color(x11,brown).
+gv_color(x11,brown1).
+gv_color(x11,brown2).
+gv_color(x11,brown3).
+gv_color(x11,brown4).
+gv_color(x11,burlywood).
+gv_color(x11,burlywood1).
+gv_color(x11,burlywood2).
+gv_color(x11,burlywood3).
+gv_color(x11,burlywood4).
+gv_color(x11,cadetblue).
+gv_color(x11,cadetblue1).
+gv_color(x11,cadetblue2).
+gv_color(x11,cadetblue3).
+gv_color(x11,cadetblue4).
+gv_color(x11,chartreuse).
+gv_color(x11,chartreuse1).
+gv_color(x11,chartreuse2).
+gv_color(x11,chartreuse3).
+gv_color(x11,chartreuse4).
+gv_color(x11,chocolate).
+gv_color(x11,chocolate1).
+gv_color(x11,chocolate2).
+gv_color(x11,chocolate3).
+gv_color(x11,chocolate4).
+gv_color(x11,coral).
+gv_color(x11,coral1).
+gv_color(x11,coral2).
+gv_color(x11,coral3).
+gv_color(x11,coral4).
+gv_color(x11,cornflowerblue).
+gv_color(x11,cornsilk).
+gv_color(x11,cornsilk1).
+gv_color(x11,cornsilk2).
+gv_color(x11,cornsilk3).
+gv_color(x11,cornsilk4).
+gv_color(x11,crimson).
+gv_color(x11,cyan).
+gv_color(x11,cyan1).
+gv_color(x11,cyan2).
+gv_color(x11,cyan3).
+gv_color(x11,cyan4).
+gv_color(x11,darkgoldenrod).
+gv_color(x11,darkgoldenrod1).
+gv_color(x11,darkgoldenrod2).
+gv_color(x11,darkgoldenrod3).
+gv_color(x11,darkgoldenrod4).
+gv_color(x11,darkgreen).
+gv_color(x11,darkkhaki).
+gv_color(x11,darkolivegreen).
+gv_color(x11,darkolivegreen1).
+gv_color(x11,darkolivegreen2).
+gv_color(x11,darkolivegreen3).
+gv_color(x11,darkolivegreen4).
+gv_color(x11,darkorange).
+gv_color(x11,darkorange1).
+gv_color(x11,darkorange2).
+gv_color(x11,darkorange3).
+gv_color(x11,darkorange4).
+gv_color(x11,darkorchid).
+gv_color(x11,darkorchid1).
+gv_color(x11,darkorchid2).
+gv_color(x11,darkorchid3).
+gv_color(x11,darkorchid4).
+gv_color(x11,darksalmon).
+gv_color(x11,darkseagreen).
+gv_color(x11,darkseagreen1).
+gv_color(x11,darkseagreen2).
+gv_color(x11,darkseagreen3).
+gv_color(x11,darkseagreen4).
+gv_color(x11,darkslateblue).
+gv_color(x11,darkslategray).
+gv_color(x11,darkslategray1).
+gv_color(x11,darkslategray2).
+gv_color(x11,darkslategray3).
+gv_color(x11,darkslategray4).
+gv_color(x11,darkslategrey).
+gv_color(x11,darkturquoise).
+gv_color(x11,darkviolet).
+gv_color(x11,deeppink).
+gv_color(x11,deeppink1).
+gv_color(x11,deeppink2).
+gv_color(x11,deeppink3).
+gv_color(x11,deeppink4).
+gv_color(x11,deepskyblue).
+gv_color(x11,deepskyblue1).
+gv_color(x11,deepskyblue2).
+gv_color(x11,deepskyblue3).
+gv_color(x11,deepskyblue4).
+gv_color(x11,dimgray).
+gv_color(x11,dimgrey).
+gv_color(x11,dodgerblue).
+gv_color(x11,dodgerblue1).
+gv_color(x11,dodgerblue2).
+gv_color(x11,dodgerblue3).
+gv_color(x11,dodgerblue4).
+gv_color(x11,firebrick).
+gv_color(x11,firebrick1).
+gv_color(x11,firebrick2).
+gv_color(x11,firebrick3).
+gv_color(x11,firebrick4).
+gv_color(x11,floralwhite).
+gv_color(x11,forestgreen).
+gv_color(x11,gainsboro).
+gv_color(x11,ghostwhite).
+gv_color(x11,gold).
+gv_color(x11,gold1).
+gv_color(x11,gold2).
+gv_color(x11,gold3).
+gv_color(x11,gold4).
+gv_color(x11,goldenrod).
+gv_color(x11,goldenrod1).
+gv_color(x11,goldenrod2).
+gv_color(x11,goldenrod3).
+gv_color(x11,goldenrod4).
+gv_color(x11,gray).
+gv_color(x11,gray0).
+gv_color(x11,gray1).
+gv_color(x11,gray10).
+gv_color(x11,gray100).
+gv_color(x11,gray11).
+gv_color(x11,gray12).
+gv_color(x11,gray13).
+gv_color(x11,gray14).
+gv_color(x11,gray15).
+gv_color(x11,gray16).
+gv_color(x11,gray17).
+gv_color(x11,gray18).
+gv_color(x11,gray19).
+gv_color(x11,gray2).
+gv_color(x11,gray20).
+gv_color(x11,gray21).
+gv_color(x11,gray22).
+gv_color(x11,gray23).
+gv_color(x11,gray24).
+gv_color(x11,gray25).
+gv_color(x11,gray26).
+gv_color(x11,gray27).
+gv_color(x11,gray28).
+gv_color(x11,gray29).
+gv_color(x11,gray3).
+gv_color(x11,gray30).
+gv_color(x11,gray31).
+gv_color(x11,gray32).
+gv_color(x11,gray33).
+gv_color(x11,gray34).
+gv_color(x11,gray35).
+gv_color(x11,gray36).
+gv_color(x11,gray37).
+gv_color(x11,gray38).
+gv_color(x11,gray39).
+gv_color(x11,gray4).
+gv_color(x11,gray40).
+gv_color(x11,gray41).
+gv_color(x11,gray42).
+gv_color(x11,gray43).
+gv_color(x11,gray44).
+gv_color(x11,gray45).
+gv_color(x11,gray46).
+gv_color(x11,gray47).
+gv_color(x11,gray48).
+gv_color(x11,gray49).
+gv_color(x11,gray5).
+gv_color(x11,gray50).
+gv_color(x11,gray51).
+gv_color(x11,gray52).
+gv_color(x11,gray53).
+gv_color(x11,gray54).
+gv_color(x11,gray55).
+gv_color(x11,gray56).
+gv_color(x11,gray57).
+gv_color(x11,gray58).
+gv_color(x11,gray59).
+gv_color(x11,gray6).
+gv_color(x11,gray60).
+gv_color(x11,gray61).
+gv_color(x11,gray62).
+gv_color(x11,gray63).
+gv_color(x11,gray64).
+gv_color(x11,gray65).
+gv_color(x11,gray66).
+gv_color(x11,gray67).
+gv_color(x11,gray68).
+gv_color(x11,gray69).
+gv_color(x11,gray7).
+gv_color(x11,gray70).
+gv_color(x11,gray71).
+gv_color(x11,gray72).
+gv_color(x11,gray73).
+gv_color(x11,gray74).
+gv_color(x11,gray75).
+gv_color(x11,gray76).
+gv_color(x11,gray77).
+gv_color(x11,gray78).
+gv_color(x11,gray79).
+gv_color(x11,gray8).
+gv_color(x11,gray80).
+gv_color(x11,gray81).
+gv_color(x11,gray82).
+gv_color(x11,gray83).
+gv_color(x11,gray84).
+gv_color(x11,gray85).
+gv_color(x11,gray86).
+gv_color(x11,gray87).
+gv_color(x11,gray88).
+gv_color(x11,gray89).
+gv_color(x11,gray9).
+gv_color(x11,gray90).
+gv_color(x11,gray91).
+gv_color(x11,gray92).
+gv_color(x11,gray93).
+gv_color(x11,gray94).
+gv_color(x11,gray95).
+gv_color(x11,gray96).
+gv_color(x11,gray97).
+gv_color(x11,gray98).
+gv_color(x11,gray99).
+gv_color(x11,green).
+gv_color(x11,green1).
+gv_color(x11,green2).
+gv_color(x11,green3).
+gv_color(x11,green4).
+gv_color(x11,greenyellow).
+gv_color(x11,grey).
+gv_color(x11,grey0).
+gv_color(x11,grey1).
+gv_color(x11,grey10).
+gv_color(x11,grey100).
+gv_color(x11,grey11).
+gv_color(x11,grey12).
+gv_color(x11,grey13).
+gv_color(x11,grey14).
+gv_color(x11,grey15).
+gv_color(x11,grey16).
+gv_color(x11,grey17).
+gv_color(x11,grey18).
+gv_color(x11,grey19).
+gv_color(x11,grey2).
+gv_color(x11,grey20).
+gv_color(x11,grey21).
+gv_color(x11,grey22).
+gv_color(x11,grey23).
+gv_color(x11,grey24).
+gv_color(x11,grey25).
+gv_color(x11,grey26).
+gv_color(x11,grey27).
+gv_color(x11,grey28).
+gv_color(x11,grey29).
+gv_color(x11,grey3).
+gv_color(x11,grey30).
+gv_color(x11,grey31).
+gv_color(x11,grey32).
+gv_color(x11,grey33).
+gv_color(x11,grey34).
+gv_color(x11,grey35).
+gv_color(x11,grey36).
+gv_color(x11,grey37).
+gv_color(x11,grey38).
+gv_color(x11,grey39).
+gv_color(x11,grey4).
+gv_color(x11,grey40).
+gv_color(x11,grey41).
+gv_color(x11,grey42).
+gv_color(x11,grey43).
+gv_color(x11,grey44).
+gv_color(x11,grey45).
+gv_color(x11,grey46).
+gv_color(x11,grey47).
+gv_color(x11,grey48).
+gv_color(x11,grey49).
+gv_color(x11,grey5).
+gv_color(x11,grey50).
+gv_color(x11,grey51).
+gv_color(x11,grey52).
+gv_color(x11,grey53).
+gv_color(x11,grey54).
+gv_color(x11,grey55).
+gv_color(x11,grey56).
+gv_color(x11,grey57).
+gv_color(x11,grey58).
+gv_color(x11,grey59).
+gv_color(x11,grey6).
+gv_color(x11,grey60).
+gv_color(x11,grey61).
+gv_color(x11,grey62).
+gv_color(x11,grey63).
+gv_color(x11,grey64).
+gv_color(x11,grey65).
+gv_color(x11,grey66).
+gv_color(x11,grey67).
+gv_color(x11,grey68).
+gv_color(x11,grey69).
+gv_color(x11,grey7).
+gv_color(x11,grey70).
+gv_color(x11,grey71).
+gv_color(x11,grey72).
+gv_color(x11,grey73).
+gv_color(x11,grey74).
+gv_color(x11,grey75).
+gv_color(x11,grey76).
+gv_color(x11,grey77).
+gv_color(x11,grey78).
+gv_color(x11,grey79).
+gv_color(x11,grey8).
+gv_color(x11,grey80).
+gv_color(x11,grey81).
+gv_color(x11,grey82).
+gv_color(x11,grey83).
+gv_color(x11,grey84).
+gv_color(x11,grey85).
+gv_color(x11,grey86).
+gv_color(x11,grey87).
+gv_color(x11,grey88).
+gv_color(x11,grey89).
+gv_color(x11,grey9).
+gv_color(x11,grey90).
+gv_color(x11,grey91).
+gv_color(x11,grey92).
+gv_color(x11,grey93).
+gv_color(x11,grey94).
+gv_color(x11,grey95).
+gv_color(x11,grey96).
+gv_color(x11,grey97).
+gv_color(x11,grey98).
+gv_color(x11,grey99).
+gv_color(x11,honeydew).
+gv_color(x11,honeydew1).
+gv_color(x11,honeydew2).
+gv_color(x11,honeydew3).
+gv_color(x11,honeydew4).
+gv_color(x11,hotpink).
+gv_color(x11,hotpink1).
+gv_color(x11,hotpink2).
+gv_color(x11,hotpink3).
+gv_color(x11,hotpink4).
+gv_color(x11,indianred).
+gv_color(x11,indianred1).
+gv_color(x11,indianred2).
+gv_color(x11,indianred3).
+gv_color(x11,indianred4).
+gv_color(x11,indigo).
+gv_color(x11,invis).
+gv_color(x11,ivory).
+gv_color(x11,ivory1).
+gv_color(x11,ivory2).
+gv_color(x11,ivory3).
+gv_color(x11,ivory4).
+gv_color(x11,khaki).
+gv_color(x11,khaki1).
+gv_color(x11,khaki2).
+gv_color(x11,khaki3).
+gv_color(x11,khaki4).
+gv_color(x11,lavender).
+gv_color(x11,lavenderblush).
+gv_color(x11,lavenderblush1).
+gv_color(x11,lavenderblush2).
+gv_color(x11,lavenderblush3).
+gv_color(x11,lavenderblush4).
+gv_color(x11,lawngreen).
+gv_color(x11,lemonchiffon).
+gv_color(x11,lemonchiffon1).
+gv_color(x11,lemonchiffon2).
+gv_color(x11,lemonchiffon3).
+gv_color(x11,lemonchiffon4).
+gv_color(x11,lightblue).
+gv_color(x11,lightblue1).
+gv_color(x11,lightblue2).
+gv_color(x11,lightblue3).
+gv_color(x11,lightblue4).
+gv_color(x11,lightcoral).
+gv_color(x11,lightcyan).
+gv_color(x11,lightcyan1).
+gv_color(x11,lightcyan2).
+gv_color(x11,lightcyan3).
+gv_color(x11,lightcyan4).
+gv_color(x11,lightgoldenrod).
+gv_color(x11,lightgoldenrod1).
+gv_color(x11,lightgoldenrod2).
+gv_color(x11,lightgoldenrod3).
+gv_color(x11,lightgoldenrod4).
+gv_color(x11,lightgoldenrodyellow).
+gv_color(x11,lightgray).
+gv_color(x11,lightgrey).
+gv_color(x11,lightpink).
+gv_color(x11,lightpink1).
+gv_color(x11,lightpink2).
+gv_color(x11,lightpink3).
+gv_color(x11,lightpink4).
+gv_color(x11,lightsalmon).
+gv_color(x11,lightsalmon1).
+gv_color(x11,lightsalmon2).
+gv_color(x11,lightsalmon3).
+gv_color(x11,lightsalmon4).
+gv_color(x11,lightseagreen).
+gv_color(x11,lightskyblue).
+gv_color(x11,lightskyblue1).
+gv_color(x11,lightskyblue2).
+gv_color(x11,lightskyblue3).
+gv_color(x11,lightskyblue4).
+gv_color(x11,lightslateblue).
+gv_color(x11,lightslategray).
+gv_color(x11,lightslategrey).
+gv_color(x11,lightsteelblue).
+gv_color(x11,lightsteelblue1).
+gv_color(x11,lightsteelblue2).
+gv_color(x11,lightsteelblue3).
+gv_color(x11,lightsteelblue4).
+gv_color(x11,lightyellow).
+gv_color(x11,lightyellow1).
+gv_color(x11,lightyellow2).
+gv_color(x11,lightyellow3).
+gv_color(x11,lightyellow4).
+gv_color(x11,limegreen).
+gv_color(x11,linen).
+gv_color(x11,magenta).
+gv_color(x11,magenta1).
+gv_color(x11,magenta2).
+gv_color(x11,magenta3).
+gv_color(x11,magenta4).
+gv_color(x11,maroon).
+gv_color(x11,maroon1).
+gv_color(x11,maroon2).
+gv_color(x11,maroon3).
+gv_color(x11,maroon4).
+gv_color(x11,mediumaquamarine).
+gv_color(x11,mediumblue).
+gv_color(x11,mediumorchid).
+gv_color(x11,mediumorchid1).
+gv_color(x11,mediumorchid2).
+gv_color(x11,mediumorchid3).
+gv_color(x11,mediumorchid4).
+gv_color(x11,mediumpurple).
+gv_color(x11,mediumpurple1).
+gv_color(x11,mediumpurple2).
+gv_color(x11,mediumpurple3).
+gv_color(x11,mediumpurple4).
+gv_color(x11,mediumseagreen).
+gv_color(x11,mediumslateblue).
+gv_color(x11,mediumspringgreen).
+gv_color(x11,mediumturquoise).
+gv_color(x11,mediumvioletred).
+gv_color(x11,midnightblue).
+gv_color(x11,mintcream).
+gv_color(x11,mistyrose).
+gv_color(x11,mistyrose1).
+gv_color(x11,mistyrose2).
+gv_color(x11,mistyrose3).
+gv_color(x11,mistyrose4).
+gv_color(x11,moccasin).
+gv_color(x11,navajowhite).
+gv_color(x11,navajowhite1).
+gv_color(x11,navajowhite2).
+gv_color(x11,navajowhite3).
+gv_color(x11,navajowhite4).
+gv_color(x11,navy).
+gv_color(x11,navyblue).
+gv_color(x11,none).
+gv_color(x11,oldlace).
+gv_color(x11,olivedrab).
+gv_color(x11,olivedrab1).
+gv_color(x11,olivedrab2).
+gv_color(x11,olivedrab3).
+gv_color(x11,olivedrab4).
+gv_color(x11,orange).
+gv_color(x11,orange1).
+gv_color(x11,orange2).
+gv_color(x11,orange3).
+gv_color(x11,orange4).
+gv_color(x11,orangered).
+gv_color(x11,orangered1).
+gv_color(x11,orangered2).
+gv_color(x11,orangered3).
+gv_color(x11,orangered4).
+gv_color(x11,orchid).
+gv_color(x11,orchid1).
+gv_color(x11,orchid2).
+gv_color(x11,orchid3).
+gv_color(x11,orchid4).
+gv_color(x11,palegoldenrod).
+gv_color(x11,palegreen).
+gv_color(x11,palegreen1).
+gv_color(x11,palegreen2).
+gv_color(x11,palegreen3).
+gv_color(x11,palegreen4).
+gv_color(x11,paleturquoise).
+gv_color(x11,paleturquoise1).
+gv_color(x11,paleturquoise2).
+gv_color(x11,paleturquoise3).
+gv_color(x11,paleturquoise4).
+gv_color(x11,palevioletred).
+gv_color(x11,palevioletred1).
+gv_color(x11,palevioletred2).
+gv_color(x11,palevioletred3).
+gv_color(x11,palevioletred4).
+gv_color(x11,papayawhip).
+gv_color(x11,peachpuff).
+gv_color(x11,peachpuff1).
+gv_color(x11,peachpuff2).
+gv_color(x11,peachpuff3).
+gv_color(x11,peachpuff4).
+gv_color(x11,peru).
+gv_color(x11,pink).
+gv_color(x11,pink1).
+gv_color(x11,pink2).
+gv_color(x11,pink3).
+gv_color(x11,pink4).
+gv_color(x11,plum).
+gv_color(x11,plum1).
+gv_color(x11,plum2).
+gv_color(x11,plum3).
+gv_color(x11,plum4).
+gv_color(x11,powderblue).
+gv_color(x11,purple).
+gv_color(x11,purple1).
+gv_color(x11,purple2).
+gv_color(x11,purple3).
+gv_color(x11,purple4).
+gv_color(x11,red).
+gv_color(x11,red1).
+gv_color(x11,red2).
+gv_color(x11,red3).
+gv_color(x11,red4).
+gv_color(x11,rosybrown).
+gv_color(x11,rosybrown1).
+gv_color(x11,rosybrown2).
+gv_color(x11,rosybrown3).
+gv_color(x11,rosybrown4).
+gv_color(x11,royalblue).
+gv_color(x11,royalblue1).
+gv_color(x11,royalblue2).
+gv_color(x11,royalblue3).
+gv_color(x11,royalblue4).
+gv_color(x11,saddlebrown).
+gv_color(x11,salmon).
+gv_color(x11,salmon1).
+gv_color(x11,salmon2).
+gv_color(x11,salmon3).
+gv_color(x11,salmon4).
+gv_color(x11,sandybrown).
+gv_color(x11,seagreen).
+gv_color(x11,seagreen1).
+gv_color(x11,seagreen2).
+gv_color(x11,seagreen3).
+gv_color(x11,seagreen4).
+gv_color(x11,seashell).
+gv_color(x11,seashell1).
+gv_color(x11,seashell2).
+gv_color(x11,seashell3).
+gv_color(x11,seashell4).
+gv_color(x11,sienna).
+gv_color(x11,sienna1).
+gv_color(x11,sienna2).
+gv_color(x11,sienna3).
+gv_color(x11,sienna4).
+gv_color(x11,skyblue).
+gv_color(x11,skyblue1).
+gv_color(x11,skyblue2).
+gv_color(x11,skyblue3).
+gv_color(x11,skyblue4).
+gv_color(x11,slateblue).
+gv_color(x11,slateblue1).
+gv_color(x11,slateblue2).
+gv_color(x11,slateblue3).
+gv_color(x11,slateblue4).
+gv_color(x11,slategray).
+gv_color(x11,slategray1).
+gv_color(x11,slategray2).
+gv_color(x11,slategray3).
+gv_color(x11,slategray4).
+gv_color(x11,slategrey).
+gv_color(x11,snow).
+gv_color(x11,snow1).
+gv_color(x11,snow2).
+gv_color(x11,snow3).
+gv_color(x11,snow4).
+gv_color(x11,springgreen).
+gv_color(x11,springgreen1).
+gv_color(x11,springgreen2).
+gv_color(x11,springgreen3).
+gv_color(x11,springgreen4).
+gv_color(x11,steelblue).
+gv_color(x11,steelblue1).
+gv_color(x11,steelblue2).
+gv_color(x11,steelblue3).
+gv_color(x11,steelblue4).
+gv_color(x11,tan).
+gv_color(x11,tan1).
+gv_color(x11,tan2).
+gv_color(x11,tan3).
+gv_color(x11,tan4).
+gv_color(x11,thistle).
+gv_color(x11,thistle1).
+gv_color(x11,thistle2).
+gv_color(x11,thistle3).
+gv_color(x11,thistle4).
+gv_color(x11,tomato).
+gv_color(x11,tomato1).
+gv_color(x11,tomato2).
+gv_color(x11,tomato3).
+gv_color(x11,tomato4).
+gv_color(x11,transparent).
+gv_color(x11,turquoise).
+gv_color(x11,turquoise1).
+gv_color(x11,turquoise2).
+gv_color(x11,turquoise3).
+gv_color(x11,turquoise4).
+gv_color(x11,violet).
+gv_color(x11,violetred).
+gv_color(x11,violetred1).
+gv_color(x11,violetred2).
+gv_color(x11,violetred3).
+gv_color(x11,violetred4).
+gv_color(x11,wheat).
+gv_color(x11,wheat1).
+gv_color(x11,wheat2).
+gv_color(x11,wheat3).
+gv_color(x11,wheat4).
+gv_color(x11,white).
+gv_color(x11,whitesmoke).
+gv_color(x11,yellow).
+gv_color(x11,yellow1).
+gv_color(x11,yellow2).
+gv_color(x11,yellow3).
+gv_color(x11,yellow4).
+gv_color(x11,yellowgreen).
+gv_color(svg,aliceblue).
+gv_color(svg,antiquewhite).
+gv_color(svg,aqua).
+gv_color(svg,aquamarine).
+gv_color(svg,azure).
+gv_color(svg,beige).
+gv_color(svg,bisque).
+gv_color(svg,black).
+gv_color(svg,blanchedalmond).
+gv_color(svg,blue).
+gv_color(svg,blueviolet).
+gv_color(svg,brown).
+gv_color(svg,burlywood).
+gv_color(svg,cadetblue).
+gv_color(svg,chartreuse).
+gv_color(svg,chocolate).
+gv_color(svg,coral).
+gv_color(svg,cornflowerblue).
+gv_color(svg,cornsilk).
+gv_color(svg,crimson).
+gv_color(svg,cyan).
+gv_color(svg,darkblue).
+gv_color(svg,darkcyan).
+gv_color(svg,darkgoldenrod).
+gv_color(svg,darkgray).
+gv_color(svg,darkgreen).
+gv_color(svg,darkgrey).
+gv_color(svg,darkkhaki).
+gv_color(svg,darkmagenta).
+gv_color(svg,darkolivegreen).
+gv_color(svg,darkorange).
+gv_color(svg,darkorchid).
+gv_color(svg,darkred).
+gv_color(svg,darksalmon).
+gv_color(svg,darkseagreen).
+gv_color(svg,darkslateblue).
+gv_color(svg,darkslategray).
+gv_color(svg,darkslategrey).
+gv_color(svg,darkturquoise).
+gv_color(svg,darkviolet).
+gv_color(svg,deeppink).
+gv_color(svg,deepskyblue).
+gv_color(svg,dimgray).
+gv_color(svg,dimgrey).
+gv_color(svg,dodgerblue).
+gv_color(svg,firebrick).
+gv_color(svg,floralwhite).
+gv_color(svg,forestgreen).
+gv_color(svg,fuchsia).
+gv_color(svg,gainsboro).
+gv_color(svg,ghostwhite).
+gv_color(svg,gold).
+gv_color(svg,goldenrod).
+gv_color(svg,gray).
+gv_color(svg,grey).
+gv_color(svg,green).
+gv_color(svg,greenyellow).
+gv_color(svg,honeydew).
+gv_color(svg,hotpink).
+gv_color(svg,indianred).
+gv_color(svg,indigo).
+gv_color(svg,ivory).
+gv_color(svg,khaki).
+gv_color(svg,lavender).
+gv_color(svg,lavenderblush).
+gv_color(svg,lawngreen).
+gv_color(svg,lemonchiffon).
+gv_color(svg,lightblue).
+gv_color(svg,lightcoral).
+gv_color(svg,lightcyan).
+gv_color(svg,lightgoldenrodyellow).
+gv_color(svg,lightgray).
+gv_color(svg,lightgreen).
+gv_color(svg,lightgrey).
+gv_color(svg,lightpink).
+gv_color(svg,lightsalmon).
+gv_color(svg,lightseagreen).
+gv_color(svg,lightskyblue).
+gv_color(svg,lightslategray).
+gv_color(svg,lightslategrey).
+gv_color(svg,lightsteelblue).
+gv_color(svg,lightyellow).
+gv_color(svg,lime).
+gv_color(svg,limegreen).
+gv_color(svg,linen).
+gv_color(svg,magenta).
+gv_color(svg,maroon).
+gv_color(svg,mediumaquamarine).
+gv_color(svg,mediumblue).
+gv_color(svg,mediumorchid).
+gv_color(svg,mediumpurple).
+gv_color(svg,mediumseagreen).
+gv_color(svg,mediumslateblue).
+gv_color(svg,mediumspringgreen).
+gv_color(svg,mediumturquoise).
+gv_color(svg,mediumvioletred).
+gv_color(svg,midnightblue).
+gv_color(svg,mintcream).
+gv_color(svg,mistyrose).
+gv_color(svg,moccasin).
+gv_color(svg,navajowhite).
+gv_color(svg,navy).
+gv_color(svg,oldlace).
+gv_color(svg,olive).
+gv_color(svg,olivedrab).
+gv_color(svg,orange).
+gv_color(svg,orangered).
+gv_color(svg,orchid).
+gv_color(svg,palegoldenrod).
+gv_color(svg,palegreen).
+gv_color(svg,paleturquoise).
+gv_color(svg,palevioletred).
+gv_color(svg,papayawhip).
+gv_color(svg,peachpuff).
+gv_color(svg,peru).
+gv_color(svg,pink).
+gv_color(svg,plum).
+gv_color(svg,powderblue).
+gv_color(svg,purple).
+gv_color(svg,red).
+gv_color(svg,rosybrown).
+gv_color(svg,royalblue).
+gv_color(svg,saddlebrown).
+gv_color(svg,salmon).
+gv_color(svg,sandybrown).
+gv_color(svg,seagreen).
+gv_color(svg,seashell).
+gv_color(svg,sienna).
+gv_color(svg,silver).
+gv_color(svg,skyblue).
+gv_color(svg,slateblue).
+gv_color(svg,slategray).
+gv_color(svg,slategrey).
+gv_color(svg,snow).
+gv_color(svg,springgreen).
+gv_color(svg,steelblue).
+gv_color(svg,tan).
+gv_color(svg,teal).
+gv_color(svg,thistle).
+gv_color(svg,tomato).
+gv_color(svg,turquoise).
+gv_color(svg,violet).
+gv_color(svg,wheat).
+gv_color(svg,white).
+gv_color(svg,whitesmoke).
+gv_color(svg,yellow).
+gv_color(svg,yellowgreen).
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
new file mode 100644
index 0000000..ac319dc
--- /dev/null
+++ b/prolog/gv/gv_color.pl
@@ -0,0 +1,68 @@
+:- module(
+  gv_color,
+  [
+    gv_color/2, % ?Colorscheme:oneof([svg,x11])
+                % ?Color:atom
+    color//1, % +Color:compound
+    colorList//1 % +Pairs:list(pair(compound,float))
+  ]
+).
+:- ensure_loaded(library('gv/gv_color.data')).
+
+/** <module> GraphViz color
+
+@author Wouter Beek
+@tbd Color value `transparent` is only available in the output formats
+     ps, svg, fig, vmrl, and the bitmap formats.
+@version 2015/08, 2015/10, 2016/02
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(lists)).
+:- use_module(library(os/file_ext)).
+
+
+
+
+
+% color(+Color:compound)// .
+% A *color* is represented by a compound term of one of the following forms:
+%   1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)`
+%   2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)`
+%   3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))`
+
+color(rgb(Red,Green,Blue)) --> !,
+  "#",
+  #(3, hex_color, [Red,Green,Blue]).
+color(rgbs(Red,Green,Blue,Alpha)) --> !,
+  color(rgb(Red,Green,Blue)),
+  hex_color(Alpha).
+color(hsv(Hue,Saturation,Value)) --> !,
+  #(3, hsv_color, [Hue,Saturation,Value]).
+color(Name) -->
+  {gv_color(_, Name)},
+  atom(Name).
+
+hex_color(I) -->
+  xinteger(I).
+
+hsv_color(D, Head, Tail):-
+  format(codes(Head,Tail), '~2f', [D]).
+
+
+
+%! colorList(+Pairs:list(pair(compound,float)))// .
+
+colorList(L) -->
+  '+'(wc, L).
+
+wc(Color-Float) -->
+  color(Color),
+  (   wc_weight(Float)
+  ;   ""
+  ).
+
+wc_weight(Float) -->
+  ";",
+  float(Float).
diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl
new file mode 100644
index 0000000..30c4263
--- /dev/null
+++ b/prolog/gv/gv_dom.pl
@@ -0,0 +1,29 @@
+:- module(
+  gv_dom,
+  [
+    gv_dom/3 % +ExportG, -Dom, +Opts
+  ]
+).
+
+/** <module> GraphViz DOM
+
+@author Wouter Beek
+@version 2015/07, 2016/01
+*/
+
+:- use_module(library(gv/gv_file)).
+:- use_module(library(option)).
+:- use_module(library(svg/svg_ext)).
+
+
+
+
+
+%! gv_dom(+ExportG, -Dom, +Opts) is det.
+
+gv_dom(ExportG, Dom, Opts1):-
+  % Make sure the file type of the output file is SvgDom.
+  merge_options([output(svg)], Opts1, Opts2),
+  graph_viz(ExportG, ToFile, Opts2),
+  svg_dom(ToFile, Dom),
+  delete_file(ToFile).
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
new file mode 100644
index 0000000..993fcee
--- /dev/null
+++ b/prolog/gv/gv_file.pl
@@ -0,0 +1,175 @@
+:- module(
+  gv_file,
+  [
+    graph_viz/2, % +ExportG, ?File
+    graph_viz/3  % +ExportG, ?File, +Opts
+  ]
+).
+
+/** <module> GraphViz file
+
+@author Wouter Beek
+@version 2015/07, 2015/10-2015/11, 2016/01
+*/
+
+:- use_module(library(code_ext)).
+:- use_module(library(error)).
+:- use_module(library(gv/gv_graph)).
+:- use_module(library(option)).
+:- use_module(library(os/external_program)).
+:- use_module(library(os/process_ext)).
+:- use_module(library(string_ext)).
+
+:- predicate_options(graph_viz/3, 3, [
+     pass_to(file_to_gv/3, 3)
+   ]).
+:- predicate_options(file_to_gv/3, 3, [
+     method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])),
+     output(+atom)
+   ]).
+
+:- dynamic(user:module_uses/2).
+:- multifile(user:module_uses/2).
+
+user:module_uses(gv_file, program(dot)).
+
+
+
+
+
+%! graph_viz(+ExportGraph:compound, ?File:atom) is det.
+%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
+% Returns a file containing a GraphViz visualization of the given graph.
+%
+% The following options are supported:
+%   * method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])
+%     The algorithm used by GraphViz for positioning the tree nodes.
+%     Default is `dot'.
+%     For possible values see gv_method/1.
+%   * output(+atom)`
+%     The file type of the generated GraphViz file.
+%     Default is `pdf`.
+%     For possible values see gv_output_type/1.
+
+graph_viz(ExportG, File):-
+  graph_viz(ExportG, File, []).
+graph_viz(ExportG, File, Opts):-
+  once(phrase(gv_graph(ExportG), Cs)),
+
+  % Be thread-safe.
+  thread_self(Id),
+  string_list_concat(["gv_file",Id], "_", ThreadName),
+  absolute_file_name(ThreadName, TmpFile, [access(write),extensions([dot])]),
+  setup_call_cleanup(
+    open(TmpFile, write, Write, [encoding(utf8)]),
+    with_output_to(Write, put_codes(Cs)),
+    close(Write)
+  ),
+  file_to_gv(TmpFile, File, Opts).
+
+
+%! file_to_gv(
+%!   +InputFile:atom,
+%!   ?OutputFile:atom,
+%!   +Options:list(compound)
+%! ) is det.
+% Converts a GraphViz DOT file to an image file, using a specific
+% visualization method.
+
+file_to_gv(InputFile, OutputFile, Opts):-
+  var(OutputFile), !,
+  option(output(Ext), Opts, pdf),
+  file_name_extension(out, Ext, LocalName),
+  absolute_file_name(LocalName, OutputFile, Opts),
+  file_to_gv(InputFile, OutputFile, Opts).
+file_to_gv(InputFile, OutputFile, Opts):-
+  option(output(dot), Opts), !,
+  (   var(OutputFile)
+  ->  OutputFile = InputFile
+  ;   rename_file(InputFile, OutputFile)
+  ).
+file_to_gv(InputFile, OutputFile, Opts):-
+  % Typecheck for `method` option.
+  option(method(Method), Opts, dot),
+  findall(Method0, gv_method(Method0), Methods),
+  must_be(oneof(Methods), Method),
+
+  % Typecheck for `output` option.
+  option(output(OutputType), Opts, pdf),
+  findall(OutputType0, gv_output_type(OutputType0), OutputTypes),
+  must_be(oneof(OutputTypes), OutputType),
+
+  % Run the GraphViz conversion command in the shell.
+  format(atom(OutputTypeFlag), "-T~a", [OutputType]),
+  format(atom(OutputFileFlag), "-o~a", [OutputFile]),
+  run_process(
+    Method,
+    [OutputTypeFlag,file(InputFile),OutputFileFlag]
+  ).
+
+
+
+
+
+% HELPERS %
+
+gv_method(circo).
+gv_method(dot).
+gv_method(fdp).
+gv_method(neato).
+gv_method(osage).
+gv_method(sfdp).
+gv_method(twopi).
+
+
+gv_output_type(bmp).
+gv_output_type(canon).
+gv_output_type(dot).
+gv_output_type(gv).
+gv_output_type(xdot).
+gv_output_type('xdot1.2').
+gv_output_type('xdot1.4').
+gv_output_type(cgimage).
+gv_output_type(cmap).
+gv_output_type(eps).
+gv_output_type(exr).
+gv_output_type(fig).
+gv_output_type(gd).
+gv_output_type(gd2).
+gv_output_type(gif).
+gv_output_type(gtk).
+gv_output_type(ico).
+gv_output_type(imap).
+gv_output_type(cmapx).
+gv_output_type(imap_np).
+gv_output_type(cmapx_np).
+gv_output_type(ismap).
+gv_output_type(jp2).
+gv_output_type(jpg).
+gv_output_type(jpeg).
+gv_output_type(jpe).
+gv_output_type(pct).
+gv_output_type(pict).
+gv_output_type(pdf).
+gv_output_type(pic).
+gv_output_type(plain).
+gv_output_type('plain-ext').
+gv_output_type(png).
+gv_output_type(pov).
+gv_output_type(ps).
+gv_output_type(ps2).
+gv_output_type(psd).
+gv_output_type(sgi).
+gv_output_type(svg).
+gv_output_type(svgz).
+gv_output_type(tga).
+gv_output_type(tif).
+gv_output_type(tiff).
+gv_output_type(tk).
+gv_output_type(vml).
+gv_output_type(vmlz).
+gv_output_type(vrml).
+gv_output_type(wbmp).
+gv_output_type(webp).
+gv_output_type(xlib).
+gv_output_type(x11).
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
new file mode 100644
index 0000000..c95c9cc
--- /dev/null
+++ b/prolog/gv/gv_graph.pl
@@ -0,0 +1,252 @@
+:- module(
+  gv_graph,
+  [
+    gv_graph//1 % +Graph:compound
+  ]
+).
+
+/** <module> GraphViz graph
+
+Generates GraphViz graphs in the DOT format based on
+a Prolog representation of a graph.
+
+In GraphViz vertices are called 'nodes'.
+
+---
+
+@author Wouter Beek
+@version 2015/07, 2015/12
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(gv/gv_graph_comp)).
+:- use_module(library(lists)).
+:- use_module(library(option)).
+
+
+
+
+
+%! gv_graph(+Graph:compound)// is det.
+% Wrapper around gv_graph//2 with no indentation.
+
+gv_graph(G) --> gv_graph(G, 0).
+
+
+%! gv_graph(+Graph:compound, +Indent:nonneg)// is det.
+% The follow graph attributes are supported,
+% beyond the GraphViz attributes for graphs:
+%   * `directed(+boolean)`
+%      Whether the graph is directed (`true`) or undirected (`false`).
+%      Default: `false`.
+%   * `name(+GraphName:atom)`
+%   * `strict(+StrictGraph:boolean)`
+%      This forbids the creation of self-arcs and multi-edges;
+%      they are ignored in the input file.
+%      Only in combinattion with directionality `directed`.
+%
+% ```abnf
+% graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
+% ```
+%
+% `GraphTerm` is a compound term of the following form:
+% ```prolog
+% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
+% ```
+%
+% `RankedVertexTerms` is a list of compound terms of the following form:
+% ```prolog
+% RankVertex-ContentVertices
+% ```
+%
+% @tbd Add support for subgraphs (arbitrary nesting).
+% @tbd Add support for escape strings:
+%      http://www.graphviz.org/doc/info/attrs.html#k:escString
+% @tbd Assert attributes that are generic with respect to a subgraph.
+% @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
+
+gv_graph(G1, I) -->
+  {
+    include_ranks(G1, G2),
+    G2 = graph(VTerms,RankedVTerms,ETerms,GAttrs1),
+    shared_attributes(VTerms, SharedVAttrs, NewVTerms),
+    shared_attributes(ETerms, SharedEAttrs, NewETerms),
+    add_default(GAttrs1, overlap(false), GAttrs2),
+    I = 0
+  },
+
+  % The first statement in the GraphViz output.
+  % States that this file represents a graph according to the GraphViz format.
+  tab(I),
+  
+  % Strictness.
+  {select_option(strict(Strict), GAttrs2, GAttrs3, false)},
+  gv_strict(Strict),
+  
+  % Directedness.
+  {select_option(directed(Directed), GAttrs3, GAttrs4, true)},
+  gv_graph_type(Directed),
+  " ",
+  
+  % Graph name.
+  (   {select_option(name(GName), GAttrs4, GAttrs5)}
+  ->  gv_id(GName),
+      " "
+  ;   {GAttrs5 = GAttrs4}
+  ),
+
+  % The body of the DOT file appears between curly braces.
+  "{\n",
+
+  % The following lines are indented.
+  {NewI is I + 1},
+
+  % Attributes that apply to the graph as a whole.
+  gv_generic_attributes_statement(graph, NewI, GAttrs5),
+
+  % Attributes that are the same for all nodes.
+  gv_generic_attributes_statement(node, NewI, SharedVAttrs),
+
+  % Attributes that are the same for all edges.
+  gv_generic_attributes_statement(edge, NewI, SharedEAttrs),
+
+  % Only add a line_feed if some content was already written
+  % and some content is about to be written.
+  (   % Succeeds if no content was written.
+      {(GAttrs5 == [], SharedVAttrs == [], SharedEAttrs == [])}
+  ->  ""
+  ;   % Succeeds if no content is about to be written.
+      {(NewVTerms == [], RankedVTerms == [])}
+  ->  ""
+  ;   "\n"
+  ),
+
+  % The list of GraphViz nodes.
+  gv_node_statements(NewI, NewVTerms),
+  ({NewVTerms == []} -> "" ; "\n"),
+
+  % The ranked GraphViz nodes (displayed at the same height).
+  gv_ranked_node_collections(NewI, RankedVTerms),
+  ({RankedVTerms == []} -> "" ; "\n"),
+
+  {
+    findall(
+      edge(FromId,ToId,[]),
+      (
+        nth0(J1, RankedVTerms, rank(vertex(FromId,_),_)),
+        nth0(J2, RankedVTerms, rank(vertex(ToId,_),_)),
+        % We assume that the rank vertices are nicely ordered.
+        succ(J1, J2)
+      ),
+      RankEdges
+    )
+  },
+
+  % The rank edges.
+  gv_edge_statements(NewI, Directed, RankEdges),
+
+  % The non-rank edges.
+  gv_edge_statements(NewI, Directed, NewETerms),
+  
+  % Note that we do not include a line_feed here.
+
+  % We want to indent the closing curly brace.
+  tab(I),
+  "}\n".
+
+
+
+%! gv_edge_statements(
+%!   +Indent:nonneg,
+%!   +Directed:boolean,
+%!   +Statements:list(compound)
+%! )// is det.
+
+gv_edge_statements(I, Dir, L) --> *(gv_edge_statement(I, Dir), L).
+
+
+
+%! gv_edge_statements(+Indent:nonneg, +Statements:list(compound))// is det.
+
+gv_node_statements(I, L) --> *(gv_node_statement(I), L).
+
+
+
+%! gv_ranked_node_collections(+Indent:nonneg, +Collections:list)// is det.
+
+gv_ranked_node_collections(I, L) --> *(gv_ranked_node_collection(I), L).
+
+
+
+
+
+% HELPERS %
+
+%! add_default_option(
+%!   +Options:list(compound),
+%!   +Default:compound,
+%!   -NewOptions:list(compound)
+%! ) is det.
+
+add_default(L1, Opt, L2):-
+  Opt =.. [N,_Value],
+  Opt0 =.. [N,_FreshVar],
+  (   option(Opt0, L1)
+  ->  L2 = L1
+  ;   L2 = [Opt|L1]
+  ).
+
+
+
+%! gv_graph_type(+Directed:boolean)// is det.
+% The type of graph that is represented.
+
+gv_graph_type(false) --> !, "graph".
+gv_graph_type(true)  -->    "digraph".
+
+
+
+%! gv_strict(+Strict:boolean)// is det.
+% The keyword denoting that the graph is strict, i.e., has no self-arcs and
+% no multi-edges.
+% This only applies to directed graphs.
+
+gv_strict(false) --> !, "".
+gv_strict(true)  -->    "strict ".
+
+
+
+%! invlude_ranges(+Graph:compound, -GraphWithRanks:compound) is det.
+% Ensures that there is a ranks components in
+% the graph-denoting compound term.
+
+include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)):- !.
+include_ranks(graph(Vs,Es,L), graph(Vs,[],Es,L)).
+
+
+
+%! shared_attributes(
+%!   +Terms:list(compound),
+%!   -SharedAttributes:list(compound),
+%!   -NewTerms:list(compound)
+%! ) is det.
+
+shared_attributes(Ts1, Shared, Ts2):-
+  maplist(term_to_attrs, Ts1, L1),
+  extract_shared(L1, Shared),
+  maplist(remove_shared_attributes(Shared), L1, L2),
+  maplist(term_change_attrs, Ts1, L2, Ts2).
+
+term_to_attrs(edge(_,_,A), A).
+term_to_attrs(vertex(_,A), A).
+
+extract_shared([], []):- !.
+extract_shared(Argss, Shared):-
+  ord_intersection(Argss, Shared).
+
+remove_shared_attributes(Shared, Args1, Args2):-
+  ord_subtract(Args1, Shared, Args2).
+
+term_change_attrs(edge(From,To,_), A, edge(From,To,A)).
+term_change_attrs(vertex(Id,_), A, vertex(Id,A)).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
new file mode 100644
index 0000000..30ea9c5
--- /dev/null
+++ b/prolog/gv/gv_graph_comp.pl
@@ -0,0 +1,309 @@
+:- module(
+  gv_graph_comp,
+  [
+    gv_edge_statement//3, % +Indent:nonneg
+                          % +Directed:boolean
+                          % +Edge:compound
+    gv_generic_attributes_statement//3, % +Kind:oneof([edge,graph,node])
+                                        % +Indent:nonneg
+                                        % +CategoryAttributes:list(compound)
+    gv_id//1, % +Name:compound
+    gv_node_statement//2, % +Indent:nonneg
+                          % +Vertex:compound
+    gv_ranked_node_collection//2 % +Indent:nonneg
+                                 % +Rank
+  ]
+).
+
+/** <module> GraphViz graph components
+
+```abnf
+attr_list = "[" [a_list] "]" [attr_list]
+a_list = ID "=" ID [","] [a_list]
+```
+
+@author Wouter Beek
+@see http://www.graphviz.org/content/dot-language
+@version 2015/07-2015/08, 2015/10-2016/01
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(gv/gv_attrs)).
+:- use_module(library(gv/gv_html)).
+:- use_module(library(error)).
+:- use_module(library(lists)).
+:- use_module(library(ordsets)).
+
+
+
+
+
+%! gv_edge_statement(
+%!   +Indent:nonneg,
+%!   +Directed:boolean,
+%!   +Edge:compound
+%! )// is det.
+% A GraphViz statement describing an edge.
+%
+% @arg Indent The indentation level at which the edge statement is written.
+% @arg Directed Whether the graph is directed or not.
+% @arg GraphAttributes The attributes of the graph. Some of these attributes
+%      may be used in the edge statement (e.g., the colorscheme).
+% @arg Edge A compound term in the GIFormat, representing an edge.
+%
+% @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1
+%      at the from and/or to location.
+% @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
+
+gv_edge_statement(I, Dir, edge(From,To,Attrs)) -->
+  tab(I),
+
+  gv_node_id(From), " ",
+  gv_edge_operator(Dir), " ",
+  gv_node_id(To), " ",
+
+  % We want `colorscheme/1` from the edges and
+  % `directionality/1` from the graph.
+  gv_attrs(edge, Attrs),
+  "\n".
+
+%! gv_edge_operator(+Directed:boolean)// .
+% The binary edge operator between two vertices.
+% The operator that is used depends on whether the graph is directed or
+% undirected.
+%
+% @arg Directed Whether an edge is directed (operator `->`) or
+%      undirected (operator `--`).
+
+gv_edge_operator(Dir) -->
+  {must_be(boolean, Dir)},
+  ({Dir == false} -> "--" ; {Dir == true} -> "->").
+
+
+
+%! gv_generic_attributes_statement(
+%!   +Kind:oneof([edge,graph,node]),
+%!   +Indent:nonneg,
+%!   +CategoryAttrs
+%! )//
+% A GraphViz statement describing generic attributes for a category of items.
+%
+% @arg Kind The category of items for to the attributes apply.
+%      Possible values: `edge`, `graph`, and `node`.
+% @arg Indent An integer indicating the number of tabs.
+% @arg GraphAttributes A list of name-value pairs.
+% @arg CategoryAttributes A list of name-value pairs.
+%
+% ```
+% attr_stmt = (graph / node / edge) attr_list
+% ```
+
+gv_generic_attributes_statement(_, _, []) --> !, "".
+gv_generic_attributes_statement(Kind, I, Attrs) -->
+  tab(I),
+  gv_kind(Kind), " ",
+  gv_attrs(Kind, Attrs),
+  "\n", !.
+
+
+
+%! gv_kind(+Kind:oneof([edge,graph,node]))// .
+
+gv_kind(Kind) --> {must_be(oneof([edge,graph,node]), Kind)}, atom(Kind).
+
+
+
+%! gv_node_statement(+Indent:nonneg, +Vertex:compound)// is det.
+% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes').
+
+gv_node_statement(I, vertex(Id,Attrs)) -->
+  tab(I),
+  gv_node_id(Id),
+  gv_attrs(node, Attrs),
+  "\n".
+
+
+
+%! gv_ranked_node_collection(+Indent:nonneg, Rank:pair)// is det.
+
+gv_ranked_node_collection(I, RankVTerm-VTerms) -->
+  tab(I),
+  "{\n",
+
+  % The rank attribute.
+  {NewI is I + 1},
+  tab(NewI),
+  gv_attr(subgraph, rank(same)),
+  "\n",
+
+  % Vertice statements.
+  *(gv_node_statement(NewI), [RankVTerm|VTerms]),
+
+  % We want to indent the closing curly brace.
+  tab(I),
+  "\n}".
+
+
+
+
+
+% HELPERS %
+
+%! gv_attrs(
+%!   +Kind:oneof([edge,graph,node]),
+%!   +Attributes:list(compound)
+%! )// is det.
+
+gv_attrs(Kind, L) --> "[", *(gv_attr(Kind), L), "]".
+
+
+%! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det.
+% A single GraphViz attribute.
+% We assume that the attribute has already been validated.
+
+gv_attr(Context, Attr) -->
+  {Attr =.. [N,V]},
+  gv_id(N), "=", gv_attr_value(Context, N=V), ";".
+
+
+
+%! gv_id(+Id:compound)// is det.
+% Parse a GraphViz identifier.
+% There are 4 variants:
+%   1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters,
+%      underscores (`_`) or digits (`[0-9]`), not beginning with a digit.
+%   2. A numeral `[-]?(.[0-9]+ | [0-9]+(.[0-9]*)? )`.
+%   3. Any double-quoted string (`"..."`) possibly containing
+%      escaped quotes (`\"`).
+%      In quoted strings in DOT, the only escaped character is
+%      double-quote (`"`). That is, in quoted strings, the dyad `\"`
+%      is converted to `"`. All other characters are left unchanged.
+%      In particular, `\\` remains `\\`.
+%      Layout engines may apply additional escape sequences.
+%      Represented by a Prolog term of the form `double_quoted_string(ATOM)`.
+%   4. An HTML string (`<...>`).
+%      Represented by a Prolog term of the form `html_like_label(COMPOUND)`.
+%
+% @tbd Add support for HTML-like labels:
+%      http://www.graphviz.org/doc/info/shapes.html#html
+%      This requires an XML grammar!
+
+% HTML strings (assumed to be the same as HTML-like labels).
+gv_id(html_like_label(Content)) --> !,
+  gv_html_like_label(Content).
+% Double-quoted strings.
+% The quotes are already part of the given atom.
+gv_id(double_quoted_string(Atom)) --> !,
+  "\"", atom(Atom), "\"".
+% Numerals.
+gv_id(N) -->
+  {number(N)}, !,
+  {number_codes(N, Cs)},
+  Cs.
+% Alpha-numeric strings.
+gv_id(Atom) -->
+  {atom_codes(Atom, [H|T])},
+  gv_id_first(H),
+  gv_id_rest(T), !,
+  % Variant 1 identifiers should not be (case-variants of) a
+  % GraphViz keyword.
+  {\+ gv_keyword([H|T])}.
+
+
+%! gv_id_first(+First:code)// is det.
+% Generates the first character of a GraphViz identifier.
+
+gv_id_first(C)   --> alpha(C), !.
+gv_id_first(0'_) --> "_".
+
+
+%! gv_id_rest(+NonFirst:code)// is det.
+% Generates a non-first character of a GraphViz identifier.
+
+gv_id_rest([H|T])   --> alphadigit(H), !, gv_id_rest(T).
+gv_id_rest([0'_|T]) --> "_",           !, gv_id_rest(T).
+gv_id_rest([])      --> "".
+
+
+
+%! gv_keyword(+Codes:list(code)) is semidet.
+% Succeeds if the given codes for a GraphViz reserved keyword.
+
+gv_keyword(Cs):-
+  % Obviously, the keywords do not occur on the difference list input.
+  % So we must use phrase/[2,3].
+  phrase(gv_keyword, Cs).
+
+
+%! gv_keyword// .
+% GraphViz has reserved keywords that cannot be used as identifiers.
+% GraphViz keywords are case-insensitive.
+
+gv_keyword --> "digraph".
+gv_keyword --> "edge".
+gv_keyword --> "graph".
+gv_keyword --> "node".
+gv_keyword --> "strict".
+gv_keyword --> "subgraph".
+
+
+
+%! gv_node_id(+NodeId:compound)// .
+% GraphViz node identifiers can be of the following two types:
+%   1. A GraphViz identifier, see gv_id//1.
+%   2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0.
+%
+% @tbd Add support for GraphViz port indicators
+%      inside GraphViz node identifiers.
+
+gv_node_id(Id) --> gv_id(Id), !.
+%gv_node_id(_) --> gv_id(_), gv_port.
+gv_node_id(Id) --> {type_error(gv_node_id, Id)}.
+
+
+
+%! gv_numeral(-Number)// is det.
+% ```bnf
+% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
+% ```
+
+gv_numeral(N) -->
+  ("-" -> {Sg = -1} ; {Sg = 1}),
+  (   "."
+  ->  {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)}
+  ;   +(digit, Ds1), {pos_sum(Ds1, I)},
+      ("." -> *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0})
+  ),
+  {N is Sg * (I + Frac)}.
+
+
+
+%! gv_port// is det.
+
+gv_port --> gv_port_location, (gv_port_angle ; "").
+gv_port --> gv_port_angle, (gv_port_location ; "").
+gv_port --> ":", gv_compass_pt(_).
+
+gv_port_angle --> "@", gv_id(_).
+
+gv_port_location --> ":", gv_id(_).
+gv_port_location --> ":[", gv_id(_), ",", gv_id(_), "]".
+
+
+
+%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
+% ```
+% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ )
+% ```
+
+gv_compass_pt('_') --> "_".
+gv_compass_pt(c)   --> "c".
+gv_compass_pt(e)   --> "e".
+gv_compass_pt(n)   --> "n".
+gv_compass_pt(ne)  --> "ne".
+gv_compass_pt(nw)  --> "nw".
+gv_compass_pt(s)   --> "s".
+gv_compass_pt(se)  --> "se".
+gv_compass_pt(sw)  --> "sw".
+gv_compass_pt(w)   --> "w".
diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl
new file mode 100644
index 0000000..b5c1368
--- /dev/null
+++ b/prolog/gv/gv_html.pl
@@ -0,0 +1,255 @@
+:- module(
+  gv_html,
+  [
+    gv_html_like_label//1 % +Content:compound
+  ]
+).
+
+/** <module> GraphViz: HTML-like labels
+
+Grammar taken from the GraphViz Web site:
+
+```
+label :   text
+        | table
+text :   textitem
+       | text textitem
+textitem :   string
+           | <BR/>
+           | <FONT> text </FONT>
+           | <I> text </I>
+           | <B> text </B>
+           | <U> text </U>
+           | <O> text </O>
+           | <SUB> text </SUB>
+           | <SUP> text </SUP>
+           | <S> text </S>
+table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
+rows :   row
+       | rows row
+       | rows <HR/> row
+row: <TR> cells </TR>
+cells :   cell
+        | cells cell
+        | cells <VR/> cell
+cell:   <TD> label </TD>
+      | <TD> <IMG/> </TD>
+```
+
+---
+
+@author Wouter Beek
+@see http://www.graphviz.org/content/node-shapes#html
+@version 2015/07, 2015/12
+*/
+
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(html/html_dcg)).
+
+
+
+
+
+%! gv_html_like_label(+Content:compound)// is det.
+
+gv_html_like_label(Content) --> "<", label(Content), ">".
+
+
+
+%! cell(+Contents:compound)// is det.
+% Supported attributes for `TD`:
+%   - `ALIGN="CENTER|LEFT|RIGHT|TEXT"`
+%   - `BALIGN="CENTER|LEFT|RIGHT"`
+%   - `BGCOLOR="color"`
+%   - `BORDER="value"`
+%   - `CELLPADDING="value"`
+%   - `CELLSPACING="value"`
+%   - `COLOR="color"`
+%   - `COLSPAN="value"`
+%   - `FIXEDSIZE="FALSE|TRUE"`
+%   - `GRADIENTANGLE="value"`
+%   - `HEIGHT="value"`
+%   - `HREF="value"`
+%   - `ID="value"`
+%   - `PORT="portName"`
+%   - `ROWSPAN="value"`
+%   - `SIDES="value"`
+%   - `STYLE="value"`
+%   - `TARGET="value"`
+%   - `TITLE="value"`
+%   - `TOOLTIP="value"`
+%   - `VALIGN="MIDDLE|BOTTOM|TOP"`
+%   - `WIDTH="value"`
+%
+% Supported attributes for `IMG`:
+%   - `SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"`
+%   - `SRC="value"`
+
+cell(td(Contents)) --> !,
+  cell(td([],Contents)).
+cell(td(Attrs1,Image)) -->
+  {(Image =.. [img,Attrs2] -> true ; Image == img -> Attrs2 = [])}, !,
+  html_element(td, Attrs1, html_element(img,Attrs2)).
+cell(td(Attrs,Contents)) -->
+  html_element(td, Attrs, label(Contents)).
+
+
+
+%! cells(+Contents:list(compound))// is det.
+
+cells([H,vr|T]) --> !, cell(H), html_element(vr), cells(T).
+cells([H|T])    --> !, cell(H), cells(T).
+cells([])       --> "".
+
+
+
+%! label(+Content:compound)// is det.
+% GraphViz HTML-like label.
+
+label(Content) --> table(Content), !.
+label(Content) --> text(Content).
+
+
+
+%! row(+Contents:compound)// is det.
+
+row(tr(Contents)) --> html_element(tr, [], cells(Contents)).
+
+
+
+%! rows(+Contents:list)// is det.
+
+rows([hr|T]) --> !, html_element(hr), rows(T).
+rows([H|T]) --> row(H), !, rows(T).
+rows([]) --> "".
+
+
+
+%! table(+Contents:compound)// is det.
+% ```
+% table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
+% ```
+%
+% Supported attributes for `TABLE`:
+%   - `ALIGN="CENTER|LEFT|RIGHT"`
+%   - `BGCOLOR="color"`
+%   - `BORDER="value"`
+%   - `CELLBORDER="value"`
+%   - `CELLPADDING="value"`
+%   - `CELLSPACING="value"`
+%   - `COLOR="color"`
+%   - `COLUMNS="value"`
+%   - `FIXEDSIZE="FALSE|TRUE"`
+%   - `GRADIENTANGLE="value"`
+%   - `HEIGHT="value"`
+%   - `HREF="value"`
+%   - `ID="value"`
+%   - `PORT="portName"`
+%   - `ROWS="value"`
+%   - `SIDES="value"`
+%   - `STYLE="value"`
+%   - `TARGET="value"`
+%   - `TITLE="value"`
+%   - `TOOLTIP="value"`
+%   - `VALIGN="MIDDLE|BOTTOM|TOP"`
+%   - `WIDTH="value"`
+%
+% Supported attributes for `FONT`:
+%  - `COLOR="color"`
+%    Sets the color of the font within the scope of `<FONT>...</FONT>`,
+%     or the border color of the table or cell within the scope of
+%     `<TABLE>...</TABLE>`, or `<TD>...</TD>`.
+%    This color can be overridden by a `COLOR` attribute in descendents.
+%    By default, the font color is determined by the `fontcolor` attribute
+%     of the corresponding node, edge or graph, and the border color is
+%     determined by the color attribute of the corresponding node, edge or
+%     graph.
+%   - `FACE="fontname"`
+%   - `POINT-SIZE="value"`
+
+table(table(Contents)) --> !,
+  table(table([],Contents)).
+table(table(Attrs,Contents)) --> !,
+  html_element(table, Attrs, rows(Contents)).
+table(font(Table)) --> !,
+  table(font([],Table)).
+table(font(Attrs1,Table)) -->
+  {(  Table =.. [table,Attrs2,Contents]
+  ->  true
+  ;   Table =.. [table,Contents]
+  ->  Attrs2 = []
+  )},
+  html_element(font, Attrs1, table(table(Attrs2,Contents))).
+
+
+
+%! text(+Contents:list)// .
+% ```
+% text :   textitem
+%        | text textitem
+% ```
+
+text(Contents) --> {is_list(Contents)}, !, '+'(textitem, Contents).
+text(Content)  --> text([Content]).
+
+
+
+%! textitem(+Content:compound)// .
+% ```
+% textitem :   string
+%            | <BR/>
+%            | <FONT> text </FONT>
+%            | <I> text </I>
+%            | <B> text </B>
+%            | <U> text </U>
+%            | <O> text </O>
+%            | <SUB> text </SUB>
+%            | <SUP> text </SUP>
+%            | <S> text </S>
+% ```
+%
+% Supported attributes for BR:
+%   * `ALIGN="CENTER|LEFT|RIGHT"`
+%
+% Supported attributes for FONT:
+%   * COLOR="color"
+%   * FACE="fontname"
+%   * POINT-SIZE="value"
+
+textitem(br(Attrs)) --> !,
+  html_element(br, Attrs).
+% Compound term: parser.
+textitem(Compound) -->
+  {var(Compound)}, !,
+  html_element(Name, _, text(Content)),
+  {
+    supported_html_element(Name),
+    Compound =.. [Name,Content]
+  }.
+% Compound term: generator.
+textitem(Compound) -->
+  {
+    Compound =.. [Name,Content], !,
+    supported_html_element(Name)
+  },
+  html_element(Name, _, text(Content)).
+textitem(String) -->
+  html_string(String).
+
+
+
+
+
+% HELPERS %
+
+%! supported_html_element(+Name:atom) is semidet.
+%! supported_html_element(-Name:atom) is multi.
+
+supported_html_element(b).
+supported_html_element(font).
+supported_html_element(i).
+supported_html_element(o).
+supported_html_element(s).
+supported_html_element(sub).
+supported_html_element(sup).
+supported_html_element(u).
diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl
new file mode 100644
index 0000000..4382aa6
--- /dev/null
+++ b/prolog/tree/tree_viz.pl
@@ -0,0 +1,65 @@
+:- module(
+  tree_viz,
+  [
+    tree_export_graph/2, % +Tree, ExportG
+    tree_export_graph/3, % +Tree, ExportG, +Opts
+    tree_viz/2,          % +Tree, ?File
+    tree_viz/3           % +Tree, ?File, +Opts
+  ]
+).
+
+/** <module> Tree visualization
+
+Export trees to GraphViz.
+
+@author Wouter Beek
+@version 2016/01-2016/02
+*/
+
+:- use_module(library(graph/build_export_graph)).
+:- use_module(library(gv/gv_file)).
+:- use_module(library(ordsets)).
+:- use_module(library(tree/l_tree)).
+:- use_module(library(tree/s_tree)).
+
+:- predicate_options(tree_export_graph/3, 3, [
+     pass_to(build_export_graph/4, 4)
+   ]).
+:- predicate_options(tree_viz/3, 3, [
+     pass_to(graph_viz/3, 3),
+     pass_to(tree_to_graph/3, 3)
+   ]).
+
+
+
+
+
+%! tree_export_graph(+Tree, -ExportG) is det.
+%! tree_export_graph(+Tree, -ExportG, +Opts) is det.
+% Opts are passed to build_export_graph/4.
+
+tree_export_graph(Tree, ExportG) :-
+  tree_export_graph(Tree, ExportG, []).
+
+tree_export_graph(Tree, ExportG, Opts) :-
+  (   is_s_tree(Tree)
+  ->  tree_to_graph(Tree, G)
+  ;   is_l_tree(Tree)
+  ->  l_tree_to_graph(Tree, G)
+  ),
+  build_export_graph(G, ExportG, Opts).
+
+
+
+%! tree_viz(+Tree, ?File) is det.
+%! tree_viz(+Tree, ?File, +Opts) is det.
+% Stores the given tree term into a GraphViz file.
+%
+% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3.
+
+tree_viz(Tree, File) :-
+  tree_viz(Tree, File, []).
+
+tree_viz(Tree, File, Opts) :-
+  tree_export_graph(Tree, ExportG, Opts),
+  graph_viz(ExportG, File, Opts).
diff --git a/test/gv_attrs.log b/test/gv_attrs.log
new file mode 100644
index 0000000..a9c6010
--- /dev/null
+++ b/test/gv_attrs.log
@@ -0,0 +1,169 @@
+assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')).
+assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')).
+assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')).
+assert(gv_attr('_background',[graph],[string],_,'','')).
+assert(gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only')).
+assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')).
+assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')).
+assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')).
+assert(gv_attr(bb,[graph],[rect],'','','write only')).
+assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')).
+assert(gv_attr(center,[graph],[bool],false,'','')).
+assert(gv_attr(charset,[graph],[string],'"UTF-8"','','')).
+assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')).
+assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')).
+assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')).
+assert(gv_attr(comment,[edge,graph,node],[string],'','','')).
+assert(gv_attr(compound,[graph],[bool],false,'','dot only')).
+assert(gv_attr(concentrate,[graph],[bool],false,'','')).
+assert(gv_attr(constraint,[edge],[bool],true,'','dot only')).
+assert(gv_attr(decorate,[edge],[bool],false,'','')).
+assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')).
+assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')).
+assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')).
+assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')).
+assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')).
+assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')).
+assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')).
+assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')).
+assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')).
+assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')).
+assert(gv_attr(fixedsize,[node],[bool,string],false,'','')).
+assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')).
+assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','')).
+assert(gv_attr(fontnames,[graph],[string],'','','svg only')).
+assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')).
+assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')).
+assert(gv_attr(forcelabels,[graph],[bool],true,'','')).
+assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')).
+assert(gv_attr(group,[node],[string],'','','dot only')).
+assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(head_lp,[edge],[point],'','','write only')).
+assert(gv_attr(headclip,[edge],[bool],true,'','')).
+assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(headlabel,[edge],[lblString],'','','')).
+assert(gv_attr(headport,[edge],[portPos],center,'','')).
+assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(height,[node],[double],'0.5','0.02','')).
+assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
+assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
+assert(gv_attr(image,[node],[string],'','','')).
+assert(gv_attr(imagepath,[graph],[string],'','','')).
+assert(gv_attr(imagescale,[node],[bool,string],false,'','')).
+assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')).
+assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','')).
+assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')).
+assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')).
+assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')).
+assert(gv_attr(labelfloat,[edge],[bool],false,'','')).
+assert(gv_attr(labelfontcolor,[edge],[color],black,'','')).
+assert(gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','')).
+assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')).
+assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(labeljust,[cluster,graph],[string],'"c"','','')).
+assert(gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','')).
+assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(landscape,[graph],[bool],false,'','')).
+assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')).
+assert(gv_attr(layerlistsep,[graph],[string],'","','','')).
+assert(gv_attr(layers,[graph],[layerList],'','','')).
+assert(gv_attr(layerselect,[graph],[layerRange],'','','')).
+assert(gv_attr(layersep,[graph],[string],'" :\\t"','','')).
+assert(gv_attr(layout,[graph],[string],'','','')).
+assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')).
+assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')).
+assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')).
+assert(gv_attr(lhead,[edge],[string],'','','dot only')).
+assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')).
+assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')).
+assert(gv_attr(ltail,[edge],[string],'','','dot only')).
+assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')).
+assert(gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','')).
+assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')).
+assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')).
+assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')).
+assert(gv_attr(minlen,[edge],[int],'1','0','dot only')).
+assert(gv_attr(mode,[graph],[string],major,'','neato only')).
+assert(gv_attr(model,[graph],[string],shortpath,'','neato only')).
+assert(gv_attr(mosek,[graph],[bool],false,'','neato only')).
+assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')).
+assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')).
+assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')).
+assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')).
+assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')).
+assert(gv_attr(ordering,[graph,node],[string],'','','dot only')).
+assert(gv_attr(orientation,[node],[double],'0.0','360.0','')).
+assert(gv_attr(orientation,[graph],[string],'','','')).
+assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')).
+assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')).
+assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')).
+assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')).
+assert(gv_attr(pack,[graph],[bool,int],false,'','')).
+assert(gv_attr(packmode,[graph],[packMode],node,'','')).
+assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')).
+assert(gv_attr(page,[graph],[double,point],'','','')).
+assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')).
+assert(gv_attr(pencolor,[cluster],[color],black,'','')).
+assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')).
+assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')).
+assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')).
+assert(gv_attr(pos,[edge,node],[point,splineType],'','','')).
+assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')).
+assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')).
+assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')).
+assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')).
+assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')).
+assert(gv_attr(ratio,[graph],[double,string],'','','')).
+assert(gv_attr(rects,[node],[rect],'','','write only')).
+assert(gv_attr(regular,[node],[bool],false,'','')).
+assert(gv_attr(remincross,[graph],[bool],true,'','dot only')).
+assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')).
+assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')).
+assert(gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only')).
+assert(gv_attr(rotate,[graph],[int],'0','','')).
+assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')).
+assert(gv_attr(samehead,[edge],[string],'','','dot only')).
+assert(gv_attr(sametail,[edge],[string],'','','dot only')).
+assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')).
+assert(gv_attr(scale,[graph],[double,point],'','','not dot')).
+assert(gv_attr(searchsize,[graph],[int],'30','','dot only')).
+assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')).
+assert(gv_attr(shape,[node],[shape],ellipse,'','')).
+assert(gv_attr(shapefile,[node],[string],'','','')).
+assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')).
+assert(gv_attr(sides,[node],[int],'4','0','')).
+assert(gv_attr(size,[graph],[double,point],'','','')).
+assert(gv_attr(skew,[node],[double],'0.0','-100.0','')).
+assert(gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only')).
+assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')).
+assert(gv_attr(splines,[graph],[bool,string],'','','')).
+assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')).
+assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')).
+assert(gv_attr(stylesheet,[graph],[string],'','','svg only')).
+assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(tail_lp,[edge],[point],'','','write only')).
+assert(gv_attr(tailclip,[edge],[bool],true,'','')).
+assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(taillabel,[edge],[lblString],'','','')).
+assert(gv_attr(tailport,[edge],[portPos],center,'','')).
+assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')).
+assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')).
+assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')).
+assert(gv_attr(vertices,[node],[pointList],'','','write only')).
+assert(gv_attr(viewport,[graph],[viewPort],'','','')).
+assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')).
+assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')).
+assert(gv_attr(width,[node],[double],'0.75','0.01','')).
+assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')).
+assert(gv_attr(xlabel,[edge,node],[lblString],'','','')).
+assert(gv_attr(xlp,[edge,node],[point],'','','write only')).
+assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')).
diff --git a/test/test.pl b/test/test.pl
new file mode 100644
index 0000000..83dc023
--- /dev/null
+++ b/test/test.pl
@@ -0,0 +1,15 @@
+%/fca
+:- use_module(library(fca/fca_viz)).
+%/graph
+:- use_module(library(graph/build_export_graph)).
+%/gv
+:- use_module(library(gv/gv_attrs)).
+:- use_module(library(gv/gv_attr_type)).
+:- use_module(library(gv/gv_color)).
+:- use_module(library(gv/gv_dom)).
+:- use_module(library(gv/gv_file)).
+:- use_module(library(gv/gv_graph)).
+:- use_module(library(gv/gv_graph_comp)).
+:- use_module(library(gv/gv_html)).
+%/tree
+:- use_module(library(tree/tree_viz)).
 
```
 
<h2 id="25"> 25: 正在比较变动前 6dc1cf5 和变动后 76ea35d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index bd24270..b25c15b 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,3 +1 @@
 *~
-*#
-*.db
diff --git a/.gitmodules b/.gitmodules
new file mode 100644
index 0000000..a63cbff
--- /dev/null
+++ b/.gitmodules
@@ -0,0 +1,6 @@
+[submodule "Prolog-Library-Collection"]
+	path = Prolog-Library-Collection
+	url = https://github.com/wouterbeek/Prolog-Library-Collection.git
+[submodule "plHtml"]
+	path = plHtml
+	url = https://github.com/wouterbeek/plHtml.git
diff --git a/LICENSE.txt b/LICENSE.txt
deleted file mode 100644
index c7b7798..0000000
--- a/LICENSE.txt
+++ /dev/null
@@ -1,21 +0,0 @@
-The MIT License (MIT)
-
-Copyright (c) 2015 Wouter Beek
-
-Permission is hereby granted, free of charge, to any person obtaining a copy
-of this software and associated documentation files (the "Software"), to deal
-in the Software without restriction, including without limitation the rights
-to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
-copies of the Software, and to permit persons to whom the Software is
-furnished to do so, subject to the following conditions:
-
-The above copyright notice and this permission notice shall be included in
-all copies or substantial portions of the Software.
-
-THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
-AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
-OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
-THE SOFTWARE.
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
new file mode 160000
index 0000000..5b34b01
--- /dev/null
+++ b/Prolog-Library-Collection
@@ -0,0 +1 @@
+Subproject commit 5b34b01ab0cc82a56e6fd90fc26e75da22f5a0fe
diff --git a/README.md b/README.md
deleted file mode 100644
index 23a45db..0000000
--- a/README.md
+++ /dev/null
@@ -1,151 +0,0 @@
-plGraphViz
-==========
-
-This library allows you to easily export graphs represented as Prolog terms
-using [GraphViz](http://www.graphviz.org/), an advanced graph drawing library.
-The Prolog terms have the following form:
-
-~~~prolog
-graph(Vertices, Edges, GraphAttrs)
-~~~
-
-`Vertices` and `Edges` are lists of compound terms of the following form:
-
-~~~prolog
-vertex(Id, VertexAttrs)
-edge(FromId, ToId, EdgeAttrs)
-~~~
-
-`Id` identifies a vertex and may or may not occur in any of the edges
-(i.e., unconnected vertices are allowed).
-`FromId` and `ToId` may occur in the list of vertices,
-in order to draw an edge between vertices with set attributes.
-
-Attributes have the form `Name=Value`.
-`GraphAttrs` are attributes of the graph.
-`VertexAttrs` are attributes of the vertex.
-`EdgeAttrs` are attributes of the edge.
-
-Attribute values are given as Prolog terms as well,
-and are type-checked before exporting.
-Many of the GraphViz attributes are supported.
-New ones are added on an as-needed bases
-(open an issue on Github if you want to see a specific feature added!).
-HTML-like labels are supported, allowing complex tables to be shown
-inside vertices.
-
----
-
-### Installation
-
-~~~shell
-$ git clone https://github.com/wouterbeek/plGraphViz.git
-$ cd plGraphViz
-$ git submodule update --init
-~~~
-
-### Example
-
-~~~prolog
-$ swipl run.pl
-?- export_graph_to_gv_file(
-     graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]),
-     File,
-     [method(sfdp),output(png)]
-   ).
-   File = 'PATH/plGraphViz/data/tmp.png'
-~~~
-
-![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png "Example graph.")
-
-The graphic can be saved to a different file by instantiating
-the `File` argument.
-
----
-
-### 'Method' option
-
-Option `method(+atom)` sets the drawing method that is used by GraphViz
- to place the vertices and edges.
-The following values are supported.
-
-| **Value**       | **Description**         |
-| `circo`         | Circular layout.        |
-| `dot` (default) | Directed graph.         |
-| `fdp`           | Undirected graph.       |
-| `neato`         | Undirected graph.       |
-| `osage`         | Tree map.               |
-| `sfdp`          | Large undirected graph. |
-| `twopi`         | Radical layouts.        |
-
----
-
-### 'Output' option
-
-Option `output(+atom)` sets the type of file the graph is written to.
-The following values are supported.
-
-| **Value**             | **Description**                       |
-|:---------------------:|:--------------------------------------|
-| `bmp`                 | Windows Bitmap Format                 |
-| `canon`               |                                       |
-| `dot`                 |                                       |
-| `gv`,  `xdot`, `xdot1.2`, `xdot1.4` | DOT                     |
-| `cgimage`             | CGImage bitmap format                 |
-| `cmap`                | Client-side imagemap (deprecated)     |
-| `eps`                 | Encapsulated PostScript               |
-| `exr`                 | OpenEXR                               |
-| `fig`                 |                                       |
-| `gd`, `gd2`           | GD/GD2 formats                        |
-| `gif`                 |                                       |
-| `gtk`                 | GTK canvas                            |
-| `ico`                 | Icon Image File Format                |
-| `imap`                |                                       |
-| `cmapx`               | Server-side and client-side imagemaps |
-| `imap_np`, `cmapx_np` | Server-side and client-side imagemaps |
-| `ismap`               | Server-side imagemap (deprecated)     |
-| `jp2`                 | JPEG 2000                             |
-| `jpg`, `jpeg`, `jpe`  | JPEG                                  |
-| `pct`, `pict`         | PICT                                  |
-| `pdf` (default)       | Portable Document Format (PDF)        |
-| `pic`                 | Kernighan's PIC graphics language     |
-| `plain`, `plain-ext`  | Simple text format                    |
-| `png`                 | Portable Network Graphics format      |
-| `pov`                 | POV-Ray markup language (prototype)   |
-| `ps`                  | PostScript                            |
-| `ps2`                 | PostScript for PDF                    |
-| `psd`                 | PSD                                   |
-| `sgi`                 | SGI                                   |
-| `svg`, `svgz`         | Scalable Vector Graphics              |
-| `tga`                 | Truevision TGA                        |
-| `tif`, `tiff`         | TIFF (Tag Image File Format)          |
-| `tk`                  | TK graphics                           |
-| `vml`, `vmlz`         | Vector Markup Language (VML)          |
-| `vrml`                | VRML                                  |
-| `wbmp`                | Wireless BitMap format                |
-| `webp`                | Image format for the Web              |
-| `xlib`, `x11`         | Xlib canvas                           |
-
----
-
-### HTML-like labels
-
-Example of using HTML-like labels:
-
-~~~prolog
-export_graph_to_gv_file(
-  graph(
-    [vertex(1,[]),vertex(2,[label=html(table([tr([td(a),td(b)]),tr([td(c),td(d)])]))])],
-    [edge(1,2,[label='From 1 to 2.'])],
-    []
-  ),
-  File,
-  []
-).
-~~~
-
-![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example2.png "Example graph with HTML-like labels.")
-
----
-
-Developed during 2013-2014 by [Wouter Beek](http://www.wouterbeek.com).
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
deleted file mode 100644
index bcc7654..0000000
--- a/data/gv_attrs_scrape.pl
+++ /dev/null
@@ -1,119 +0,0 @@
-:- module(
-  gv_attrs_scrape,
-  [
-    gv_attrs_scrape/1 % +File
-  ]
-).
-
-/** <module> GraphViz: Scrape attributes
-
-Writes compound terms of the following form to file:
-
-```prolog
-gv_attr(
-  ?Name,
-  ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
-  ?Types:list(atom),
-  ?Default,
-  ?Minimum,
-  ?Notes
-) is nondet.
-```
-
-@author Wouter Beek
-@version 2015/10, 2016/07
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(debug)).
-:- use_module(library(gv/gv_attr_type)).
-:- use_module(library(http/http_download)).
-:- use_module(library(lists)).
-:- use_module(library(os/io)).
-:- use_module(library(pl_term)).
-:- use_module(library(print_ext)).
-:- use_module(library(xpath)).
-:- use_module(library(xpath/xpath_table)).
-:- use_module(library(yall)).
-
-
-
-
-
-%! gv_attrs_scrape(+File) is det.
-
-gv_attrs_scrape(File):-
-  debug(gv, "Updating the GraphViz attributes table.", []),
-  call_to_stream(File, [In,Meta,Meta]>>gv_attrs_download(In)).
-
-
-gv_attrs_download(Write):-
-  gv_attrs_iri(Iri),
-  html_download(Iri, Dom),
-  xpath_chk(Dom, //table(@align=lower_case(center)), TableDom),
-  xpath_table(TableDom, _, Rows),
-  maplist(write_attr_row(Write), Rows).
-
-
-write_attr_row(Write, [Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
-  atom_phrase(translate_usedby(UsedBy2), UsedBy1),
-  once(atom_phrase(translate_type(Types2), Types1)),
-  sort(UsedBy2, UsedBy3),
-  translate_default(Default1, Default2),
-  with_output_to(
-    Write,
-    write_fact(gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes))
-  ).
-
-gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html').
-
-
-
-
-
-% HELPERS %
-
-%! translate_default(+Default1, -Default2) is det.
-
-% The empty string is represented by the empty atom.
-translate_default('""', ''):- !.
-% The absence of a default value is represented by an uninstantiated variable.
-translate_default('<none>', _):- !.
-translate_default(Default, Default).
-
-
-
-%! translate_type(-Types:list(atom))// is det.
-
-translate_type([H|T]) -->
-  gv_attr_type(H),
-  whites,
-  translate_type(T).
-translate_type([H]) -->
-  gv_attr_type(H).
-translate_type([]) --> "".
-
-
-
-%! translated_usedby(
-%!   -UsedBy:list(oneof([cluster,edge,graph,node,subgraph]))
-%! )// is det.
-
-translate_usedby([cluster|T]) -->
-  "C", !,
-  translate_usedby(T).
-translate_usedby([edge|T]) -->
-  "E", !,
-  translate_usedby(T).
-translate_usedby([graph|T]) -->
-  "G", !,
-  translate_usedby(T).
-translate_usedby([node|T]) -->
-  "N", !,
-  translate_usedby(T).
-translate_usedby([subgraph|T]) -->
-  "S", !,
-  translate_usedby(T).
-translate_usedby([]) -->
-  "".
diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl
deleted file mode 100644
index 102a02a..0000000
--- a/data/gv_color_scrape.pl
+++ /dev/null
@@ -1,52 +0,0 @@
-:- module(
-  gv_color_scrape,
-  [
-    gv_color_scrape/1 % +File
-  ]
-).
-
-/** <module> GraphViz: Scrape colors
-
-@author Wouter Beek
-@version 2015/10, 2016/07
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(debug)).
-:- use_module(library(http/http_download)).
-:- use_module(library(lists)).
-:- use_module(library(os/io)).
-:- use_module(library(pl_term)).
-:- use_module(library(print_ext)).
-:- use_module(library(xpath)).
-:- use_module(library(xpath/xpath_table)).
-:- use_module(library(yall)).
-
-
-
-
-
-%! gv_color_scrape(+File) is det.
-
-gv_color_scrape(File):-
-  debug(io, "Updating the GraphViz color table.", []),
-  call_to_stream(File, [In,Meta,Meta]>>gv_color_download(In)).
-
-
-gv_color_download(Write):-
-  gv_color_iri(Iri),
-  html_download(Iri, Dom),
-  xpath_chk(Dom, //table(1), TableDom1),
-  xpath_chk(Dom, //table(2), TableDom2),
-  maplist(write_color_table(Write), [x11,svg], [TableDom1,TableDom2]).
-
-
-write_color_table(Write, Colorscheme, TableDom):-
-  xpath_table(TableDom, _, Rows),
-  append(Rows, Cells),
-  forall(
-    member(Cell, Cells),
-    with_output_to(Write, write_fact(gv_color(Colorscheme, Cell)))
-  ).
-
-gv_color_iri('http://www.graphviz.org/doc/info/colors.html').
diff --git a/example1.png b/example1.png
deleted file mode 100644
index 31e7ba6..0000000
Binary files a/example1.png and /dev/null differ
diff --git a/example2.png b/example2.png
deleted file mode 100644
index 6e44b16..0000000
Binary files a/example2.png and /dev/null differ
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
new file mode 100644
index 0000000..7a64c82
--- /dev/null
+++ b/gv_attr_type.pl
@@ -0,0 +1,417 @@
+:- module(
+  gv_attr_type,
+  [
+    gv_attr_type/1, % ?Type:atom
+    addDouble//1, % +Double:float
+    addPoint//1, % +Point:compound
+    arrowType//1, % +ArrowType:atom
+    bool//1, % +Boolean:boolean
+    clusterMode//1, % +ClusterMode:atom
+    dirType//1, % +DirectionType:oneof([back,both,forward,none])
+    double//1, % +Double:float
+    doubleList//1, % +Doubles:list(float)
+    escString//1,
+    %layerList//1,
+    %layerRange//1,
+    lblString//1,
+    int//1, % +Integer:integer
+    outputMode//1, % +OutputMode:atom
+    %packMode//1,
+    pagedir//1, % +Pagedir:atom
+    point//1, % +Point:compound
+    pointList//1, % +Points:list(compound)
+    %portPos//1,
+    quadType//1, % +QuadType:atom
+    rankType//1, % +RankType:atom
+    rankdir//1, % +RankDirection:atom
+    rect//1, % +Rectangle:compound
+    shape//1,
+    smoothType//1, % +SmoothType:atom
+    %splineType//1,
+    %startType//1,
+    string//1, % ?Content:atom
+    style//2 % +Context:oneof([cluster,edge,node])
+             % +Style:atom
+    %viewPort//1
+  ]
+).
+:- reexport(
+  plGraphViz(gv_color),
+  [
+    color//1, % +Color:compound
+    colorList//1 % +ColorList:list(compound)
+  ]
+).
+
+/** <module> GraphViz attribute types
+
+@author Wouter Beek
+@version 2014/06
+*/
+
+:- use_module(dcg(dcg_abnf)).
+:- use_module(dcg(dcg_cardinal)).
+:- use_module(dcg(dcg_content)).
+
+:- use_module(plGraphViz(gv_html)).
+
+
+
+%! gv_attr_type(?Type:atom) is nondet.
+
+gv_attr_type(addDouble).
+gv_attr_type(addPoint).
+gv_attr_type(arrowType).
+gv_attr_type(bool).
+gv_attr_type(color).
+gv_attr_type(colorList).
+gv_attr_type(clusterMode).
+gv_attr_type(dirType).
+gv_attr_type(double).
+gv_attr_type(doubleList).
+gv_attr_type(escString).
+gv_attr_type(layerList).
+gv_attr_type(layerRange).
+gv_attr_type(lblString).
+gv_attr_type(int).
+gv_attr_type(outputMode).
+gv_attr_type(packMode).
+gv_attr_type(pagedir).
+gv_attr_type(point).
+gv_attr_type(pointList).
+gv_attr_type(portPos).
+gv_attr_type(quadType).
+gv_attr_type(rankType).
+gv_attr_type(rankdir).
+gv_attr_type(rect).
+gv_attr_type(shape).
+gv_attr_type(smoothType).
+gv_attr_type(splineType).
+gv_attr_type(startType).
+gv_attr_type(string).
+gv_attr_type(style).
+gv_attr_type(viewPort).
+
+
+%! addDouble(+Float:float)// .
+% An *addDouble* is represented by a Prolog float.
+
+addDouble(Float) -->
+  '?'(`+`),
+  double(Float).
+
+
+%! addPoint(+Point:compound)// .
+% An *addPoint* is represented by a compound of the following form:
+% `point(X:float,Y:float,InputOnly:boolean)`.
+
+addPoint(Point) -->
+  '?'(`+`),
+  point(Point).
+
+
+%! arrowType(+ArrowType:atom)// .
+
+arrowType(V) -->
+  {arrowType(V)},
+  atom(V).
+
+arrowType(V):-
+  primitive_shape(V).
+arrowType(V):-
+  derived(V).
+arrowType(V):-
+  backwards_compatible(V).
+
+primitive_shape(box).
+primitive_shape(crow).
+primitive_shape(circle).
+primitive_shape(diamond).
+primitive_shape(dot).
+primitive_shape(inv).
+primitive_shape(none).
+primitive_shape(normal).
+primitive_shape(tee).
+primitive_shape(vee).
+
+derived(odot).
+derived(invdot).
+derived(invodot).
+derived(obox).
+derived(odiamond).
+
+backwards_compatible(ediamond).
+backwards_compatible(empty).
+backwards_compatible(halfopen).
+backwards_compatible(invempty).
+backwards_compatible(open).
+
+
+bool(false) --> `false`.
+bool(false) --> `no`.
+bool(true) --> `true`.
+bool(true) --> `yes`.
+
+
+%! clusterMode(+ClusterMode:atom)// .
+
+clusterMode(V) -->
+  {clusterMode(V)},
+  atom(V).
+
+clusterMode(global).
+clusterMode(local).
+clusterMode(none).
+
+
+%! dirType(+DirectionType:oneof([back,both,forward,none]))// .
+
+dirType(DirType) -->
+  {dirType(DirType)},
+  atom(DirType).
+
+dirType(back).
+dirType(both).
+dirType(forward).
+dirType(none).
+
+
+double(Double1) -->
+  % float//1 will check for float type.
+  {Double2 is Double1 * 1.0},
+  float(Double2).
+
+
+doubleList([H|T]) -->
+  double(H),
+  '*'(doubleList1, T).
+
+doubleList1(Float) -->
+  `:`,
+  double(Float).
+
+
+%! escString(+String:atom)// .
+% @tbd Support for context-dependent replacements.
+
+escString(String) -->
+  atom(String).
+
+
+% @tbd layerList
+
+
+% @tbd layerRange
+
+
+lblString(V) -->
+  escString(V).
+lblString(V) -->
+  gv_html_like_label(V).
+
+
+int(V) -->
+  integer(V).
+
+
+outputMode(V) -->
+  {outputMode(V)},
+  atom(V).
+
+outputMode(breadthfirst).
+outputMode(edgesfirst).
+outputMode(nodesfirst).
+
+
+% @tbd packMode
+
+
+pagedir(V) -->
+  {pagedir(V)},
+  atom(V).
+
+pagedir('BL').
+pagedir('BR').
+pagedir('LB').
+pagedir('LT').
+pagedir('RB').
+pagedir('RT').
+pagedir('TL').
+pagedir('TR').
+
+
+%! point(+Point:compound)// .
+% A *point* is represented by a compound of the following form:
+% `point(X:float,Y:float,InputOnly:boolean)`.
+
+point(point(X,Y,InputOnly)) -->
+  float(X),
+  `,`,
+  float(Y),
+  input_only(InputOnly).
+
+input_only(false) --> [].
+input_only(true) --> `!`.
+
+
+pointList(Points) -->
+  '*'(point, Points).
+
+
+% @tbd portPos
+
+
+quadType(V) -->
+  {quadType(V)},
+  atom(V).
+
+quadType(fast).
+quadType(none).
+quadType(normal).
+
+
+rankType(V) -->
+  {rankType(V)},
+  atom(V).
+
+rankType(max).
+rankType(min).
+rankType(same).
+rankType(sink).
+rankType(source).
+
+
+rankdir(V) -->
+  {rankdir(V)},
+  atom(V).
+
+rankdir('BT').
+rankdir('LR').
+rankdir('RL').
+rankdir('TB').
+
+
+rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
+  float(LowerLeftX), `,`,
+  float(LowerLeftY), `,`,
+  float(UpperRightX), `,`,
+  float(UpperRightY).
+
+
+shape(V) -->
+  {polygon_based_shape(V)},
+  atom(V).
+
+polygon_based_shape(assembly).
+polygon_based_shape(box).
+polygon_based_shape(box3d).
+polygon_based_shape(cds).
+polygon_based_shape(circle).
+polygon_based_shape(component).
+polygon_based_shape(diamond).
+polygon_based_shape(doublecircle).
+polygon_based_shape(doubleoctagon).
+polygon_based_shape(egg).
+polygon_based_shape(ellipse).
+polygon_based_shape(fivepoverhang).
+polygon_based_shape(folder).
+polygon_based_shape(hexagon).
+polygon_based_shape(house).
+polygon_based_shape(insulator).
+polygon_based_shape(invhouse).
+polygon_based_shape(invtrapezium).
+polygon_based_shape(invtriangle).
+polygon_based_shape(larrow).
+polygon_based_shape(lpromoter).
+polygon_based_shape('Mcircle').
+polygon_based_shape('Mdiamond').
+polygon_based_shape('Msquare').
+polygon_based_shape(none).
+polygon_based_shape(note).
+polygon_based_shape(noverhang).
+polygon_based_shape(octagon).
+polygon_based_shape(oval).
+polygon_based_shape(parallelogram).
+polygon_based_shape(pentagon).
+polygon_based_shape(plaintext).
+polygon_based_shape(point).
+polygon_based_shape(polygon).
+polygon_based_shape(primersite).
+polygon_based_shape(promoter).
+polygon_based_shape(proteasesite).
+polygon_based_shape(proteinstab).
+polygon_based_shape(rarrow).
+polygon_based_shape(rect).
+polygon_based_shape(rectangle).
+polygon_based_shape(restrictionsite).
+polygon_based_shape(ribosite).
+polygon_based_shape(rnastab).
+polygon_based_shape(rpromoter).
+polygon_based_shape(septagon).
+polygon_based_shape(signature).
+polygon_based_shape(square).
+polygon_based_shape(tab).
+polygon_based_shape(terminator).
+polygon_based_shape(threepoverhang).
+polygon_based_shape(trapezium).
+polygon_based_shape(triangle).
+polygon_based_shape(tripleoctagon).
+polygon_based_shape(utr).
+
+
+smoothType(V) -->
+  {smoothType(V)},
+  atom(V).
+
+smoothType(avg_dist).
+smoothType(graph_dist).
+smoothType(none).
+smoothType(power_dist).
+smoothType(rng).
+smoothType(spring).
+smoothType(triangle).
+
+
+% @tbd splineType
+
+
+% @tbd startType
+
+
+%! string(?Content:atom)// .
+% A GraphViz string.
+
+string(Content) -->
+  atom(Content).
+
+
+%! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet.
+
+style(Context, Style) -->
+  {style(Context, Style)},
+  atom(Style).
+
+style(cluster, bold).
+style(cluster, dashed).
+style(cluster, dotted).
+style(cluster, filled).
+style(cluster, rounded).
+style(cluster, solid).
+style(cluster, striped).
+style(edge, bold).
+style(edge, dashed).
+style(edge, dotted).
+style(edge, solid).
+style(node, bold).
+style(node, dashed).
+style(node, diagonals).
+style(node, dotted).
+style(node, filled).
+style(node, rounded).
+style(node, solid).
+style(node, striped).
+style(node, wedged).
+
+
+% @tbd viewPort
+
diff --git a/gv_attrs.pl b/gv_attrs.pl
new file mode 100644
index 0000000..dd0145a
--- /dev/null
+++ b/gv_attrs.pl
@@ -0,0 +1,184 @@
+:- module(
+  gv_attrs,
+  [
+    gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph])
+              % +Attr1:nvpair
+              % +Attr2:nvpair
+  ]
+).
+
+/** <module> GraphViz attributes v2
+
+@author Wouter Beek
+@version 2014/06
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(persistency)).
+:- use_module(library(xpath)).
+
+:- use_module(dcg(dcg_content)).
+:- use_module(dcg(dcg_generic)).
+:- use_module(generics(db_ext)).
+:- use_module(os(file_ext)).
+
+:- use_module(plHtml(html)).
+:- use_module(plHtml(html_table)).
+
+:- use_module(plGraphViz(gv_attr_type)). % DCGs implementing attribute types.
+
+:- db_add_novel(user:prolog_file_type(log, logging)).
+
+%! gv_attr(
+%!   ?Name:atom,
+%!   ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
+%!   ?Types:list(atom),
+%!   ?Default,
+%!   ?Minimum,
+%!   ?Notes:atom
+%! ) is nondet.
+
+:- persistent(
+  gv_attr(
+    name:atom,
+    used_by:list(oneof([cluster,edge,graph,node,subgraph])),
+    types:list(atom),
+    default,
+    minimum,
+    notes:atom
+  )
+).
+
+:- initialization(gv_attrs_init).
+
+
+
+gv_attr(Context, N=V, N=V):-
+  var(V), !,
+  gv_attr(N, UsedBy, _, V, _, _),
+  memberchk(Context, UsedBy).
+gv_attr(Context, N=V1, N=V2):-
+  gv_attr(N, UsedBy, Types, _, Minimum, _),
+  memberchk(Context, UsedBy),
+  member(Type, Types),
+  (
+    Type == style
+  ->
+    Dcg =.. [Type,Context,V1]
+  ;
+    Dcg =.. [Type,V1]
+  ),
+  once(dcg_phrase(Dcg, V2)),
+  check_minimum(V1, Minimum).
+
+check_minimum(_, ''):- !.
+check_minimum(V, Min1):-
+  atom_number(Min1, Min2),
+  Min2 =< V.
+
+
+
+% INITIALIZATION
+
+%! assert_gv_attr_row(+Row:list(atom)) is det.
+
+assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
+  dcg_phrase(translate_usedby(UsedBy2), UsedBy1),
+  once(dcg_phrase(translate_type(Types2), Types1)),
+  sort(UsedBy2, UsedBy3),
+  translate_default(Default1, Default2),
+  assert_gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes).
+
+
+%! gv_attrs_downloads is det.
+% Downloads the table describing GraphViz attributes from `graphviz.org`.
+
+gv_attrs_download:-
+  gv_attrs_url(Url),
+  download_html(Url, Dom, [html_dialect(html4),verbose(silent)]),
+
+  xpath(Dom, //table(@align=center), TableDom),
+  % @tbd This does not work, since in `record_name(Element, Name)`,
+  %      `Element` is a signleton list whereas a compound term is expected.
+  %%%%xpath(Dom, /html/body/table, TableDom),
+
+  html_to_table(TableDom, _, Rows),
+  maplist(assert_gv_attr_row, Rows).
+
+
+%! gv_attrs_file(-File:atom) is det.
+
+gv_attrs_file(File):-
+  absolute_file_name(
+    data(gv_attrs),
+    File,
+    [access(write),file_type(logging)]
+  ).
+
+
+%! gv_attrs_init is det.
+
+gv_attrs_init:-
+  gv_attrs_file(File),
+  safe_db_attach(File),
+  file_age(File, Age),
+  gv_attrs_update(Age).
+
+
+%! gv_attrs_update(+Age:float) is det.
+
+% The persistent store is still fresh.
+gv_attrs_update(Age):-
+  once(gv_attr(_, _, _, _, _, _)),
+  Age < 8640000, !.
+% The persistent store has become stale, so refresh it.
+gv_attrs_update(_):-
+  retractall_gv_attr(_, _, _, _, _, _),
+  gv_attrs_download.
+
+
+%! gv_attrs_url(-Url:url) is det.
+
+gv_attrs_url('http://www.graphviz.org/doc/info/attrs.html').
+
+
+%! safe_db_attach(+File:atom) is det.
+
+safe_db_attach(File):-
+  exists_file(File), !,
+  db_attach(File, []).
+safe_db_attach(File):-
+  touch_file(File),
+  safe_db_attach(File).
+
+
+%! translate_default(+Default1:atom, -Default2:atom) is det.
+
+% The empty string is represented by the empty atom.
+translate_default('""', ''):- !.
+% The absence of a default value is represented by an uninstantiated variable.
+translate_default('<none>', _):- !.
+translate_default(Default, Default).
+
+
+%! translate_type(-Types:list(atom))// is det.
+
+translate_type([H|T]) -->
+  {gv_attr_type(H)},
+  atom(H),
+  whites,
+  translate_type(T).
+translate_type([]) --> !, [].
+
+
+%! translated_usedby(
+%!   -UsedBy:list(oneof([cluster,edge,graph,node,subgraph]))
+%! )// is det.
+
+translate_usedby([cluster|T]) --> `C`, !, translate_usedby(T).
+translate_usedby([edge|T]) --> `E`, !, translate_usedby(T).
+translate_usedby([graph|T]) --> `G`, !, translate_usedby(T).
+translate_usedby([node|T]) --> `N`, !, translate_usedby(T).
+translate_usedby([subgraph|T]) --> `S`, !, translate_usedby(T).
+translate_usedby([]) --> [].
+
diff --git a/gv_color.pl b/gv_color.pl
new file mode 100644
index 0000000..19d6e05
--- /dev/null
+++ b/gv_color.pl
@@ -0,0 +1,151 @@
+:- module(
+  gv_color,
+  [
+    gv_color/2, % ?Colorscheme:oneof([svg,x11])
+                % ?Color:atom
+    color//1, % +Color:compound
+    colorList//1 % +Pairs:list(pair(compound,float))
+  ]
+).
+
+/** <module> GraphViz color
+
+@author Wouter Beek
+@tbd Color value `transparent` is only available in the output formats
+     ps, svg, fig, vmrl, and the bitmap formats.
+@version 2014/06
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(lists)).
+:- use_module(library(persistency)).
+:- use_module(library(xpath)).
+
+:- use_module(dcg(dcg_abnf)).
+:- use_module(dcg(dcg_cardinal)).
+:- use_module(dcg(dcg_content)).
+:- use_module(generics(db_ext)).
+:- use_module(os(file_ext)).
+:- use_module(sparql(sparql_char)).
+
+:- use_module(plHtml(html)).
+:- use_module(plHtml(html_table)).
+
+:- db_add_novel(user:prolog_file_type(log, logging)).
+
+%! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
+
+:- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)).
+
+:- initialization(gv_color_init).
+
+
+
+% color(+Color:compound)// .
+% A *color* is represented by a compound term of one of the following forms:
+%   1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)`
+%   2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)`
+%   3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))`
+
+color(rgb(Red,Green,Blue)) --> !,
+  `#`,
+  '#'(3, hex_color, [Red,Green,Blue]).
+color(rgbs(Red,Green,Blue,Alpha)) --> !,
+  `#`,
+  '#'(4, hex_color, [Red,Green,Blue,Alpha]).
+color(hsv(Hue,Saturation,Value)) --> !,
+  '#'(3, hsv_color, [Hue,Saturation,Value]).
+color(Name) -->
+  {gv_color(_, Name)},
+  atom(Name).
+
+hex_color(I) -->
+  {W1 is I / 16},
+  'HEX'(W1),
+  {W2 is I mod 16},
+  'HEX'(W2).
+
+hsv_color(D, Head, Tail):-
+  format(codes(Head,Tail), '~2f', [D]).
+
+
+%! colorList(+Pairs:list(pair(compound,float)))// .
+
+colorList(Pairs) -->
+  '+'(wc, Pairs).
+
+wc(Color-Float) -->
+  color(Color),
+  '?'(wc_weight(Float)).
+
+wc_weight(Float) -->
+  `;`,
+  float(Float).
+
+
+
+% INITIALIZATION
+
+%! gv_color_download is det.
+
+gv_color_download:-
+  gv_color_url(Url),
+  download_html(Url, Dom, [html_dialect(html4),verbose(silent)]),
+  xpath(Dom, //table(1), TableDom1),
+  xpath(Dom, //table(2), TableDom2),
+  maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]).
+
+assert_color_table(Colorscheme, TableDom):-
+  html_to_table(TableDom, _, Rows),
+  append(Rows, Cells),
+  forall(
+    member(Cell, Cells),
+    assert_gv_color(Colorscheme, Cell)
+  ).
+
+
+%! gv_color_file(-File:atom) is det.
+
+gv_color_file(File):-
+  absolute_file_name(
+    data(gv_color),
+    File,
+    [access(write),file_type(logging)]
+  ).
+
+
+%! gv_color_init is det.
+
+gv_color_init:-
+  gv_color_file(File),
+  safe_db_attach(File),
+  file_age(File, Age),
+  gv_color_update(Age).
+
+
+%! gv_color_update(+Age:float) is det.
+
+% The persistent store is still fresh.
+gv_color_update(Age):-
+  once(gv_color(_, _)),
+  Age < 8640000, !.
+% The persistent store has become stale, so refresh it.
+gv_color_update(_):-
+  retractall_gv_color(_, _),
+  gv_color_download.
+
+
+%! gv_color_url(-Url:url) is det.
+
+gv_color_url('http://www.graphviz.org/doc/info/colors.html').
+
+
+%! safe_db_attach(+File:atom) is det.
+
+safe_db_attach(File):-
+  exists_file(File), !,
+  db_attach(File, []).
+safe_db_attach(File):-
+  touch_file(File),
+  safe_db_attach(File).
+
diff --git a/gv_dot.pl b/gv_dot.pl
new file mode 100644
index 0000000..9888973
--- /dev/null
+++ b/gv_dot.pl
@@ -0,0 +1,496 @@
+:- module(
+  gv_dot,
+  [
+    gv_graph//1 % +GraphTerm:compound
+  ]
+).
+
+/** <module> GraphViz DOT generator
+
+DCG rules for GraphViz DOT file generation.
+
+Methods for writing to the GraphViz DOT format.
+
+In GraphViz vertices are called 'nodes'.
+
+@author Wouter Beek
+@see http://www.graphviz.org/content/dot-language
+@version 2013/07, 2013/09, 2014/03-2014/06
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(lists)).
+:- use_module(library(ordsets)).
+
+:- use_module(dcg(dcg_abnf)).
+:- use_module(dcg(dcg_ascii)).
+:- use_module(dcg(dcg_content)).
+:- use_module(dcg(dcg_generic)).
+:- use_module(dcg(dcg_meta)).
+:- use_module(dcg(dcg_os)).
+
+:- use_module(plGraphViz(gv_attrs)).
+:- use_module(plGraphViz(gv_html)).
+:- use_module(plGraphViz(gv_numeral)).
+
+
+
+%! gv_attribute(+Attribute:nvpair)// is det.
+% A single GraphViz attribute.
+% We assume that the attribute has already been validated.
+
+gv_attribute(Name=Val) -->
+  gv_id(Name), `=`, gv_id(Val), `;`.
+
+
+%! gv_attribute_list(
+%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
+%!   +GraphAttributes:list(nvpair),
+%!   +Attributes:list(nvpair)
+%! )// .
+% ~~~{.abnf}
+% attr_list = "[" [a_list] "]" [attr_list]
+% a_list = ID "=" ID [","] [a_list]
+% ~~~
+
+% Attributes occur between square brackets.
+gv_attribute_list(Context, _, Attrs1) -->
+  {maplist(gv_attr(Context), Attrs1, Attrs2)},
+  bracketed(square, '*'(gv_attribute, Attrs2)).
+
+
+%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
+% ~~~
+% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
+% ~~~
+
+gv_compass_pt('_') --> `_`.
+gv_compass_pt(c) --> `c`.
+gv_compass_pt(e) --> `e`.
+gv_compass_pt(n) --> `n`.
+gv_compass_pt(ne) --> `ne`.
+gv_compass_pt(nw) --> `nw`.
+gv_compass_pt(s) --> `s`.
+gv_compass_pt(se) --> `se`.
+gv_compass_pt(sw) --> `sw`.
+gv_compass_pt(w) --> `w`.
+
+
+%! gv_edge_operator(+Directed:boolean)// .
+% The binary edge operator between two vertices.
+% The operator that is used depends on whether the graph is directed or
+% undirected.
+%
+% @arg Directed Whether an edge is directed (operator `->`) or
+%               undirected (operator `--`).
+
+gv_edge_operator(false) --> !, `--`.
+gv_edge_operator(true) --> arrow(right, 2).
+
+
+%! gv_edge_statement(
+%!   +Indent:nonneg,
+%!   +Directed:boolean,
+%!   +GraphAttributes:list(nvpair),
+%!   +EdgeTerm:compound
+%! )// is det.
+% A GraphViz statement describing an edge.
+%
+% @arg Indent The indentation level at which the edge statement is written.
+% @arg Directed Whether the graph is directed or not.
+% @arg GraphAttributes The attributes of the graph. Some of these attributes
+%      may be used in the edge statement (e.g., the colorscheme).
+% @arg EdgeTerm A compound term in the GIFormat, representing an edge.
+%
+% @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1
+%      at the from and/or to location.
+% @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
+
+gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
+  indent(I),
+  gv_node_id(FromId), ` `,
+
+  gv_edge_operator(Directed), ` `,
+
+  gv_node_id(ToId), ` `,
+
+  % We want `colorscheme/1` from the edges and
+  % `directionality/1` from the graph.
+  gv_attribute_list(edge, GAttrs, EAttrs),
+  newline.
+
+
+%! gv_generic_attributes_statement(
+%!   +Kind:oneof([edge,graph,node]),
+%!   +Indent:integer,
+%!   +GraphAttributes:list(nvpair),
+%!   +CategoryAttributes:list(nvpair)
+%! )//
+% A GraphViz statement describing generic attributes for a category of items.
+%
+% @arg Kind The category of items for to the attributes apply.
+%      Possible values: `edge`, `graph`, and `node`.
+% @arg Indent An integer indicating the number of tabs.
+% @arg GraphAttributes A list of name-value pairs.
+% @arg CategoryAttributes A list of name-value pairs.
+%
+% ~~~
+% attr_stmt = (graph / node / edge) attr_list
+% ~~~
+
+gv_generic_attributes_statement(_, _, _, []) --> [], !.
+gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
+  indent(I),
+  gv_kind(Kind), ` `,
+  gv_attribute_list(Kind, GraphAttrs, KindAttrs), newline.
+
+
+%! gv_graph(+GraphTerm:compound)//
+% The follow graph attributes are supported,
+% beyond the GraphViz attributes for graphs:
+%   1. `directonality(+Directed:oneof([directed,undirected]))`
+%      A directed graph uses the keyword `digraph`.
+%      An undirected graph uses the keyword `graph`.
+%   2. `name(+GraphName:atom)`
+%   3. `strict(+StrictGraph:boolean)`
+%      This forbids the creation of self-arcs and multi-edges;
+%      they are ignored in the input file.
+%      Only in combinattion with directionality `directed`.
+%
+% ~~~{.abnf}
+% graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
+% ~~~
+%
+% `GraphTerm` is a compound term of the following form:
+% ~~~{.pl}
+% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
+% ~~~
+%
+% `RankedVertexTerms` is a list of compound terms of the following form:
+% ~~~{.pl}
+% rank(RankNode,ContentNodes)
+% ~~~
+%
+% @tbd Add support for subgraphs (arbitrary nesting).
+% @tbd Add support for escape strings:
+%      http://www.graphviz.org/doc/info/attrs.html#k:escString
+% @tbd Assert attributes that are generic with respect to a subgraph.
+% @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
+
+gv_graph(graph(VTerms, ETerms, GAttrs)) -->
+  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
+
+gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
+  {
+    shared_attributes(VTerms, SharedVAttrs, NewVTerms),
+    shared_attributes(ETerms, SharedEAttrs, NewETerms),
+    select_nvpair(strict=Strict, GAttrs1, GAttrs2, false),
+    select_nvpair(directed=Directed, GAttrs2, GAttrs3, true),
+    select_nvpair(name=GName, GAttrs3, GAttrs4, noname),
+    add_default_nvpair(GAttrs4, overlap, false, GAttrs5),
+    I = 0
+  },
+
+  % The first statement in the GraphViz output.
+  % States that this file represents a graph according to the GraphViz format.
+  indent(I),
+  gv_strict(Strict),
+  gv_graph_type(Directed), ` `,
+  gv_id(GName), ` `,
+  bracketed(
+    curly,
+    gv_graph1(
+      I,
+      NewVTerms, SharedVAttrs, RankedVTerms,
+      NewETerms, SharedEAttrs,
+      Directed, GAttrs5
+    )
+  ),
+  newline.
+
+gv_graph1(
+  I,
+  NewVTerms, SharedVAttrs, RankedVTerms,
+  NewETerms, SharedEAttrs,
+  Directed, GAttrs
+) -->
+  newline,
+
+  % The following lines are indented.
+  {NewI is I + 1},
+
+  % Attributes that apply to the graph as a whole.
+  gv_generic_attributes_statement(graph, NewI, GAttrs, GAttrs),
+
+  % Attributes that are the same for all nodes.
+  gv_generic_attributes_statement(node, NewI, GAttrs, SharedVAttrs),
+
+  % Attributes that are the same for all edges.
+  gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs),
+
+  % Only add a newline if some content was written in the previous three
+  % lines.
+  ({(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])} -> `` ; newline),
+
+  % The list of GraphViz nodes.
+  '*'(gv_node_statement(NewI, GAttrs), NewVTerms),
+  ({NewVTerms == []} -> `` ; newline),
+
+  % The ranked GraphViz nodes (displayed at the same height).
+  '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms),
+  ({RankedVTerms == []} -> `` ; newline),
+
+  {
+    findall(
+      edge(FromId,ToId,[]),
+      (
+        nth0(Index1, RankedVTerms, rank(vertex(FromId,_,_),_)),
+        nth0(Index2, RankedVTerms, rank(vertex(ToId,_,_),_)),
+        % We assume that the rank vertices are nicely ordered.
+        succ(Index1, Index2)
+      ),
+      RankEdges
+    )
+  },
+
+  % The rank edges.
+  '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges),
+
+  % The non-rank edges.
+  '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms),
+
+  % Note that we do not include a newline here.
+
+  % We want to indent the closing curly brace.
+  indent(I).
+
+
+%! gv_graph_type(+Directed:boolean)// .
+% The type of graph that is represented.
+
+gv_graph_type(false) --> `graph`.
+gv_graph_type(true) --> `digraph`.
+
+
+%! gv_id(?Atom:atom)// is det.
+% Parse a GraphViz identifier.
+% There are 4 variants:
+%   1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters,
+%      underscores (`_`) or digits (`[0-9]`), not beginning with a digit.
+%   2. A numeral `[-]?(.[0-9]+ | [0-9]+(.[0-9]*)? )`.
+%   3. Any double-quoted string (`"..."`) possibly containing
+%      escaped quotes (`\"`).
+%      In quoted strings in DOT, the only escaped character is
+%      double-quote (`"`). That is, in quoted strings, the dyad `\"`
+%      is converted to `"`. All other characters are left unchanged.
+%      In particular, `\\` remains `\\`.
+%      Layout engines may apply additional escape sequences.
+%   4. An HTML string (`<...>`).
+%
+% @tbd Add support for HTML-like labels:
+%      http://www.graphviz.org/doc/info/shapes.html#html
+%      This requires an XML grammar!
+
+% HTML strings (variant 4).
+gv_id(Atom) -->
+  dcg_atom_codes(gv_html_like_label, Atom), !.
+% Alpha-numeric strings (variant 1).
+gv_id(Atom) -->
+  {atom_codes(Atom, [H|T])},
+  gv_id_first(H),
+  gv_id_rest(T), !,
+  % Variant 1 identifiers should not be (case-variants of) a
+  % GraphViz keyword.
+  {\+ gv_keyword([H|T])}.
+% Numerals (variant 2)
+gv_id(N) -->
+  {number(N)}, !,
+  gv_numeral(N).
+% Double-quoted strings (variant 3).
+% The quotes are already part of the given atom.
+gv_id(Atom) -->
+  {
+    atom_codes(Atom, [H|T]),
+    append(S, [H], T)
+  },
+  dcg_between(double_quote(H), gv_quoted_string(S)), !.
+% Double-quoted strings (variant 3).
+% The quotes are not in the given atom. They are written anyway.
+gv_id(Atom) -->
+  quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !.
+
+gv_id_first(X) --> ascii_letter(X).
+gv_id_first(X) --> underscore(X).
+
+gv_id_rest([]) --> [].
+gv_id_rest([H|T]) -->
+  (ascii_alpha_numeric(H) ; underscore(H)),
+  gv_id_rest(T).
+
+
+%! gv_keyword(+Codes:list(code)) is semidet.
+% Succeeds if the given codes for a GraphViz reserved keyword.
+
+gv_keyword(Codes):-
+  % Obviously, the keywords do not occur on the difference list input.
+  % So we must use phrase/[2,3].
+  phrase(gv_keyword, Codes).
+
+%! gv_keyword// .
+% GraphViz has reserved keywords that cannot be used as identifiers.
+% GraphViz keywords are case-insensitive.
+
+gv_keyword --> `digraph`.
+gv_keyword --> `edge`.
+gv_keyword --> `graph`.
+gv_keyword --> `node`.
+gv_keyword --> `strict`.
+gv_keyword --> `subgraph`.
+
+
+%! gv_kind(+Kind:oneof([edge,graph,node]))// .
+
+gv_kind(edge) --> `edge`.
+gv_kind(graph) --> `graph`.
+gv_kind(node) --> `node`.
+
+
+%! gv_node_id(+NodeId:atom)// .
+% GraphViz node identifiers can be of the following two types:
+%   1. A GraphViz identifier, see gv_id//1.
+%   2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0.
+%
+% @tbd Add support for GraphViz port indicators
+%      inside GraphViz node identifiers.
+
+gv_node_id(Id) -->
+  gv_id(Id).
+%gv_node_id(_) -->
+%  gv_id(_),
+%  gv_port.
+
+
+%! gv_node_statement(
+%!   +Indent:integer,
+%!   +GraphAttributes,
+%!   +VertexTerm:compound
+%! )// .
+% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes').
+
+gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
+  indent(I),
+  gv_node_id(Id), ` `,
+  gv_attribute_list(node, GraphAttrs, VAttrs), newline.
+
+
+gv_port -->
+  gv_port_location,
+  '?'(gv_port_angle).
+gv_port -->
+  gv_port_angle,
+  '?'(gv_port_location).
+gv_port -->
+  `:`,
+  gv_compass_pt(_).
+
+gv_port_angle -->
+  `@`,
+  gv_id(_).
+
+gv_port_location -->
+  `:`,
+  gv_id(_).
+gv_port_location -->
+  `:`,
+  bracketed(
+    round,
+    (
+      gv_id(_),
+      `,`,
+      gv_id(_)
+    )
+  ).
+
+
+gv_quoted_string([]) --> [].
+% Just to be sure, we do not allow the double quote
+% that closes the string to be escaped.
+gv_quoted_string([X]) -->
+  {X \== 92}, !,
+  [X].
+% A double quote is only allowed if it is escaped by a backslash.
+gv_quoted_string([92,34|T]) --> !,
+  gv_quoted_string(T).
+% Add the backslash escape character.
+gv_quoted_string([34|T]) --> !,
+  `\\\"`,
+  gv_quoted_string(T).
+% All other characters are allowed without escaping.
+gv_quoted_string([H|T]) -->
+  [H],
+  gv_quoted_string(T).
+
+
+gv_ranked_node_collection(
+  I,
+  GraphAttrs,
+  rank(Rank_V_Term,Content_V_Terms)
+) -->
+  indent(I),
+  bracketed(curly, (
+    newline,
+
+    % The rank attribute.
+    {NewI is I + 1},
+    indent(NewI), gv_attribute(rank=same), `;`, newline,
+
+    '*'(gv_node_statement(NewI, GraphAttrs), [Rank_V_Term|Content_V_Terms]),
+
+    % We want to indent the closing curly brace.
+    indent(I)
+  )),
+  newline.
+
+
+%! gv_strict(+Strict:boolean)// is det.
+% The keyword denoting that the graph is strict, i.e., has no self-arcs and
+% no multi-edges.
+% This only applies to directed graphs.
+
+gv_strict(false) --> [].
+gv_strict(true) --> `strict `.
+
+
+
+% Helpers
+
+add_default_nvpair(Attrs1, N, Default, Attrs2):-
+  add_default_nvpair(Attrs1, N, Default, _, Attrs2).
+
+add_default_nvpair(Attrs, N, _, V, Attrs):-
+  memberchk(N=V, Attrs), !.
+add_default_nvpair(Attrs1, N, Default, Default, Attrs2):-
+  ord_add_element(Attrs1, N=Default, Attrs2).
+
+select_nvpair(N=V, Attrs1, Attrs2, _):-
+  memberchk(N=V, Attrs1), !,
+  select(N=V, Attrs1, Attrs2).
+select_nvpair(_=Default, Attrs, Attrs, Default).
+
+
+extract_shared([], []):- !.
+extract_shared(Argss, Shared):-
+  ord_intersection(Argss, Shared).
+
+remove_shared_attributes(Shared, Args1, Args2):-
+  ord_subtract(Args1, Shared, Args2).
+
+shared_attributes(Terms1, Shared, Terms2):-
+  maplist(term_components(Func), Terms1, Args1, Args2, Args3a),
+  extract_shared(Args3a, Shared),
+  maplist(remove_shared_attributes(Shared), Args3a, Args3b),
+  maplist(term_components(Func), Terms2, Args1, Args2, Args3b).
+
+term_components(Func, Term, Arg1, Arg2, Arg3):-
+  Term =.. [Func,Arg1,Arg2,Arg3].
+
diff --git a/gv_file.pl b/gv_file.pl
new file mode 100644
index 0000000..c780692
--- /dev/null
+++ b/gv_file.pl
@@ -0,0 +1,211 @@
+:- module(
+  gv_file,
+  [
+    gif_to_gv_file/3, % +GraphInterchangeFormat:compound
+                      % ?ToFile:atom
+                      % +Options:list(nvpair)
+    graph_to_svg_dom/3, % +GraphInterchangeFormat:compound
+                        % -SvgDom:list(compound)
+                        % +Options:list(nvpair)
+    open_dot/1 % +File:file
+  ]
+).
+
+/** <module> GraphViz file
+
+Predicates for converting GIF-formatted terms
+into GraphViz output files or SVG DOM structures.
+
+Also converts between GraphViz DOT formatted files
+and GraphViz output files or SVG DOM structures.
+
+@author Wouter Beek
+@version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07
+*/
+
+:- use_module(library(option)).
+:- use_module(library(process)).
+:- use_module(library(predicate_options)). % Declarations.
+
+:- use_module(generics(codes_ext)).
+:- use_module(generics(db_ext)).
+:- use_module(generics(error_ext)).
+:- use_module(generics(trees)).
+:- use_module(os(file_ext)).
+:- use_module(os(run_ext)).
+:- use_module(os(safe_file)).
+:- use_module(svg(svg_file)).
+:- use_module(ugraph(ugraph_export)).
+
+:- use_module(plGraphViz(gv_dot)).
+
+:- dynamic(user:file_type_program/2).
+:- multifile(user:file_type_program/2).
+
+:- dynamic(user:module_uses/2).
+:- multifile(user:module_uses/2).
+
+:- dynamic(user:prolog_file_type/2).
+:- multifile(user:prolog_file_type/2).
+
+% Register DOT.
+:- db_add_novel(user:prolog_file_type(dot, dot)).
+:- db_add_novel(user:prolog_file_type(dot, graphviz)).
+:- db_add_novel(user:file_type_program(dot, dotty)).
+:- db_add_novel(user:file_type_program(dot, dotx)).
+:- db_add_novel(user:module_uses(gv_file, file_type(dot))).
+
+% Register JPG/JPEG.
+:- db_add_novel(user:prolog_file_type(jpeg, jpeg)).
+:- db_add_novel(user:prolog_file_type(jpeg, graphviz_output)).
+:- db_add_novel(user:prolog_file_type(jpg, jpeg)).
+:- db_add_novel(user:prolog_file_type(jpg, graphviz_output)).
+
+% Register PDF.
+:- db_add_novel(user:prolog_file_type(pdf, pdf)).
+:- db_add_novel(user:prolog_file_type(pdf, graphviz_output)).
+
+% Register PNG.
+:- db_add_novel(user:prolog_file_type(png, png)).
+:- db_add_novel(user:prolog_file_type(png, graphviz_output)).
+
+% Register SVG.
+:- db_add_novel(user:prolog_file_type(svg, graphviz_output)).
+:- db_add_novel(user:prolog_file_type(svg, svg)).
+
+% Register XDOT.
+:- db_add_novel(user:prolog_file_type(xdot, graphviz_output)).
+:- db_add_novel(user:prolog_file_type(xdot, xdot)).
+
+:- predicate_options(graph_to_svg_dom/3, 3, [
+     pass_to(gif_to_gv_file/3, 3)
+   ]).
+:- predicate_options(gif_to_gv_file/3, 3, [
+     pass_to(to_gv_file/3, 3)
+   ]).
+:- predicate_options(to_gv_file/3, 3, [
+     pass_to(convert_gv/3, 3)
+   ]).
+:- predicate_options(convert_gv/3, 3, [
+     method(+oneof([dot,sfdp])),
+     to_file_type(+oneof([dot,jpeg,pdf,svg,xdot]))
+   ]).
+
+
+
+%! gif_to_gv_file(+Gif:compound, -ToFile:atom, +Options:list(nvpair)) is det.
+% Returns a file containing a GraphViz visualization of the given graph.
+%
+% The following options are supported:
+%   * =|method(+Method:oneof([dot,sfdp])|=
+%     The algorithm used by GraphViz for positioning the tree nodes.
+%     Either =dot= (default) or =sfdp=.
+%   * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|=
+%     The file type of the generated GraphViz file.
+%     Default: `pdf`.
+
+gif_to_gv_file(Gif, ToFile, Options):-
+  once(phrase(gv_graph(Gif), Codes)),
+  to_gv_file(Codes, ToFile, Options).
+
+
+%! graph_to_svg_dom(
+%!   +GraphInterchangeFormat:compound,
+%!   -SvgDom:list(compound),
+%!   +Options:list(nvpair)
+%! ) is det.
+
+graph_to_svg_dom(Gif, SvgDom, Options1):-
+  % Make sure the file type of the output file is SvgDom.
+  merge_options([to_file_type=svg], Options1, Options2),
+  gif_to_gv_file(Gif, ToFile, Options2),
+  file_to_svg(ToFile, SvgDom),
+  safe_delete_file(ToFile).
+
+
+%! open_dot(+File:atom) is det.
+% Opens the given DOT file.
+%
+% @tbd Test support on Windows.
+% @tbd Test support on OS-X.
+
+open_dot(File):-
+  once(find_program_by_file_type(dot, Program)),
+  run_program(Program, [File]).
+
+
+
+% SUPPORT PREDICATES %
+
+%! convert_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det.
+% Converts a GraphViz DOT file to an image file, using a specific
+% visualization method.
+
+convert_gv(FromFile, ToFile, Options):-
+  option(to_file_type(dot), Options), !,
+  rename_file(FromFile, ToFile).
+convert_gv(FromFile, ToFile, Options):-
+  % The input file must be readable.
+  access_file(FromFile, read),
+
+  % The method option.
+  option(method(Method), Options, dot),
+  must_be(oneof([dot,sfdp]), Method),
+
+  % The file type option.
+  option(to_file_type(ToFileType), Options, pdf),
+  prolog_file_type(ToExtension, ToFileType),
+  prolog_file_type(ToExtension, graphviz_output), !,
+
+  % The output file is either given or created.
+  (
+    var(ToFile)
+  ->
+    absolute_file_name(
+      data(export),
+      ToFile,
+      [access(write),file_type(ToFileType)]
+    )
+  ;
+    is_absolute_file_name(ToFile),
+    % The given output file must match a certain file extension.
+    file_name_extension(_, ToExtension, ToFile)
+  ),
+  % Now that we have the output file we can prevent the
+  % file type / file extension translation predicates from bakctracking.
+  !,
+
+  % Run the GraphViz conversion command in the shell.
+  format(atom(OutputType), '-T~w', [ToExtension]),
+  process_create(
+    path(Method),
+    [OutputType,FromFile,'-o',ToFile],
+    [process(PID)]
+  ),
+  process_wait(PID, exit(ShellStatus)),
+  exit_code_handler('GraphViz', ShellStatus).
+
+
+%! to_gv_file(+Codes:list(code), ?ToFile:atom, +Options:list(nvpair)) is det.
+
+to_gv_file(Codes, ToFile, Options):-
+  absolute_file_name(
+    data(tmp),
+    FromFile,
+    [access(write),file_type(graphviz)]
+  ),
+  setup_call_cleanup(
+    open(FromFile, write, Out, [encoding(utf8),type(test)]),
+    put_codes(Out, Codes),
+    close(Out)
+  ),
+  convert_gv(FromFile, ToFile, Options),
+
+  %%%%% DEB: Store DOT file.
+  %%%%ignore((
+  %%%%  file_type_alternative(ToFile, graphviz, DOT_File),
+  %%%%  safe_copy_file(FromFile, DOT_File)
+  %%%%)),
+
+  safe_delete_file(FromFile).
+
diff --git a/gv_html.pl b/gv_html.pl
new file mode 100644
index 0000000..b8d3190
--- /dev/null
+++ b/gv_html.pl
@@ -0,0 +1,60 @@
+:- module(
+  gv_html,
+  [
+    gv_html_like_label//1 % +Codes:list(code)
+  ]
+).
+
+/** <module> GraphViz HTML
+
+@author Wouter Beek
+@version 2013/07, 2013/09, 2014/03-2014/06
+*/
+
+:- use_module(dcg(dcg_content)).
+
+:- use_module(plHtml(html_dcg)).
+
+
+
+%! gv_html_label(+Codes:list(code))// .
+%
+% @see http://www.graphviz.org/doc/info/shapes.html#html
+
+gv_html_label --> gv_html_text, !.
+gv_html_label --> gv_html_table, !.
+gv_html_label --> [].
+
+gv_html_like_label --> bracketed(angular, gv_html_label).
+
+gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
+
+gv_html_table --> html_element(table, _, gv_html_rows).
+gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
+
+gv_html_rows --> gv_html_row, gv_html_rows.
+gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
+gv_html_rows --> gv_html_row.
+
+gv_html_row --> html_element(tr, _, gv_html_cells).
+
+gv_html_cell --> html_element(td, _, gv_html_label).
+gv_html_cell --> html_element(td, _, html_element(img, _)).
+
+gv_html_cells --> gv_html_cell, gv_html_cells.
+gv_html_cells --> gv_html_cell.
+gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
+
+gv_html_text --> gv_html_textitem, gv_html_text.
+gv_html_text --> gv_html_textitem.
+
+gv_html_textitem --> html_string, !.
+gv_html_textitem --> html_entity, !.
+gv_html_textitem --> html_element(br, _), !.
+gv_html_textitem --> html_element(font, _, gv_html_text), !.
+gv_html_textitem --> html_element(i, _, gv_html_text), !.
+gv_html_textitem --> html_element(b, _, gv_html_text), !.
+gv_html_textitem --> html_element(u, _, gv_html_text), !.
+gv_html_textitem --> html_element(sub, _, gv_html_text), !.
+gv_html_textitem --> html_element(sup, _, gv_html_text), !.
+
diff --git a/gv_numeral.pl b/gv_numeral.pl
new file mode 100644
index 0000000..9b82fc0
--- /dev/null
+++ b/gv_numeral.pl
@@ -0,0 +1,71 @@
+:- module(
+  gv_numeral,
+  [
+    gv_numeral//1 % ?Value:number
+  ]
+).
+
+/** <module> GraphViz numeral
+
+@author Wouter Beek
+@version 2014/05-2014/06
+*/
+
+:- use_module(dcg(dcg_abnf)).
+:- use_module(dcg(dcg_cardinal)).
+:- use_module(math(math_ext)).
+
+
+
+%! gv_numeral(?Value:number)// .
+% ~~~{.bnf}
+% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
+% ~~~
+
+gv_numeral(N) -->
+  {nonvar(N)},
+  {number_sign_parts(N, Sign, Abs)},
+  ({Sign =:= -1} -> `-` ; ``),
+  gv_numeral_abs(Abs).
+gv_numeral(N) -->
+  {var(N)},
+  'sign?'(Sign),
+  gv_numeral_abs(Abs),
+  {number_sign_parts(N, Sign, Abs)}.
+
+
+gv_numeral_abs(N) -->
+  {nonvar(N)},
+  {number_integer_parts(N, N1, N2)},
+  (
+    {N2 =:= 0}
+  ->
+    integer(N1)
+  ;
+    {N1 =:= 0}
+  ->
+    `.`,
+    integer(N2)
+  ;
+    integer(N1),
+    '?'((`.`, 'integer?'(N2)))
+  ).
+gv_numeral_abs(N) -->
+  {var(N)},
+  (
+    `.`,
+    integer(N2)
+  ->
+    {N1 = 0}
+  ;
+    integer(N1),
+    (
+      `.`
+    ->
+      'integer?'(N2)
+    ;
+      {N2 = 0}
+    )
+  ),
+  {number_integer_parts(N, N1, N2)}.
+
diff --git a/gv_tree.pl b/gv_tree.pl
new file mode 100644
index 0000000..afeb8f6
--- /dev/null
+++ b/gv_tree.pl
@@ -0,0 +1,43 @@
+:- module(
+  gv_tree,
+  [
+    tree_to_gv_file/3 % +Tree:compound
+                      % ?ToFile:atom
+                      % +Options:list(nvpair)
+  ]
+).
+
+/** <module> GraphViz tree
+
+Export trees to GraphViz.
+
+@author Wouter Beek
+@version 2014/06-2014/07
+*/
+
+:- use_module(library(aggregate)).
+
+:- use_module(generics(trees)).
+
+:- use_module(plGraphViz(gv_file)).
+:- use_module(plGraphViz(gv_gif)).
+
+
+%! tree_to_gv_file(
+%!   +Tree:compound,
+%!   ?ToFile:atom,
+%!   +Options:list(nvpair)
+%! ) is det.
+% Stores the given tree term into a GraphViz file.
+%
+% Options are passed on to create_gif/3 and gif_to_gv_file/3.
+
+tree_to_gv_file(Tree, ToFile, Options):-
+  tree_to_gif(Tree, Gif, Options),
+  gif_to_gv_file(Gif, ToFile, Options).
+
+
+tree_to_gif(H-T, Gif, Options):-
+  tree_to_vertices_edges(Tree, Vs, Es),
+  create_gif(Vs, Es, Gif, Options).
+
diff --git a/index.pl b/index.pl
new file mode 100644
index 0000000..7461d13
--- /dev/null
+++ b/index.pl
@@ -0,0 +1,2 @@
+% Index of project plGraphViz (empty).
+
diff --git a/load.pl b/load.pl
new file mode 100644
index 0000000..4b117d1
--- /dev/null
+++ b/load.pl
@@ -0,0 +1,12 @@
+% Load file for plGraphViz.
+
+:- dynamic(user:prolog/3).
+:- multifile(user:prolog/3).
+   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
+
+:- use_module(load_project).
+:- load_project(plGraphViz, [
+    plc-'Prolog-Library-Collection',
+    plHtml
+]).
+
diff --git a/load_project.pl b/load_project.pl
new file mode 100644
index 0000000..5599b5e
--- /dev/null
+++ b/load_project.pl
@@ -0,0 +1,120 @@
+:- module(
+  load_project,
+  [
+    load_project/2, % +Parent:atom
+                    % +ChildProjects:list(or([atom,pair(atom)]))
+    load_subproject/2, % +ParentFileSearchPath:atom
+                       % +Child:or([atom,pair(atom)])
+    set_data_subdirectory/1 % +ParentDirectory:atom
+  ]
+).
+
+/** <module> Load project
+
+Generic code for loading a project:
+  * Create a subdirectory for data.
+  * Load the root of subprojects onto the file search path.
+  * Load the index of subprojects onto the file search path.
+
+@author Wouter Beek
+@version 2014/06/14
+*/
+
+:- use_module(library(ansi_term)). % Colorized terminal messages.
+:- use_module(library(apply)).
+
+:- dynamic(user:project/2).
+:- multifile(user:project/2).
+:- dynamic(user:project/3).
+:- multifile(user:project/3).
+
+
+
+load_project(Parent, ChildProjects):-
+  parent_alias(Parent, ParentFsp),
+
+  % Entry point.
+  source_file(load_project(_,_), ThisFile),
+  file_directory_name(ThisFile, ThisDir),
+  assert(user:file_search_path(ParentFsp, ThisDir)),
+  assert(user:file_search_path(project, ThisDir)),
+
+  % Set the data subdirectory.
+  set_data_subdirectory(ThisDir),
+
+  % Load the root of submodules onto the file search path.
+  maplist(load_subproject(ParentFsp), ChildProjects),
+
+  % Load the index into the file search path.
+  load_project_index(ParentFsp).
+
+
+
+%! load_subproject(
+%!   +ParentFileSearchPath:atom,
+%!   +Child:or([atom,pair(atom)])
+%! ) is det.
+
+load_subproject(ParentFsp, ChildFsp-ChildDir):- !,
+  load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir),
+  load_project_index(ChildFsp).
+load_subproject(ParentFsp, Child):-
+  load_subproject(ParentFsp, Child-Child).
+
+
+%! load_subproject_file_search_path(
+%!   +ParentFileSearchPath:atom,
+%!   +ChildFileSearchPath:atom,
+%!   +ChildDirectory:atom
+%! ) is det.
+
+% The file search path for the subproject has already been set.
+load_subproject_file_search_path(_, ChildFsp, _):-
+  user:file_search_path(ChildFsp, _).
+load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir):-
+  Spec =.. [ParentFsp,ChildDir],
+  absolute_file_name(Spec, _, [access(read),file_type(directory)]), !,
+  assert(user:file_search_path(ChildFsp, Spec)).
+load_subproject_file_search_path(_, ChildFsp, ChildDir):-
+  print_message(warning, missing_subproject_directory(ChildFsp,ChildDir)).
+
+
+%! load_project_index(+FileSearchPath:atom) is det.
+
+load_project_index(Fsp):-
+  Spec =.. [Fsp,index],
+  absolute_file_name(
+    Spec,
+    File,
+    [access(read),file_errors(fail),file_type(prolog)]
+  ), !,
+  ensure_loaded(File).
+load_project_index(_).
+
+
+%! parent_alias(+Parent:atom, -ParentFsp:atom) is det.
+
+parent_alias(Parent, ParentFsp):-
+  user:project(Parent, _, ParentFsp), !.
+parent_alias(Parent, Parent).
+
+
+%! set_data_subdirectory(+ParentDirectory:atom) is det.
+
+set_data_subdirectory(ParentDir):-
+  directory_file_path(ParentDir, data, DataDir),
+  make_directory_path(DataDir),
+  assert(user:file_search_path(data, DataDir)).
+
+
+
+:- multifile(prolog:message//1).
+
+prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -->
+  [
+    'The ~a submodule is not present.'-[ChildFsp], nl,
+    'Check whether subdirectory ~a is present in your project directory:'-[ChildDir], nl,
+    '    git submodule init', nl,
+    '    git submodule update'
+  ].
+
diff --git a/pack.pl b/pack.pl
deleted file mode 100644
index 989108a..0000000
--- a/pack.pl
+++ /dev/null
@@ -1,9 +0,0 @@
-author('Wouter Beek', 'me@wouterbeek.com').
-download('https://github.com/wouterbeek/plGraphViz/release/*.zip').
-home('https://github.com/wouterbeek/plGraphViz').
-maintainer('Wouter Beek', 'me@wouterbeek.com').
-name(plGraphViz).
-packager('Wouter Beek', 'me@wouterbeek.com').
-requires('Prolog-Library-Collection').
-title(plGraphViz).
-version('0.0.1').
diff --git a/plHtml b/plHtml
new file mode 160000
index 0000000..08480c4
--- /dev/null
+++ b/plHtml
@@ -0,0 +1 @@
+Subproject commit 08480c40acaee5f70bfb21e3c641bef1e7d258bd
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
deleted file mode 100644
index 083dbb2..0000000
--- a/prolog/fca/fca_viz.pl
+++ /dev/null
@@ -1,101 +0,0 @@
-:- module(
-  fca_viz,
-  [
-    fca_export_graph/2, % +Context, -ExportGraph
-    fca_export_graph/3, % +Context, -ExportGraph, :Opts
-    fca_viz/2,          % +Context, ?File
-    fca_viz/3           % +Context, ?File, :Opts
-  ]
-).
-
-/** <module> FCA visualization
-
-@author Wouter Beek
-@version 2015/11-2016/01
-*/
-
-:- use_module(library(aggregate)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(dcg/dcg_pl)).
-:- use_module(library(fca/fca)).
-:- use_module(library(graph/build_export_graph)).
-:- use_module(library(graph/s/s_graph)).
-:- use_module(library(gv/gv_file)).
-:- use_module(library(option)).
-:- use_module(library(ordsets)).
-
-:- meta_predicate(fca_export_graph(+,?,:)).
-:- meta_predicate(fca_viz(+,?,:)).
-
-:- predicate_options(fca_export_graph/3, 3, [
-     concept_label(+callable)
-   ]).
-:- predicate_options(fca_viz/3, 3, [
-     pass_to(fca_export_graph/3, 3),
-     pass_to(graph_viz/3, 3)
-   ]).
-
-is_meta(concept_label).
-
-
-
-
-
-%! fca_export_graph(+Context:compound, -ExportGraph:compound) is det.
-% Wrapper around fca_export_graph/3 with default options.
-
-fca_export_graph(Context, ExportG):-
-  fca_export_graph(Context, ExportG, []).
-
-
-%! fca_export_graph(
-%!   +Context:compound,
-%!   -ExportGraph:compound,
-%!   :Options:list(compound)
-%! ) is det.
-% The following optios are supported:
-%   * concept_label(+callable)
-%     DCG writing the labels for individual concepts.
-
-fca_export_graph(Context, ExportG, Opts1):-
-  fca_hasse(Context, Hasse),
-  meta_options(is_meta, Opts1, Opts2),
-  option(concept_label(Label_3), Opts2, concept_label),
-  merge_options(
-    [
-      vertex_label(Label_3),
-      vertex_rank(fca:concept_cardinality)
-    ],
-    Opts2,
-    Opts3
-  ),
-  build_export_graph(Hasse, ExportG, Opts3).
-
-
-
-%! fca_viz(+Context:compound, ?File:atom) is det.
-% Wrapper around fca_viz/3 with default options.
-
-fca_viz(Context, File):-
-  fca_viz(Context, File, []).
-
-
-%! fca_viz(+Context:compound, ?File:atom, :Options:list(compound)) is det.
-
-fca_viz(Context, File, Opts1):-
-  meta_options(is_meta, Opts1, Opts2),
-  statistics(process_cputime, Time1),
-  fca_export_graph(Context, ExportG, Opts2),
-  ExportG = graph(_,_,Es,_),
-  aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N),
-  ignore(option(number_of_vertices(N), Opts2)),
-  statistics(process_cputime, Time2),
-  Time is Time2 - Time1,
-  ignore(option(process_cputime(Time), Opts2)),
-  graph_viz(ExportG, File, Opts2).
-
-
-
-%! concept_label(+Concept:compound)// is det.
-
-concept_label(concept(Os,As)) --> set(Os), " / ", set(As).
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
deleted file mode 100644
index 5134069..0000000
--- a/prolog/graph/build_export_graph.pl
+++ /dev/null
@@ -1,369 +0,0 @@
-:- module(
-  build_export_graph,
-  [
-    build_export_graph/2, % +Graph, -ExportGraph
-    build_export_graph/3 % +Graph
-                         % -ExportGraph:compound
-                         % +Options:list(compound)
-  ]
-).
-
-/** <module> Build graph representation for exporting
-
-Support for building GIF representations.
-
-# Graph Intermediate Format (GIF)
-
-## Graph
-
-```prolog
-graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(compound))
-```
-
-### Edge
-
-```prolog
-edge(FromVertexId,ToVertexId,Attributes:list(compound))
-```
-
-### Rank
-
-```prolog
-RankVertex:compound-ContentVertices:ordset(compound)
-```
-
-### Vertex
-
-```prolog
-vertex(Id,Attributes:list(compound))
-```
-
-# Property functions
-
-Edge label:
-  1. [[graph_edge]] edge_label/2
-
-Vertex coordinates:
-  1. [[circle_coords]] circular_coord/4
-  2. [[random_coords]] random_coord/4
-
----
-
-@author Wouter Beek
-@version 2015/07, 2015/09-2016/01
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(graph/s/s_graph)).
-:- use_module(library(list_ext)).
-:- use_module(library(option_ext)).
-:- use_module(library(ordsets)).
-:- use_module(library(pairs)).
-
-:- predicate_options(build_export_graph/4, 4, [
-     pass_to(edge_term/3, 3),
-     pass_to(graph_attributes/2, 2),
-     pass_to(vertex_term/3, 3)
-   ]).
-:- predicate_options(edge_term/3, 3, [
-     edge_arrowhead(+callable),
-     edge_color(+callable),
-     edge_id(+callable),
-     edge_label(+callable),
-     edge_penwidth(+callable),
-     edge_style(+callable)
-   ]).
-:- predicate_options(graph_attributes/2, 2, [
-     graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8'])),
-     graph_colorscheme(+oneof([none,svg,x11])),
-     graph_directed(+boolean),
-     graph_fontsize(+float),
-     graph_label(+atom),
-     graph_overlap(+boolean)
-   ]).
-:- predicate_options(vertex_term/3, 3, [
-     vertex_color(+callable),
-     vertex_id(+callable),
-     vertex_image(+callable),
-     vertex_label(+callable),
-     vertex_peripheries(+callable),
-     vertex_position(+callable),
-     vertex_rank(+callable),
-     vertex_shape(+callable),
-     vertex_uri(+callable)
-   ]).
-
-:- meta_predicate(build_export_graph(+,-,:)).
-
-is_meta(edge_arrowhead).
-is_meta(edge_color).
-is_meta(edge_id).
-is_meta(edge_label).
-is_meta(edge_penwidth).
-is_meta(edge_style).
-is_meta(vertex_color).
-is_meta(vertex_id).
-is_meta(vertex_image).
-is_meta(vertex_label).
-is_meta(vertex_peripheries).
-is_meta(vertex_position).
-is_meta(vertex_rank).
-is_meta(vertex_shape).
-is_meta(vertex_uri).
-
-
-
-
-
-%! build_export_graph(+Graph, -ExportGraph:compound) is det.
-% Wrapper around build_export_graph/3 with default options.
-
-build_export_graph(G, ExportG):-
-  build_export_graph(G, ExportG, []).
-
-
-%! build_export_graph(
-%!   +Graph,
-%!   -ExportGraph:compound,
-%!   +Options:list(compound)
-%! ) is det.
-% Graph is either:
-%   * a coumpound term `graph(Vs,Es)`, or
-%   * an unlabeled graph as defined by `library(ugraph)`.
-%
-% The following options are supported:
-%   * `vertex_rank(:RankFunction)`
-%     Assigns a non-negative integer to each vertex.
-%     No default.
-
-build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):-
-  graph_components(G, Vs, Es),
-  meta_options(is_meta, Opts1, Opts2),
-  maplist(vertex_term0(Vs, Opts2), Vs, VTerms1),
-  build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2),
-  maplist(edge_term0(Vs, Opts2), Es, ETerms),
-  graph_attributes(GAttrs, Opts2).
-
-vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts).
-
-edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts).
-
-graph_components(graph(Vs,Es), Vs, Es):- !.
-graph_components(G, Vs, Es):-
-  s_graph_components(G, Vs, Es).
-
-build_export_ranks(Vs, VTerms, VRanks, [], Opts):-
-  option(vertex_rank(VRank_2), Opts), !,
-  maplist(VRank_2, Vs, Ranks),
-  pairs_keys_values(Pairs, Ranks, VTerms),
-  group_pairs_by_key(Pairs, GroupedPairs),
-  build_export_rank_terms(GroupedPairs, VRanks).
-build_export_ranks(_, VTerms, [], VTerms, _).
-
-build_export_rank_terms([N-VTerms|T1], [RankTerm-VTerms|T2]):- !,
-  build_export_rank_term(N, RankTerm),
-  build_export_rank_terms(T1, T2).
-build_export_rank_terms([], []).
-
-build_export_rank_term(N, vertex(Id,[label(""),shape(none)])):-
-  format(atom(Id), "r~d", [N]).
-
-
-
-%! edge_term(
-%!   +Vertices:ordset(compound),
-%!   +Edge:compound,
-%!   -EdgeTerm:compound,
-%!   +Options:list(compound)
-%! ) is det.
-% The following options are supported:
-%   * `edge_arrowhead(+callable)`
-%     No default.
-%   * `edge_color(+callable)`
-%     No default.
-%   * `edge_id(+callable)`
-%     Function that assignes the unique identifiers for an edge's
-%     incident vertices.
-%   * `edge_label(+callable)`
-%     No default.
-%   * `edge_penwidth(+callable)`
-%     No default.
-%   * `edge_style(+callable)`
-%     No default.
-
-edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
-  % Arrowhead
-  if_option(edge_arrowhead(Arrowhead_2), Opts,
-    call(Arrowhead_2, E, EArrowhead)
-  ),
-  
-  % Color.
-  if_option(edge_color(ColorFunction), Opts, call(ColorFunction, E, EColor)),
-  
-  % Id.
-  (   option(edge_id(Id_2), Opts)
-  ->  call(Id_2, E, FromId, ToId)
-  ;   edge_components(E, FromV, ToV),
-      nth0chk(FromId, Vs, FromV),
-      nth0chk(ToId, Vs, ToV)
-  ),
-  
-  % Label.
-  if_option(edge_label(ELabel_3), Opts, string_phrase(dcg_call(ELabel_3, E), ELabel)),
-  
-  % Penwidth.
-  if_option(edge_penwidth(Penwidth_2), Opts, call(Penwidth_2, E, EPenwidth)),
-  
-  % Style.
-  if_option(edge_style(Style_2), Opts, call(Style_2, E, EStyle)),
-  
-  exclude(
-    option_has_var_value,
-    [
-      arrowhead(EArrowhead),
-      color(EColor),
-      label(ELabel),
-      penwidth(EPenwidth),
-      style(EStyle)
-    ],
-    EAttrs
-  ).
-
-
-
-%! graph_attributes(
-%!   -GraphAttributes:list(compound),
-%!   +Options:list(compound)
-%! ) is det.
-% The following options are supported:
-%   * `graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8']))`
-%     The name of the character set that is used to encode text in the graph.
-%     Default: `UTF-8`.
-%   * `graph_colorscheme(+oneof([none,svg,x11]))`
-%     The colorscheme from which the color in this graph are taken.
-%     Default: `x11`.
-%   * `graph_directed(+boolean)`
-%     Whether the graph is directed (`true`) or undirected (`false`).
-%     Default: `false`.
-%   * `graph_fontsize(+float)`
-%     The font size of text in the graph.
-%     Default: `11.0`.
-%   * `graph_label(+atom)`
-%     The graph label.
-%     No default.
-%   * `graph_overlap(+boolean)`
-%     Whether the vertices are allowed to overlap.
-%     Default: `false`.
-
-graph_attributes(GAttrs, Opts):-
-  % Characer set.
-  option(graph_charset(Charset), Opts, 'UTF-8'),
-  % Colorscheme.
-  option(graph_colorscheme(Colorscheme), Opts, x11),
-  % Directed.
-  option(graph_directed(Directed), Opts, false),
-  % Fontsize.
-  option(graph_fontsize(Fontsize), Opts, 11.0),
-  % Label.
-  % Defaults to the empty string.
-  option(graph_label(GLabel), Opts, '""'),
-  % Overlap.
-  option(graph_overlap(Overlap), Opts, false),
-  exclude(
-    option_has_var_value,
-    [
-      charset(Charset),
-      colorscheme(Colorscheme),
-      directed(Directed),
-      fontsize(Fontsize),
-      label(GLabel),
-      overlap(Overlap)
-    ],
-    GAttrs
-  ).
-
-
-
-%! vertex_term(
-%!   +Vertices:ordset(compound),
-%!   +Vertex:compound,
-%!   -VertexTerm:compound,
-%!   +Options:list(compound)
-%! ) is det.
-% The following options are supported:
-%   * `vertex_color(:ColorFunction)`
-%     A function that assigns colors to vertices.
-%     No default.
-%   * `vertex_id(:ColorFunction)`
-%     A functions that assigns unique identifiers to vertices.
-%   * `vertex_image(:ImageFunction)`
-%     A function that assigns images to vertices.
-%     No default.
-%   * `vertex_label(:LabelFunction)`
-%     A function that assigns labels to vertices.
-%     No default.
-%   * `vertex_peripheries(:PeripheriesFunction)`
-%     A function that assinges peripheries to vertices.
-%     No default.
-%   * `vertex_position(:PositionFunction)`
-%     No default.
-%   * `vertex_shape(:ShapeFunction)`
-%     A function that assinges shapes to vertices.
-%     No default.
-%   * `vertex_uri(:UriFunction)`
-
-vertex_term(Vs, V, vertex(VId,VAttrs), Opts):-
-  % Color.
-  if_option(vertex_color(Color_2), Opts, call(Color_2, V, VColor)),
-  
-  % Id.
-  (option(vertex_id(Id_2), Opts) -> call(Id_2, V, VId) ; nth0chk(VId, Vs, V)),
-  
-  % Image.
-  ignore(if_option(vertex_image(Image_2), Opts, call(Image_2, V, VImage))),
-
-  % Label.
-  if_option(vertex_label(VLabel_2), Opts, string_phrase(dcg_call(VLabel_2, V), VLabel)),
-
-  % Peripheries.
-  if_option(vertex_peripheries(Peripheries_2), Opts,
-    call(Peripheries_2, V, VPeripheries)
-  ),
-
-  % Position.
-  if_option(vertex_position(Position_4), Opts,
-    call(Position_4, Vs, Opts, V, VPosition)
-  ),
-
-  % Shape.
-  if_option(vertex_shape(Shape_2), Opts, call(Shape_2, V, VShape)),
-  
-  % URI
-  if_option(vertex_uri(Uri_2), Opts, call(Uri_2, V, VUri)),
-
-  exclude(
-    option_has_var_value,
-    [
-      color(VColor),
-      image(VImage),
-      label(VLabel),
-      peripheries(VPeripheries),
-      pos(VPosition),
-      shape(VShape),
-      'URL'(VUri)
-    ],
-    VAttrs
-  ).
-
-
-
-
-
-% HELPERS %
-
-%! edge_components(+Edge:compound, -FromV, -ToV) is det.
-
-edge_components(edge(FromV,_,ToV), FromV, ToV):- !.
-edge_components(edge(FromV,ToV), FromV, ToV):- !.
-edge_components(FromV-ToV, FromV, ToV):- !.
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
deleted file mode 100644
index f55fce5..0000000
--- a/prolog/gv/gv_attr_type.pl
+++ /dev/null
@@ -1,421 +0,0 @@
-:- module(
-  gv_attr_type,
-  [
-    gv_attr_type//1, % ?Type:atom
-    addDouble//1, % +Double:float
-    addPoint//1, % +Point:compound
-    arrowType//1, % +ArrowType:atom
-    bool//1, % +Boolean:boolean
-    clusterMode//1, % +ClusterMode:atom
-    dirType//1, % +DirectionType:oneof([back,both,forward,none])
-    double//1, % +Double:float
-    doubleList//1, % +Doubles:list(float)
-    escString//1,
-    %layerList//1,
-    %layerRange//1,
-    lblString//1,
-    int//1, % +Integer:integer
-    outputMode//1, % +OutputMode:atom
-    %packMode//1,
-    pagedir//1, % +Pagedir:atom
-    point//1, % +Point:compound
-    pointList//1, % +Points:list(compound)
-    %portPos//1,
-    quadType//1, % +QuadType:atom
-    rankType//1, % +RankType:atom
-    rankdir//1, % +RankDirection:atom
-    rect//1, % +Rectangle:compound
-    shape//1,
-    smoothType//1, % +SmoothType:atom
-    %splineType//1,
-    %startType//1,
-    string//1, % ?Content:atom
-    style//2 % +Context:oneof([cluster,edge,node])
-             % +Style:atom
-    %viewPort//1
-  ]
-).
-:- reexport(
-  library(gv/gv_color),
-  [
-    color//1, % +Color:compound
-    colorList//1 % +ColorList:list(compound)
-  ]
-).
-
-/** <module> GraphViz attribute types
-
-@author Wouter Beek
-@version 2015/07, 2015/11, 2016/02
-*/
-
-:- use_module(library(dcg/dcg_ext), except([string//1])).
-:- use_module(library(gv/gv_html)).
-
-
-
-
-
-%! gv_attr_type(?Type:atom) is nondet.
-
-gv_attr_type(addDouble)   --> "addDouble".
-gv_attr_type(addPoint)    --> "addPoint".
-gv_attr_type(arrowType)   --> "arrowType".
-gv_attr_type(bool)        --> "bool".
-gv_attr_type(color)       --> "color".
-gv_attr_type(colorList)   --> "colorList".
-gv_attr_type(clusterMode) --> "clusterMode".
-gv_attr_type(dirType)     --> "dirType".
-gv_attr_type(double)      --> "double".
-gv_attr_type(doubleList)  --> "doubleList".
-gv_attr_type(escString)   --> "escString".
-gv_attr_type(layerList)   --> "layerList".
-gv_attr_type(layerRange)  --> "layerRange".
-gv_attr_type(lblString)   --> "lblString".
-gv_attr_type(int)         --> "int".
-gv_attr_type(outputMode)  --> "outputMode".
-gv_attr_type(packMode)    --> "packMode".
-gv_attr_type(pagedir)     --> "pagedir".
-gv_attr_type(point)       --> "point".
-gv_attr_type(pointList)   --> "pointList".
-gv_attr_type(portPos)     --> "portPos".
-gv_attr_type(quadType)    --> "quadType".
-gv_attr_type(rankType)    --> "rankType".
-gv_attr_type(rankdir)     --> "rankdir".
-gv_attr_type(rect)        --> "rect".
-gv_attr_type(shape)       --> "shape".
-gv_attr_type(smoothType)  --> "smoothType".
-gv_attr_type(splineType)  --> "splineType".
-gv_attr_type(startType)   --> "startType".
-gv_attr_type(string)      --> "string".
-gv_attr_type(style)       --> "style".
-gv_attr_type(viewPort)    --> "viewPort".
-
-
-
-%! addDouble(+Float:float)// .
-% An *addDouble* is represented by a Prolog float.
-
-addDouble(N) --> ("+", ! ; ""), float(N).
-
-
-
-%! addPoint(+Point:compound)// .
-% An *addPoint* is represented by a compound of the following form:
-% `point(X:float,Y:float,InputOnly:boolean)`.
-
-addPoint(Point) --> ("+", ! ; ""), point(Point).
-
-
-
-%! arrowType(+ArrowType:atom)// .
-
-arrowType(V) --> primitive_shape(V).
-arrowType(V) --> derived(V).
-arrowType(V) --> backwards_compatible(V).
-
-primitive_shape(box)     --> "box".
-primitive_shape(crow)    --> "crow".
-primitive_shape(circle)  --> "circle".
-primitive_shape(diamond) --> "diamond".
-primitive_shape(dot)     --> "dot".
-primitive_shape(inv)     --> "inv".
-primitive_shape(none)    --> "none".
-primitive_shape(normal)  --> "normal".
-primitive_shape(tee)     --> "tee".
-primitive_shape(vee)     --> "vee".
-
-derived(odot)     --> "odot".
-derived(invdot)   --> "invdot".
-derived(invodot)  --> "invodot".
-derived(obox)     --> "obox".
-derived(odiamond) --> "odiamond".
-
-backwards_compatible(ediamond) --> "ediamond".
-backwards_compatible(empty)    --> "empty".
-backwards_compatible(halfopen) --> "halfopen".
-backwards_compatible(invempty) --> "invempty".
-backwards_compatible(open)     --> "open".
-
-
-
-%! bool(+Value:boolean)// .
-
-bool(false) --> "false".
-bool(false) --> "no".
-bool(true)  --> "true".
-bool(true)  --> "yes".
-
-
-
-%! clusterMode(+ClusterMode:atom)// .
-
-clusterMode(global) --> "global".
-clusterMode(local) --> "local".
-clusterMode(none) --> "none".
-
-
-
-%! dirType(+DirectionType:oneof([back,both,forward,none]))// .
-
-dirType(back) --> "back".
-dirType(both) --> "both".
-dirType(forward) --> "forward".
-dirType(none) --> "none".
-
-
-
-%! double(+Double:float)// .
-
-double(N) --> float(N).
-
-
-
-%! doubleList(+Doubles:list(float))// .
-
-doubleList([H|T]) --> double(H), (":", !, doubleList(T) ; {T = []}).
-
-
-
-%! escString(+String:or([atom,string]))// .
-% @tbd Support for context-dependent replacements.
-
-escString(S1) -->
-  {(  string(S1)
-  ->  string_phrase(escape_double_quotes, S1, S2)
-  ;   atom_phrase(escape_double_quotes, S1, S2)
-  )},
-  "\"", atom(S2), "\"".
-
-escape_double_quotes, [0'\\,0'"] --> [0'"], !, escape_double_quotes.
-escape_double_quotes, [X]        --> [X],   !, escape_double_quotes.
-escape_double_quotes             --> "".
-
-
-
-% @tbd layerList
-
-
-
-% @tbd layerRange
-
-
-
-%! lblString(+String:compound)// .
-
-lblString(html_like_label(V)) --> gv_html_like_label(V).
-lblString(V) --> escString(V).
-
-
-
-%! int(+Integer:integer)// .
-
-int(V) --> integer(V).
-
-
-
-%! outputMode(+OutputMode:atom)// .
-
-outputMode(breadthfirst) --> "breadthfirst".
-outputMode(edgesfirst)   --> "edgesfirst".
-outputMode(nodesfirst)   --> "nodesfirst".
-
-
-
-% @tbd packMode
-
-
-
-%! pagedir(+PageDirection:atom)// .
-
-pagedir('BL') --> "BL".
-pagedir('BR') --> "BR".
-pagedir('LB') --> "LB".
-pagedir('LT') --> "LT".
-pagedir('RB') --> "RB".
-pagedir('RT') --> "RT".
-pagedir('TL') --> "TL".
-pagedir('TR') --> "TR".
-
-
-
-%! point(+Point:compound)// .
-% A *point* is represented by a compound of the following form:
-% `point(X:float,Y:float,Changeable:boolean)`.
-
-point(point(X,Y,Changeable)) -->
-  float(X), ",", float(Y),
-  input_changeable(Changeable).
-
-input_changeable(false) --> "".
-input_changeable(true) --> "!".
-
-
-
-%! pointList(+Points:list(compound))// .
-
-pointList(Points) -->
-  *(point, Points).
-
-
-
-% @tbd portPos
-
-
-
-%! quadType(+QuadType:atom)// .
-
-quadType(fast) --> "fast".
-quadType(none) --> "none".
-quadType(normal) --> "normal".
-
-
-
-%! rankType(+RankType:atom)// .
-
-rankType(max) --> "max".
-rankType(min) --> "min".
-rankType(same) --> "same".
-rankType(sink) --> "sink".
-rankType(source) --> "source".
-
-
-
-%! rankdir(+RankDirection:oneof(['BT','LR','RL','TB']))// .
-
-rankdir('BT') --> "BT".
-rankdir('LR') --> "LR".
-rankdir('RL') --> "RL".
-rankdir('TB') --> "TB".
-
-
-
-%! rect(+Rectangle:compound)// .
-
-rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  float(LowerLeftX), ",",
-  float(LowerLeftY), ",",
-  float(UpperRightX), ",",
-  float(UpperRightY).
-
-
-
-%! shape(+Shape:atom)// .
-
-shape(V) --> {polygon_based_shape(V)}, atom(V).
-
-polygon_based_shape(assembly).
-polygon_based_shape(box).
-polygon_based_shape(box3d).
-polygon_based_shape(cds).
-polygon_based_shape(circle).
-polygon_based_shape(component).
-polygon_based_shape(diamond).
-polygon_based_shape(doublecircle).
-polygon_based_shape(doubleoctagon).
-polygon_based_shape(egg).
-polygon_based_shape(ellipse).
-polygon_based_shape(fivepoverhang).
-polygon_based_shape(folder).
-polygon_based_shape(hexagon).
-polygon_based_shape(house).
-polygon_based_shape(insulator).
-polygon_based_shape(invhouse).
-polygon_based_shape(invtrapezium).
-polygon_based_shape(invtriangle).
-polygon_based_shape(larrow).
-polygon_based_shape(lpromoter).
-polygon_based_shape('Mcircle').
-polygon_based_shape('Mdiamond').
-polygon_based_shape('Msquare').
-polygon_based_shape(none).
-polygon_based_shape(note).
-polygon_based_shape(noverhang).
-polygon_based_shape(octagon).
-polygon_based_shape(oval).
-polygon_based_shape(parallelogram).
-polygon_based_shape(pentagon).
-polygon_based_shape(plaintext).
-polygon_based_shape(point).
-polygon_based_shape(polygon).
-polygon_based_shape(primersite).
-polygon_based_shape(promoter).
-polygon_based_shape(proteasesite).
-polygon_based_shape(proteinstab).
-polygon_based_shape(rarrow).
-polygon_based_shape(rect).
-polygon_based_shape(rectangle).
-polygon_based_shape(restrictionsite).
-polygon_based_shape(ribosite).
-polygon_based_shape(rnastab).
-polygon_based_shape(rpromoter).
-polygon_based_shape(septagon).
-polygon_based_shape(signature).
-polygon_based_shape(square).
-polygon_based_shape(tab).
-polygon_based_shape(terminator).
-polygon_based_shape(threepoverhang).
-polygon_based_shape(trapezium).
-polygon_based_shape(triangle).
-polygon_based_shape(tripleoctagon).
-polygon_based_shape(utr).
-
-
-
-%! smoothType(+SmoothType:atom)// .
-
-smoothType(V) --> {smoothType(V)}, atom(V).
-
-smoothType(avg_dist).
-smoothType(graph_dist).
-smoothType(none).
-smoothType(power_dist).
-smoothType(rng).
-smoothType(spring).
-smoothType(triangle).
-
-
-
-% @tbd splineType
-
-
-
-% @tbd startType
-
-
-
-%! string(?String:atom)// .
-% A GraphViz string.
-
-string(Content) --> "\"", atom(Content), "\"".
-
-
-
-%! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet.
-
-style(Context, Style) --> {style(Context, Style)}, atom(Style).
-
-style(cluster, bold).
-style(cluster, dashed).
-style(cluster, dotted).
-style(cluster, filled).
-style(cluster, rounded).
-style(cluster, solid).
-style(cluster, striped).
-style(edge, bold).
-style(edge, dashed).
-style(edge, dotted).
-style(edge, solid).
-style(node, bold).
-style(node, dashed).
-style(node, diagonals).
-style(node, dotted).
-style(node, filled).
-style(node, rounded).
-style(node, solid).
-style(node, striped).
-style(node, wedged).
-
-
-
-% @tbd viewPort
diff --git a/prolog/gv/gv_attrs.data b/prolog/gv/gv_attrs.data
deleted file mode 100644
index 95fc680..0000000
--- a/prolog/gv/gv_attrs.data
+++ /dev/null
@@ -1,169 +0,0 @@
-gv_attr('Damping',[graph],[double],'0.99','0.0','neato only').
-gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only').
-gv_attr('URL',[cluster,edge,graph,node],[escString],_G59448,'','svg, postscript, map only').
-gv_attr('_background',[graph],[string],_G59644,'','').
-gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only').
-gv_attr(arrowhead,[edge],[arrowType],normal,'','').
-gv_attr(arrowsize,[edge],[double],'1.0','0.0','').
-gv_attr(arrowtail,[edge],[arrowType],normal,'','').
-gv_attr(bb,[graph],[rect],'','','write only').
-gv_attr(bgcolor,[cluster,graph],[color,colorList],_G60571,'','').
-gv_attr(center,[graph],[bool],false,'','').
-gv_attr(charset,[graph],[string],'"UTF-8"','','').
-gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only').
-gv_attr(color,[cluster,edge,node],[color,colorList],black,'','').
-gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','').
-gv_attr(comment,[edge,graph,node],[string],'','','').
-gv_attr(compound,[graph],[bool],false,'','dot only').
-gv_attr(concentrate,[graph],[bool],false,'','').
-gv_attr(constraint,[edge],[bool],true,'','dot only').
-gv_attr(decorate,[edge],[bool],false,'','').
-gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only').
-gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only').
-gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only').
-gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','').
-gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only').
-gv_attr(distortion,[node],[double],'0.0','-100.0','').
-gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only').
-gv_attr(edgeURL,[edge],[escString],'','','svg, map only').
-gv_attr(edgehref,[edge],[escString],'','','svg, map only').
-gv_attr(edgetarget,[edge],[escString],_G63711,'','svg, map only').
-gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only').
-gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only').
-gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot').
-gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','').
-gv_attr(fixedsize,[node],[bool,string],false,'','').
-gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','').
-gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','').
-gv_attr(fontnames,[graph],[string],'','','svg only').
-gv_attr(fontpath,[graph],[string],'system-dependent','','').
-gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','').
-gv_attr(forcelabels,[graph],[bool],true,'','').
-gv_attr(gradientangle,[cluster,graph,node],[int],'','','').
-gv_attr(group,[node],[string],'','','dot only').
-gv_attr(headURL,[edge],[escString],'','','svg, map only').
-gv_attr(head_lp,[edge],[point],'','','write only').
-gv_attr(headclip,[edge],[bool],true,'','').
-gv_attr(headhref,[edge],[escString],'','','svg, map only').
-gv_attr(headlabel,[edge],[lblString],'','','').
-gv_attr(headport,[edge],[portPos],center,'','').
-gv_attr(headtarget,[edge],[escString],_G4892,'','svg, map only').
-gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only').
-gv_attr(height,[node],[double],'0.5','0.02','').
-gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only').
-gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only').
-gv_attr(image,[node],[string],'','','').
-gv_attr(imagepath,[graph],[string],'','','').
-gv_attr(imagescale,[node],[bool,string],false,'','').
-gv_attr(inputscale,[graph],[double],_G6250,'','fdp, neato only').
-gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','').
-gv_attr(labelURL,[edge],[escString],'','','svg, map only').
-gv_attr(label_scheme,[graph],[int],'0','0','sfdp only').
-gv_attr(labelangle,[edge],[double],'-25.0','-180.0','').
-gv_attr(labeldistance,[edge],[double],'1.0','0.0','').
-gv_attr(labelfloat,[edge],[bool],false,'','').
-gv_attr(labelfontcolor,[edge],[color],black,'','').
-gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','').
-gv_attr(labelfontsize,[edge],[double],'14.0','1.0','').
-gv_attr(labelhref,[edge],[escString],'','','svg, map only').
-gv_attr(labeljust,[cluster,graph],[string],'"c"','','').
-gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','').
-gv_attr(labeltarget,[edge],[escString],_G8276,'','svg, map only').
-gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only').
-gv_attr(landscape,[graph],[bool],false,'','').
-gv_attr(layer,[cluster,edge,node],[layerRange],'','','').
-gv_attr(layerlistsep,[graph],[string],'","','','').
-gv_attr(layers,[graph],[layerList],'','','').
-gv_attr(layerselect,[graph],[layerRange],'','','').
-gv_attr(layersep,[graph],[string],'" :\\t"','','').
-gv_attr(layout,[graph],[string],'','','').
-gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only').
-gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only').
-gv_attr(levelsgap,[graph],[double],'0.0','','neato only').
-gv_attr(lhead,[edge],[string],'','','dot only').
-gv_attr(lheight,[cluster,graph],[double],'','','write only').
-gv_attr(lp,[cluster,edge,graph],[point],'','','write only').
-gv_attr(ltail,[edge],[string],'','','dot only').
-gv_attr(lwidth,[cluster,graph],[double],'','','write only').
-gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','').
-gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only').
-gv_attr(mclimit,[graph],[double],'1.0','','dot only').
-gv_attr(mindist,[graph],[double],'1.0','0.0','circo only').
-gv_attr(minlen,[edge],[int],'1','0','dot only').
-gv_attr(mode,[graph],[string],major,'','neato only').
-gv_attr(model,[graph],[string],shortpath,'','neato only').
-gv_attr(mosek,[graph],[bool],false,'','neato only').
-gv_attr(nodesep,[graph],[double],'0.25','0.02','').
-gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','').
-gv_attr(normalize,[graph],[double,bool],false,'','not dot').
-gv_attr(notranslate,[graph],[bool],false,'','neato only').
-gv_attr(nslimitnslimit1,[graph],[double],'','','dot only').
-gv_attr(ordering,[graph,node],[string],'','','dot only').
-gv_attr(orientation,[node],[double],'0.0','360.0','').
-gv_attr(orientation,[graph],[string],'','','').
-gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','').
-gv_attr(overlap,[graph],[string,bool],true,'','not dot').
-gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only').
-gv_attr(overlap_shrink,[graph],[bool],true,'','prism only').
-gv_attr(pack,[graph],[bool,int],false,'','').
-gv_attr(packmode,[graph],[packMode],node,'','').
-gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','').
-gv_attr(page,[graph],[double,point],'','','').
-gv_attr(pagedir,[graph],[pagedir],'BL','','').
-gv_attr(pencolor,[cluster],[color],black,'','').
-gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','').
-gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','').
-gv_attr(pin,[node],[bool],false,'','fdp, neato only').
-gv_attr(pos,[edge,node],[point,splineType],'','','').
-gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only').
-gv_attr(quantum,[graph],[double],'0.0','0.0','').
-gv_attr(rank,[subgraph],[rankType],'','','dot only').
-gv_attr(rankdir,[graph],[rankdir],'TB','','dot only').
-gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only').
-gv_attr(ratio,[graph],[double,string],'','','').
-gv_attr(rects,[node],[rect],'','','write only').
-gv_attr(regular,[node],[bool],false,'','').
-gv_attr(remincross,[graph],[bool],true,'','dot only').
-gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only').
-gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only').
-gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only').
-gv_attr(rotate,[graph],[int],'0','','').
-gv_attr(rotation,[graph],[double],'0','','sfdp only').
-gv_attr(samehead,[edge],[string],'','','dot only').
-gv_attr(sametail,[edge],[string],'','','dot only').
-gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','').
-gv_attr(scale,[graph],[double,point],'','','not dot').
-gv_attr(searchsize,[graph],[int],'30','','dot only').
-gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot').
-gv_attr(shape,[node],[shape],ellipse,'','').
-gv_attr(shapefile,[node],[string],'','','').
-gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only').
-gv_attr(sides,[node],[int],'4','0','').
-gv_attr(size,[graph],[double,point],'','','').
-gv_attr(skew,[node],[double],'0.0','-100.0','').
-gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only').
-gv_attr(sortv,[cluster,graph,node],[int],'0','0','').
-gv_attr(splines,[graph],[bool,string],'','','').
-gv_attr(start,[graph],[startType],'','','fdp, neato only').
-gv_attr(style,[cluster,edge,graph,node],[style],'','','').
-gv_attr(stylesheet,[graph],[string],'','','svg only').
-gv_attr(tailURL,[edge],[escString],'','','svg, map only').
-gv_attr(tail_lp,[edge],[point],'','','write only').
-gv_attr(tailclip,[edge],[bool],true,'','').
-gv_attr(tailhref,[edge],[escString],'','','svg, map only').
-gv_attr(taillabel,[edge],[lblString],'','','').
-gv_attr(tailport,[edge],[portPos],center,'','').
-gv_attr(tailtarget,[edge],[escString],_G21528,'','svg, map only').
-gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only').
-gv_attr(target,[cluster,edge,graph,node],[escString,string],_G21878,'','svg, map only').
-gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only').
-gv_attr(truecolor,[graph],[bool],'','','bitmap output only').
-gv_attr(vertices,[node],[pointList],'','','write only').
-gv_attr(viewport,[graph],[viewPort],'','','').
-gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot').
-gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','').
-gv_attr(width,[node],[double],'0.75','0.01','').
-gv_attr(xdotversion,[graph],[string],'','','xdot only').
-gv_attr(xlabel,[edge,node],[lblString],'','','').
-gv_attr(xlp,[edge,node],[point],'','','write only').
-gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','').
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
deleted file mode 100644
index 4a92d5b..0000000
--- a/prolog/gv/gv_attrs.pl
+++ /dev/null
@@ -1,76 +0,0 @@
-:- module(
-  gv_attrs,
-  [
-    gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph])
-                     % +Attr
-  ]
-).
-:- ensure_loaded(library('gv/gv_attrs.data')).
-
-/** <module> GraphViz attributes
-
-@author Wouter Beek
-@version 2015/07-2015/08, 2015/10, 2016/03
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(error)).
-:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
-:- use_module(library(lists)).
-:- use_module(library(os/file_ext)).
-
-
-
-
-
-%! gv_attr_value(+Context, +Attr)// is det.
-% Uses the default value in case Value is uninstantiated.
-% Otherwise, performs a typecheck and converts the given value.
-%
-% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`.
-
-% Use the default if no value is given.
-gv_attr_value(Context, Name=Value) -->
-  {
-    var(Value),
-    gv_attr(Name, UsedBy, _, DefaultValue, _, _),
-    % Check validity of context.
-    memberchk(Context, UsedBy)
-  }, !,
-  gv_attr_value(Context, Name=DefaultValue).
-gv_attr_value(Context, Name=Value) -->
-  {
-    % Check the validity of the context argument.
-    gv_attr(Name, UsedBy, Types, _, Minimum, _),
-    memberchk(Context, UsedBy),
-
-    %  Pick a value type non-deterministically.
-    member(Type, Types),
-
-    % The `style` type is the only one that requires the context argument.
-    (   Type == style
-    ->  Dcg =.. [Type,Context]
-    ;   Dcg =.. [Type]
-    ),
-
-    % Check validity of Value w.r.t. minimum value -- if available.
-    check_minimum(Value, Minimum)
-  }, !,
-  dcg_call(gv_attr_type:Dcg, Value).
-gv_attr_value(_, Name=_) -->
-  {existence_error(gv_attr, Name)}.
-
-
-
-
-
-% HELPERS %
-
-%! check_minimum(+Value:atom, +Minimum:number) is semidet.
-% Trivially succeeds if no minimum value is available for a given attribute.
-
-check_minimum(_, ''):- !.
-check_minimum(V, Min1):-
-  atom_number(Min1, Min2),
-  Min2 =< V.
diff --git a/prolog/gv/gv_color.data b/prolog/gv/gv_color.data
deleted file mode 100644
index 166b13c..0000000
--- a/prolog/gv/gv_color.data
+++ /dev/null
@@ -1,802 +0,0 @@
-gv_color(x11,aliceblue).
-gv_color(x11,antiquewhite).
-gv_color(x11,antiquewhite1).
-gv_color(x11,antiquewhite2).
-gv_color(x11,antiquewhite3).
-gv_color(x11,antiquewhite4).
-gv_color(x11,aquamarine).
-gv_color(x11,aquamarine1).
-gv_color(x11,aquamarine2).
-gv_color(x11,aquamarine3).
-gv_color(x11,aquamarine4).
-gv_color(x11,azure).
-gv_color(x11,azure1).
-gv_color(x11,azure2).
-gv_color(x11,azure3).
-gv_color(x11,azure4).
-gv_color(x11,beige).
-gv_color(x11,bisque).
-gv_color(x11,bisque1).
-gv_color(x11,bisque2).
-gv_color(x11,bisque3).
-gv_color(x11,bisque4).
-gv_color(x11,black).
-gv_color(x11,blanchedalmond).
-gv_color(x11,blue).
-gv_color(x11,blue1).
-gv_color(x11,blue2).
-gv_color(x11,blue3).
-gv_color(x11,blue4).
-gv_color(x11,blueviolet).
-gv_color(x11,brown).
-gv_color(x11,brown1).
-gv_color(x11,brown2).
-gv_color(x11,brown3).
-gv_color(x11,brown4).
-gv_color(x11,burlywood).
-gv_color(x11,burlywood1).
-gv_color(x11,burlywood2).
-gv_color(x11,burlywood3).
-gv_color(x11,burlywood4).
-gv_color(x11,cadetblue).
-gv_color(x11,cadetblue1).
-gv_color(x11,cadetblue2).
-gv_color(x11,cadetblue3).
-gv_color(x11,cadetblue4).
-gv_color(x11,chartreuse).
-gv_color(x11,chartreuse1).
-gv_color(x11,chartreuse2).
-gv_color(x11,chartreuse3).
-gv_color(x11,chartreuse4).
-gv_color(x11,chocolate).
-gv_color(x11,chocolate1).
-gv_color(x11,chocolate2).
-gv_color(x11,chocolate3).
-gv_color(x11,chocolate4).
-gv_color(x11,coral).
-gv_color(x11,coral1).
-gv_color(x11,coral2).
-gv_color(x11,coral3).
-gv_color(x11,coral4).
-gv_color(x11,cornflowerblue).
-gv_color(x11,cornsilk).
-gv_color(x11,cornsilk1).
-gv_color(x11,cornsilk2).
-gv_color(x11,cornsilk3).
-gv_color(x11,cornsilk4).
-gv_color(x11,crimson).
-gv_color(x11,cyan).
-gv_color(x11,cyan1).
-gv_color(x11,cyan2).
-gv_color(x11,cyan3).
-gv_color(x11,cyan4).
-gv_color(x11,darkgoldenrod).
-gv_color(x11,darkgoldenrod1).
-gv_color(x11,darkgoldenrod2).
-gv_color(x11,darkgoldenrod3).
-gv_color(x11,darkgoldenrod4).
-gv_color(x11,darkgreen).
-gv_color(x11,darkkhaki).
-gv_color(x11,darkolivegreen).
-gv_color(x11,darkolivegreen1).
-gv_color(x11,darkolivegreen2).
-gv_color(x11,darkolivegreen3).
-gv_color(x11,darkolivegreen4).
-gv_color(x11,darkorange).
-gv_color(x11,darkorange1).
-gv_color(x11,darkorange2).
-gv_color(x11,darkorange3).
-gv_color(x11,darkorange4).
-gv_color(x11,darkorchid).
-gv_color(x11,darkorchid1).
-gv_color(x11,darkorchid2).
-gv_color(x11,darkorchid3).
-gv_color(x11,darkorchid4).
-gv_color(x11,darksalmon).
-gv_color(x11,darkseagreen).
-gv_color(x11,darkseagreen1).
-gv_color(x11,darkseagreen2).
-gv_color(x11,darkseagreen3).
-gv_color(x11,darkseagreen4).
-gv_color(x11,darkslateblue).
-gv_color(x11,darkslategray).
-gv_color(x11,darkslategray1).
-gv_color(x11,darkslategray2).
-gv_color(x11,darkslategray3).
-gv_color(x11,darkslategray4).
-gv_color(x11,darkslategrey).
-gv_color(x11,darkturquoise).
-gv_color(x11,darkviolet).
-gv_color(x11,deeppink).
-gv_color(x11,deeppink1).
-gv_color(x11,deeppink2).
-gv_color(x11,deeppink3).
-gv_color(x11,deeppink4).
-gv_color(x11,deepskyblue).
-gv_color(x11,deepskyblue1).
-gv_color(x11,deepskyblue2).
-gv_color(x11,deepskyblue3).
-gv_color(x11,deepskyblue4).
-gv_color(x11,dimgray).
-gv_color(x11,dimgrey).
-gv_color(x11,dodgerblue).
-gv_color(x11,dodgerblue1).
-gv_color(x11,dodgerblue2).
-gv_color(x11,dodgerblue3).
-gv_color(x11,dodgerblue4).
-gv_color(x11,firebrick).
-gv_color(x11,firebrick1).
-gv_color(x11,firebrick2).
-gv_color(x11,firebrick3).
-gv_color(x11,firebrick4).
-gv_color(x11,floralwhite).
-gv_color(x11,forestgreen).
-gv_color(x11,gainsboro).
-gv_color(x11,ghostwhite).
-gv_color(x11,gold).
-gv_color(x11,gold1).
-gv_color(x11,gold2).
-gv_color(x11,gold3).
-gv_color(x11,gold4).
-gv_color(x11,goldenrod).
-gv_color(x11,goldenrod1).
-gv_color(x11,goldenrod2).
-gv_color(x11,goldenrod3).
-gv_color(x11,goldenrod4).
-gv_color(x11,gray).
-gv_color(x11,gray0).
-gv_color(x11,gray1).
-gv_color(x11,gray10).
-gv_color(x11,gray100).
-gv_color(x11,gray11).
-gv_color(x11,gray12).
-gv_color(x11,gray13).
-gv_color(x11,gray14).
-gv_color(x11,gray15).
-gv_color(x11,gray16).
-gv_color(x11,gray17).
-gv_color(x11,gray18).
-gv_color(x11,gray19).
-gv_color(x11,gray2).
-gv_color(x11,gray20).
-gv_color(x11,gray21).
-gv_color(x11,gray22).
-gv_color(x11,gray23).
-gv_color(x11,gray24).
-gv_color(x11,gray25).
-gv_color(x11,gray26).
-gv_color(x11,gray27).
-gv_color(x11,gray28).
-gv_color(x11,gray29).
-gv_color(x11,gray3).
-gv_color(x11,gray30).
-gv_color(x11,gray31).
-gv_color(x11,gray32).
-gv_color(x11,gray33).
-gv_color(x11,gray34).
-gv_color(x11,gray35).
-gv_color(x11,gray36).
-gv_color(x11,gray37).
-gv_color(x11,gray38).
-gv_color(x11,gray39).
-gv_color(x11,gray4).
-gv_color(x11,gray40).
-gv_color(x11,gray41).
-gv_color(x11,gray42).
-gv_color(x11,gray43).
-gv_color(x11,gray44).
-gv_color(x11,gray45).
-gv_color(x11,gray46).
-gv_color(x11,gray47).
-gv_color(x11,gray48).
-gv_color(x11,gray49).
-gv_color(x11,gray5).
-gv_color(x11,gray50).
-gv_color(x11,gray51).
-gv_color(x11,gray52).
-gv_color(x11,gray53).
-gv_color(x11,gray54).
-gv_color(x11,gray55).
-gv_color(x11,gray56).
-gv_color(x11,gray57).
-gv_color(x11,gray58).
-gv_color(x11,gray59).
-gv_color(x11,gray6).
-gv_color(x11,gray60).
-gv_color(x11,gray61).
-gv_color(x11,gray62).
-gv_color(x11,gray63).
-gv_color(x11,gray64).
-gv_color(x11,gray65).
-gv_color(x11,gray66).
-gv_color(x11,gray67).
-gv_color(x11,gray68).
-gv_color(x11,gray69).
-gv_color(x11,gray7).
-gv_color(x11,gray70).
-gv_color(x11,gray71).
-gv_color(x11,gray72).
-gv_color(x11,gray73).
-gv_color(x11,gray74).
-gv_color(x11,gray75).
-gv_color(x11,gray76).
-gv_color(x11,gray77).
-gv_color(x11,gray78).
-gv_color(x11,gray79).
-gv_color(x11,gray8).
-gv_color(x11,gray80).
-gv_color(x11,gray81).
-gv_color(x11,gray82).
-gv_color(x11,gray83).
-gv_color(x11,gray84).
-gv_color(x11,gray85).
-gv_color(x11,gray86).
-gv_color(x11,gray87).
-gv_color(x11,gray88).
-gv_color(x11,gray89).
-gv_color(x11,gray9).
-gv_color(x11,gray90).
-gv_color(x11,gray91).
-gv_color(x11,gray92).
-gv_color(x11,gray93).
-gv_color(x11,gray94).
-gv_color(x11,gray95).
-gv_color(x11,gray96).
-gv_color(x11,gray97).
-gv_color(x11,gray98).
-gv_color(x11,gray99).
-gv_color(x11,green).
-gv_color(x11,green1).
-gv_color(x11,green2).
-gv_color(x11,green3).
-gv_color(x11,green4).
-gv_color(x11,greenyellow).
-gv_color(x11,grey).
-gv_color(x11,grey0).
-gv_color(x11,grey1).
-gv_color(x11,grey10).
-gv_color(x11,grey100).
-gv_color(x11,grey11).
-gv_color(x11,grey12).
-gv_color(x11,grey13).
-gv_color(x11,grey14).
-gv_color(x11,grey15).
-gv_color(x11,grey16).
-gv_color(x11,grey17).
-gv_color(x11,grey18).
-gv_color(x11,grey19).
-gv_color(x11,grey2).
-gv_color(x11,grey20).
-gv_color(x11,grey21).
-gv_color(x11,grey22).
-gv_color(x11,grey23).
-gv_color(x11,grey24).
-gv_color(x11,grey25).
-gv_color(x11,grey26).
-gv_color(x11,grey27).
-gv_color(x11,grey28).
-gv_color(x11,grey29).
-gv_color(x11,grey3).
-gv_color(x11,grey30).
-gv_color(x11,grey31).
-gv_color(x11,grey32).
-gv_color(x11,grey33).
-gv_color(x11,grey34).
-gv_color(x11,grey35).
-gv_color(x11,grey36).
-gv_color(x11,grey37).
-gv_color(x11,grey38).
-gv_color(x11,grey39).
-gv_color(x11,grey4).
-gv_color(x11,grey40).
-gv_color(x11,grey41).
-gv_color(x11,grey42).
-gv_color(x11,grey43).
-gv_color(x11,grey44).
-gv_color(x11,grey45).
-gv_color(x11,grey46).
-gv_color(x11,grey47).
-gv_color(x11,grey48).
-gv_color(x11,grey49).
-gv_color(x11,grey5).
-gv_color(x11,grey50).
-gv_color(x11,grey51).
-gv_color(x11,grey52).
-gv_color(x11,grey53).
-gv_color(x11,grey54).
-gv_color(x11,grey55).
-gv_color(x11,grey56).
-gv_color(x11,grey57).
-gv_color(x11,grey58).
-gv_color(x11,grey59).
-gv_color(x11,grey6).
-gv_color(x11,grey60).
-gv_color(x11,grey61).
-gv_color(x11,grey62).
-gv_color(x11,grey63).
-gv_color(x11,grey64).
-gv_color(x11,grey65).
-gv_color(x11,grey66).
-gv_color(x11,grey67).
-gv_color(x11,grey68).
-gv_color(x11,grey69).
-gv_color(x11,grey7).
-gv_color(x11,grey70).
-gv_color(x11,grey71).
-gv_color(x11,grey72).
-gv_color(x11,grey73).
-gv_color(x11,grey74).
-gv_color(x11,grey75).
-gv_color(x11,grey76).
-gv_color(x11,grey77).
-gv_color(x11,grey78).
-gv_color(x11,grey79).
-gv_color(x11,grey8).
-gv_color(x11,grey80).
-gv_color(x11,grey81).
-gv_color(x11,grey82).
-gv_color(x11,grey83).
-gv_color(x11,grey84).
-gv_color(x11,grey85).
-gv_color(x11,grey86).
-gv_color(x11,grey87).
-gv_color(x11,grey88).
-gv_color(x11,grey89).
-gv_color(x11,grey9).
-gv_color(x11,grey90).
-gv_color(x11,grey91).
-gv_color(x11,grey92).
-gv_color(x11,grey93).
-gv_color(x11,grey94).
-gv_color(x11,grey95).
-gv_color(x11,grey96).
-gv_color(x11,grey97).
-gv_color(x11,grey98).
-gv_color(x11,grey99).
-gv_color(x11,honeydew).
-gv_color(x11,honeydew1).
-gv_color(x11,honeydew2).
-gv_color(x11,honeydew3).
-gv_color(x11,honeydew4).
-gv_color(x11,hotpink).
-gv_color(x11,hotpink1).
-gv_color(x11,hotpink2).
-gv_color(x11,hotpink3).
-gv_color(x11,hotpink4).
-gv_color(x11,indianred).
-gv_color(x11,indianred1).
-gv_color(x11,indianred2).
-gv_color(x11,indianred3).
-gv_color(x11,indianred4).
-gv_color(x11,indigo).
-gv_color(x11,invis).
-gv_color(x11,ivory).
-gv_color(x11,ivory1).
-gv_color(x11,ivory2).
-gv_color(x11,ivory3).
-gv_color(x11,ivory4).
-gv_color(x11,khaki).
-gv_color(x11,khaki1).
-gv_color(x11,khaki2).
-gv_color(x11,khaki3).
-gv_color(x11,khaki4).
-gv_color(x11,lavender).
-gv_color(x11,lavenderblush).
-gv_color(x11,lavenderblush1).
-gv_color(x11,lavenderblush2).
-gv_color(x11,lavenderblush3).
-gv_color(x11,lavenderblush4).
-gv_color(x11,lawngreen).
-gv_color(x11,lemonchiffon).
-gv_color(x11,lemonchiffon1).
-gv_color(x11,lemonchiffon2).
-gv_color(x11,lemonchiffon3).
-gv_color(x11,lemonchiffon4).
-gv_color(x11,lightblue).
-gv_color(x11,lightblue1).
-gv_color(x11,lightblue2).
-gv_color(x11,lightblue3).
-gv_color(x11,lightblue4).
-gv_color(x11,lightcoral).
-gv_color(x11,lightcyan).
-gv_color(x11,lightcyan1).
-gv_color(x11,lightcyan2).
-gv_color(x11,lightcyan3).
-gv_color(x11,lightcyan4).
-gv_color(x11,lightgoldenrod).
-gv_color(x11,lightgoldenrod1).
-gv_color(x11,lightgoldenrod2).
-gv_color(x11,lightgoldenrod3).
-gv_color(x11,lightgoldenrod4).
-gv_color(x11,lightgoldenrodyellow).
-gv_color(x11,lightgray).
-gv_color(x11,lightgrey).
-gv_color(x11,lightpink).
-gv_color(x11,lightpink1).
-gv_color(x11,lightpink2).
-gv_color(x11,lightpink3).
-gv_color(x11,lightpink4).
-gv_color(x11,lightsalmon).
-gv_color(x11,lightsalmon1).
-gv_color(x11,lightsalmon2).
-gv_color(x11,lightsalmon3).
-gv_color(x11,lightsalmon4).
-gv_color(x11,lightseagreen).
-gv_color(x11,lightskyblue).
-gv_color(x11,lightskyblue1).
-gv_color(x11,lightskyblue2).
-gv_color(x11,lightskyblue3).
-gv_color(x11,lightskyblue4).
-gv_color(x11,lightslateblue).
-gv_color(x11,lightslategray).
-gv_color(x11,lightslategrey).
-gv_color(x11,lightsteelblue).
-gv_color(x11,lightsteelblue1).
-gv_color(x11,lightsteelblue2).
-gv_color(x11,lightsteelblue3).
-gv_color(x11,lightsteelblue4).
-gv_color(x11,lightyellow).
-gv_color(x11,lightyellow1).
-gv_color(x11,lightyellow2).
-gv_color(x11,lightyellow3).
-gv_color(x11,lightyellow4).
-gv_color(x11,limegreen).
-gv_color(x11,linen).
-gv_color(x11,magenta).
-gv_color(x11,magenta1).
-gv_color(x11,magenta2).
-gv_color(x11,magenta3).
-gv_color(x11,magenta4).
-gv_color(x11,maroon).
-gv_color(x11,maroon1).
-gv_color(x11,maroon2).
-gv_color(x11,maroon3).
-gv_color(x11,maroon4).
-gv_color(x11,mediumaquamarine).
-gv_color(x11,mediumblue).
-gv_color(x11,mediumorchid).
-gv_color(x11,mediumorchid1).
-gv_color(x11,mediumorchid2).
-gv_color(x11,mediumorchid3).
-gv_color(x11,mediumorchid4).
-gv_color(x11,mediumpurple).
-gv_color(x11,mediumpurple1).
-gv_color(x11,mediumpurple2).
-gv_color(x11,mediumpurple3).
-gv_color(x11,mediumpurple4).
-gv_color(x11,mediumseagreen).
-gv_color(x11,mediumslateblue).
-gv_color(x11,mediumspringgreen).
-gv_color(x11,mediumturquoise).
-gv_color(x11,mediumvioletred).
-gv_color(x11,midnightblue).
-gv_color(x11,mintcream).
-gv_color(x11,mistyrose).
-gv_color(x11,mistyrose1).
-gv_color(x11,mistyrose2).
-gv_color(x11,mistyrose3).
-gv_color(x11,mistyrose4).
-gv_color(x11,moccasin).
-gv_color(x11,navajowhite).
-gv_color(x11,navajowhite1).
-gv_color(x11,navajowhite2).
-gv_color(x11,navajowhite3).
-gv_color(x11,navajowhite4).
-gv_color(x11,navy).
-gv_color(x11,navyblue).
-gv_color(x11,none).
-gv_color(x11,oldlace).
-gv_color(x11,olivedrab).
-gv_color(x11,olivedrab1).
-gv_color(x11,olivedrab2).
-gv_color(x11,olivedrab3).
-gv_color(x11,olivedrab4).
-gv_color(x11,orange).
-gv_color(x11,orange1).
-gv_color(x11,orange2).
-gv_color(x11,orange3).
-gv_color(x11,orange4).
-gv_color(x11,orangered).
-gv_color(x11,orangered1).
-gv_color(x11,orangered2).
-gv_color(x11,orangered3).
-gv_color(x11,orangered4).
-gv_color(x11,orchid).
-gv_color(x11,orchid1).
-gv_color(x11,orchid2).
-gv_color(x11,orchid3).
-gv_color(x11,orchid4).
-gv_color(x11,palegoldenrod).
-gv_color(x11,palegreen).
-gv_color(x11,palegreen1).
-gv_color(x11,palegreen2).
-gv_color(x11,palegreen3).
-gv_color(x11,palegreen4).
-gv_color(x11,paleturquoise).
-gv_color(x11,paleturquoise1).
-gv_color(x11,paleturquoise2).
-gv_color(x11,paleturquoise3).
-gv_color(x11,paleturquoise4).
-gv_color(x11,palevioletred).
-gv_color(x11,palevioletred1).
-gv_color(x11,palevioletred2).
-gv_color(x11,palevioletred3).
-gv_color(x11,palevioletred4).
-gv_color(x11,papayawhip).
-gv_color(x11,peachpuff).
-gv_color(x11,peachpuff1).
-gv_color(x11,peachpuff2).
-gv_color(x11,peachpuff3).
-gv_color(x11,peachpuff4).
-gv_color(x11,peru).
-gv_color(x11,pink).
-gv_color(x11,pink1).
-gv_color(x11,pink2).
-gv_color(x11,pink3).
-gv_color(x11,pink4).
-gv_color(x11,plum).
-gv_color(x11,plum1).
-gv_color(x11,plum2).
-gv_color(x11,plum3).
-gv_color(x11,plum4).
-gv_color(x11,powderblue).
-gv_color(x11,purple).
-gv_color(x11,purple1).
-gv_color(x11,purple2).
-gv_color(x11,purple3).
-gv_color(x11,purple4).
-gv_color(x11,red).
-gv_color(x11,red1).
-gv_color(x11,red2).
-gv_color(x11,red3).
-gv_color(x11,red4).
-gv_color(x11,rosybrown).
-gv_color(x11,rosybrown1).
-gv_color(x11,rosybrown2).
-gv_color(x11,rosybrown3).
-gv_color(x11,rosybrown4).
-gv_color(x11,royalblue).
-gv_color(x11,royalblue1).
-gv_color(x11,royalblue2).
-gv_color(x11,royalblue3).
-gv_color(x11,royalblue4).
-gv_color(x11,saddlebrown).
-gv_color(x11,salmon).
-gv_color(x11,salmon1).
-gv_color(x11,salmon2).
-gv_color(x11,salmon3).
-gv_color(x11,salmon4).
-gv_color(x11,sandybrown).
-gv_color(x11,seagreen).
-gv_color(x11,seagreen1).
-gv_color(x11,seagreen2).
-gv_color(x11,seagreen3).
-gv_color(x11,seagreen4).
-gv_color(x11,seashell).
-gv_color(x11,seashell1).
-gv_color(x11,seashell2).
-gv_color(x11,seashell3).
-gv_color(x11,seashell4).
-gv_color(x11,sienna).
-gv_color(x11,sienna1).
-gv_color(x11,sienna2).
-gv_color(x11,sienna3).
-gv_color(x11,sienna4).
-gv_color(x11,skyblue).
-gv_color(x11,skyblue1).
-gv_color(x11,skyblue2).
-gv_color(x11,skyblue3).
-gv_color(x11,skyblue4).
-gv_color(x11,slateblue).
-gv_color(x11,slateblue1).
-gv_color(x11,slateblue2).
-gv_color(x11,slateblue3).
-gv_color(x11,slateblue4).
-gv_color(x11,slategray).
-gv_color(x11,slategray1).
-gv_color(x11,slategray2).
-gv_color(x11,slategray3).
-gv_color(x11,slategray4).
-gv_color(x11,slategrey).
-gv_color(x11,snow).
-gv_color(x11,snow1).
-gv_color(x11,snow2).
-gv_color(x11,snow3).
-gv_color(x11,snow4).
-gv_color(x11,springgreen).
-gv_color(x11,springgreen1).
-gv_color(x11,springgreen2).
-gv_color(x11,springgreen3).
-gv_color(x11,springgreen4).
-gv_color(x11,steelblue).
-gv_color(x11,steelblue1).
-gv_color(x11,steelblue2).
-gv_color(x11,steelblue3).
-gv_color(x11,steelblue4).
-gv_color(x11,tan).
-gv_color(x11,tan1).
-gv_color(x11,tan2).
-gv_color(x11,tan3).
-gv_color(x11,tan4).
-gv_color(x11,thistle).
-gv_color(x11,thistle1).
-gv_color(x11,thistle2).
-gv_color(x11,thistle3).
-gv_color(x11,thistle4).
-gv_color(x11,tomato).
-gv_color(x11,tomato1).
-gv_color(x11,tomato2).
-gv_color(x11,tomato3).
-gv_color(x11,tomato4).
-gv_color(x11,transparent).
-gv_color(x11,turquoise).
-gv_color(x11,turquoise1).
-gv_color(x11,turquoise2).
-gv_color(x11,turquoise3).
-gv_color(x11,turquoise4).
-gv_color(x11,violet).
-gv_color(x11,violetred).
-gv_color(x11,violetred1).
-gv_color(x11,violetred2).
-gv_color(x11,violetred3).
-gv_color(x11,violetred4).
-gv_color(x11,wheat).
-gv_color(x11,wheat1).
-gv_color(x11,wheat2).
-gv_color(x11,wheat3).
-gv_color(x11,wheat4).
-gv_color(x11,white).
-gv_color(x11,whitesmoke).
-gv_color(x11,yellow).
-gv_color(x11,yellow1).
-gv_color(x11,yellow2).
-gv_color(x11,yellow3).
-gv_color(x11,yellow4).
-gv_color(x11,yellowgreen).
-gv_color(svg,aliceblue).
-gv_color(svg,antiquewhite).
-gv_color(svg,aqua).
-gv_color(svg,aquamarine).
-gv_color(svg,azure).
-gv_color(svg,beige).
-gv_color(svg,bisque).
-gv_color(svg,black).
-gv_color(svg,blanchedalmond).
-gv_color(svg,blue).
-gv_color(svg,blueviolet).
-gv_color(svg,brown).
-gv_color(svg,burlywood).
-gv_color(svg,cadetblue).
-gv_color(svg,chartreuse).
-gv_color(svg,chocolate).
-gv_color(svg,coral).
-gv_color(svg,cornflowerblue).
-gv_color(svg,cornsilk).
-gv_color(svg,crimson).
-gv_color(svg,cyan).
-gv_color(svg,darkblue).
-gv_color(svg,darkcyan).
-gv_color(svg,darkgoldenrod).
-gv_color(svg,darkgray).
-gv_color(svg,darkgreen).
-gv_color(svg,darkgrey).
-gv_color(svg,darkkhaki).
-gv_color(svg,darkmagenta).
-gv_color(svg,darkolivegreen).
-gv_color(svg,darkorange).
-gv_color(svg,darkorchid).
-gv_color(svg,darkred).
-gv_color(svg,darksalmon).
-gv_color(svg,darkseagreen).
-gv_color(svg,darkslateblue).
-gv_color(svg,darkslategray).
-gv_color(svg,darkslategrey).
-gv_color(svg,darkturquoise).
-gv_color(svg,darkviolet).
-gv_color(svg,deeppink).
-gv_color(svg,deepskyblue).
-gv_color(svg,dimgray).
-gv_color(svg,dimgrey).
-gv_color(svg,dodgerblue).
-gv_color(svg,firebrick).
-gv_color(svg,floralwhite).
-gv_color(svg,forestgreen).
-gv_color(svg,fuchsia).
-gv_color(svg,gainsboro).
-gv_color(svg,ghostwhite).
-gv_color(svg,gold).
-gv_color(svg,goldenrod).
-gv_color(svg,gray).
-gv_color(svg,grey).
-gv_color(svg,green).
-gv_color(svg,greenyellow).
-gv_color(svg,honeydew).
-gv_color(svg,hotpink).
-gv_color(svg,indianred).
-gv_color(svg,indigo).
-gv_color(svg,ivory).
-gv_color(svg,khaki).
-gv_color(svg,lavender).
-gv_color(svg,lavenderblush).
-gv_color(svg,lawngreen).
-gv_color(svg,lemonchiffon).
-gv_color(svg,lightblue).
-gv_color(svg,lightcoral).
-gv_color(svg,lightcyan).
-gv_color(svg,lightgoldenrodyellow).
-gv_color(svg,lightgray).
-gv_color(svg,lightgreen).
-gv_color(svg,lightgrey).
-gv_color(svg,lightpink).
-gv_color(svg,lightsalmon).
-gv_color(svg,lightseagreen).
-gv_color(svg,lightskyblue).
-gv_color(svg,lightslategray).
-gv_color(svg,lightslategrey).
-gv_color(svg,lightsteelblue).
-gv_color(svg,lightyellow).
-gv_color(svg,lime).
-gv_color(svg,limegreen).
-gv_color(svg,linen).
-gv_color(svg,magenta).
-gv_color(svg,maroon).
-gv_color(svg,mediumaquamarine).
-gv_color(svg,mediumblue).
-gv_color(svg,mediumorchid).
-gv_color(svg,mediumpurple).
-gv_color(svg,mediumseagreen).
-gv_color(svg,mediumslateblue).
-gv_color(svg,mediumspringgreen).
-gv_color(svg,mediumturquoise).
-gv_color(svg,mediumvioletred).
-gv_color(svg,midnightblue).
-gv_color(svg,mintcream).
-gv_color(svg,mistyrose).
-gv_color(svg,moccasin).
-gv_color(svg,navajowhite).
-gv_color(svg,navy).
-gv_color(svg,oldlace).
-gv_color(svg,olive).
-gv_color(svg,olivedrab).
-gv_color(svg,orange).
-gv_color(svg,orangered).
-gv_color(svg,orchid).
-gv_color(svg,palegoldenrod).
-gv_color(svg,palegreen).
-gv_color(svg,paleturquoise).
-gv_color(svg,palevioletred).
-gv_color(svg,papayawhip).
-gv_color(svg,peachpuff).
-gv_color(svg,peru).
-gv_color(svg,pink).
-gv_color(svg,plum).
-gv_color(svg,powderblue).
-gv_color(svg,purple).
-gv_color(svg,red).
-gv_color(svg,rosybrown).
-gv_color(svg,royalblue).
-gv_color(svg,saddlebrown).
-gv_color(svg,salmon).
-gv_color(svg,sandybrown).
-gv_color(svg,seagreen).
-gv_color(svg,seashell).
-gv_color(svg,sienna).
-gv_color(svg,silver).
-gv_color(svg,skyblue).
-gv_color(svg,slateblue).
-gv_color(svg,slategray).
-gv_color(svg,slategrey).
-gv_color(svg,snow).
-gv_color(svg,springgreen).
-gv_color(svg,steelblue).
-gv_color(svg,tan).
-gv_color(svg,teal).
-gv_color(svg,thistle).
-gv_color(svg,tomato).
-gv_color(svg,turquoise).
-gv_color(svg,violet).
-gv_color(svg,wheat).
-gv_color(svg,white).
-gv_color(svg,whitesmoke).
-gv_color(svg,yellow).
-gv_color(svg,yellowgreen).
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
deleted file mode 100644
index ac319dc..0000000
--- a/prolog/gv/gv_color.pl
+++ /dev/null
@@ -1,68 +0,0 @@
-:- module(
-  gv_color,
-  [
-    gv_color/2, % ?Colorscheme:oneof([svg,x11])
-                % ?Color:atom
-    color//1, % +Color:compound
-    colorList//1 % +Pairs:list(pair(compound,float))
-  ]
-).
-:- ensure_loaded(library('gv/gv_color.data')).
-
-/** <module> GraphViz color
-
-@author Wouter Beek
-@tbd Color value `transparent` is only available in the output formats
-     ps, svg, fig, vmrl, and the bitmap formats.
-@version 2015/08, 2015/10, 2016/02
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(lists)).
-:- use_module(library(os/file_ext)).
-
-
-
-
-
-% color(+Color:compound)// .
-% A *color* is represented by a compound term of one of the following forms:
-%   1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)`
-%   2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)`
-%   3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))`
-
-color(rgb(Red,Green,Blue)) --> !,
-  "#",
-  #(3, hex_color, [Red,Green,Blue]).
-color(rgbs(Red,Green,Blue,Alpha)) --> !,
-  color(rgb(Red,Green,Blue)),
-  hex_color(Alpha).
-color(hsv(Hue,Saturation,Value)) --> !,
-  #(3, hsv_color, [Hue,Saturation,Value]).
-color(Name) -->
-  {gv_color(_, Name)},
-  atom(Name).
-
-hex_color(I) -->
-  xinteger(I).
-
-hsv_color(D, Head, Tail):-
-  format(codes(Head,Tail), '~2f', [D]).
-
-
-
-%! colorList(+Pairs:list(pair(compound,float)))// .
-
-colorList(L) -->
-  '+'(wc, L).
-
-wc(Color-Float) -->
-  color(Color),
-  (   wc_weight(Float)
-  ;   ""
-  ).
-
-wc_weight(Float) -->
-  ";",
-  float(Float).
diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl
deleted file mode 100644
index 30c4263..0000000
--- a/prolog/gv/gv_dom.pl
+++ /dev/null
@@ -1,29 +0,0 @@
-:- module(
-  gv_dom,
-  [
-    gv_dom/3 % +ExportG, -Dom, +Opts
-  ]
-).
-
-/** <module> GraphViz DOM
-
-@author Wouter Beek
-@version 2015/07, 2016/01
-*/
-
-:- use_module(library(gv/gv_file)).
-:- use_module(library(option)).
-:- use_module(library(svg/svg_ext)).
-
-
-
-
-
-%! gv_dom(+ExportG, -Dom, +Opts) is det.
-
-gv_dom(ExportG, Dom, Opts1):-
-  % Make sure the file type of the output file is SvgDom.
-  merge_options([output(svg)], Opts1, Opts2),
-  graph_viz(ExportG, ToFile, Opts2),
-  svg_dom(ToFile, Dom),
-  delete_file(ToFile).
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
deleted file mode 100644
index 993fcee..0000000
--- a/prolog/gv/gv_file.pl
+++ /dev/null
@@ -1,175 +0,0 @@
-:- module(
-  gv_file,
-  [
-    graph_viz/2, % +ExportG, ?File
-    graph_viz/3  % +ExportG, ?File, +Opts
-  ]
-).
-
-/** <module> GraphViz file
-
-@author Wouter Beek
-@version 2015/07, 2015/10-2015/11, 2016/01
-*/
-
-:- use_module(library(code_ext)).
-:- use_module(library(error)).
-:- use_module(library(gv/gv_graph)).
-:- use_module(library(option)).
-:- use_module(library(os/external_program)).
-:- use_module(library(os/process_ext)).
-:- use_module(library(string_ext)).
-
-:- predicate_options(graph_viz/3, 3, [
-     pass_to(file_to_gv/3, 3)
-   ]).
-:- predicate_options(file_to_gv/3, 3, [
-     method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])),
-     output(+atom)
-   ]).
-
-:- dynamic(user:module_uses/2).
-:- multifile(user:module_uses/2).
-
-user:module_uses(gv_file, program(dot)).
-
-
-
-
-
-%! graph_viz(+ExportGraph:compound, ?File:atom) is det.
-%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
-% Returns a file containing a GraphViz visualization of the given graph.
-%
-% The following options are supported:
-%   * method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Default is `dot'.
-%     For possible values see gv_method/1.
-%   * output(+atom)`
-%     The file type of the generated GraphViz file.
-%     Default is `pdf`.
-%     For possible values see gv_output_type/1.
-
-graph_viz(ExportG, File):-
-  graph_viz(ExportG, File, []).
-graph_viz(ExportG, File, Opts):-
-  once(phrase(gv_graph(ExportG), Cs)),
-
-  % Be thread-safe.
-  thread_self(Id),
-  string_list_concat(["gv_file",Id], "_", ThreadName),
-  absolute_file_name(ThreadName, TmpFile, [access(write),extensions([dot])]),
-  setup_call_cleanup(
-    open(TmpFile, write, Write, [encoding(utf8)]),
-    with_output_to(Write, put_codes(Cs)),
-    close(Write)
-  ),
-  file_to_gv(TmpFile, File, Opts).
-
-
-%! file_to_gv(
-%!   +InputFile:atom,
-%!   ?OutputFile:atom,
-%!   +Options:list(compound)
-%! ) is det.
-% Converts a GraphViz DOT file to an image file, using a specific
-% visualization method.
-
-file_to_gv(InputFile, OutputFile, Opts):-
-  var(OutputFile), !,
-  option(output(Ext), Opts, pdf),
-  file_name_extension(out, Ext, LocalName),
-  absolute_file_name(LocalName, OutputFile, Opts),
-  file_to_gv(InputFile, OutputFile, Opts).
-file_to_gv(InputFile, OutputFile, Opts):-
-  option(output(dot), Opts), !,
-  (   var(OutputFile)
-  ->  OutputFile = InputFile
-  ;   rename_file(InputFile, OutputFile)
-  ).
-file_to_gv(InputFile, OutputFile, Opts):-
-  % Typecheck for `method` option.
-  option(method(Method), Opts, dot),
-  findall(Method0, gv_method(Method0), Methods),
-  must_be(oneof(Methods), Method),
-
-  % Typecheck for `output` option.
-  option(output(OutputType), Opts, pdf),
-  findall(OutputType0, gv_output_type(OutputType0), OutputTypes),
-  must_be(oneof(OutputTypes), OutputType),
-
-  % Run the GraphViz conversion command in the shell.
-  format(atom(OutputTypeFlag), "-T~a", [OutputType]),
-  format(atom(OutputFileFlag), "-o~a", [OutputFile]),
-  run_process(
-    Method,
-    [OutputTypeFlag,file(InputFile),OutputFileFlag]
-  ).
-
-
-
-
-
-% HELPERS %
-
-gv_method(circo).
-gv_method(dot).
-gv_method(fdp).
-gv_method(neato).
-gv_method(osage).
-gv_method(sfdp).
-gv_method(twopi).
-
-
-gv_output_type(bmp).
-gv_output_type(canon).
-gv_output_type(dot).
-gv_output_type(gv).
-gv_output_type(xdot).
-gv_output_type('xdot1.2').
-gv_output_type('xdot1.4').
-gv_output_type(cgimage).
-gv_output_type(cmap).
-gv_output_type(eps).
-gv_output_type(exr).
-gv_output_type(fig).
-gv_output_type(gd).
-gv_output_type(gd2).
-gv_output_type(gif).
-gv_output_type(gtk).
-gv_output_type(ico).
-gv_output_type(imap).
-gv_output_type(cmapx).
-gv_output_type(imap_np).
-gv_output_type(cmapx_np).
-gv_output_type(ismap).
-gv_output_type(jp2).
-gv_output_type(jpg).
-gv_output_type(jpeg).
-gv_output_type(jpe).
-gv_output_type(pct).
-gv_output_type(pict).
-gv_output_type(pdf).
-gv_output_type(pic).
-gv_output_type(plain).
-gv_output_type('plain-ext').
-gv_output_type(png).
-gv_output_type(pov).
-gv_output_type(ps).
-gv_output_type(ps2).
-gv_output_type(psd).
-gv_output_type(sgi).
-gv_output_type(svg).
-gv_output_type(svgz).
-gv_output_type(tga).
-gv_output_type(tif).
-gv_output_type(tiff).
-gv_output_type(tk).
-gv_output_type(vml).
-gv_output_type(vmlz).
-gv_output_type(vrml).
-gv_output_type(wbmp).
-gv_output_type(webp).
-gv_output_type(xlib).
-gv_output_type(x11).
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
deleted file mode 100644
index c95c9cc..0000000
--- a/prolog/gv/gv_graph.pl
+++ /dev/null
@@ -1,252 +0,0 @@
-:- module(
-  gv_graph,
-  [
-    gv_graph//1 % +Graph:compound
-  ]
-).
-
-/** <module> GraphViz graph
-
-Generates GraphViz graphs in the DOT format based on
-a Prolog representation of a graph.
-
-In GraphViz vertices are called 'nodes'.
-
----
-
-@author Wouter Beek
-@version 2015/07, 2015/12
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(gv/gv_graph_comp)).
-:- use_module(library(lists)).
-:- use_module(library(option)).
-
-
-
-
-
-%! gv_graph(+Graph:compound)// is det.
-% Wrapper around gv_graph//2 with no indentation.
-
-gv_graph(G) --> gv_graph(G, 0).
-
-
-%! gv_graph(+Graph:compound, +Indent:nonneg)// is det.
-% The follow graph attributes are supported,
-% beyond the GraphViz attributes for graphs:
-%   * `directed(+boolean)`
-%      Whether the graph is directed (`true`) or undirected (`false`).
-%      Default: `false`.
-%   * `name(+GraphName:atom)`
-%   * `strict(+StrictGraph:boolean)`
-%      This forbids the creation of self-arcs and multi-edges;
-%      they are ignored in the input file.
-%      Only in combinattion with directionality `directed`.
-%
-% ```abnf
-% graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
-% ```
-%
-% `GraphTerm` is a compound term of the following form:
-% ```prolog
-% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
-% ```
-%
-% `RankedVertexTerms` is a list of compound terms of the following form:
-% ```prolog
-% RankVertex-ContentVertices
-% ```
-%
-% @tbd Add support for subgraphs (arbitrary nesting).
-% @tbd Add support for escape strings:
-%      http://www.graphviz.org/doc/info/attrs.html#k:escString
-% @tbd Assert attributes that are generic with respect to a subgraph.
-% @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
-
-gv_graph(G1, I) -->
-  {
-    include_ranks(G1, G2),
-    G2 = graph(VTerms,RankedVTerms,ETerms,GAttrs1),
-    shared_attributes(VTerms, SharedVAttrs, NewVTerms),
-    shared_attributes(ETerms, SharedEAttrs, NewETerms),
-    add_default(GAttrs1, overlap(false), GAttrs2),
-    I = 0
-  },
-
-  % The first statement in the GraphViz output.
-  % States that this file represents a graph according to the GraphViz format.
-  tab(I),
-  
-  % Strictness.
-  {select_option(strict(Strict), GAttrs2, GAttrs3, false)},
-  gv_strict(Strict),
-  
-  % Directedness.
-  {select_option(directed(Directed), GAttrs3, GAttrs4, true)},
-  gv_graph_type(Directed),
-  " ",
-  
-  % Graph name.
-  (   {select_option(name(GName), GAttrs4, GAttrs5)}
-  ->  gv_id(GName),
-      " "
-  ;   {GAttrs5 = GAttrs4}
-  ),
-
-  % The body of the DOT file appears between curly braces.
-  "{\n",
-
-  % The following lines are indented.
-  {NewI is I + 1},
-
-  % Attributes that apply to the graph as a whole.
-  gv_generic_attributes_statement(graph, NewI, GAttrs5),
-
-  % Attributes that are the same for all nodes.
-  gv_generic_attributes_statement(node, NewI, SharedVAttrs),
-
-  % Attributes that are the same for all edges.
-  gv_generic_attributes_statement(edge, NewI, SharedEAttrs),
-
-  % Only add a line_feed if some content was already written
-  % and some content is about to be written.
-  (   % Succeeds if no content was written.
-      {(GAttrs5 == [], SharedVAttrs == [], SharedEAttrs == [])}
-  ->  ""
-  ;   % Succeeds if no content is about to be written.
-      {(NewVTerms == [], RankedVTerms == [])}
-  ->  ""
-  ;   "\n"
-  ),
-
-  % The list of GraphViz nodes.
-  gv_node_statements(NewI, NewVTerms),
-  ({NewVTerms == []} -> "" ; "\n"),
-
-  % The ranked GraphViz nodes (displayed at the same height).
-  gv_ranked_node_collections(NewI, RankedVTerms),
-  ({RankedVTerms == []} -> "" ; "\n"),
-
-  {
-    findall(
-      edge(FromId,ToId,[]),
-      (
-        nth0(J1, RankedVTerms, rank(vertex(FromId,_),_)),
-        nth0(J2, RankedVTerms, rank(vertex(ToId,_),_)),
-        % We assume that the rank vertices are nicely ordered.
-        succ(J1, J2)
-      ),
-      RankEdges
-    )
-  },
-
-  % The rank edges.
-  gv_edge_statements(NewI, Directed, RankEdges),
-
-  % The non-rank edges.
-  gv_edge_statements(NewI, Directed, NewETerms),
-  
-  % Note that we do not include a line_feed here.
-
-  % We want to indent the closing curly brace.
-  tab(I),
-  "}\n".
-
-
-
-%! gv_edge_statements(
-%!   +Indent:nonneg,
-%!   +Directed:boolean,
-%!   +Statements:list(compound)
-%! )// is det.
-
-gv_edge_statements(I, Dir, L) --> *(gv_edge_statement(I, Dir), L).
-
-
-
-%! gv_edge_statements(+Indent:nonneg, +Statements:list(compound))// is det.
-
-gv_node_statements(I, L) --> *(gv_node_statement(I), L).
-
-
-
-%! gv_ranked_node_collections(+Indent:nonneg, +Collections:list)// is det.
-
-gv_ranked_node_collections(I, L) --> *(gv_ranked_node_collection(I), L).
-
-
-
-
-
-% HELPERS %
-
-%! add_default_option(
-%!   +Options:list(compound),
-%!   +Default:compound,
-%!   -NewOptions:list(compound)
-%! ) is det.
-
-add_default(L1, Opt, L2):-
-  Opt =.. [N,_Value],
-  Opt0 =.. [N,_FreshVar],
-  (   option(Opt0, L1)
-  ->  L2 = L1
-  ;   L2 = [Opt|L1]
-  ).
-
-
-
-%! gv_graph_type(+Directed:boolean)// is det.
-% The type of graph that is represented.
-
-gv_graph_type(false) --> !, "graph".
-gv_graph_type(true)  -->    "digraph".
-
-
-
-%! gv_strict(+Strict:boolean)// is det.
-% The keyword denoting that the graph is strict, i.e., has no self-arcs and
-% no multi-edges.
-% This only applies to directed graphs.
-
-gv_strict(false) --> !, "".
-gv_strict(true)  -->    "strict ".
-
-
-
-%! invlude_ranges(+Graph:compound, -GraphWithRanks:compound) is det.
-% Ensures that there is a ranks components in
-% the graph-denoting compound term.
-
-include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)):- !.
-include_ranks(graph(Vs,Es,L), graph(Vs,[],Es,L)).
-
-
-
-%! shared_attributes(
-%!   +Terms:list(compound),
-%!   -SharedAttributes:list(compound),
-%!   -NewTerms:list(compound)
-%! ) is det.
-
-shared_attributes(Ts1, Shared, Ts2):-
-  maplist(term_to_attrs, Ts1, L1),
-  extract_shared(L1, Shared),
-  maplist(remove_shared_attributes(Shared), L1, L2),
-  maplist(term_change_attrs, Ts1, L2, Ts2).
-
-term_to_attrs(edge(_,_,A), A).
-term_to_attrs(vertex(_,A), A).
-
-extract_shared([], []):- !.
-extract_shared(Argss, Shared):-
-  ord_intersection(Argss, Shared).
-
-remove_shared_attributes(Shared, Args1, Args2):-
-  ord_subtract(Args1, Shared, Args2).
-
-term_change_attrs(edge(From,To,_), A, edge(From,To,A)).
-term_change_attrs(vertex(Id,_), A, vertex(Id,A)).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
deleted file mode 100644
index 30ea9c5..0000000
--- a/prolog/gv/gv_graph_comp.pl
+++ /dev/null
@@ -1,309 +0,0 @@
-:- module(
-  gv_graph_comp,
-  [
-    gv_edge_statement//3, % +Indent:nonneg
-                          % +Directed:boolean
-                          % +Edge:compound
-    gv_generic_attributes_statement//3, % +Kind:oneof([edge,graph,node])
-                                        % +Indent:nonneg
-                                        % +CategoryAttributes:list(compound)
-    gv_id//1, % +Name:compound
-    gv_node_statement//2, % +Indent:nonneg
-                          % +Vertex:compound
-    gv_ranked_node_collection//2 % +Indent:nonneg
-                                 % +Rank
-  ]
-).
-
-/** <module> GraphViz graph components
-
-```abnf
-attr_list = "[" [a_list] "]" [attr_list]
-a_list = ID "=" ID [","] [a_list]
-```
-
-@author Wouter Beek
-@see http://www.graphviz.org/content/dot-language
-@version 2015/07-2015/08, 2015/10-2016/01
-*/
-
-:- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(gv/gv_attrs)).
-:- use_module(library(gv/gv_html)).
-:- use_module(library(error)).
-:- use_module(library(lists)).
-:- use_module(library(ordsets)).
-
-
-
-
-
-%! gv_edge_statement(
-%!   +Indent:nonneg,
-%!   +Directed:boolean,
-%!   +Edge:compound
-%! )// is det.
-% A GraphViz statement describing an edge.
-%
-% @arg Indent The indentation level at which the edge statement is written.
-% @arg Directed Whether the graph is directed or not.
-% @arg GraphAttributes The attributes of the graph. Some of these attributes
-%      may be used in the edge statement (e.g., the colorscheme).
-% @arg Edge A compound term in the GIFormat, representing an edge.
-%
-% @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1
-%      at the from and/or to location.
-% @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
-
-gv_edge_statement(I, Dir, edge(From,To,Attrs)) -->
-  tab(I),
-
-  gv_node_id(From), " ",
-  gv_edge_operator(Dir), " ",
-  gv_node_id(To), " ",
-
-  % We want `colorscheme/1` from the edges and
-  % `directionality/1` from the graph.
-  gv_attrs(edge, Attrs),
-  "\n".
-
-%! gv_edge_operator(+Directed:boolean)// .
-% The binary edge operator between two vertices.
-% The operator that is used depends on whether the graph is directed or
-% undirected.
-%
-% @arg Directed Whether an edge is directed (operator `->`) or
-%      undirected (operator `--`).
-
-gv_edge_operator(Dir) -->
-  {must_be(boolean, Dir)},
-  ({Dir == false} -> "--" ; {Dir == true} -> "->").
-
-
-
-%! gv_generic_attributes_statement(
-%!   +Kind:oneof([edge,graph,node]),
-%!   +Indent:nonneg,
-%!   +CategoryAttrs
-%! )//
-% A GraphViz statement describing generic attributes for a category of items.
-%
-% @arg Kind The category of items for to the attributes apply.
-%      Possible values: `edge`, `graph`, and `node`.
-% @arg Indent An integer indicating the number of tabs.
-% @arg GraphAttributes A list of name-value pairs.
-% @arg CategoryAttributes A list of name-value pairs.
-%
-% ```
-% attr_stmt = (graph / node / edge) attr_list
-% ```
-
-gv_generic_attributes_statement(_, _, []) --> !, "".
-gv_generic_attributes_statement(Kind, I, Attrs) -->
-  tab(I),
-  gv_kind(Kind), " ",
-  gv_attrs(Kind, Attrs),
-  "\n", !.
-
-
-
-%! gv_kind(+Kind:oneof([edge,graph,node]))// .
-
-gv_kind(Kind) --> {must_be(oneof([edge,graph,node]), Kind)}, atom(Kind).
-
-
-
-%! gv_node_statement(+Indent:nonneg, +Vertex:compound)// is det.
-% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes').
-
-gv_node_statement(I, vertex(Id,Attrs)) -->
-  tab(I),
-  gv_node_id(Id),
-  gv_attrs(node, Attrs),
-  "\n".
-
-
-
-%! gv_ranked_node_collection(+Indent:nonneg, Rank:pair)// is det.
-
-gv_ranked_node_collection(I, RankVTerm-VTerms) -->
-  tab(I),
-  "{\n",
-
-  % The rank attribute.
-  {NewI is I + 1},
-  tab(NewI),
-  gv_attr(subgraph, rank(same)),
-  "\n",
-
-  % Vertice statements.
-  *(gv_node_statement(NewI), [RankVTerm|VTerms]),
-
-  % We want to indent the closing curly brace.
-  tab(I),
-  "\n}".
-
-
-
-
-
-% HELPERS %
-
-%! gv_attrs(
-%!   +Kind:oneof([edge,graph,node]),
-%!   +Attributes:list(compound)
-%! )// is det.
-
-gv_attrs(Kind, L) --> "[", *(gv_attr(Kind), L), "]".
-
-
-%! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det.
-% A single GraphViz attribute.
-% We assume that the attribute has already been validated.
-
-gv_attr(Context, Attr) -->
-  {Attr =.. [N,V]},
-  gv_id(N), "=", gv_attr_value(Context, N=V), ";".
-
-
-
-%! gv_id(+Id:compound)// is det.
-% Parse a GraphViz identifier.
-% There are 4 variants:
-%   1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters,
-%      underscores (`_`) or digits (`[0-9]`), not beginning with a digit.
-%   2. A numeral `[-]?(.[0-9]+ | [0-9]+(.[0-9]*)? )`.
-%   3. Any double-quoted string (`"..."`) possibly containing
-%      escaped quotes (`\"`).
-%      In quoted strings in DOT, the only escaped character is
-%      double-quote (`"`). That is, in quoted strings, the dyad `\"`
-%      is converted to `"`. All other characters are left unchanged.
-%      In particular, `\\` remains `\\`.
-%      Layout engines may apply additional escape sequences.
-%      Represented by a Prolog term of the form `double_quoted_string(ATOM)`.
-%   4. An HTML string (`<...>`).
-%      Represented by a Prolog term of the form `html_like_label(COMPOUND)`.
-%
-% @tbd Add support for HTML-like labels:
-%      http://www.graphviz.org/doc/info/shapes.html#html
-%      This requires an XML grammar!
-
-% HTML strings (assumed to be the same as HTML-like labels).
-gv_id(html_like_label(Content)) --> !,
-  gv_html_like_label(Content).
-% Double-quoted strings.
-% The quotes are already part of the given atom.
-gv_id(double_quoted_string(Atom)) --> !,
-  "\"", atom(Atom), "\"".
-% Numerals.
-gv_id(N) -->
-  {number(N)}, !,
-  {number_codes(N, Cs)},
-  Cs.
-% Alpha-numeric strings.
-gv_id(Atom) -->
-  {atom_codes(Atom, [H|T])},
-  gv_id_first(H),
-  gv_id_rest(T), !,
-  % Variant 1 identifiers should not be (case-variants of) a
-  % GraphViz keyword.
-  {\+ gv_keyword([H|T])}.
-
-
-%! gv_id_first(+First:code)// is det.
-% Generates the first character of a GraphViz identifier.
-
-gv_id_first(C)   --> alpha(C), !.
-gv_id_first(0'_) --> "_".
-
-
-%! gv_id_rest(+NonFirst:code)// is det.
-% Generates a non-first character of a GraphViz identifier.
-
-gv_id_rest([H|T])   --> alphadigit(H), !, gv_id_rest(T).
-gv_id_rest([0'_|T]) --> "_",           !, gv_id_rest(T).
-gv_id_rest([])      --> "".
-
-
-
-%! gv_keyword(+Codes:list(code)) is semidet.
-% Succeeds if the given codes for a GraphViz reserved keyword.
-
-gv_keyword(Cs):-
-  % Obviously, the keywords do not occur on the difference list input.
-  % So we must use phrase/[2,3].
-  phrase(gv_keyword, Cs).
-
-
-%! gv_keyword// .
-% GraphViz has reserved keywords that cannot be used as identifiers.
-% GraphViz keywords are case-insensitive.
-
-gv_keyword --> "digraph".
-gv_keyword --> "edge".
-gv_keyword --> "graph".
-gv_keyword --> "node".
-gv_keyword --> "strict".
-gv_keyword --> "subgraph".
-
-
-
-%! gv_node_id(+NodeId:compound)// .
-% GraphViz node identifiers can be of the following two types:
-%   1. A GraphViz identifier, see gv_id//1.
-%   2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0.
-%
-% @tbd Add support for GraphViz port indicators
-%      inside GraphViz node identifiers.
-
-gv_node_id(Id) --> gv_id(Id), !.
-%gv_node_id(_) --> gv_id(_), gv_port.
-gv_node_id(Id) --> {type_error(gv_node_id, Id)}.
-
-
-
-%! gv_numeral(-Number)// is det.
-% ```bnf
-% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
-% ```
-
-gv_numeral(N) -->
-  ("-" -> {Sg = -1} ; {Sg = 1}),
-  (   "."
-  ->  {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)}
-  ;   +(digit, Ds1), {pos_sum(Ds1, I)},
-      ("." -> *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0})
-  ),
-  {N is Sg * (I + Frac)}.
-
-
-
-%! gv_port// is det.
-
-gv_port --> gv_port_location, (gv_port_angle ; "").
-gv_port --> gv_port_angle, (gv_port_location ; "").
-gv_port --> ":", gv_compass_pt(_).
-
-gv_port_angle --> "@", gv_id(_).
-
-gv_port_location --> ":", gv_id(_).
-gv_port_location --> ":[", gv_id(_), ",", gv_id(_), "]".
-
-
-
-%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
-% ```
-% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ )
-% ```
-
-gv_compass_pt('_') --> "_".
-gv_compass_pt(c)   --> "c".
-gv_compass_pt(e)   --> "e".
-gv_compass_pt(n)   --> "n".
-gv_compass_pt(ne)  --> "ne".
-gv_compass_pt(nw)  --> "nw".
-gv_compass_pt(s)   --> "s".
-gv_compass_pt(se)  --> "se".
-gv_compass_pt(sw)  --> "sw".
-gv_compass_pt(w)   --> "w".
diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl
deleted file mode 100644
index b5c1368..0000000
--- a/prolog/gv/gv_html.pl
+++ /dev/null
@@ -1,255 +0,0 @@
-:- module(
-  gv_html,
-  [
-    gv_html_like_label//1 % +Content:compound
-  ]
-).
-
-/** <module> GraphViz: HTML-like labels
-
-Grammar taken from the GraphViz Web site:
-
-```
-label :   text
-        | table
-text :   textitem
-       | text textitem
-textitem :   string
-           | <BR/>
-           | <FONT> text </FONT>
-           | <I> text </I>
-           | <B> text </B>
-           | <U> text </U>
-           | <O> text </O>
-           | <SUB> text </SUB>
-           | <SUP> text </SUP>
-           | <S> text </S>
-table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
-rows :   row
-       | rows row
-       | rows <HR/> row
-row: <TR> cells </TR>
-cells :   cell
-        | cells cell
-        | cells <VR/> cell
-cell:   <TD> label </TD>
-      | <TD> <IMG/> </TD>
-```
-
----
-
-@author Wouter Beek
-@see http://www.graphviz.org/content/node-shapes#html
-@version 2015/07, 2015/12
-*/
-
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(html/html_dcg)).
-
-
-
-
-
-%! gv_html_like_label(+Content:compound)// is det.
-
-gv_html_like_label(Content) --> "<", label(Content), ">".
-
-
-
-%! cell(+Contents:compound)// is det.
-% Supported attributes for `TD`:
-%   - `ALIGN="CENTER|LEFT|RIGHT|TEXT"`
-%   - `BALIGN="CENTER|LEFT|RIGHT"`
-%   - `BGCOLOR="color"`
-%   - `BORDER="value"`
-%   - `CELLPADDING="value"`
-%   - `CELLSPACING="value"`
-%   - `COLOR="color"`
-%   - `COLSPAN="value"`
-%   - `FIXEDSIZE="FALSE|TRUE"`
-%   - `GRADIENTANGLE="value"`
-%   - `HEIGHT="value"`
-%   - `HREF="value"`
-%   - `ID="value"`
-%   - `PORT="portName"`
-%   - `ROWSPAN="value"`
-%   - `SIDES="value"`
-%   - `STYLE="value"`
-%   - `TARGET="value"`
-%   - `TITLE="value"`
-%   - `TOOLTIP="value"`
-%   - `VALIGN="MIDDLE|BOTTOM|TOP"`
-%   - `WIDTH="value"`
-%
-% Supported attributes for `IMG`:
-%   - `SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"`
-%   - `SRC="value"`
-
-cell(td(Contents)) --> !,
-  cell(td([],Contents)).
-cell(td(Attrs1,Image)) -->
-  {(Image =.. [img,Attrs2] -> true ; Image == img -> Attrs2 = [])}, !,
-  html_element(td, Attrs1, html_element(img,Attrs2)).
-cell(td(Attrs,Contents)) -->
-  html_element(td, Attrs, label(Contents)).
-
-
-
-%! cells(+Contents:list(compound))// is det.
-
-cells([H,vr|T]) --> !, cell(H), html_element(vr), cells(T).
-cells([H|T])    --> !, cell(H), cells(T).
-cells([])       --> "".
-
-
-
-%! label(+Content:compound)// is det.
-% GraphViz HTML-like label.
-
-label(Content) --> table(Content), !.
-label(Content) --> text(Content).
-
-
-
-%! row(+Contents:compound)// is det.
-
-row(tr(Contents)) --> html_element(tr, [], cells(Contents)).
-
-
-
-%! rows(+Contents:list)// is det.
-
-rows([hr|T]) --> !, html_element(hr), rows(T).
-rows([H|T]) --> row(H), !, rows(T).
-rows([]) --> "".
-
-
-
-%! table(+Contents:compound)// is det.
-% ```
-% table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
-% ```
-%
-% Supported attributes for `TABLE`:
-%   - `ALIGN="CENTER|LEFT|RIGHT"`
-%   - `BGCOLOR="color"`
-%   - `BORDER="value"`
-%   - `CELLBORDER="value"`
-%   - `CELLPADDING="value"`
-%   - `CELLSPACING="value"`
-%   - `COLOR="color"`
-%   - `COLUMNS="value"`
-%   - `FIXEDSIZE="FALSE|TRUE"`
-%   - `GRADIENTANGLE="value"`
-%   - `HEIGHT="value"`
-%   - `HREF="value"`
-%   - `ID="value"`
-%   - `PORT="portName"`
-%   - `ROWS="value"`
-%   - `SIDES="value"`
-%   - `STYLE="value"`
-%   - `TARGET="value"`
-%   - `TITLE="value"`
-%   - `TOOLTIP="value"`
-%   - `VALIGN="MIDDLE|BOTTOM|TOP"`
-%   - `WIDTH="value"`
-%
-% Supported attributes for `FONT`:
-%  - `COLOR="color"`
-%    Sets the color of the font within the scope of `<FONT>...</FONT>`,
-%     or the border color of the table or cell within the scope of
-%     `<TABLE>...</TABLE>`, or `<TD>...</TD>`.
-%    This color can be overridden by a `COLOR` attribute in descendents.
-%    By default, the font color is determined by the `fontcolor` attribute
-%     of the corresponding node, edge or graph, and the border color is
-%     determined by the color attribute of the corresponding node, edge or
-%     graph.
-%   - `FACE="fontname"`
-%   - `POINT-SIZE="value"`
-
-table(table(Contents)) --> !,
-  table(table([],Contents)).
-table(table(Attrs,Contents)) --> !,
-  html_element(table, Attrs, rows(Contents)).
-table(font(Table)) --> !,
-  table(font([],Table)).
-table(font(Attrs1,Table)) -->
-  {(  Table =.. [table,Attrs2,Contents]
-  ->  true
-  ;   Table =.. [table,Contents]
-  ->  Attrs2 = []
-  )},
-  html_element(font, Attrs1, table(table(Attrs2,Contents))).
-
-
-
-%! text(+Contents:list)// .
-% ```
-% text :   textitem
-%        | text textitem
-% ```
-
-text(Contents) --> {is_list(Contents)}, !, '+'(textitem, Contents).
-text(Content)  --> text([Content]).
-
-
-
-%! textitem(+Content:compound)// .
-% ```
-% textitem :   string
-%            | <BR/>
-%            | <FONT> text </FONT>
-%            | <I> text </I>
-%            | <B> text </B>
-%            | <U> text </U>
-%            | <O> text </O>
-%            | <SUB> text </SUB>
-%            | <SUP> text </SUP>
-%            | <S> text </S>
-% ```
-%
-% Supported attributes for BR:
-%   * `ALIGN="CENTER|LEFT|RIGHT"`
-%
-% Supported attributes for FONT:
-%   * COLOR="color"
-%   * FACE="fontname"
-%   * POINT-SIZE="value"
-
-textitem(br(Attrs)) --> !,
-  html_element(br, Attrs).
-% Compound term: parser.
-textitem(Compound) -->
-  {var(Compound)}, !,
-  html_element(Name, _, text(Content)),
-  {
-    supported_html_element(Name),
-    Compound =.. [Name,Content]
-  }.
-% Compound term: generator.
-textitem(Compound) -->
-  {
-    Compound =.. [Name,Content], !,
-    supported_html_element(Name)
-  },
-  html_element(Name, _, text(Content)).
-textitem(String) -->
-  html_string(String).
-
-
-
-
-
-% HELPERS %
-
-%! supported_html_element(+Name:atom) is semidet.
-%! supported_html_element(-Name:atom) is multi.
-
-supported_html_element(b).
-supported_html_element(font).
-supported_html_element(i).
-supported_html_element(o).
-supported_html_element(s).
-supported_html_element(sub).
-supported_html_element(sup).
-supported_html_element(u).
diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl
deleted file mode 100644
index 4382aa6..0000000
--- a/prolog/tree/tree_viz.pl
+++ /dev/null
@@ -1,65 +0,0 @@
-:- module(
-  tree_viz,
-  [
-    tree_export_graph/2, % +Tree, ExportG
-    tree_export_graph/3, % +Tree, ExportG, +Opts
-    tree_viz/2,          % +Tree, ?File
-    tree_viz/3           % +Tree, ?File, +Opts
-  ]
-).
-
-/** <module> Tree visualization
-
-Export trees to GraphViz.
-
-@author Wouter Beek
-@version 2016/01-2016/02
-*/
-
-:- use_module(library(graph/build_export_graph)).
-:- use_module(library(gv/gv_file)).
-:- use_module(library(ordsets)).
-:- use_module(library(tree/l_tree)).
-:- use_module(library(tree/s_tree)).
-
-:- predicate_options(tree_export_graph/3, 3, [
-     pass_to(build_export_graph/4, 4)
-   ]).
-:- predicate_options(tree_viz/3, 3, [
-     pass_to(graph_viz/3, 3),
-     pass_to(tree_to_graph/3, 3)
-   ]).
-
-
-
-
-
-%! tree_export_graph(+Tree, -ExportG) is det.
-%! tree_export_graph(+Tree, -ExportG, +Opts) is det.
-% Opts are passed to build_export_graph/4.
-
-tree_export_graph(Tree, ExportG) :-
-  tree_export_graph(Tree, ExportG, []).
-
-tree_export_graph(Tree, ExportG, Opts) :-
-  (   is_s_tree(Tree)
-  ->  tree_to_graph(Tree, G)
-  ;   is_l_tree(Tree)
-  ->  l_tree_to_graph(Tree, G)
-  ),
-  build_export_graph(G, ExportG, Opts).
-
-
-
-%! tree_viz(+Tree, ?File) is det.
-%! tree_viz(+Tree, ?File, +Opts) is det.
-% Stores the given tree term into a GraphViz file.
-%
-% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3.
-
-tree_viz(Tree, File) :-
-  tree_viz(Tree, File, []).
-
-tree_viz(Tree, File, Opts) :-
-  tree_export_graph(Tree, ExportG, Opts),
-  graph_viz(ExportG, File, Opts).
diff --git a/test/gv_attrs.log b/test/gv_attrs.log
deleted file mode 100644
index a9c6010..0000000
--- a/test/gv_attrs.log
+++ /dev/null
@@ -1,169 +0,0 @@
-assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')).
-assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')).
-assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')).
-assert(gv_attr('_background',[graph],[string],_,'','')).
-assert(gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only')).
-assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')).
-assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')).
-assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')).
-assert(gv_attr(bb,[graph],[rect],'','','write only')).
-assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')).
-assert(gv_attr(center,[graph],[bool],false,'','')).
-assert(gv_attr(charset,[graph],[string],'"UTF-8"','','')).
-assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')).
-assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')).
-assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')).
-assert(gv_attr(comment,[edge,graph,node],[string],'','','')).
-assert(gv_attr(compound,[graph],[bool],false,'','dot only')).
-assert(gv_attr(concentrate,[graph],[bool],false,'','')).
-assert(gv_attr(constraint,[edge],[bool],true,'','dot only')).
-assert(gv_attr(decorate,[edge],[bool],false,'','')).
-assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')).
-assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')).
-assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')).
-assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')).
-assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')).
-assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')).
-assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')).
-assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')).
-assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')).
-assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')).
-assert(gv_attr(fixedsize,[node],[bool,string],false,'','')).
-assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')).
-assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','')).
-assert(gv_attr(fontnames,[graph],[string],'','','svg only')).
-assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')).
-assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')).
-assert(gv_attr(forcelabels,[graph],[bool],true,'','')).
-assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')).
-assert(gv_attr(group,[node],[string],'','','dot only')).
-assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(head_lp,[edge],[point],'','','write only')).
-assert(gv_attr(headclip,[edge],[bool],true,'','')).
-assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(headlabel,[edge],[lblString],'','','')).
-assert(gv_attr(headport,[edge],[portPos],center,'','')).
-assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(height,[node],[double],'0.5','0.02','')).
-assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
-assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
-assert(gv_attr(image,[node],[string],'','','')).
-assert(gv_attr(imagepath,[graph],[string],'','','')).
-assert(gv_attr(imagescale,[node],[bool,string],false,'','')).
-assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')).
-assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','')).
-assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')).
-assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')).
-assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')).
-assert(gv_attr(labelfloat,[edge],[bool],false,'','')).
-assert(gv_attr(labelfontcolor,[edge],[color],black,'','')).
-assert(gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','')).
-assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')).
-assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(labeljust,[cluster,graph],[string],'"c"','','')).
-assert(gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','')).
-assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(landscape,[graph],[bool],false,'','')).
-assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')).
-assert(gv_attr(layerlistsep,[graph],[string],'","','','')).
-assert(gv_attr(layers,[graph],[layerList],'','','')).
-assert(gv_attr(layerselect,[graph],[layerRange],'','','')).
-assert(gv_attr(layersep,[graph],[string],'" :\\t"','','')).
-assert(gv_attr(layout,[graph],[string],'','','')).
-assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')).
-assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')).
-assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')).
-assert(gv_attr(lhead,[edge],[string],'','','dot only')).
-assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')).
-assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')).
-assert(gv_attr(ltail,[edge],[string],'','','dot only')).
-assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')).
-assert(gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','')).
-assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')).
-assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')).
-assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')).
-assert(gv_attr(minlen,[edge],[int],'1','0','dot only')).
-assert(gv_attr(mode,[graph],[string],major,'','neato only')).
-assert(gv_attr(model,[graph],[string],shortpath,'','neato only')).
-assert(gv_attr(mosek,[graph],[bool],false,'','neato only')).
-assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')).
-assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')).
-assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')).
-assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')).
-assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')).
-assert(gv_attr(ordering,[graph,node],[string],'','','dot only')).
-assert(gv_attr(orientation,[node],[double],'0.0','360.0','')).
-assert(gv_attr(orientation,[graph],[string],'','','')).
-assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')).
-assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')).
-assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')).
-assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')).
-assert(gv_attr(pack,[graph],[bool,int],false,'','')).
-assert(gv_attr(packmode,[graph],[packMode],node,'','')).
-assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')).
-assert(gv_attr(page,[graph],[double,point],'','','')).
-assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')).
-assert(gv_attr(pencolor,[cluster],[color],black,'','')).
-assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')).
-assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')).
-assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')).
-assert(gv_attr(pos,[edge,node],[point,splineType],'','','')).
-assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')).
-assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')).
-assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')).
-assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')).
-assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')).
-assert(gv_attr(ratio,[graph],[double,string],'','','')).
-assert(gv_attr(rects,[node],[rect],'','','write only')).
-assert(gv_attr(regular,[node],[bool],false,'','')).
-assert(gv_attr(remincross,[graph],[bool],true,'','dot only')).
-assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')).
-assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')).
-assert(gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only')).
-assert(gv_attr(rotate,[graph],[int],'0','','')).
-assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')).
-assert(gv_attr(samehead,[edge],[string],'','','dot only')).
-assert(gv_attr(sametail,[edge],[string],'','','dot only')).
-assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')).
-assert(gv_attr(scale,[graph],[double,point],'','','not dot')).
-assert(gv_attr(searchsize,[graph],[int],'30','','dot only')).
-assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')).
-assert(gv_attr(shape,[node],[shape],ellipse,'','')).
-assert(gv_attr(shapefile,[node],[string],'','','')).
-assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')).
-assert(gv_attr(sides,[node],[int],'4','0','')).
-assert(gv_attr(size,[graph],[double,point],'','','')).
-assert(gv_attr(skew,[node],[double],'0.0','-100.0','')).
-assert(gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only')).
-assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')).
-assert(gv_attr(splines,[graph],[bool,string],'','','')).
-assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')).
-assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')).
-assert(gv_attr(stylesheet,[graph],[string],'','','svg only')).
-assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(tail_lp,[edge],[point],'','','write only')).
-assert(gv_attr(tailclip,[edge],[bool],true,'','')).
-assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(taillabel,[edge],[lblString],'','','')).
-assert(gv_attr(tailport,[edge],[portPos],center,'','')).
-assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')).
-assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')).
-assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')).
-assert(gv_attr(vertices,[node],[pointList],'','','write only')).
-assert(gv_attr(viewport,[graph],[viewPort],'','','')).
-assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')).
-assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')).
-assert(gv_attr(width,[node],[double],'0.75','0.01','')).
-assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')).
-assert(gv_attr(xlabel,[edge,node],[lblString],'','','')).
-assert(gv_attr(xlp,[edge,node],[point],'','','write only')).
-assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')).
diff --git a/test/test.pl b/test/test.pl
deleted file mode 100644
index 83dc023..0000000
--- a/test/test.pl
+++ /dev/null
@@ -1,15 +0,0 @@
-%/fca
-:- use_module(library(fca/fca_viz)).
-%/graph
-:- use_module(library(graph/build_export_graph)).
-%/gv
-:- use_module(library(gv/gv_attrs)).
-:- use_module(library(gv/gv_attr_type)).
-:- use_module(library(gv/gv_color)).
-:- use_module(library(gv/gv_dom)).
-:- use_module(library(gv/gv_file)).
-:- use_module(library(gv/gv_graph)).
-:- use_module(library(gv/gv_graph_comp)).
-:- use_module(library(gv/gv_html)).
-%/tree
-:- use_module(library(tree/tree_viz)).
 
```
 
<h2 id="26"> 26: 正在比较变动前 76ea35d 和变动后 2a2728b </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 9888973..68443ba 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -76,13 +76,13 @@ gv_compass_pt(sw) --> `sw`.
 gv_compass_pt(w) --> `w`.
 
 
-%! gv_edge_operator(+Directed:boolean)// .
+%! gv_edge_operator(+Directedness:boolean)// .
 % The binary edge operator between two vertices.
 % The operator that is used depends on whether the graph is directed or
 % undirected.
 %
-% @arg Directed Whether an edge is directed (operator `->`) or
-%               undirected (operator `--`).
+% @arg Directedness Whether an edge is directed (operator `->`) or
+%                   undirected (operator `--`).
 
 gv_edge_operator(false) --> !, `--`.
 gv_edge_operator(true) --> arrow(right, 2).
@@ -90,14 +90,14 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 %! gv_edge_statement(
 %!   +Indent:nonneg,
-%!   +Directed:boolean,
+%!   +Directedness:boolean,
 %!   +GraphAttributes:list(nvpair),
 %!   +EdgeTerm:compound
 %! )// is det.
 % A GraphViz statement describing an edge.
 %
 % @arg Indent The indentation level at which the edge statement is written.
-% @arg Directed Whether the graph is directed or not.
+% @arg Directedness Whether the graph is directed or not.
 % @arg GraphAttributes The attributes of the graph. Some of these attributes
 %      may be used in the edge statement (e.g., the colorscheme).
 % @arg EdgeTerm A compound term in the GIFormat, representing an edge.
@@ -106,11 +106,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 %      at the from and/or to location.
 % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
 
-gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
+gv_edge_statement(I, Directedness, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
   gv_node_id(FromId), ` `,
 
-  gv_edge_operator(Directed), ` `,
+  gv_edge_operator(Directedness), ` `,
 
   gv_node_id(ToId), ` `,
 
@@ -148,11 +148,11 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 %! gv_graph(+GraphTerm:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
-%   1. `directonality(+Directed:oneof([directed,undirected]))`
-%      A directed graph uses the keyword `digraph`.
-%      An undirected graph uses the keyword `graph`.
-%   2. `name(+GraphName:atom)`
-%   3. `strict(+StrictGraph:boolean)`
+%   * `directedness(+boolean)`
+%      Whether the graph is directed (`true`) or undirected (`false`).
+%      Default: `false`.
+%   * `name(+GraphName:atom)`
+%   * `strict(+StrictGraph:boolean)`
 %      This forbids the creation of self-arcs and multi-edges;
 %      they are ignored in the input file.
 %      Only in combinattion with directionality `directed`.
@@ -185,7 +185,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
     select_nvpair(strict=Strict, GAttrs1, GAttrs2, false),
-    select_nvpair(directed=Directed, GAttrs2, GAttrs3, true),
+    select_nvpair(directedness=Directedness, GAttrs2, GAttrs3, true),
     select_nvpair(name=GName, GAttrs3, GAttrs4, noname),
     add_default_nvpair(GAttrs4, overlap, false, GAttrs5),
     I = 0
@@ -195,24 +195,24 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), ` `,
+  gv_graph_type(Directedness), ` `,
   gv_id(GName), ` `,
   bracketed(
     curly,
-    gv_graph1(
+    gv_graph0(
       I,
       NewVTerms, SharedVAttrs, RankedVTerms,
       NewETerms, SharedEAttrs,
-      Directed, GAttrs5
+      Directedness, GAttrs5
     )
-  ),
+  ),                                                      
   newline.
 
-gv_graph1(
+gv_graph0(
   I,
   NewVTerms, SharedVAttrs, RankedVTerms,
   NewETerms, SharedEAttrs,
-  Directed, GAttrs
+  Directedness, GAttrs
 ) -->
   newline,
 
@@ -254,10 +254,10 @@ gv_graph1(
   },
 
   % The rank edges.
-  '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges),
+  '*'(gv_edge_statement(NewI, Directedness, GAttrs), RankEdges),
 
   % The non-rank edges.
-  '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms),
+  '*'(gv_edge_statement(NewI, Directedness, GAttrs), NewETerms),
 
   % Note that we do not include a newline here.
 
@@ -265,7 +265,7 @@ gv_graph1(
   indent(I).
 
 
-%! gv_graph_type(+Directed:boolean)// .
+%! gv_graph_type(+Directedness:boolean)// .
 % The type of graph that is represented.
 
 gv_graph_type(false) --> `graph`.
diff --git a/gv_file.pl b/gv_file.pl
index c780692..9eaf66b 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -1,12 +1,17 @@
 :- module(
   gv_file,
   [
+    file_to_gv/2, % +File:atom
+                  % +Options:list(nvpair)
+    file_to_gv/3, % +FromFile:atom
+                  % ?ToFile:atom
+                  % +Options:list(nvpair)
     gif_to_gv_file/3, % +GraphInterchangeFormat:compound
-                      % ?ToFile:atom
+                      % +ToFile:atom
+                      % +Options:list(nvpair)
+    gif_to_svg_dom/3, % +GraphInterchangeFormat:compound
+                      % -SvgDom:list(compound)
                       % +Options:list(nvpair)
-    graph_to_svg_dom/3, % +GraphInterchangeFormat:compound
-                        % -SvgDom:list(compound)
-                        % +Options:list(nvpair)
     open_dot/1 % +File:file
   ]
 ).
@@ -29,13 +34,10 @@ and GraphViz output files or SVG DOM structures.
 
 :- use_module(generics(codes_ext)).
 :- use_module(generics(db_ext)).
-:- use_module(generics(error_ext)).
-:- use_module(generics(trees)).
 :- use_module(os(file_ext)).
 :- use_module(os(run_ext)).
 :- use_module(os(safe_file)).
 :- use_module(svg(svg_file)).
-:- use_module(ugraph(ugraph_export)).
 
 :- use_module(plGraphViz(gv_dot)).
 
@@ -77,77 +79,56 @@ and GraphViz output files or SVG DOM structures.
 :- db_add_novel(user:prolog_file_type(xdot, graphviz_output)).
 :- db_add_novel(user:prolog_file_type(xdot, xdot)).
 
-:- predicate_options(graph_to_svg_dom/3, 3, [
-     pass_to(gif_to_gv_file/3, 3)
+:- predicate_options(codes_to_gv_file/3, 3, [
+     pass_to(file_to_gv/3, 3)
    ]).
-:- predicate_options(gif_to_gv_file/3, 3, [
-     pass_to(to_gv_file/3, 3)
+:- predicate_options(file_to_gv/2, 2, [
+     pass_to(file_to_gv/3, 3)
    ]).
-:- predicate_options(to_gv_file/3, 3, [
-     pass_to(convert_gv/3, 3)
-   ]).
-:- predicate_options(convert_gv/3, 3, [
+:- predicate_options(file_to_gv/3, 3, [
      method(+oneof([dot,sfdp])),
      to_file_type(+oneof([dot,jpeg,pdf,svg,xdot]))
    ]).
+:- predicate_options(gif_to_svg_dom/3, 3, [
+     pass_to(gif_to_gv_file/3, 3)
+   ]).
+:- predicate_options(gif_to_gv_file/3, 3, [
+     pass_to(codes_to_gv_file/3, 3)
+   ]).
 
 
 
-%! gif_to_gv_file(+Gif:compound, -ToFile:atom, +Options:list(nvpair)) is det.
-% Returns a file containing a GraphViz visualization of the given graph.
-%
-% The following options are supported:
-%   * =|method(+Method:oneof([dot,sfdp])|=
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
-%   * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|=
-%     The file type of the generated GraphViz file.
-%     Default: `pdf`.
-
-gif_to_gv_file(Gif, ToFile, Options):-
-  once(phrase(gv_graph(Gif), Codes)),
-  to_gv_file(Codes, ToFile, Options).
-
-
-%! graph_to_svg_dom(
-%!   +GraphInterchangeFormat:compound,
-%!   -SvgDom:list(compound),
+%! codes_to_gv_file(
+%!   +Codes:list(code),
+%!   +ToFile:atom,
 %!   +Options:list(nvpair)
 %! ) is det.
 
-graph_to_svg_dom(Gif, SvgDom, Options1):-
-  % Make sure the file type of the output file is SvgDom.
-  merge_options([to_file_type=svg], Options1, Options2),
-  gif_to_gv_file(Gif, ToFile, Options2),
-  file_to_svg(ToFile, SvgDom),
-  safe_delete_file(ToFile).
-
-
-%! open_dot(+File:atom) is det.
-% Opens the given DOT file.
-%
-% @tbd Test support on Windows.
-% @tbd Test support on OS-X.
-
-open_dot(File):-
-  once(find_program_by_file_type(dot, Program)),
-  run_program(Program, [File]).
+codes_to_gv_file(Codes, ToFile, Options):-
+  access_file(ToFile, write),
+  absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]),
+  setup_call_cleanup(
+    open(TmpFile, write, Write, [encoding(utf8)]),
+    put_codes(Write, Codes),
+    close(Write)
+  ),
+  file_to_gv(TmpFile, ToFile, Options),
+  delete_file(TmpFile).
 
 
+%! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det.
 
-% SUPPORT PREDICATES %
+file_to_gv(FromFile, Options):-
+  file_to_gv(FromFile, _, Options).
 
-%! convert_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det.
+%! file_to_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det.
 % Converts a GraphViz DOT file to an image file, using a specific
 % visualization method.
 
-convert_gv(FromFile, ToFile, Options):-
+file_to_gv(FromFile, ToFile, Options):-
   option(to_file_type(dot), Options), !,
   rename_file(FromFile, ToFile).
-convert_gv(FromFile, ToFile, Options):-
-  % The input file must be readable.
-  access_file(FromFile, read),
-
+file_to_gv(FromFile, ToFile, Options):-
   % The method option.
   option(method(Method), Options, dot),
   must_be(oneof([dot,sfdp]), Method),
@@ -161,11 +142,8 @@ convert_gv(FromFile, ToFile, Options):-
   (
     var(ToFile)
   ->
-    absolute_file_name(
-      data(export),
-      ToFile,
-      [access(write),file_type(ToFileType)]
-    )
+    user:prolog_file_type(ToExtension, ToFileType),
+    file_alternative(FromFile, _, _, ToExtension, ToFile)
   ;
     is_absolute_file_name(ToFile),
     % The given output file must match a certain file extension.
@@ -186,26 +164,43 @@ convert_gv(FromFile, ToFile, Options):-
   exit_code_handler('GraphViz', ShellStatus).
 
 
-%! to_gv_file(+Codes:list(code), ?ToFile:atom, +Options:list(nvpair)) is det.
+%! gif_to_gv_file(+Gif:compound, +ToFile:atom, +Options:list(nvpair)) is det.
+% Returns a file containing a GraphViz visualization of the given graph.
+%
+% The following options are supported:
+%   * =|method(+Method:oneof([dot,sfdp])|=
+%     The algorithm used by GraphViz for positioning the tree nodes.
+%     Either =dot= (default) or =sfdp=.
+%   * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|=
+%     The file type of the generated GraphViz file.
+%     Default: `pdf`.
 
-to_gv_file(Codes, ToFile, Options):-
-  absolute_file_name(
-    data(tmp),
-    FromFile,
-    [access(write),file_type(graphviz)]
-  ),
-  setup_call_cleanup(
-    open(FromFile, write, Out, [encoding(utf8),type(test)]),
-    put_codes(Out, Codes),
-    close(Out)
-  ),
-  convert_gv(FromFile, ToFile, Options),
+gif_to_gv_file(Gif, ToFile, Options):-
+  once(phrase(gv_graph(Gif), Codes)),
+  codes_to_gv_file(Codes, ToFile, Options).
 
-  %%%%% DEB: Store DOT file.
-  %%%%ignore((
-  %%%%  file_type_alternative(ToFile, graphviz, DOT_File),
-  %%%%  safe_copy_file(FromFile, DOT_File)
-  %%%%)),
 
-  safe_delete_file(FromFile).
+%! gif_to_svg_dom(
+%!   +GraphInterchangeFormat:compound,
+%!   -SvgDom:list(compound),
+%!   +Options:list(nvpair)
+%! ) is det.
+
+gif_to_svg_dom(Gif, SvgDom, Options1):-
+  % Make sure the file type of the output file is SvgDom.
+  merge_options([to_file_type=svg], Options1, Options2),
+  gif_to_gv_file(Gif, ToFile, Options2),
+  file_to_svg(ToFile, SvgDom),
+  safe_delete_file(ToFile).
+
+
+%! open_dot(+File:atom) is det.
+% Opens the given DOT file.
+%
+% @tbd Test support on Windows.
+% @tbd Test support on OS-X.
+
+open_dot(File):-
+  once(find_program_by_file_type(dot, Program)),
+  run_program(Program, [File]).
 
 
```
 
<h2 id="27"> 27: 正在比较变动前 2a2728b 和变动后 7f9fc82 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_tree.pl b/gv_tree.pl
index afeb8f6..7a181b5 100644
--- a/gv_tree.pl
+++ b/gv_tree.pl
@@ -30,7 +30,7 @@ Export trees to GraphViz.
 %! ) is det.
 % Stores the given tree term into a GraphViz file.
 %
-% Options are passed on to create_gif/3 and gif_to_gv_file/3.
+% Options are passed on to build_gif/3 and gif_to_gv_file/3.
 
 tree_to_gv_file(Tree, ToFile, Options):-
   tree_to_gif(Tree, Gif, Options),
@@ -39,5 +39,5 @@ tree_to_gv_file(Tree, ToFile, Options):-
 
 tree_to_gif(H-T, Gif, Options):-
   tree_to_vertices_edges(Tree, Vs, Es),
-  create_gif(Vs, Es, Gif, Options).
+  build_gif(Vs, Es, Gif, Options).
 
 
```
 
<h2 id="28"> 28: 正在比较变动前 7f9fc82 和变动后 5baddb5 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 68443ba..4f7f341 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -76,12 +76,12 @@ gv_compass_pt(sw) --> `sw`.
 gv_compass_pt(w) --> `w`.
 
 
-%! gv_edge_operator(+Directedness:boolean)// .
+%! gv_edge_operator(+Directed:boolean)// .
 % The binary edge operator between two vertices.
 % The operator that is used depends on whether the graph is directed or
 % undirected.
 %
-% @arg Directedness Whether an edge is directed (operator `->`) or
+% @arg Directed Whether an edge is directed (operator `->`) or
 %                   undirected (operator `--`).
 
 gv_edge_operator(false) --> !, `--`.
@@ -90,14 +90,14 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 %! gv_edge_statement(
 %!   +Indent:nonneg,
-%!   +Directedness:boolean,
+%!   +Directed:boolean,
 %!   +GraphAttributes:list(nvpair),
 %!   +EdgeTerm:compound
 %! )// is det.
 % A GraphViz statement describing an edge.
 %
 % @arg Indent The indentation level at which the edge statement is written.
-% @arg Directedness Whether the graph is directed or not.
+% @arg Directed Whether the graph is directed or not.
 % @arg GraphAttributes The attributes of the graph. Some of these attributes
 %      may be used in the edge statement (e.g., the colorscheme).
 % @arg EdgeTerm A compound term in the GIFormat, representing an edge.
@@ -106,11 +106,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 %      at the from and/or to location.
 % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
 
-gv_edge_statement(I, Directedness, GAttrs, edge(FromId,ToId,EAttrs)) -->
+gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
   gv_node_id(FromId), ` `,
 
-  gv_edge_operator(Directedness), ` `,
+  gv_edge_operator(Directed), ` `,
 
   gv_node_id(ToId), ` `,
 
@@ -148,7 +148,7 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 %! gv_graph(+GraphTerm:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
-%   * `directedness(+boolean)`
+%   * `directed(+boolean)`
 %      Whether the graph is directed (`true`) or undirected (`false`).
 %      Default: `false`.
 %   * `name(+GraphName:atom)`
@@ -185,7 +185,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
     select_nvpair(strict=Strict, GAttrs1, GAttrs2, false),
-    select_nvpair(directedness=Directedness, GAttrs2, GAttrs3, true),
+    select_nvpair(directed=Directed, GAttrs2, GAttrs3, true),
     select_nvpair(name=GName, GAttrs3, GAttrs4, noname),
     add_default_nvpair(GAttrs4, overlap, false, GAttrs5),
     I = 0
@@ -195,7 +195,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directedness), ` `,
+  gv_graph_type(Directed), ` `,
   gv_id(GName), ` `,
   bracketed(
     curly,
@@ -203,16 +203,16 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
       I,
       NewVTerms, SharedVAttrs, RankedVTerms,
       NewETerms, SharedEAttrs,
-      Directedness, GAttrs5
+      Directed, GAttrs5
     )
-  ),                                                      
+  ),
   newline.
 
 gv_graph0(
   I,
   NewVTerms, SharedVAttrs, RankedVTerms,
   NewETerms, SharedEAttrs,
-  Directedness, GAttrs
+  Directed, GAttrs
 ) -->
   newline,
 
@@ -254,10 +254,10 @@ gv_graph0(
   },
 
   % The rank edges.
-  '*'(gv_edge_statement(NewI, Directedness, GAttrs), RankEdges),
+  '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges),
 
   % The non-rank edges.
-  '*'(gv_edge_statement(NewI, Directedness, GAttrs), NewETerms),
+  '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms),
 
   % Note that we do not include a newline here.
 
@@ -265,7 +265,7 @@ gv_graph0(
   indent(I).
 
 
-%! gv_graph_type(+Directedness:boolean)// .
+%! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
 gv_graph_type(false) --> `graph`.
diff --git a/gv_file.pl b/gv_file.pl
index 9eaf66b..0482196 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -112,8 +112,7 @@ codes_to_gv_file(Codes, ToFile, Options):-
     put_codes(Write, Codes),
     close(Write)
   ),
-  file_to_gv(TmpFile, ToFile, Options),
-  delete_file(TmpFile).
+  file_to_gv(TmpFile, ToFile, Options).
 
 
 %! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det.
 
```
 
<h2 id="29"> 29: 正在比较变动前 5baddb5 和变动后 95bfe7f </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 4f7f341..35bc3f9 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -197,6 +197,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   gv_strict(Strict),
   gv_graph_type(Directed), ` `,
   gv_id(GName), ` `,
+
+  % The body of the DOT file appears between curly braces.
   bracketed(
     curly,
     gv_graph0(
@@ -228,9 +230,21 @@ gv_graph0(
   % Attributes that are the same for all edges.
   gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs),
 
-  % Only add a newline if some content was written in the previous three
-  % lines.
-  ({(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])} -> `` ; newline),
+  % Only add a newline if some content was already written
+  % and some content is about to be written.
+  (
+    {
+      % Succeeds if no content was written.
+      (GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])
+    ;
+      % Succeeds if no content is about to be written.
+      (NewVTerms == [], RankedVTerms == [])
+    }
+  ->
+    ``
+  ;
+    newline
+  ),
 
   % The list of GraphViz nodes.
   '*'(gv_node_statement(NewI, GAttrs), NewVTerms),
diff --git a/gv_file.pl b/gv_file.pl
index 0482196..bba87f9 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -7,7 +7,7 @@
                   % ?ToFile:atom
                   % +Options:list(nvpair)
     gif_to_gv_file/3, % +GraphInterchangeFormat:compound
-                      % +ToFile:atom
+                      % ?ToFile:atom
                       % +Options:list(nvpair)
     gif_to_svg_dom/3, % +GraphInterchangeFormat:compound
                       % -SvgDom:list(compound)
@@ -25,7 +25,7 @@ Also converts between GraphViz DOT formatted files
 and GraphViz output files or SVG DOM structures.
 
 @author Wouter Beek
-@version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07
+@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08
 */
 
 :- use_module(library(option)).
@@ -36,7 +36,6 @@ and GraphViz output files or SVG DOM structures.
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
 :- use_module(os(run_ext)).
-:- use_module(os(safe_file)).
 :- use_module(svg(svg_file)).
 
 :- use_module(plGraphViz(gv_dot)).
@@ -100,12 +99,11 @@ and GraphViz output files or SVG DOM structures.
 
 %! codes_to_gv_file(
 %!   +Codes:list(code),
-%!   +ToFile:atom,
+%!   ?ToFile:atom,
 %!   +Options:list(nvpair)
 %! ) is det.
 
 codes_to_gv_file(Codes, ToFile, Options):-
-  access_file(ToFile, write),
   absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]),
   setup_call_cleanup(
     open(TmpFile, write, Write, [encoding(utf8)]),
@@ -163,7 +161,7 @@ file_to_gv(FromFile, ToFile, Options):-
   exit_code_handler('GraphViz', ShellStatus).
 
 
-%! gif_to_gv_file(+Gif:compound, +ToFile:atom, +Options:list(nvpair)) is det.
+%! gif_to_gv_file(+Gif:compound, ?ToFile:atom, +Options:list(nvpair)) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
@@ -190,7 +188,7 @@ gif_to_svg_dom(Gif, SvgDom, Options1):-
   merge_options([to_file_type=svg], Options1, Options2),
   gif_to_gv_file(Gif, ToFile, Options2),
   file_to_svg(ToFile, SvgDom),
-  safe_delete_file(ToFile).
+  delete_file(ToFile).
 
 
 %! open_dot(+File:atom) is det.
 
```
 
<h2 id="30"> 30: 正在比较变动前 95bfe7f 和变动后 f1322fa </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 5b34b01..d7d21ad 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 5b34b01ab0cc82a56e6fd90fc26e75da22f5a0fe
+Subproject commit d7d21ad4d6d7cec98d8b0122f5303e691998f512
diff --git a/plHtml b/plHtml
index 08480c4..18e657b 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 08480c40acaee5f70bfb21e3c641bef1e7d258bd
+Subproject commit 18e657b22a84d5e98a317ddec58314964ff68bcd
 
```
 
<h2 id="31"> 31: 正在比较变动前 f1322fa 和变动后 474bea8 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/index.pl b/index.pl
deleted file mode 100644
index 7461d13..0000000
--- a/index.pl
+++ /dev/null
@@ -1,2 +0,0 @@
-% Index of project plGraphViz (empty).
-
 
```
 
<h2 id="32"> 32: 正在比较变动前 474bea8 和变动后 262cb2a </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_tree.pl b/gv_tree.pl
deleted file mode 100644
index 7a181b5..0000000
--- a/gv_tree.pl
+++ /dev/null
@@ -1,43 +0,0 @@
-:- module(
-  gv_tree,
-  [
-    tree_to_gv_file/3 % +Tree:compound
-                      % ?ToFile:atom
-                      % +Options:list(nvpair)
-  ]
-).
-
-/** <module> GraphViz tree
-
-Export trees to GraphViz.
-
-@author Wouter Beek
-@version 2014/06-2014/07
-*/
-
-:- use_module(library(aggregate)).
-
-:- use_module(generics(trees)).
-
-:- use_module(plGraphViz(gv_file)).
-:- use_module(plGraphViz(gv_gif)).
-
-
-%! tree_to_gv_file(
-%!   +Tree:compound,
-%!   ?ToFile:atom,
-%!   +Options:list(nvpair)
-%! ) is det.
-% Stores the given tree term into a GraphViz file.
-%
-% Options are passed on to build_gif/3 and gif_to_gv_file/3.
-
-tree_to_gv_file(Tree, ToFile, Options):-
-  tree_to_gif(Tree, Gif, Options),
-  gif_to_gv_file(Gif, ToFile, Options).
-
-
-tree_to_gif(H-T, Gif, Options):-
-  tree_to_vertices_edges(Tree, Vs, Es),
-  build_gif(Vs, Es, Gif, Options).
-
 
```
 
<h2 id="33"> 33: 正在比较变动前 262cb2a 和变动后 e7e6033 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 7a64c82..3c7863d 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -49,9 +49,9 @@
 @version 2014/06
 */
 
-:- use_module(dcg(dcg_abnf)).
-:- use_module(dcg(dcg_cardinal)).
-:- use_module(dcg(dcg_content)).
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_cardinal)).
+:- use_module(plDcg(dcg_content)).
 
 :- use_module(plGraphViz(gv_html)).
 
@@ -97,7 +97,7 @@ gv_attr_type(viewPort).
 % An *addDouble* is represented by a Prolog float.
 
 addDouble(Float) -->
-  '?'(`+`),
+  '?'(`+`, []),
   double(Float).
 
 
@@ -106,7 +106,7 @@ addDouble(Float) -->
 % `point(X:float,Y:float,InputOnly:boolean)`.
 
 addPoint(Point) -->
-  '?'(`+`),
+  '?'(`+`, []),
   point(Point).
 
 
@@ -184,7 +184,7 @@ double(Double1) -->
 
 doubleList([H|T]) -->
   double(H),
-  '*'(doubleList1, T).
+  '*'(doubleList1, T, []).
 
 doubleList1(Float) -->
   `:`,
@@ -255,7 +255,7 @@ input_only(true) --> `!`.
 
 
 pointList(Points) -->
-  '*'(point, Points).
+  '*'(point, Points, []).
 
 
 % @tbd portPos
diff --git a/gv_attrs.pl b/gv_attrs.pl
index dd0145a..faf496c 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -17,11 +17,12 @@
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(dcg(dcg_content)).
-:- use_module(dcg(dcg_generic)).
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
 
+:- use_module(plDcg(dcg_content)).
+:- use_module(plDcg(dcg_generic)).
+
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
diff --git a/gv_color.pl b/gv_color.pl
index 19d6e05..14026ee 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -21,16 +21,19 @@
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(dcg(dcg_abnf)).
-:- use_module(dcg(dcg_cardinal)).
-:- use_module(dcg(dcg_content)).
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
-:- use_module(sparql(sparql_char)).
+
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_cardinal)).
+:- use_module(plDcg(dcg_content)).
+:- use_module(plDcg_rfc(rfc2616_basic)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
+:- use_module(plSparql_parse(sparql_char)).
+
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
 %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
@@ -49,12 +52,12 @@
 
 color(rgb(Red,Green,Blue)) --> !,
   `#`,
-  '#'(3, hex_color, [Red,Green,Blue]).
+  '#'(3, hex_color, [Red,Green,Blue], []).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
   `#`,
-  '#'(4, hex_color, [Red,Green,Blue,Alpha]).
+  '#'(4, hex_color, [Red,Green,Blue,Alpha], []).
 color(hsv(Hue,Saturation,Value)) --> !,
-  '#'(3, hsv_color, [Hue,Saturation,Value]).
+  '#'(3, hsv_color, [Hue,Saturation,Value], []).
 color(Name) -->
   {gv_color(_, Name)},
   atom(Name).
@@ -72,11 +75,11 @@ hsv_color(D, Head, Tail):-
 %! colorList(+Pairs:list(pair(compound,float)))// .
 
 colorList(Pairs) -->
-  '+'(wc, Pairs).
+  '+'(wc, Pairs, []).
 
 wc(Color-Float) -->
   color(Color),
-  '?'(wc_weight(Float)).
+  '?'(wc_weight(Float), []).
 
 wc_weight(Float) -->
   `;`,
diff --git a/gv_dot.pl b/gv_dot.pl
index 35bc3f9..accd5bd 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -22,12 +22,11 @@ In GraphViz vertices are called 'nodes'.
 :- use_module(library(lists)).
 :- use_module(library(ordsets)).
 
-:- use_module(dcg(dcg_abnf)).
-:- use_module(dcg(dcg_ascii)).
-:- use_module(dcg(dcg_content)).
-:- use_module(dcg(dcg_generic)).
-:- use_module(dcg(dcg_meta)).
-:- use_module(dcg(dcg_os)).
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_content)).
+:- use_module(plDcg(dcg_generic)).
+:- use_module(plDcg(dcg_meta)).
 
 :- use_module(plGraphViz(gv_attrs)).
 :- use_module(plGraphViz(gv_html)).
@@ -56,7 +55,7 @@ gv_attribute(Name=Val) -->
 % Attributes occur between square brackets.
 gv_attribute_list(Context, _, Attrs1) -->
   {maplist(gv_attr(Context), Attrs1, Attrs2)},
-  bracketed(square, '*'(gv_attribute, Attrs2)).
+  bracketed(square, '*'(gv_attribute, Attrs2, [])).
 
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
@@ -117,7 +116,7 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
   gv_attribute_list(edge, GAttrs, EAttrs),
-  newline.
+  line_feed.
 
 
 %! gv_generic_attributes_statement(
@@ -142,7 +141,7 @@ gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
   indent(I),
   gv_kind(Kind), ` `,
-  gv_attribute_list(Kind, GraphAttrs, KindAttrs), newline.
+  gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
 
 
 %! gv_graph(+GraphTerm:compound)//
@@ -208,7 +207,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
       Directed, GAttrs5
     )
   ),
-  newline.
+  line_feed.
 
 gv_graph0(
   I,
@@ -216,7 +215,7 @@ gv_graph0(
   NewETerms, SharedEAttrs,
   Directed, GAttrs
 ) -->
-  newline,
+  line_feed,
 
   % The following lines are indented.
   {NewI is I + 1},
@@ -230,7 +229,7 @@ gv_graph0(
   % Attributes that are the same for all edges.
   gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs),
 
-  % Only add a newline if some content was already written
+  % Only add a line_feed if some content was already written
   % and some content is about to be written.
   (
     {
@@ -243,16 +242,16 @@ gv_graph0(
   ->
     ``
   ;
-    newline
+    line_feed
   ),
 
   % The list of GraphViz nodes.
-  '*'(gv_node_statement(NewI, GAttrs), NewVTerms),
-  ({NewVTerms == []} -> `` ; newline),
+  '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
+  ({NewVTerms == []} -> `` ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
-  '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms),
-  ({RankedVTerms == []} -> `` ; newline),
+  '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
+  ({RankedVTerms == []} -> `` ; line_feed),
 
   {
     findall(
@@ -268,12 +267,12 @@ gv_graph0(
   },
 
   % The rank edges.
-  '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges),
+  '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges, []),
 
   % The non-rank edges.
-  '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms),
+  '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms, []),
 
-  % Note that we do not include a newline here.
+  % Note that we do not include a line_feed here.
 
   % We want to indent the closing curly brace.
   indent(I).
@@ -394,15 +393,15 @@ gv_node_id(Id) -->
 gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
   indent(I),
   gv_node_id(Id), ` `,
-  gv_attribute_list(node, GraphAttrs, VAttrs), newline.
+  gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
 
 
 gv_port -->
   gv_port_location,
-  '?'(gv_port_angle).
+  '?'(gv_port_angle, []).
 gv_port -->
   gv_port_angle,
-  '?'(gv_port_location).
+  '?'(gv_port_location, []).
 gv_port -->
   `:`,
   gv_compass_pt(_).
@@ -452,18 +451,22 @@ gv_ranked_node_collection(
 ) -->
   indent(I),
   bracketed(curly, (
-    newline,
+    line_feed,
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), `;`, newline,
-
-    '*'(gv_node_statement(NewI, GraphAttrs), [Rank_V_Term|Content_V_Terms]),
-
+    indent(NewI), gv_attribute(rank=same), `;`, line_feed,
+
+    '*'(
+      gv_node_statement(NewI, GraphAttrs),
+      [Rank_V_Term|Content_V_Terms],
+      []
+    ),
+    
     % We want to indent the closing curly brace.
     indent(I)
   )),
-  newline.
+  line_feed.
 
 
 %! gv_strict(+Strict:boolean)// is det.
diff --git a/gv_html.pl b/gv_html.pl
index b8d3190..3f0b08b 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -11,7 +11,7 @@
 @version 2013/07, 2013/09, 2014/03-2014/06
 */
 
-:- use_module(dcg(dcg_content)).
+:- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
diff --git a/gv_numeral.pl b/gv_numeral.pl
index 9b82fc0..7870eb1 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -11,10 +11,11 @@
 @version 2014/05-2014/06
 */
 
-:- use_module(dcg(dcg_abnf)).
-:- use_module(dcg(dcg_cardinal)).
 :- use_module(math(math_ext)).
 
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_cardinal)).
+
 
 
 %! gv_numeral(?Value:number)// .
@@ -48,7 +49,7 @@ gv_numeral_abs(N) -->
     integer(N2)
   ;
     integer(N1),
-    '?'((`.`, 'integer?'(N2)))
+    '?'((`.`, 'integer?'(N2)), [])
   ).
 gv_numeral_abs(N) -->
   {var(N)},
 
```
 
<h2 id="34"> 34: 正在比较变动前 e7e6033 和变动后 e17bf44 </h2>
[back to content](#compare)
 
``` diff
 
 
```
 
<h2 id="35"> 35: 正在比较变动前 e17bf44 和变动后 6596aa1 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index bba87f9..c6d2933 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -30,7 +30,6 @@ and GraphViz output files or SVG DOM structures.
 
 :- use_module(library(option)).
 :- use_module(library(process)).
-:- use_module(library(predicate_options)). % Declarations.
 
 :- use_module(generics(codes_ext)).
 :- use_module(generics(db_ext)).
 
```
 
<h2 id="36"> 36: 正在比较变动前 6596aa1 和变动后 87e8982 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index d7d21ad..b1d2484 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit d7d21ad4d6d7cec98d8b0122f5303e691998f512
+Subproject commit b1d2484486ad4876aecc1bf70b2963b12efca341
diff --git a/plHtml b/plHtml
index 18e657b..24fff7b 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 18e657b22a84d5e98a317ddec58314964ff68bcd
+Subproject commit 24fff7bcf90b6bc4fbf317d504be899dc1b869cb
 
```
 
<h2 id="37"> 37: 正在比较变动前 87e8982 和变动后 cb6aada </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index faf496c..1692915 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -21,7 +21,7 @@
 :- use_module(os(file_ext)).
 
 :- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generic)).
+:- use_module(plDcg(dcg_generics)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
diff --git a/gv_dot.pl b/gv_dot.pl
index accd5bd..5f33e5c 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -25,7 +25,7 @@ In GraphViz vertices are called 'nodes'.
 :- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generic)).
+:- use_module(plDcg(dcg_generics)).
 :- use_module(plDcg(dcg_meta)).
 
 :- use_module(plGraphViz(gv_attrs)).
 
```
 
<h2 id="38"> 38: 正在比较变动前 cb6aada 和变动后 7c8125b </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_color.pl b/gv_color.pl
index 14026ee..c5fccd4 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -13,7 +13,7 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2014/06
+@version 2014/06, 2014/10
 */
 
 :- use_module(library(apply)).
@@ -32,8 +32,6 @@
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
-:- use_module(plSparql_parse(sparql_char)).
-
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
 %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
diff --git a/gv_file.pl b/gv_file.pl
index c6d2933..5253f39 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -135,15 +135,12 @@ file_to_gv(FromFile, ToFile, Options):-
   prolog_file_type(ToExtension, graphviz_output), !,
 
   % The output file is either given or created.
-  (
-    var(ToFile)
-  ->
-    user:prolog_file_type(ToExtension, ToFileType),
-    file_alternative(FromFile, _, _, ToExtension, ToFile)
-  ;
-    is_absolute_file_name(ToFile),
-    % The given output file must match a certain file extension.
-    file_name_extension(_, ToExtension, ToFile)
+  (   var(ToFile)
+  ->  user:prolog_file_type(ToExtension, ToFileType),
+      file_alternative(FromFile, _, _, ToExtension, ToFile)
+  ;   is_absolute_file_name(ToFile),
+      % The given output file must match a certain file extension.
+      file_name_extension(_, ToExtension, ToFile)
   ),
   % Now that we have the output file we can prevent the
   % file type / file extension translation predicates from bakctracking.
@@ -152,7 +149,8 @@ file_to_gv(FromFile, ToFile, Options):-
   % Run the GraphViz conversion command in the shell.
   format(atom(OutputType), '-T~w', [ToExtension]),
   process_create(
-    path(Method),
+    %%%%path(Method),
+    'C:\\Program Files (x86)\\Graphviz2.38\\bin\\dot.exe',
     [OutputType,FromFile,'-o',ToFile],
     [process(PID)]
   ),
 
```
 
<h2 id="39"> 39: 正在比较变动前 7c8125b 和变动后 6a38f95 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 5253f39..00c9eb0 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -149,8 +149,9 @@ file_to_gv(FromFile, ToFile, Options):-
   % Run the GraphViz conversion command in the shell.
   format(atom(OutputType), '-T~w', [ToExtension]),
   process_create(
-    %%%%path(Method),
-    'C:\\Program Files (x86)\\Graphviz2.38\\bin\\dot.exe',
+    path(Method),
+    % @tbd Windows hack:
+    %%%%'C:\\Program Files (x86)\\Graphviz2.38\\bin\\dot.exe',
     [OutputType,FromFile,'-o',ToFile],
     [process(PID)]
   ),
 
```
 
<h2 id="40"> 40: 正在比较变动前 6a38f95 和变动后 ebb86cd </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index b25c15b..7193a38 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1 +1,4 @@
 *~
+*#
+*.db
+data/*
diff --git a/.gitmodules b/.gitmodules
index a63cbff..844b1bd 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,3 +4,6 @@
 [submodule "plHtml"]
 	path = plHtml
 	url = https://github.com/wouterbeek/plHtml.git
+[submodule "plDcg"]
+	path = plDcg
+	url = https://github.com/wouterbeek/plDcg.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index b1d2484..15bbbbf 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit b1d2484486ad4876aecc1bf70b2963b12efca341
+Subproject commit 15bbbbf25471abe856afbf92a04c5b3ce76b0217
diff --git a/debug.pl b/debug.pl
new file mode 100644
index 0000000..099cb84
--- /dev/null
+++ b/debug.pl
@@ -0,0 +1,7 @@
+% Loads debug tools for the plGraphViz library.
+
+:- [load].
+
+:- use_module(debug_project).
+:- debug_all_files.
+
diff --git a/debug_project.pl b/debug_project.pl
new file mode 100644
index 0000000..4eb2785
--- /dev/null
+++ b/debug_project.pl
@@ -0,0 +1,55 @@
+:- module(
+  debug_project,
+  [
+    debug_all_files/0
+  ]
+).
+
+/** <module> Debug project
+
+Generic code for debugging a project:
+  * Load all subdirectories and Prolog files contained in those directories.
+
+@author Wouter Beek
+@version 2014/10/31
+*/
+
+:- use_module(library(ansi_term)).
+:- use_module(library(apply)).
+
+:- use_module(os(dir_ext)).
+
+% Avoid errors when using gtrace/0 in threads.
+:- initialization(guitracer).
+
+
+
+debug_all_files:-
+  absolute_file_name(project(.), Dir, [access(read),file_type(directory)]),
+  directory_files(
+    Dir,
+    Files1,
+    [
+      file_types([prolog]),
+      include_directories(false),
+      include_self(false),
+      recursive(true)
+    ]
+  ),
+  exclude(do_not_load, Files1, Files2),
+  maplist(use_module, Files2).
+
+do_not_load(File1):-
+  file_base_name(File1, File2),
+  file_name_extension(File3, pl, File2),
+  do_not_load0(File3).
+
+do_not_load0(dcg_ascii).
+do_not_load0(dcg_unicode).
+do_not_load0(debug).
+do_not_load0(debug_project).
+do_not_load0(index).
+do_not_load0(load).
+do_not_load0(load_project).
+do_not_load0(rfc2616_basic).
+do_not_load0(run).
diff --git a/load.pl b/load.pl
index 4b117d1..1681cd0 100644
--- a/load.pl
+++ b/load.pl
@@ -1,12 +1,13 @@
-% Load file for plGraphViz.
+% Load file for the plGraphViz library.
 
-:- dynamic(user:prolog/3).
-:- multifile(user:prolog/3).
-   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
+:- dynamic(user:project/3).
+:- multifile(user:project/3).
+   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.').
 
 :- use_module(load_project).
-:- load_project(plGraphViz, [
+:- load_project([
     plc-'Prolog-Library-Collection',
+    plDcg,
     plHtml
 ]).
 
diff --git a/load_project.pl b/load_project.pl
index 5599b5e..e2196b7 100644
--- a/load_project.pl
+++ b/load_project.pl
@@ -1,8 +1,7 @@
 :- module(
   load_project,
   [
-    load_project/2, % +Parent:atom
-                    % +ChildProjects:list(or([atom,pair(atom)]))
+    load_project/1, % +ChildProjects:list(or([atom,pair(atom)]))
     load_subproject/2, % +ParentFileSearchPath:atom
                        % +Child:or([atom,pair(atom)])
     set_data_subdirectory/1 % +ParentDirectory:atom
@@ -17,7 +16,7 @@ Generic code for loading a project:
   * Load the index of subprojects onto the file search path.
 
 @author Wouter Beek
-@version 2014/06/14
+@version 2014/08/20
 */
 
 :- use_module(library(ansi_term)). % Colorized terminal messages.
@@ -30,11 +29,11 @@ Generic code for loading a project:
 
 
 
-load_project(Parent, ChildProjects):-
-  parent_alias(Parent, ParentFsp),
+load_project(ChildProjects):-
+  parent_alias(ParentFsp),
 
   % Entry point.
-  source_file(load_project(_,_), ThisFile),
+  source_file(load_project(_), ThisFile),
   file_directory_name(ThisFile, ThisDir),
   assert(user:file_search_path(ParentFsp, ThisDir)),
   assert(user:file_search_path(project, ThisDir)),
@@ -92,11 +91,12 @@ load_project_index(Fsp):-
 load_project_index(_).
 
 
-%! parent_alias(+Parent:atom, -ParentFsp:atom) is det.
+%! parent_alias(-ParentFsp:atom) is det.
 
-parent_alias(Parent, ParentFsp):-
-  user:project(Parent, _, ParentFsp), !.
-parent_alias(Parent, Parent).
+parent_alias(ParentFsp):-
+  user:project(_, _, ParentFsp), !.
+parent_alias(ParentFsp):-
+  user:project(ParentFsp, _).
 
 
 %! set_data_subdirectory(+ParentDirectory:atom) is det.
@@ -108,6 +108,8 @@ set_data_subdirectory(ParentDir):-
 
 
 
+% Messages
+
 :- multifile(prolog:message//1).
 
 prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -->
diff --git a/plDcg b/plDcg
new file mode 160000
index 0000000..e074367
--- /dev/null
+++ b/plDcg
@@ -0,0 +1 @@
+Subproject commit e0743670465a92c083e6954c5cf6220222f088b6
diff --git a/plHtml b/plHtml
index 24fff7b..8ef47e0 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 24fff7bcf90b6bc4fbf317d504be899dc1b869cb
+Subproject commit 8ef47e09a24c637ac435abbe1d01b21237be4534
diff --git a/run.pl b/run.pl
new file mode 100644
index 0000000..8bba736
--- /dev/null
+++ b/run.pl
@@ -0,0 +1,9 @@
+% Standalone execution of the plGraphViz library.
+
+:- if(current_prolog_flag(argv, ['--debug'|_])).
+  :- ensure_loaded(debug).
+:- else.
+  :- set_prolog_flag(verbose, silent).
+  :- ensure_loaded(load).
+:- endif.
+
 
```
 
<h2 id="41"> 41: 正在比较变动前 ebb86cd 和变动后 1549e44 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 5f33e5c..bde2962 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +GraphTerm:compound
+    gv_graph//1 % +Gif:compound
   ]
 ).
 
@@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'.
 % We assume that the attribute has already been validated.
 
 gv_attribute(Name=Val) -->
-  gv_id(Name), `=`, gv_id(Val), `;`.
+  gv_id(Name), "=", gv_id(Val), ";".
 
 
 %! gv_attribute_list(
@@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -->
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
 % ~~~
 
-gv_compass_pt('_') --> `_`.
-gv_compass_pt(c) --> `c`.
-gv_compass_pt(e) --> `e`.
-gv_compass_pt(n) --> `n`.
-gv_compass_pt(ne) --> `ne`.
-gv_compass_pt(nw) --> `nw`.
-gv_compass_pt(s) --> `s`.
-gv_compass_pt(se) --> `se`.
-gv_compass_pt(sw) --> `sw`.
-gv_compass_pt(w) --> `w`.
+gv_compass_pt('_') --> "_".
+gv_compass_pt(c) --> "c".
+gv_compass_pt(e) --> "e".
+gv_compass_pt(n) --> "n".
+gv_compass_pt(ne) --> "ne".
+gv_compass_pt(nw) --> "nw".
+gv_compass_pt(s) --> "s".
+gv_compass_pt(se) --> "se".
+gv_compass_pt(sw) --> "sw".
+gv_compass_pt(w) --> "w".
 
 
 %! gv_edge_operator(+Directed:boolean)// .
@@ -83,7 +83,7 @@ gv_compass_pt(w) --> `w`.
 % @arg Directed Whether an edge is directed (operator `->`) or
 %                   undirected (operator `--`).
 
-gv_edge_operator(false) --> !, `--`.
+gv_edge_operator(false) --> !, "--".
 gv_edge_operator(true) --> arrow(right, 2).
 
 
@@ -107,11 +107,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
-  gv_node_id(FromId), ` `,
+  gv_node_id(FromId), " ",
 
-  gv_edge_operator(Directed), ` `,
+  gv_edge_operator(Directed), " ",
 
-  gv_node_id(ToId), ` `,
+  gv_node_id(ToId), " ",
 
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
@@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
   indent(I),
-  gv_kind(Kind), ` `,
+  gv_kind(Kind), " ",
   gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
 
 
-%! gv_graph(+GraphTerm:compound)//
+%! gv_graph(+Gif:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
@@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 % @tbd Assert attributes that are generic with respect to a subgraph.
 % @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
 
-gv_graph(graph(VTerms, ETerms, GAttrs)) -->
-  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
+gv_graph(graph(VTerms,ETerms,GAttrs)) -->
+  gv_graph(graph(VTerms,[],ETerms,GAttrs)).
 
-gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
+gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
   {
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
@@ -194,8 +194,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), ` `,
-  gv_id(GName), ` `,
+  gv_graph_type(Directed), " ",
+  gv_id(GName), " ",
 
   % The body of the DOT file appears between curly braces.
   bracketed(
@@ -240,18 +240,18 @@ gv_graph0(
       (NewVTerms == [], RankedVTerms == [])
     }
   ->
-    ``
+    ""
   ;
     line_feed
   ),
 
   % The list of GraphViz nodes.
   '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
-  ({NewVTerms == []} -> `` ; line_feed),
+  ({NewVTerms == []} -> "" ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
   '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
-  ({RankedVTerms == []} -> `` ; line_feed),
+  ({RankedVTerms == []} -> "" ; line_feed),
 
   {
     findall(
@@ -281,8 +281,8 @@ gv_graph0(
 %! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
-gv_graph_type(false) --> `graph`.
-gv_graph_type(true) --> `digraph`.
+gv_graph_type(false) --> "graph".
+gv_graph_type(true) --> "digraph".
 
 
 %! gv_id(?Atom:atom)// is det.
@@ -305,8 +305,9 @@ gv_graph_type(true) --> `digraph`.
 %      This requires an XML grammar!
 
 % HTML strings (variant 4).
-gv_id(Atom) -->
-  dcg_atom_codes(gv_html_like_label, Atom), !.
+gv_id(Content) -->
+  {compound(Content)}, !,
+  gv_html_like_label, Content).
 % Alpha-numeric strings (variant 1).
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -353,19 +354,19 @@ gv_keyword(Codes):-
 % GraphViz has reserved keywords that cannot be used as identifiers.
 % GraphViz keywords are case-insensitive.
 
-gv_keyword --> `digraph`.
-gv_keyword --> `edge`.
-gv_keyword --> `graph`.
-gv_keyword --> `node`.
-gv_keyword --> `strict`.
-gv_keyword --> `subgraph`.
+gv_keyword --> "digraph".
+gv_keyword --> "edge".
+gv_keyword --> "graph".
+gv_keyword --> "node".
+gv_keyword --> "strict".
+gv_keyword --> "subgraph".
 
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(edge) --> `edge`.
-gv_kind(graph) --> `graph`.
-gv_kind(node) --> `node`.
+gv_kind(edge) --> "edge".
+gv_kind(graph) --> "graph".
+gv_kind(node) --> "node".
 
 
 %! gv_node_id(+NodeId:atom)// .
@@ -392,7 +393,7 @@ gv_node_id(Id) -->
 
 gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
   indent(I),
-  gv_node_id(Id), ` `,
+  gv_node_id(Id), " ",
   gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
 
 
@@ -403,23 +404,23 @@ gv_port -->
   gv_port_angle,
   '?'(gv_port_location, []).
 gv_port -->
-  `:`,
+  ":",
   gv_compass_pt(_).
 
 gv_port_angle -->
-  `@`,
+  "@",
   gv_id(_).
 
 gv_port_location -->
-  `:`,
+  ":",
   gv_id(_).
 gv_port_location -->
-  `:`,
+  ":",
   bracketed(
     round,
     (
       gv_id(_),
-      `,`,
+      ",",
       gv_id(_)
     )
   ).
@@ -436,7 +437,7 @@ gv_quoted_string([92,34|T]) --> !,
   gv_quoted_string(T).
 % Add the backslash escape character.
 gv_quoted_string([34|T]) --> !,
-  `\\\"`,
+  "\\\"",
   gv_quoted_string(T).
 % All other characters are allowed without escaping.
 gv_quoted_string([H|T]) -->
@@ -455,7 +456,7 @@ gv_ranked_node_collection(
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), `;`, line_feed,
+    indent(NewI), gv_attribute(rank=same), ";", line_feed,
 
     '*'(
       gv_node_statement(NewI, GraphAttrs),
@@ -475,7 +476,7 @@ gv_ranked_node_collection(
 % This only applies to directed graphs.
 
 gv_strict(false) --> [].
-gv_strict(true) --> `strict `.
+gv_strict(true) --> "strict ".
 
 
 
diff --git a/gv_html.pl b/gv_html.pl
index 3f0b08b..a308ac7 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -1,60 +1,223 @@
 :- module(
   gv_html,
   [
-    gv_html_like_label//1 % +Codes:list(code)
+    gv_html_like_label//1 % +Content:compound
   ]
 ).
 
-/** <module> GraphViz HTML
+/** <module> GraphViz: HTML-like labels
+
+Grammar taken from the GraphViz Web site:
+
+~~~{.txt}
+label 	: 	text
+	| 	table
+text 	: 	textitem
+	| 	text textitem
+textitem 	: 	string
+	| 	<BR/>
+	| 	<FONT> text </FONT>
+	| 	<I> text </I>
+	| 	<B> text </B>
+	| 	<U> text </U>
+	| 	<O> text </O>
+	| 	<SUB> text </SUB>
+	| 	<SUP> text </SUP>
+	| 	<S> text </S>
+table 	: 	[ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
+rows 	: 	row
+	| 	rows row
+	| 	rows <HR/> row
+row 	: 	<TR> cells </TR>
+cells 	: 	cell
+	| 	cells cell
+	| 	cells <VR/> cell
+cell 	: 	<TD> label </TD>
+	| 	<TD> <IMG/> </TD>
+~~~
 
 @author Wouter Beek
-@version 2013/07, 2013/09, 2014/03-2014/06
+@see http://www.graphviz.org/content/node-shapes#html
+@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
 */
 
+:- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
 
 
-%! gv_html_label(+Codes:list(code))// .
+%! gv_html_like_label(?Content:compound)// .
+
+gv_html_like_label(Content) -->
+  bracketed(angular, label(Content)).
+
+
+%! cell(?Contents:compound)// .
+% Supported attributes for TD:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT|TEXT"
+% BALIGN="CENTER|LEFT|RIGHT"
+% BGCOLOR="color"
+% BORDER="value"
+% CELLPADDING="value"
+% CELLSPACING="value"
+% COLOR="color"
+% COLSPAN="value"
+% FIXEDSIZE="FALSE|TRUE"
+% GRADIENTANGLE="value"
+% HEIGHT="value"
+% HREF="value"
+% ID="value"
+% PORT="portName"
+% ROWSPAN="value"
+% SIDES="value"
+% STYLE="value"
+% TARGET="value"
+% TITLE="value"
+% TOOLTIP="value"
+% VALIGN="MIDDLE|BOTTOM|TOP"
+% WIDTH="value"
+% ~~~
 %
-% @see http://www.graphviz.org/doc/info/shapes.html#html
-
-gv_html_label --> gv_html_text, !.
-gv_html_label --> gv_html_table, !.
-gv_html_label --> [].
-
-gv_html_like_label --> bracketed(angular, gv_html_label).
-
-gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
-
-gv_html_table --> html_element(table, _, gv_html_rows).
-gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
-
-gv_html_rows --> gv_html_row, gv_html_rows.
-gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
-gv_html_rows --> gv_html_row.
-
-gv_html_row --> html_element(tr, _, gv_html_cells).
-
-gv_html_cell --> html_element(td, _, gv_html_label).
-gv_html_cell --> html_element(td, _, html_element(img, _)).
-
-gv_html_cells --> gv_html_cell, gv_html_cells.
-gv_html_cells --> gv_html_cell.
-gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
-
-gv_html_text --> gv_html_textitem, gv_html_text.
-gv_html_text --> gv_html_textitem.
-
-gv_html_textitem --> html_string, !.
-gv_html_textitem --> html_entity, !.
-gv_html_textitem --> html_element(br, _), !.
-gv_html_textitem --> html_element(font, _, gv_html_text), !.
-gv_html_textitem --> html_element(i, _, gv_html_text), !.
-gv_html_textitem --> html_element(b, _, gv_html_text), !.
-gv_html_textitem --> html_element(u, _, gv_html_text), !.
-gv_html_textitem --> html_element(sub, _, gv_html_text), !.
-gv_html_textitem --> html_element(sup, _, gv_html_text), !.
-
+% Supported attributes for IMG:
+% ~~~{.txt}
+% SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
+% SRC="value"
+% ~~~
+
+cell(td(Contents)) -->
+  html_element(td, [], label(Contents)).
+cell(td(img)) -->
+  html_element(td, [], html_element(img)).
+
+
+%! cells(?Contents:list(compound))// .
+
+cells([H|T]) -->
+  cell(H),
+  cells(T).
+cells([H,vr|T]) -->
+  cell(H),
+  html_element(vr),
+  cells(T).
+cells([H]) -->
+  cell(H).
+
+
+%! label(?Content:compound)// .
+% GraphViz HTML-like label.
+
+label(Content) -->
+  text(Content).
+label(Content) -->
+  table(Content).
+
+
+%! row(?Contents:compound)// .
+
+row(tr(Contents)) -->
+  html_element(tr, [], cell(Contents)).
+
+
+%! rows(?Contents:list)// .
+
+rows([H|T]) -->
+  row(H),
+  rows.
+rows([H,hr|T]) -->
+  row(H),
+  html_element(hr),
+  rows(T).
+rows([H]) -->
+  row(H).
+
+
+%! table(?Contents:compound)// .
+% Supported attributes for TABLE:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT"
+% BGCOLOR="color"
+% BORDER="value"
+% CELLBORDER="value"
+% CELLPADDING="value"
+% CELLSPACING="value"
+% COLOR="color"
+% COLUMNS="value"
+% FIXEDSIZE="FALSE|TRUE"
+% GRADIENTANGLE="value"
+% HEIGHT="value"
+% HREF="value"
+% ID="value"
+% PORT="portName"
+% ROWS="value"
+% SIDES="value"
+% STYLE="value"
+% TARGET="value"
+% TITLE="value"
+% TOOLTIP="value"
+% VALIGN="MIDDLE|BOTTOM|TOP"
+% WIDTH="value"
+% ~~~
+%
+% Supported attributes for FONT:
+% ~~~{.txt}
+% COLOR="color"
+% FACE="fontname"
+% POINT-SIZE="value"
+% ~~~
+
+table(table(Attrs,Contents)) -->
+  html_element(table, Attrs, rows(Contents)).
+table(table(font(Contents))) -->
+  html_element(font, [], html_element(table, [], rows(Contents))).
+
+
+%! text(?Contents:list)// .
+
+text(Contents) -->
+  '+'(textitem, Contents, []).
+
+
+%! textitem(?Content)// .
+% Supported attributes for BR:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT"
+% ~~~
+
+textitem(string(String)) -->
+  html_string(String).
+textitem(entity(Name)) -->
+  html_entity(Name).
+textitem(br(Attrs)) -->
+  html_element(br, Attrs).
+textitem(Compound) -->
+  {var(Compound)}, !,
+  html_element(Name, _, text(Content)),
+  {
+    supported_html_element(Name),
+    Compound =.. [Name,Content]
+  }.
+textitem(Compound) -->
+  {
+    Compound =.. [Name,Content],
+    supported_html_element(Name)
+  },
+  html_element(Name, _, text(Content)).
+
+
+
+% HELPERS
+
+%! supported_html_element(+Name:atom) is semidet.
+%! supported_html_element(-Name:atom) is multi.
+
+supported_html_element(b).
+supported_html_element(font).
+supported_html_element(i).
+supported_html_element(o).
+supported_html_element(s).
+supported_html_element(sub).
+supported_html_element(sup).
+supported_html_element(u).
 
```
 
<h2 id="42"> 42: 正在比较变动前 1549e44 和变动后 61ddca2 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 15bbbbf..727ea49 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 15bbbbf25471abe856afbf92a04c5b3ce76b0217
+Subproject commit 727ea49d47063b733ae499615fda6aa06c84fb6f
diff --git a/debug_project.pl b/debug_project.pl
index 4eb2785..ab61534 100644
--- a/debug_project.pl
+++ b/debug_project.pl
@@ -37,7 +37,10 @@ debug_all_files:-
     ]
   ),
   exclude(do_not_load, Files1, Files2),
-  maplist(use_module, Files2).
+  maplist(use_module0, Files2).
+use_module0(File):-
+  print_message(informational, loading_module(File)),
+  use_module(File).
 
 do_not_load(File1):-
   file_base_name(File1, File2),
@@ -53,3 +56,12 @@ do_not_load0(load).
 do_not_load0(load_project).
 do_not_load0(rfc2616_basic).
 do_not_load0(run).
+
+
+
+% MESSAGES
+
+:- multifile(prolog:message//1).
+
+prolog:message(loading_module(File)) -->
+  ['[M] ',File].
diff --git a/gv_dot.pl b/gv_dot.pl
index bde2962..5f33e5c 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +Gif:compound
+    gv_graph//1 % +GraphTerm:compound
   ]
 ).
 
@@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'.
 % We assume that the attribute has already been validated.
 
 gv_attribute(Name=Val) -->
-  gv_id(Name), "=", gv_id(Val), ";".
+  gv_id(Name), `=`, gv_id(Val), `;`.
 
 
 %! gv_attribute_list(
@@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -->
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
 % ~~~
 
-gv_compass_pt('_') --> "_".
-gv_compass_pt(c) --> "c".
-gv_compass_pt(e) --> "e".
-gv_compass_pt(n) --> "n".
-gv_compass_pt(ne) --> "ne".
-gv_compass_pt(nw) --> "nw".
-gv_compass_pt(s) --> "s".
-gv_compass_pt(se) --> "se".
-gv_compass_pt(sw) --> "sw".
-gv_compass_pt(w) --> "w".
+gv_compass_pt('_') --> `_`.
+gv_compass_pt(c) --> `c`.
+gv_compass_pt(e) --> `e`.
+gv_compass_pt(n) --> `n`.
+gv_compass_pt(ne) --> `ne`.
+gv_compass_pt(nw) --> `nw`.
+gv_compass_pt(s) --> `s`.
+gv_compass_pt(se) --> `se`.
+gv_compass_pt(sw) --> `sw`.
+gv_compass_pt(w) --> `w`.
 
 
 %! gv_edge_operator(+Directed:boolean)// .
@@ -83,7 +83,7 @@ gv_compass_pt(w) --> "w".
 % @arg Directed Whether an edge is directed (operator `->`) or
 %                   undirected (operator `--`).
 
-gv_edge_operator(false) --> !, "--".
+gv_edge_operator(false) --> !, `--`.
 gv_edge_operator(true) --> arrow(right, 2).
 
 
@@ -107,11 +107,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
-  gv_node_id(FromId), " ",
+  gv_node_id(FromId), ` `,
 
-  gv_edge_operator(Directed), " ",
+  gv_edge_operator(Directed), ` `,
 
-  gv_node_id(ToId), " ",
+  gv_node_id(ToId), ` `,
 
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
@@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
   indent(I),
-  gv_kind(Kind), " ",
+  gv_kind(Kind), ` `,
   gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
 
 
-%! gv_graph(+Gif:compound)//
+%! gv_graph(+GraphTerm:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
@@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 % @tbd Assert attributes that are generic with respect to a subgraph.
 % @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
 
-gv_graph(graph(VTerms,ETerms,GAttrs)) -->
-  gv_graph(graph(VTerms,[],ETerms,GAttrs)).
+gv_graph(graph(VTerms, ETerms, GAttrs)) -->
+  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
 
-gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
+gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   {
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
@@ -194,8 +194,8 @@ gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), " ",
-  gv_id(GName), " ",
+  gv_graph_type(Directed), ` `,
+  gv_id(GName), ` `,
 
   % The body of the DOT file appears between curly braces.
   bracketed(
@@ -240,18 +240,18 @@ gv_graph0(
       (NewVTerms == [], RankedVTerms == [])
     }
   ->
-    ""
+    ``
   ;
     line_feed
   ),
 
   % The list of GraphViz nodes.
   '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
-  ({NewVTerms == []} -> "" ; line_feed),
+  ({NewVTerms == []} -> `` ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
   '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
-  ({RankedVTerms == []} -> "" ; line_feed),
+  ({RankedVTerms == []} -> `` ; line_feed),
 
   {
     findall(
@@ -281,8 +281,8 @@ gv_graph0(
 %! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
-gv_graph_type(false) --> "graph".
-gv_graph_type(true) --> "digraph".
+gv_graph_type(false) --> `graph`.
+gv_graph_type(true) --> `digraph`.
 
 
 %! gv_id(?Atom:atom)// is det.
@@ -305,9 +305,8 @@ gv_graph_type(true) --> "digraph".
 %      This requires an XML grammar!
 
 % HTML strings (variant 4).
-gv_id(Content) -->
-  {compound(Content)}, !,
-  gv_html_like_label, Content).
+gv_id(Atom) -->
+  dcg_atom_codes(gv_html_like_label, Atom), !.
 % Alpha-numeric strings (variant 1).
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -354,19 +353,19 @@ gv_keyword(Codes):-
 % GraphViz has reserved keywords that cannot be used as identifiers.
 % GraphViz keywords are case-insensitive.
 
-gv_keyword --> "digraph".
-gv_keyword --> "edge".
-gv_keyword --> "graph".
-gv_keyword --> "node".
-gv_keyword --> "strict".
-gv_keyword --> "subgraph".
+gv_keyword --> `digraph`.
+gv_keyword --> `edge`.
+gv_keyword --> `graph`.
+gv_keyword --> `node`.
+gv_keyword --> `strict`.
+gv_keyword --> `subgraph`.
 
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(edge) --> "edge".
-gv_kind(graph) --> "graph".
-gv_kind(node) --> "node".
+gv_kind(edge) --> `edge`.
+gv_kind(graph) --> `graph`.
+gv_kind(node) --> `node`.
 
 
 %! gv_node_id(+NodeId:atom)// .
@@ -393,7 +392,7 @@ gv_node_id(Id) -->
 
 gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
   indent(I),
-  gv_node_id(Id), " ",
+  gv_node_id(Id), ` `,
   gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
 
 
@@ -404,23 +403,23 @@ gv_port -->
   gv_port_angle,
   '?'(gv_port_location, []).
 gv_port -->
-  ":",
+  `:`,
   gv_compass_pt(_).
 
 gv_port_angle -->
-  "@",
+  `@`,
   gv_id(_).
 
 gv_port_location -->
-  ":",
+  `:`,
   gv_id(_).
 gv_port_location -->
-  ":",
+  `:`,
   bracketed(
     round,
     (
       gv_id(_),
-      ",",
+      `,`,
       gv_id(_)
     )
   ).
@@ -437,7 +436,7 @@ gv_quoted_string([92,34|T]) --> !,
   gv_quoted_string(T).
 % Add the backslash escape character.
 gv_quoted_string([34|T]) --> !,
-  "\\\"",
+  `\\\"`,
   gv_quoted_string(T).
 % All other characters are allowed without escaping.
 gv_quoted_string([H|T]) -->
@@ -456,7 +455,7 @@ gv_ranked_node_collection(
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), ";", line_feed,
+    indent(NewI), gv_attribute(rank=same), `;`, line_feed,
 
     '*'(
       gv_node_statement(NewI, GraphAttrs),
@@ -476,7 +475,7 @@ gv_ranked_node_collection(
 % This only applies to directed graphs.
 
 gv_strict(false) --> [].
-gv_strict(true) --> "strict ".
+gv_strict(true) --> `strict `.
 
 
 
diff --git a/gv_html.pl b/gv_html.pl
index a308ac7..3f0b08b 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -1,223 +1,60 @@
 :- module(
   gv_html,
   [
-    gv_html_like_label//1 % +Content:compound
+    gv_html_like_label//1 % +Codes:list(code)
   ]
 ).
 
-/** <module> GraphViz: HTML-like labels
-
-Grammar taken from the GraphViz Web site:
-
-~~~{.txt}
-label 	: 	text
-	| 	table
-text 	: 	textitem
-	| 	text textitem
-textitem 	: 	string
-	| 	<BR/>
-	| 	<FONT> text </FONT>
-	| 	<I> text </I>
-	| 	<B> text </B>
-	| 	<U> text </U>
-	| 	<O> text </O>
-	| 	<SUB> text </SUB>
-	| 	<SUP> text </SUP>
-	| 	<S> text </S>
-table 	: 	[ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
-rows 	: 	row
-	| 	rows row
-	| 	rows <HR/> row
-row 	: 	<TR> cells </TR>
-cells 	: 	cell
-	| 	cells cell
-	| 	cells <VR/> cell
-cell 	: 	<TD> label </TD>
-	| 	<TD> <IMG/> </TD>
-~~~
+/** <module> GraphViz HTML
 
 @author Wouter Beek
-@see http://www.graphviz.org/content/node-shapes#html
-@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
+@version 2013/07, 2013/09, 2014/03-2014/06
 */
 
-:- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
 
 
-%! gv_html_like_label(?Content:compound)// .
-
-gv_html_like_label(Content) -->
-  bracketed(angular, label(Content)).
-
-
-%! cell(?Contents:compound)// .
-% Supported attributes for TD:
-% ~~~{.txt}
-% ALIGN="CENTER|LEFT|RIGHT|TEXT"
-% BALIGN="CENTER|LEFT|RIGHT"
-% BGCOLOR="color"
-% BORDER="value"
-% CELLPADDING="value"
-% CELLSPACING="value"
-% COLOR="color"
-% COLSPAN="value"
-% FIXEDSIZE="FALSE|TRUE"
-% GRADIENTANGLE="value"
-% HEIGHT="value"
-% HREF="value"
-% ID="value"
-% PORT="portName"
-% ROWSPAN="value"
-% SIDES="value"
-% STYLE="value"
-% TARGET="value"
-% TITLE="value"
-% TOOLTIP="value"
-% VALIGN="MIDDLE|BOTTOM|TOP"
-% WIDTH="value"
-% ~~~
+%! gv_html_label(+Codes:list(code))// .
 %
-% Supported attributes for IMG:
-% ~~~{.txt}
-% SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
-% SRC="value"
-% ~~~
-
-cell(td(Contents)) -->
-  html_element(td, [], label(Contents)).
-cell(td(img)) -->
-  html_element(td, [], html_element(img)).
-
-
-%! cells(?Contents:list(compound))// .
-
-cells([H|T]) -->
-  cell(H),
-  cells(T).
-cells([H,vr|T]) -->
-  cell(H),
-  html_element(vr),
-  cells(T).
-cells([H]) -->
-  cell(H).
-
-
-%! label(?Content:compound)// .
-% GraphViz HTML-like label.
-
-label(Content) -->
-  text(Content).
-label(Content) -->
-  table(Content).
-
-
-%! row(?Contents:compound)// .
-
-row(tr(Contents)) -->
-  html_element(tr, [], cell(Contents)).
-
-
-%! rows(?Contents:list)// .
-
-rows([H|T]) -->
-  row(H),
-  rows.
-rows([H,hr|T]) -->
-  row(H),
-  html_element(hr),
-  rows(T).
-rows([H]) -->
-  row(H).
-
-
-%! table(?Contents:compound)// .
-% Supported attributes for TABLE:
-% ~~~{.txt}
-% ALIGN="CENTER|LEFT|RIGHT"
-% BGCOLOR="color"
-% BORDER="value"
-% CELLBORDER="value"
-% CELLPADDING="value"
-% CELLSPACING="value"
-% COLOR="color"
-% COLUMNS="value"
-% FIXEDSIZE="FALSE|TRUE"
-% GRADIENTANGLE="value"
-% HEIGHT="value"
-% HREF="value"
-% ID="value"
-% PORT="portName"
-% ROWS="value"
-% SIDES="value"
-% STYLE="value"
-% TARGET="value"
-% TITLE="value"
-% TOOLTIP="value"
-% VALIGN="MIDDLE|BOTTOM|TOP"
-% WIDTH="value"
-% ~~~
-%
-% Supported attributes for FONT:
-% ~~~{.txt}
-% COLOR="color"
-% FACE="fontname"
-% POINT-SIZE="value"
-% ~~~
-
-table(table(Attrs,Contents)) -->
-  html_element(table, Attrs, rows(Contents)).
-table(table(font(Contents))) -->
-  html_element(font, [], html_element(table, [], rows(Contents))).
-
-
-%! text(?Contents:list)// .
-
-text(Contents) -->
-  '+'(textitem, Contents, []).
-
-
-%! textitem(?Content)// .
-% Supported attributes for BR:
-% ~~~{.txt}
-% ALIGN="CENTER|LEFT|RIGHT"
-% ~~~
-
-textitem(string(String)) -->
-  html_string(String).
-textitem(entity(Name)) -->
-  html_entity(Name).
-textitem(br(Attrs)) -->
-  html_element(br, Attrs).
-textitem(Compound) -->
-  {var(Compound)}, !,
-  html_element(Name, _, text(Content)),
-  {
-    supported_html_element(Name),
-    Compound =.. [Name,Content]
-  }.
-textitem(Compound) -->
-  {
-    Compound =.. [Name,Content],
-    supported_html_element(Name)
-  },
-  html_element(Name, _, text(Content)).
-
-
-
-% HELPERS
-
-%! supported_html_element(+Name:atom) is semidet.
-%! supported_html_element(-Name:atom) is multi.
-
-supported_html_element(b).
-supported_html_element(font).
-supported_html_element(i).
-supported_html_element(o).
-supported_html_element(s).
-supported_html_element(sub).
-supported_html_element(sup).
-supported_html_element(u).
+% @see http://www.graphviz.org/doc/info/shapes.html#html
+
+gv_html_label --> gv_html_text, !.
+gv_html_label --> gv_html_table, !.
+gv_html_label --> [].
+
+gv_html_like_label --> bracketed(angular, gv_html_label).
+
+gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
+
+gv_html_table --> html_element(table, _, gv_html_rows).
+gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
+
+gv_html_rows --> gv_html_row, gv_html_rows.
+gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
+gv_html_rows --> gv_html_row.
+
+gv_html_row --> html_element(tr, _, gv_html_cells).
+
+gv_html_cell --> html_element(td, _, gv_html_label).
+gv_html_cell --> html_element(td, _, html_element(img, _)).
+
+gv_html_cells --> gv_html_cell, gv_html_cells.
+gv_html_cells --> gv_html_cell.
+gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
+
+gv_html_text --> gv_html_textitem, gv_html_text.
+gv_html_text --> gv_html_textitem.
+
+gv_html_textitem --> html_string, !.
+gv_html_textitem --> html_entity, !.
+gv_html_textitem --> html_element(br, _), !.
+gv_html_textitem --> html_element(font, _, gv_html_text), !.
+gv_html_textitem --> html_element(i, _, gv_html_text), !.
+gv_html_textitem --> html_element(b, _, gv_html_text), !.
+gv_html_textitem --> html_element(u, _, gv_html_text), !.
+gv_html_textitem --> html_element(sub, _, gv_html_text), !.
+gv_html_textitem --> html_element(sup, _, gv_html_text), !.
+
diff --git a/plDcg b/plDcg
index e074367..be16501 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit e0743670465a92c083e6954c5cf6220222f088b6
+Subproject commit be165017993efcf781007c5d682a519fb5eaa31f
diff --git a/plHtml b/plHtml
index 8ef47e0..e3abeed 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 8ef47e09a24c637ac435abbe1d01b21237be4534
+Subproject commit e3abeed4041392013965598145806ee33081f76f
 
```
 
<h2 id="43"> 43: 正在比较变动前 61ddca2 和变动后 26f07e7 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 5f33e5c..bde2962 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +GraphTerm:compound
+    gv_graph//1 % +Gif:compound
   ]
 ).
 
@@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'.
 % We assume that the attribute has already been validated.
 
 gv_attribute(Name=Val) -->
-  gv_id(Name), `=`, gv_id(Val), `;`.
+  gv_id(Name), "=", gv_id(Val), ";".
 
 
 %! gv_attribute_list(
@@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -->
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
 % ~~~
 
-gv_compass_pt('_') --> `_`.
-gv_compass_pt(c) --> `c`.
-gv_compass_pt(e) --> `e`.
-gv_compass_pt(n) --> `n`.
-gv_compass_pt(ne) --> `ne`.
-gv_compass_pt(nw) --> `nw`.
-gv_compass_pt(s) --> `s`.
-gv_compass_pt(se) --> `se`.
-gv_compass_pt(sw) --> `sw`.
-gv_compass_pt(w) --> `w`.
+gv_compass_pt('_') --> "_".
+gv_compass_pt(c) --> "c".
+gv_compass_pt(e) --> "e".
+gv_compass_pt(n) --> "n".
+gv_compass_pt(ne) --> "ne".
+gv_compass_pt(nw) --> "nw".
+gv_compass_pt(s) --> "s".
+gv_compass_pt(se) --> "se".
+gv_compass_pt(sw) --> "sw".
+gv_compass_pt(w) --> "w".
 
 
 %! gv_edge_operator(+Directed:boolean)// .
@@ -83,7 +83,7 @@ gv_compass_pt(w) --> `w`.
 % @arg Directed Whether an edge is directed (operator `->`) or
 %                   undirected (operator `--`).
 
-gv_edge_operator(false) --> !, `--`.
+gv_edge_operator(false) --> !, "--".
 gv_edge_operator(true) --> arrow(right, 2).
 
 
@@ -107,11 +107,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
-  gv_node_id(FromId), ` `,
+  gv_node_id(FromId), " ",
 
-  gv_edge_operator(Directed), ` `,
+  gv_edge_operator(Directed), " ",
 
-  gv_node_id(ToId), ` `,
+  gv_node_id(ToId), " ",
 
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
@@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
   indent(I),
-  gv_kind(Kind), ` `,
+  gv_kind(Kind), " ",
   gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
 
 
-%! gv_graph(+GraphTerm:compound)//
+%! gv_graph(+Gif:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
@@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 % @tbd Assert attributes that are generic with respect to a subgraph.
 % @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
 
-gv_graph(graph(VTerms, ETerms, GAttrs)) -->
-  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
+gv_graph(graph(VTerms,ETerms,GAttrs)) -->
+  gv_graph(graph(VTerms,[],ETerms,GAttrs)).
 
-gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
+gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
   {
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
@@ -194,8 +194,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), ` `,
-  gv_id(GName), ` `,
+  gv_graph_type(Directed), " ",
+  gv_id(GName), " ",
 
   % The body of the DOT file appears between curly braces.
   bracketed(
@@ -240,18 +240,18 @@ gv_graph0(
       (NewVTerms == [], RankedVTerms == [])
     }
   ->
-    ``
+    ""
   ;
     line_feed
   ),
 
   % The list of GraphViz nodes.
   '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
-  ({NewVTerms == []} -> `` ; line_feed),
+  ({NewVTerms == []} -> "" ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
   '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
-  ({RankedVTerms == []} -> `` ; line_feed),
+  ({RankedVTerms == []} -> "" ; line_feed),
 
   {
     findall(
@@ -281,8 +281,8 @@ gv_graph0(
 %! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
-gv_graph_type(false) --> `graph`.
-gv_graph_type(true) --> `digraph`.
+gv_graph_type(false) --> "graph".
+gv_graph_type(true) --> "digraph".
 
 
 %! gv_id(?Atom:atom)// is det.
@@ -305,8 +305,9 @@ gv_graph_type(true) --> `digraph`.
 %      This requires an XML grammar!
 
 % HTML strings (variant 4).
-gv_id(Atom) -->
-  dcg_atom_codes(gv_html_like_label, Atom), !.
+gv_id(Content) -->
+  {compound(Content)}, !,
+  gv_html_like_label, Content).
 % Alpha-numeric strings (variant 1).
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -353,19 +354,19 @@ gv_keyword(Codes):-
 % GraphViz has reserved keywords that cannot be used as identifiers.
 % GraphViz keywords are case-insensitive.
 
-gv_keyword --> `digraph`.
-gv_keyword --> `edge`.
-gv_keyword --> `graph`.
-gv_keyword --> `node`.
-gv_keyword --> `strict`.
-gv_keyword --> `subgraph`.
+gv_keyword --> "digraph".
+gv_keyword --> "edge".
+gv_keyword --> "graph".
+gv_keyword --> "node".
+gv_keyword --> "strict".
+gv_keyword --> "subgraph".
 
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(edge) --> `edge`.
-gv_kind(graph) --> `graph`.
-gv_kind(node) --> `node`.
+gv_kind(edge) --> "edge".
+gv_kind(graph) --> "graph".
+gv_kind(node) --> "node".
 
 
 %! gv_node_id(+NodeId:atom)// .
@@ -392,7 +393,7 @@ gv_node_id(Id) -->
 
 gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
   indent(I),
-  gv_node_id(Id), ` `,
+  gv_node_id(Id), " ",
   gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
 
 
@@ -403,23 +404,23 @@ gv_port -->
   gv_port_angle,
   '?'(gv_port_location, []).
 gv_port -->
-  `:`,
+  ":",
   gv_compass_pt(_).
 
 gv_port_angle -->
-  `@`,
+  "@",
   gv_id(_).
 
 gv_port_location -->
-  `:`,
+  ":",
   gv_id(_).
 gv_port_location -->
-  `:`,
+  ":",
   bracketed(
     round,
     (
       gv_id(_),
-      `,`,
+      ",",
       gv_id(_)
     )
   ).
@@ -436,7 +437,7 @@ gv_quoted_string([92,34|T]) --> !,
   gv_quoted_string(T).
 % Add the backslash escape character.
 gv_quoted_string([34|T]) --> !,
-  `\\\"`,
+  "\\\"",
   gv_quoted_string(T).
 % All other characters are allowed without escaping.
 gv_quoted_string([H|T]) -->
@@ -455,7 +456,7 @@ gv_ranked_node_collection(
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), `;`, line_feed,
+    indent(NewI), gv_attribute(rank=same), ";", line_feed,
 
     '*'(
       gv_node_statement(NewI, GraphAttrs),
@@ -475,7 +476,7 @@ gv_ranked_node_collection(
 % This only applies to directed graphs.
 
 gv_strict(false) --> [].
-gv_strict(true) --> `strict `.
+gv_strict(true) --> "strict ".
 
 
 
diff --git a/gv_html.pl b/gv_html.pl
index 3f0b08b..a308ac7 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -1,60 +1,223 @@
 :- module(
   gv_html,
   [
-    gv_html_like_label//1 % +Codes:list(code)
+    gv_html_like_label//1 % +Content:compound
   ]
 ).
 
-/** <module> GraphViz HTML
+/** <module> GraphViz: HTML-like labels
+
+Grammar taken from the GraphViz Web site:
+
+~~~{.txt}
+label 	: 	text
+	| 	table
+text 	: 	textitem
+	| 	text textitem
+textitem 	: 	string
+	| 	<BR/>
+	| 	<FONT> text </FONT>
+	| 	<I> text </I>
+	| 	<B> text </B>
+	| 	<U> text </U>
+	| 	<O> text </O>
+	| 	<SUB> text </SUB>
+	| 	<SUP> text </SUP>
+	| 	<S> text </S>
+table 	: 	[ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
+rows 	: 	row
+	| 	rows row
+	| 	rows <HR/> row
+row 	: 	<TR> cells </TR>
+cells 	: 	cell
+	| 	cells cell
+	| 	cells <VR/> cell
+cell 	: 	<TD> label </TD>
+	| 	<TD> <IMG/> </TD>
+~~~
 
 @author Wouter Beek
-@version 2013/07, 2013/09, 2014/03-2014/06
+@see http://www.graphviz.org/content/node-shapes#html
+@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
 */
 
+:- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
 
 
-%! gv_html_label(+Codes:list(code))// .
+%! gv_html_like_label(?Content:compound)// .
+
+gv_html_like_label(Content) -->
+  bracketed(angular, label(Content)).
+
+
+%! cell(?Contents:compound)// .
+% Supported attributes for TD:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT|TEXT"
+% BALIGN="CENTER|LEFT|RIGHT"
+% BGCOLOR="color"
+% BORDER="value"
+% CELLPADDING="value"
+% CELLSPACING="value"
+% COLOR="color"
+% COLSPAN="value"
+% FIXEDSIZE="FALSE|TRUE"
+% GRADIENTANGLE="value"
+% HEIGHT="value"
+% HREF="value"
+% ID="value"
+% PORT="portName"
+% ROWSPAN="value"
+% SIDES="value"
+% STYLE="value"
+% TARGET="value"
+% TITLE="value"
+% TOOLTIP="value"
+% VALIGN="MIDDLE|BOTTOM|TOP"
+% WIDTH="value"
+% ~~~
 %
-% @see http://www.graphviz.org/doc/info/shapes.html#html
-
-gv_html_label --> gv_html_text, !.
-gv_html_label --> gv_html_table, !.
-gv_html_label --> [].
-
-gv_html_like_label --> bracketed(angular, gv_html_label).
-
-gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
-
-gv_html_table --> html_element(table, _, gv_html_rows).
-gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
-
-gv_html_rows --> gv_html_row, gv_html_rows.
-gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
-gv_html_rows --> gv_html_row.
-
-gv_html_row --> html_element(tr, _, gv_html_cells).
-
-gv_html_cell --> html_element(td, _, gv_html_label).
-gv_html_cell --> html_element(td, _, html_element(img, _)).
-
-gv_html_cells --> gv_html_cell, gv_html_cells.
-gv_html_cells --> gv_html_cell.
-gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
-
-gv_html_text --> gv_html_textitem, gv_html_text.
-gv_html_text --> gv_html_textitem.
-
-gv_html_textitem --> html_string, !.
-gv_html_textitem --> html_entity, !.
-gv_html_textitem --> html_element(br, _), !.
-gv_html_textitem --> html_element(font, _, gv_html_text), !.
-gv_html_textitem --> html_element(i, _, gv_html_text), !.
-gv_html_textitem --> html_element(b, _, gv_html_text), !.
-gv_html_textitem --> html_element(u, _, gv_html_text), !.
-gv_html_textitem --> html_element(sub, _, gv_html_text), !.
-gv_html_textitem --> html_element(sup, _, gv_html_text), !.
-
+% Supported attributes for IMG:
+% ~~~{.txt}
+% SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
+% SRC="value"
+% ~~~
+
+cell(td(Contents)) -->
+  html_element(td, [], label(Contents)).
+cell(td(img)) -->
+  html_element(td, [], html_element(img)).
+
+
+%! cells(?Contents:list(compound))// .
+
+cells([H|T]) -->
+  cell(H),
+  cells(T).
+cells([H,vr|T]) -->
+  cell(H),
+  html_element(vr),
+  cells(T).
+cells([H]) -->
+  cell(H).
+
+
+%! label(?Content:compound)// .
+% GraphViz HTML-like label.
+
+label(Content) -->
+  text(Content).
+label(Content) -->
+  table(Content).
+
+
+%! row(?Contents:compound)// .
+
+row(tr(Contents)) -->
+  html_element(tr, [], cell(Contents)).
+
+
+%! rows(?Contents:list)// .
+
+rows([H|T]) -->
+  row(H),
+  rows.
+rows([H,hr|T]) -->
+  row(H),
+  html_element(hr),
+  rows(T).
+rows([H]) -->
+  row(H).
+
+
+%! table(?Contents:compound)// .
+% Supported attributes for TABLE:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT"
+% BGCOLOR="color"
+% BORDER="value"
+% CELLBORDER="value"
+% CELLPADDING="value"
+% CELLSPACING="value"
+% COLOR="color"
+% COLUMNS="value"
+% FIXEDSIZE="FALSE|TRUE"
+% GRADIENTANGLE="value"
+% HEIGHT="value"
+% HREF="value"
+% ID="value"
+% PORT="portName"
+% ROWS="value"
+% SIDES="value"
+% STYLE="value"
+% TARGET="value"
+% TITLE="value"
+% TOOLTIP="value"
+% VALIGN="MIDDLE|BOTTOM|TOP"
+% WIDTH="value"
+% ~~~
+%
+% Supported attributes for FONT:
+% ~~~{.txt}
+% COLOR="color"
+% FACE="fontname"
+% POINT-SIZE="value"
+% ~~~
+
+table(table(Attrs,Contents)) -->
+  html_element(table, Attrs, rows(Contents)).
+table(table(font(Contents))) -->
+  html_element(font, [], html_element(table, [], rows(Contents))).
+
+
+%! text(?Contents:list)// .
+
+text(Contents) -->
+  '+'(textitem, Contents, []).
+
+
+%! textitem(?Content)// .
+% Supported attributes for BR:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT"
+% ~~~
+
+textitem(string(String)) -->
+  html_string(String).
+textitem(entity(Name)) -->
+  html_entity(Name).
+textitem(br(Attrs)) -->
+  html_element(br, Attrs).
+textitem(Compound) -->
+  {var(Compound)}, !,
+  html_element(Name, _, text(Content)),
+  {
+    supported_html_element(Name),
+    Compound =.. [Name,Content]
+  }.
+textitem(Compound) -->
+  {
+    Compound =.. [Name,Content],
+    supported_html_element(Name)
+  },
+  html_element(Name, _, text(Content)).
+
+
+
+% HELPERS
+
+%! supported_html_element(+Name:atom) is semidet.
+%! supported_html_element(-Name:atom) is multi.
+
+supported_html_element(b).
+supported_html_element(font).
+supported_html_element(i).
+supported_html_element(o).
+supported_html_element(s).
+supported_html_element(sub).
+supported_html_element(sup).
+supported_html_element(u).
 
```
 
<h2 id="44"> 44: 正在比较变动前 26f07e7 和变动后 f78b4f8 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 727ea49..7096ef9 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 727ea49d47063b733ae499615fda6aa06c84fb6f
+Subproject commit 7096ef9749edffe389df6a90d586930c8bf4df70
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 3c7863d..67d419a 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -46,10 +46,11 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2014/06
+@version 2014/06, 2014/11
 */
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
 
@@ -97,7 +98,7 @@ gv_attr_type(viewPort).
 % An *addDouble* is represented by a Prolog float.
 
 addDouble(Float) -->
-  '?'(`+`, []),
+  '?'(plus_sign, []),
   double(Float).
 
 
@@ -106,7 +107,7 @@ addDouble(Float) -->
 % `point(X:float,Y:float,InputOnly:boolean)`.
 
 addPoint(Point) -->
-  '?'(`+`, []),
+  '?'(plus_sign, []),
   point(Point).
 
 
@@ -147,10 +148,10 @@ backwards_compatible(invempty).
 backwards_compatible(open).
 
 
-bool(false) --> `false`.
-bool(false) --> `no`.
-bool(true) --> `true`.
-bool(true) --> `yes`.
+bool(false) --> "false".
+bool(false) --> "no".
+bool(true) --> "true".
+bool(true) --> "yes".
 
 
 %! clusterMode(+ClusterMode:atom)// .
@@ -187,7 +188,7 @@ doubleList([H|T]) -->
   '*'(doubleList1, T, []).
 
 doubleList1(Float) -->
-  `:`,
+  ":",
   double(Float).
 
 
@@ -242,16 +243,16 @@ pagedir('TR').
 
 %! point(+Point:compound)// .
 % A *point* is represented by a compound of the following form:
-% `point(X:float,Y:float,InputOnly:boolean)`.
+% `point(X:float,Y:float,Changeable:boolean)`.
 
-point(point(X,Y,InputOnly)) -->
+point(point(X,Y,Changeable)) -->
   float(X),
-  `,`,
+  ",",
   float(Y),
-  input_only(InputOnly).
+  input_changeable(Changeable).
 
-input_only(false) --> [].
-input_only(true) --> `!`.
+input_changeable(false) --> "".
+input_changeable(true) --> "!".
 
 
 pointList(Points) -->
@@ -292,9 +293,9 @@ rankdir('TB').
 
 
 rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  float(LowerLeftX), `,`,
-  float(LowerLeftY), `,`,
-  float(UpperRightX), `,`,
+  float(LowerLeftX), ",",
+  float(LowerLeftY), ",",
+  float(UpperRightX), ",",
   float(UpperRightY).
 
 
@@ -414,4 +415,3 @@ style(node, wedged).
 
 
 % @tbd viewPort
-
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 1692915..df0922a 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -2,15 +2,17 @@
   gv_attrs,
   [
     gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph])
-              % +Attr1:nvpair
-              % +Attr2:nvpair
+              % +Attribute1:nvpair
+              % -Attribute2:nvpair
   ]
 ).
 
-/** <module> GraphViz attributes v2
+/** <module> GraphViz: Attributes
+
+Support for GraphViz attributes.
 
 @author Wouter Beek
-@version 2014/06
+@version 2014/06, 2014/11
 */
 
 :- use_module(library(apply)).
@@ -54,24 +56,40 @@
 
 
 
+%! gv_attr(
+%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
+%!   +Attribute1:nvpair,
+%!   +Attribute2:nvpair
+%! ) is det.
+% Uses the default value in case Value is uninstantiated.
+% Otherwise, performs a typecheck and converts the given value.
+
 gv_attr(Context, N=V, N=V):-
   var(V), !,
   gv_attr(N, UsedBy, _, V, _, _),
+  % Check validity of context.
   memberchk(Context, UsedBy).
 gv_attr(Context, N=V1, N=V2):-
-  gv_attr(N, UsedBy, Types, _, Minimum, _),
+  gv_attr(N2, UsedBy, Types, _, Minimum, _),
+  % Check validity of context.
   memberchk(Context, UsedBy),
+  % Check validity of value type.
   member(Type, Types),
-  (
-    Type == style
-  ->
-    Dcg =.. [Type,Context,V1]
-  ;
-    Dcg =.. [Type,V1]
+  (   Type == style
+  ->  Dcg =.. [Type,Context,V1]
+  ;   Dcg =.. [Type,V1]
   ),
   once(dcg_phrase(Dcg, V2)),
+  % Check validity of Value w.r.t. minimum value -- if available.
   check_minimum(V1, Minimum).
 
+
+
+% HELPERS
+
+%! check_minimum(+Value:atom, +Minimum:number) is semidet.
+% Trivially succeeds if no minimum value is available for a given attribute.
+
 check_minimum(_, ''):- !.
 check_minimum(V, Min1):-
   atom_number(Min1, Min2),
diff --git a/plDcg b/plDcg
index be16501..2cd7321 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit be165017993efcf781007c5d682a519fb5eaa31f
+Subproject commit 2cd7321d6c8a84ca23d08670348914c4a8ca6bb0
 
```
 
<h2 id="45"> 45: 正在比较变动前 f78b4f8 和变动后 3109362 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index 7193a38..b25c15b 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,4 +1 @@
 *~
-*#
-*.db
-data/*
diff --git a/.gitmodules b/.gitmodules
index 844b1bd..a63cbff 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,6 +4,3 @@
 [submodule "plHtml"]
 	path = plHtml
 	url = https://github.com/wouterbeek/plHtml.git
-[submodule "plDcg"]
-	path = plDcg
-	url = https://github.com/wouterbeek/plDcg.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 7096ef9..b1d2484 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 7096ef9749edffe389df6a90d586930c8bf4df70
+Subproject commit b1d2484486ad4876aecc1bf70b2963b12efca341
diff --git a/debug.pl b/debug.pl
deleted file mode 100644
index 099cb84..0000000
--- a/debug.pl
+++ /dev/null
@@ -1,7 +0,0 @@
-% Loads debug tools for the plGraphViz library.
-
-:- [load].
-
-:- use_module(debug_project).
-:- debug_all_files.
-
diff --git a/debug_project.pl b/debug_project.pl
deleted file mode 100644
index ab61534..0000000
--- a/debug_project.pl
+++ /dev/null
@@ -1,67 +0,0 @@
-:- module(
-  debug_project,
-  [
-    debug_all_files/0
-  ]
-).
-
-/** <module> Debug project
-
-Generic code for debugging a project:
-  * Load all subdirectories and Prolog files contained in those directories.
-
-@author Wouter Beek
-@version 2014/10/31
-*/
-
-:- use_module(library(ansi_term)).
-:- use_module(library(apply)).
-
-:- use_module(os(dir_ext)).
-
-% Avoid errors when using gtrace/0 in threads.
-:- initialization(guitracer).
-
-
-
-debug_all_files:-
-  absolute_file_name(project(.), Dir, [access(read),file_type(directory)]),
-  directory_files(
-    Dir,
-    Files1,
-    [
-      file_types([prolog]),
-      include_directories(false),
-      include_self(false),
-      recursive(true)
-    ]
-  ),
-  exclude(do_not_load, Files1, Files2),
-  maplist(use_module0, Files2).
-use_module0(File):-
-  print_message(informational, loading_module(File)),
-  use_module(File).
-
-do_not_load(File1):-
-  file_base_name(File1, File2),
-  file_name_extension(File3, pl, File2),
-  do_not_load0(File3).
-
-do_not_load0(dcg_ascii).
-do_not_load0(dcg_unicode).
-do_not_load0(debug).
-do_not_load0(debug_project).
-do_not_load0(index).
-do_not_load0(load).
-do_not_load0(load_project).
-do_not_load0(rfc2616_basic).
-do_not_load0(run).
-
-
-
-% MESSAGES
-
-:- multifile(prolog:message//1).
-
-prolog:message(loading_module(File)) -->
-  ['[M] ',File].
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 67d419a..3c7863d 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -46,11 +46,10 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2014/06, 2014/11
+@version 2014/06
 */
 
 :- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
 
@@ -98,7 +97,7 @@ gv_attr_type(viewPort).
 % An *addDouble* is represented by a Prolog float.
 
 addDouble(Float) -->
-  '?'(plus_sign, []),
+  '?'(`+`, []),
   double(Float).
 
 
@@ -107,7 +106,7 @@ addDouble(Float) -->
 % `point(X:float,Y:float,InputOnly:boolean)`.
 
 addPoint(Point) -->
-  '?'(plus_sign, []),
+  '?'(`+`, []),
   point(Point).
 
 
@@ -148,10 +147,10 @@ backwards_compatible(invempty).
 backwards_compatible(open).
 
 
-bool(false) --> "false".
-bool(false) --> "no".
-bool(true) --> "true".
-bool(true) --> "yes".
+bool(false) --> `false`.
+bool(false) --> `no`.
+bool(true) --> `true`.
+bool(true) --> `yes`.
 
 
 %! clusterMode(+ClusterMode:atom)// .
@@ -188,7 +187,7 @@ doubleList([H|T]) -->
   '*'(doubleList1, T, []).
 
 doubleList1(Float) -->
-  ":",
+  `:`,
   double(Float).
 
 
@@ -243,16 +242,16 @@ pagedir('TR').
 
 %! point(+Point:compound)// .
 % A *point* is represented by a compound of the following form:
-% `point(X:float,Y:float,Changeable:boolean)`.
+% `point(X:float,Y:float,InputOnly:boolean)`.
 
-point(point(X,Y,Changeable)) -->
+point(point(X,Y,InputOnly)) -->
   float(X),
-  ",",
+  `,`,
   float(Y),
-  input_changeable(Changeable).
+  input_only(InputOnly).
 
-input_changeable(false) --> "".
-input_changeable(true) --> "!".
+input_only(false) --> [].
+input_only(true) --> `!`.
 
 
 pointList(Points) -->
@@ -293,9 +292,9 @@ rankdir('TB').
 
 
 rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  float(LowerLeftX), ",",
-  float(LowerLeftY), ",",
-  float(UpperRightX), ",",
+  float(LowerLeftX), `,`,
+  float(LowerLeftY), `,`,
+  float(UpperRightX), `,`,
   float(UpperRightY).
 
 
@@ -415,3 +414,4 @@ style(node, wedged).
 
 
 % @tbd viewPort
+
diff --git a/gv_attrs.pl b/gv_attrs.pl
index df0922a..1692915 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -2,17 +2,15 @@
   gv_attrs,
   [
     gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph])
-              % +Attribute1:nvpair
-              % -Attribute2:nvpair
+              % +Attr1:nvpair
+              % +Attr2:nvpair
   ]
 ).
 
-/** <module> GraphViz: Attributes
-
-Support for GraphViz attributes.
+/** <module> GraphViz attributes v2
 
 @author Wouter Beek
-@version 2014/06, 2014/11
+@version 2014/06
 */
 
 :- use_module(library(apply)).
@@ -56,40 +54,24 @@ Support for GraphViz attributes.
 
 
 
-%! gv_attr(
-%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
-%!   +Attribute1:nvpair,
-%!   +Attribute2:nvpair
-%! ) is det.
-% Uses the default value in case Value is uninstantiated.
-% Otherwise, performs a typecheck and converts the given value.
-
 gv_attr(Context, N=V, N=V):-
   var(V), !,
   gv_attr(N, UsedBy, _, V, _, _),
-  % Check validity of context.
   memberchk(Context, UsedBy).
 gv_attr(Context, N=V1, N=V2):-
-  gv_attr(N2, UsedBy, Types, _, Minimum, _),
-  % Check validity of context.
+  gv_attr(N, UsedBy, Types, _, Minimum, _),
   memberchk(Context, UsedBy),
-  % Check validity of value type.
   member(Type, Types),
-  (   Type == style
-  ->  Dcg =.. [Type,Context,V1]
-  ;   Dcg =.. [Type,V1]
+  (
+    Type == style
+  ->
+    Dcg =.. [Type,Context,V1]
+  ;
+    Dcg =.. [Type,V1]
   ),
   once(dcg_phrase(Dcg, V2)),
-  % Check validity of Value w.r.t. minimum value -- if available.
   check_minimum(V1, Minimum).
 
-
-
-% HELPERS
-
-%! check_minimum(+Value:atom, +Minimum:number) is semidet.
-% Trivially succeeds if no minimum value is available for a given attribute.
-
 check_minimum(_, ''):- !.
 check_minimum(V, Min1):-
   atom_number(Min1, Min2),
diff --git a/gv_dot.pl b/gv_dot.pl
index bde2962..5f33e5c 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +Gif:compound
+    gv_graph//1 % +GraphTerm:compound
   ]
 ).
 
@@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'.
 % We assume that the attribute has already been validated.
 
 gv_attribute(Name=Val) -->
-  gv_id(Name), "=", gv_id(Val), ";".
+  gv_id(Name), `=`, gv_id(Val), `;`.
 
 
 %! gv_attribute_list(
@@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -->
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
 % ~~~
 
-gv_compass_pt('_') --> "_".
-gv_compass_pt(c) --> "c".
-gv_compass_pt(e) --> "e".
-gv_compass_pt(n) --> "n".
-gv_compass_pt(ne) --> "ne".
-gv_compass_pt(nw) --> "nw".
-gv_compass_pt(s) --> "s".
-gv_compass_pt(se) --> "se".
-gv_compass_pt(sw) --> "sw".
-gv_compass_pt(w) --> "w".
+gv_compass_pt('_') --> `_`.
+gv_compass_pt(c) --> `c`.
+gv_compass_pt(e) --> `e`.
+gv_compass_pt(n) --> `n`.
+gv_compass_pt(ne) --> `ne`.
+gv_compass_pt(nw) --> `nw`.
+gv_compass_pt(s) --> `s`.
+gv_compass_pt(se) --> `se`.
+gv_compass_pt(sw) --> `sw`.
+gv_compass_pt(w) --> `w`.
 
 
 %! gv_edge_operator(+Directed:boolean)// .
@@ -83,7 +83,7 @@ gv_compass_pt(w) --> "w".
 % @arg Directed Whether an edge is directed (operator `->`) or
 %                   undirected (operator `--`).
 
-gv_edge_operator(false) --> !, "--".
+gv_edge_operator(false) --> !, `--`.
 gv_edge_operator(true) --> arrow(right, 2).
 
 
@@ -107,11 +107,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
-  gv_node_id(FromId), " ",
+  gv_node_id(FromId), ` `,
 
-  gv_edge_operator(Directed), " ",
+  gv_edge_operator(Directed), ` `,
 
-  gv_node_id(ToId), " ",
+  gv_node_id(ToId), ` `,
 
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
@@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
   indent(I),
-  gv_kind(Kind), " ",
+  gv_kind(Kind), ` `,
   gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
 
 
-%! gv_graph(+Gif:compound)//
+%! gv_graph(+GraphTerm:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
@@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 % @tbd Assert attributes that are generic with respect to a subgraph.
 % @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
 
-gv_graph(graph(VTerms,ETerms,GAttrs)) -->
-  gv_graph(graph(VTerms,[],ETerms,GAttrs)).
+gv_graph(graph(VTerms, ETerms, GAttrs)) -->
+  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
 
-gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
+gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   {
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
@@ -194,8 +194,8 @@ gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), " ",
-  gv_id(GName), " ",
+  gv_graph_type(Directed), ` `,
+  gv_id(GName), ` `,
 
   % The body of the DOT file appears between curly braces.
   bracketed(
@@ -240,18 +240,18 @@ gv_graph0(
       (NewVTerms == [], RankedVTerms == [])
     }
   ->
-    ""
+    ``
   ;
     line_feed
   ),
 
   % The list of GraphViz nodes.
   '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
-  ({NewVTerms == []} -> "" ; line_feed),
+  ({NewVTerms == []} -> `` ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
   '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
-  ({RankedVTerms == []} -> "" ; line_feed),
+  ({RankedVTerms == []} -> `` ; line_feed),
 
   {
     findall(
@@ -281,8 +281,8 @@ gv_graph0(
 %! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
-gv_graph_type(false) --> "graph".
-gv_graph_type(true) --> "digraph".
+gv_graph_type(false) --> `graph`.
+gv_graph_type(true) --> `digraph`.
 
 
 %! gv_id(?Atom:atom)// is det.
@@ -305,9 +305,8 @@ gv_graph_type(true) --> "digraph".
 %      This requires an XML grammar!
 
 % HTML strings (variant 4).
-gv_id(Content) -->
-  {compound(Content)}, !,
-  gv_html_like_label, Content).
+gv_id(Atom) -->
+  dcg_atom_codes(gv_html_like_label, Atom), !.
 % Alpha-numeric strings (variant 1).
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -354,19 +353,19 @@ gv_keyword(Codes):-
 % GraphViz has reserved keywords that cannot be used as identifiers.
 % GraphViz keywords are case-insensitive.
 
-gv_keyword --> "digraph".
-gv_keyword --> "edge".
-gv_keyword --> "graph".
-gv_keyword --> "node".
-gv_keyword --> "strict".
-gv_keyword --> "subgraph".
+gv_keyword --> `digraph`.
+gv_keyword --> `edge`.
+gv_keyword --> `graph`.
+gv_keyword --> `node`.
+gv_keyword --> `strict`.
+gv_keyword --> `subgraph`.
 
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(edge) --> "edge".
-gv_kind(graph) --> "graph".
-gv_kind(node) --> "node".
+gv_kind(edge) --> `edge`.
+gv_kind(graph) --> `graph`.
+gv_kind(node) --> `node`.
 
 
 %! gv_node_id(+NodeId:atom)// .
@@ -393,7 +392,7 @@ gv_node_id(Id) -->
 
 gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
   indent(I),
-  gv_node_id(Id), " ",
+  gv_node_id(Id), ` `,
   gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
 
 
@@ -404,23 +403,23 @@ gv_port -->
   gv_port_angle,
   '?'(gv_port_location, []).
 gv_port -->
-  ":",
+  `:`,
   gv_compass_pt(_).
 
 gv_port_angle -->
-  "@",
+  `@`,
   gv_id(_).
 
 gv_port_location -->
-  ":",
+  `:`,
   gv_id(_).
 gv_port_location -->
-  ":",
+  `:`,
   bracketed(
     round,
     (
       gv_id(_),
-      ",",
+      `,`,
       gv_id(_)
     )
   ).
@@ -437,7 +436,7 @@ gv_quoted_string([92,34|T]) --> !,
   gv_quoted_string(T).
 % Add the backslash escape character.
 gv_quoted_string([34|T]) --> !,
-  "\\\"",
+  `\\\"`,
   gv_quoted_string(T).
 % All other characters are allowed without escaping.
 gv_quoted_string([H|T]) -->
@@ -456,7 +455,7 @@ gv_ranked_node_collection(
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), ";", line_feed,
+    indent(NewI), gv_attribute(rank=same), `;`, line_feed,
 
     '*'(
       gv_node_statement(NewI, GraphAttrs),
@@ -476,7 +475,7 @@ gv_ranked_node_collection(
 % This only applies to directed graphs.
 
 gv_strict(false) --> [].
-gv_strict(true) --> "strict ".
+gv_strict(true) --> `strict `.
 
 
 
diff --git a/gv_file.pl b/gv_file.pl
index 00c9eb0..789bd56 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -31,7 +31,7 @@ and GraphViz output files or SVG DOM structures.
 :- use_module(library(option)).
 :- use_module(library(process)).
 
-:- use_module(generics(codes_ext)).
+:- use_module(generics(code_ext)).
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
 :- use_module(os(run_ext)).
diff --git a/gv_html.pl b/gv_html.pl
index a308ac7..3f0b08b 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -1,223 +1,60 @@
 :- module(
   gv_html,
   [
-    gv_html_like_label//1 % +Content:compound
+    gv_html_like_label//1 % +Codes:list(code)
   ]
 ).
 
-/** <module> GraphViz: HTML-like labels
-
-Grammar taken from the GraphViz Web site:
-
-~~~{.txt}
-label 	: 	text
-	| 	table
-text 	: 	textitem
-	| 	text textitem
-textitem 	: 	string
-	| 	<BR/>
-	| 	<FONT> text </FONT>
-	| 	<I> text </I>
-	| 	<B> text </B>
-	| 	<U> text </U>
-	| 	<O> text </O>
-	| 	<SUB> text </SUB>
-	| 	<SUP> text </SUP>
-	| 	<S> text </S>
-table 	: 	[ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
-rows 	: 	row
-	| 	rows row
-	| 	rows <HR/> row
-row 	: 	<TR> cells </TR>
-cells 	: 	cell
-	| 	cells cell
-	| 	cells <VR/> cell
-cell 	: 	<TD> label </TD>
-	| 	<TD> <IMG/> </TD>
-~~~
+/** <module> GraphViz HTML
 
 @author Wouter Beek
-@see http://www.graphviz.org/content/node-shapes#html
-@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
+@version 2013/07, 2013/09, 2014/03-2014/06
 */
 
-:- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
 
 
-%! gv_html_like_label(?Content:compound)// .
-
-gv_html_like_label(Content) -->
-  bracketed(angular, label(Content)).
-
-
-%! cell(?Contents:compound)// .
-% Supported attributes for TD:
-% ~~~{.txt}
-% ALIGN="CENTER|LEFT|RIGHT|TEXT"
-% BALIGN="CENTER|LEFT|RIGHT"
-% BGCOLOR="color"
-% BORDER="value"
-% CELLPADDING="value"
-% CELLSPACING="value"
-% COLOR="color"
-% COLSPAN="value"
-% FIXEDSIZE="FALSE|TRUE"
-% GRADIENTANGLE="value"
-% HEIGHT="value"
-% HREF="value"
-% ID="value"
-% PORT="portName"
-% ROWSPAN="value"
-% SIDES="value"
-% STYLE="value"
-% TARGET="value"
-% TITLE="value"
-% TOOLTIP="value"
-% VALIGN="MIDDLE|BOTTOM|TOP"
-% WIDTH="value"
-% ~~~
+%! gv_html_label(+Codes:list(code))// .
 %
-% Supported attributes for IMG:
-% ~~~{.txt}
-% SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
-% SRC="value"
-% ~~~
-
-cell(td(Contents)) -->
-  html_element(td, [], label(Contents)).
-cell(td(img)) -->
-  html_element(td, [], html_element(img)).
-
-
-%! cells(?Contents:list(compound))// .
-
-cells([H|T]) -->
-  cell(H),
-  cells(T).
-cells([H,vr|T]) -->
-  cell(H),
-  html_element(vr),
-  cells(T).
-cells([H]) -->
-  cell(H).
-
-
-%! label(?Content:compound)// .
-% GraphViz HTML-like label.
-
-label(Content) -->
-  text(Content).
-label(Content) -->
-  table(Content).
-
-
-%! row(?Contents:compound)// .
-
-row(tr(Contents)) -->
-  html_element(tr, [], cell(Contents)).
-
-
-%! rows(?Contents:list)// .
-
-rows([H|T]) -->
-  row(H),
-  rows.
-rows([H,hr|T]) -->
-  row(H),
-  html_element(hr),
-  rows(T).
-rows([H]) -->
-  row(H).
-
-
-%! table(?Contents:compound)// .
-% Supported attributes for TABLE:
-% ~~~{.txt}
-% ALIGN="CENTER|LEFT|RIGHT"
-% BGCOLOR="color"
-% BORDER="value"
-% CELLBORDER="value"
-% CELLPADDING="value"
-% CELLSPACING="value"
-% COLOR="color"
-% COLUMNS="value"
-% FIXEDSIZE="FALSE|TRUE"
-% GRADIENTANGLE="value"
-% HEIGHT="value"
-% HREF="value"
-% ID="value"
-% PORT="portName"
-% ROWS="value"
-% SIDES="value"
-% STYLE="value"
-% TARGET="value"
-% TITLE="value"
-% TOOLTIP="value"
-% VALIGN="MIDDLE|BOTTOM|TOP"
-% WIDTH="value"
-% ~~~
-%
-% Supported attributes for FONT:
-% ~~~{.txt}
-% COLOR="color"
-% FACE="fontname"
-% POINT-SIZE="value"
-% ~~~
-
-table(table(Attrs,Contents)) -->
-  html_element(table, Attrs, rows(Contents)).
-table(table(font(Contents))) -->
-  html_element(font, [], html_element(table, [], rows(Contents))).
-
-
-%! text(?Contents:list)// .
-
-text(Contents) -->
-  '+'(textitem, Contents, []).
-
-
-%! textitem(?Content)// .
-% Supported attributes for BR:
-% ~~~{.txt}
-% ALIGN="CENTER|LEFT|RIGHT"
-% ~~~
-
-textitem(string(String)) -->
-  html_string(String).
-textitem(entity(Name)) -->
-  html_entity(Name).
-textitem(br(Attrs)) -->
-  html_element(br, Attrs).
-textitem(Compound) -->
-  {var(Compound)}, !,
-  html_element(Name, _, text(Content)),
-  {
-    supported_html_element(Name),
-    Compound =.. [Name,Content]
-  }.
-textitem(Compound) -->
-  {
-    Compound =.. [Name,Content],
-    supported_html_element(Name)
-  },
-  html_element(Name, _, text(Content)).
-
-
-
-% HELPERS
-
-%! supported_html_element(+Name:atom) is semidet.
-%! supported_html_element(-Name:atom) is multi.
-
-supported_html_element(b).
-supported_html_element(font).
-supported_html_element(i).
-supported_html_element(o).
-supported_html_element(s).
-supported_html_element(sub).
-supported_html_element(sup).
-supported_html_element(u).
+% @see http://www.graphviz.org/doc/info/shapes.html#html
+
+gv_html_label --> gv_html_text, !.
+gv_html_label --> gv_html_table, !.
+gv_html_label --> [].
+
+gv_html_like_label --> bracketed(angular, gv_html_label).
+
+gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
+
+gv_html_table --> html_element(table, _, gv_html_rows).
+gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
+
+gv_html_rows --> gv_html_row, gv_html_rows.
+gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
+gv_html_rows --> gv_html_row.
+
+gv_html_row --> html_element(tr, _, gv_html_cells).
+
+gv_html_cell --> html_element(td, _, gv_html_label).
+gv_html_cell --> html_element(td, _, html_element(img, _)).
+
+gv_html_cells --> gv_html_cell, gv_html_cells.
+gv_html_cells --> gv_html_cell.
+gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
+
+gv_html_text --> gv_html_textitem, gv_html_text.
+gv_html_text --> gv_html_textitem.
+
+gv_html_textitem --> html_string, !.
+gv_html_textitem --> html_entity, !.
+gv_html_textitem --> html_element(br, _), !.
+gv_html_textitem --> html_element(font, _, gv_html_text), !.
+gv_html_textitem --> html_element(i, _, gv_html_text), !.
+gv_html_textitem --> html_element(b, _, gv_html_text), !.
+gv_html_textitem --> html_element(u, _, gv_html_text), !.
+gv_html_textitem --> html_element(sub, _, gv_html_text), !.
+gv_html_textitem --> html_element(sup, _, gv_html_text), !.
+
diff --git a/load.pl b/load.pl
index 1681cd0..4b117d1 100644
--- a/load.pl
+++ b/load.pl
@@ -1,13 +1,12 @@
-% Load file for the plGraphViz library.
+% Load file for plGraphViz.
 
-:- dynamic(user:project/3).
-:- multifile(user:project/3).
-   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.').
+:- dynamic(user:prolog/3).
+:- multifile(user:prolog/3).
+   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
 
 :- use_module(load_project).
-:- load_project([
+:- load_project(plGraphViz, [
     plc-'Prolog-Library-Collection',
-    plDcg,
     plHtml
 ]).
 
diff --git a/load_project.pl b/load_project.pl
index e2196b7..5599b5e 100644
--- a/load_project.pl
+++ b/load_project.pl
@@ -1,7 +1,8 @@
 :- module(
   load_project,
   [
-    load_project/1, % +ChildProjects:list(or([atom,pair(atom)]))
+    load_project/2, % +Parent:atom
+                    % +ChildProjects:list(or([atom,pair(atom)]))
     load_subproject/2, % +ParentFileSearchPath:atom
                        % +Child:or([atom,pair(atom)])
     set_data_subdirectory/1 % +ParentDirectory:atom
@@ -16,7 +17,7 @@ Generic code for loading a project:
   * Load the index of subprojects onto the file search path.
 
 @author Wouter Beek
-@version 2014/08/20
+@version 2014/06/14
 */
 
 :- use_module(library(ansi_term)). % Colorized terminal messages.
@@ -29,11 +30,11 @@ Generic code for loading a project:
 
 
 
-load_project(ChildProjects):-
-  parent_alias(ParentFsp),
+load_project(Parent, ChildProjects):-
+  parent_alias(Parent, ParentFsp),
 
   % Entry point.
-  source_file(load_project(_), ThisFile),
+  source_file(load_project(_,_), ThisFile),
   file_directory_name(ThisFile, ThisDir),
   assert(user:file_search_path(ParentFsp, ThisDir)),
   assert(user:file_search_path(project, ThisDir)),
@@ -91,12 +92,11 @@ load_project_index(Fsp):-
 load_project_index(_).
 
 
-%! parent_alias(-ParentFsp:atom) is det.
+%! parent_alias(+Parent:atom, -ParentFsp:atom) is det.
 
-parent_alias(ParentFsp):-
-  user:project(_, _, ParentFsp), !.
-parent_alias(ParentFsp):-
-  user:project(ParentFsp, _).
+parent_alias(Parent, ParentFsp):-
+  user:project(Parent, _, ParentFsp), !.
+parent_alias(Parent, Parent).
 
 
 %! set_data_subdirectory(+ParentDirectory:atom) is det.
@@ -108,8 +108,6 @@ set_data_subdirectory(ParentDir):-
 
 
 
-% Messages
-
 :- multifile(prolog:message//1).
 
 prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -->
diff --git a/plDcg b/plDcg
deleted file mode 160000
index 2cd7321..0000000
--- a/plDcg
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 2cd7321d6c8a84ca23d08670348914c4a8ca6bb0
diff --git a/plHtml b/plHtml
index e3abeed..24fff7b 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit e3abeed4041392013965598145806ee33081f76f
+Subproject commit 24fff7bcf90b6bc4fbf317d504be899dc1b869cb
diff --git a/run.pl b/run.pl
deleted file mode 100644
index 8bba736..0000000
--- a/run.pl
+++ /dev/null
@@ -1,9 +0,0 @@
-% Standalone execution of the plGraphViz library.
-
-:- if(current_prolog_flag(argv, ['--debug'|_])).
-  :- ensure_loaded(debug).
-:- else.
-  :- set_prolog_flag(verbose, silent).
-  :- ensure_loaded(load).
-:- endif.
-
 
```
 
<h2 id="46"> 46: 正在比较变动前 3109362 和变动后 df0ab09 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index b25c15b..7193a38 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1 +1,4 @@
 *~
+*#
+*.db
+data/*
diff --git a/.gitmodules b/.gitmodules
index a63cbff..844b1bd 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,3 +4,6 @@
 [submodule "plHtml"]
 	path = plHtml
 	url = https://github.com/wouterbeek/plHtml.git
+[submodule "plDcg"]
+	path = plDcg
+	url = https://github.com/wouterbeek/plDcg.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index b1d2484..7096ef9 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit b1d2484486ad4876aecc1bf70b2963b12efca341
+Subproject commit 7096ef9749edffe389df6a90d586930c8bf4df70
diff --git a/debug.pl b/debug.pl
new file mode 100644
index 0000000..099cb84
--- /dev/null
+++ b/debug.pl
@@ -0,0 +1,7 @@
+% Loads debug tools for the plGraphViz library.
+
+:- [load].
+
+:- use_module(debug_project).
+:- debug_all_files.
+
diff --git a/debug_project.pl b/debug_project.pl
new file mode 100644
index 0000000..ab61534
--- /dev/null
+++ b/debug_project.pl
@@ -0,0 +1,67 @@
+:- module(
+  debug_project,
+  [
+    debug_all_files/0
+  ]
+).
+
+/** <module> Debug project
+
+Generic code for debugging a project:
+  * Load all subdirectories and Prolog files contained in those directories.
+
+@author Wouter Beek
+@version 2014/10/31
+*/
+
+:- use_module(library(ansi_term)).
+:- use_module(library(apply)).
+
+:- use_module(os(dir_ext)).
+
+% Avoid errors when using gtrace/0 in threads.
+:- initialization(guitracer).
+
+
+
+debug_all_files:-
+  absolute_file_name(project(.), Dir, [access(read),file_type(directory)]),
+  directory_files(
+    Dir,
+    Files1,
+    [
+      file_types([prolog]),
+      include_directories(false),
+      include_self(false),
+      recursive(true)
+    ]
+  ),
+  exclude(do_not_load, Files1, Files2),
+  maplist(use_module0, Files2).
+use_module0(File):-
+  print_message(informational, loading_module(File)),
+  use_module(File).
+
+do_not_load(File1):-
+  file_base_name(File1, File2),
+  file_name_extension(File3, pl, File2),
+  do_not_load0(File3).
+
+do_not_load0(dcg_ascii).
+do_not_load0(dcg_unicode).
+do_not_load0(debug).
+do_not_load0(debug_project).
+do_not_load0(index).
+do_not_load0(load).
+do_not_load0(load_project).
+do_not_load0(rfc2616_basic).
+do_not_load0(run).
+
+
+
+% MESSAGES
+
+:- multifile(prolog:message//1).
+
+prolog:message(loading_module(File)) -->
+  ['[M] ',File].
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 3c7863d..67d419a 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -46,10 +46,11 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2014/06
+@version 2014/06, 2014/11
 */
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
 
@@ -97,7 +98,7 @@ gv_attr_type(viewPort).
 % An *addDouble* is represented by a Prolog float.
 
 addDouble(Float) -->
-  '?'(`+`, []),
+  '?'(plus_sign, []),
   double(Float).
 
 
@@ -106,7 +107,7 @@ addDouble(Float) -->
 % `point(X:float,Y:float,InputOnly:boolean)`.
 
 addPoint(Point) -->
-  '?'(`+`, []),
+  '?'(plus_sign, []),
   point(Point).
 
 
@@ -147,10 +148,10 @@ backwards_compatible(invempty).
 backwards_compatible(open).
 
 
-bool(false) --> `false`.
-bool(false) --> `no`.
-bool(true) --> `true`.
-bool(true) --> `yes`.
+bool(false) --> "false".
+bool(false) --> "no".
+bool(true) --> "true".
+bool(true) --> "yes".
 
 
 %! clusterMode(+ClusterMode:atom)// .
@@ -187,7 +188,7 @@ doubleList([H|T]) -->
   '*'(doubleList1, T, []).
 
 doubleList1(Float) -->
-  `:`,
+  ":",
   double(Float).
 
 
@@ -242,16 +243,16 @@ pagedir('TR').
 
 %! point(+Point:compound)// .
 % A *point* is represented by a compound of the following form:
-% `point(X:float,Y:float,InputOnly:boolean)`.
+% `point(X:float,Y:float,Changeable:boolean)`.
 
-point(point(X,Y,InputOnly)) -->
+point(point(X,Y,Changeable)) -->
   float(X),
-  `,`,
+  ",",
   float(Y),
-  input_only(InputOnly).
+  input_changeable(Changeable).
 
-input_only(false) --> [].
-input_only(true) --> `!`.
+input_changeable(false) --> "".
+input_changeable(true) --> "!".
 
 
 pointList(Points) -->
@@ -292,9 +293,9 @@ rankdir('TB').
 
 
 rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  float(LowerLeftX), `,`,
-  float(LowerLeftY), `,`,
-  float(UpperRightX), `,`,
+  float(LowerLeftX), ",",
+  float(LowerLeftY), ",",
+  float(UpperRightX), ",",
   float(UpperRightY).
 
 
@@ -414,4 +415,3 @@ style(node, wedged).
 
 
 % @tbd viewPort
-
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 1692915..df0922a 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -2,15 +2,17 @@
   gv_attrs,
   [
     gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph])
-              % +Attr1:nvpair
-              % +Attr2:nvpair
+              % +Attribute1:nvpair
+              % -Attribute2:nvpair
   ]
 ).
 
-/** <module> GraphViz attributes v2
+/** <module> GraphViz: Attributes
+
+Support for GraphViz attributes.
 
 @author Wouter Beek
-@version 2014/06
+@version 2014/06, 2014/11
 */
 
 :- use_module(library(apply)).
@@ -54,24 +56,40 @@
 
 
 
+%! gv_attr(
+%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
+%!   +Attribute1:nvpair,
+%!   +Attribute2:nvpair
+%! ) is det.
+% Uses the default value in case Value is uninstantiated.
+% Otherwise, performs a typecheck and converts the given value.
+
 gv_attr(Context, N=V, N=V):-
   var(V), !,
   gv_attr(N, UsedBy, _, V, _, _),
+  % Check validity of context.
   memberchk(Context, UsedBy).
 gv_attr(Context, N=V1, N=V2):-
-  gv_attr(N, UsedBy, Types, _, Minimum, _),
+  gv_attr(N2, UsedBy, Types, _, Minimum, _),
+  % Check validity of context.
   memberchk(Context, UsedBy),
+  % Check validity of value type.
   member(Type, Types),
-  (
-    Type == style
-  ->
-    Dcg =.. [Type,Context,V1]
-  ;
-    Dcg =.. [Type,V1]
+  (   Type == style
+  ->  Dcg =.. [Type,Context,V1]
+  ;   Dcg =.. [Type,V1]
   ),
   once(dcg_phrase(Dcg, V2)),
+  % Check validity of Value w.r.t. minimum value -- if available.
   check_minimum(V1, Minimum).
 
+
+
+% HELPERS
+
+%! check_minimum(+Value:atom, +Minimum:number) is semidet.
+% Trivially succeeds if no minimum value is available for a given attribute.
+
 check_minimum(_, ''):- !.
 check_minimum(V, Min1):-
   atom_number(Min1, Min2),
diff --git a/gv_dot.pl b/gv_dot.pl
index 5f33e5c..bde2962 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +GraphTerm:compound
+    gv_graph//1 % +Gif:compound
   ]
 ).
 
@@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'.
 % We assume that the attribute has already been validated.
 
 gv_attribute(Name=Val) -->
-  gv_id(Name), `=`, gv_id(Val), `;`.
+  gv_id(Name), "=", gv_id(Val), ";".
 
 
 %! gv_attribute_list(
@@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -->
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
 % ~~~
 
-gv_compass_pt('_') --> `_`.
-gv_compass_pt(c) --> `c`.
-gv_compass_pt(e) --> `e`.
-gv_compass_pt(n) --> `n`.
-gv_compass_pt(ne) --> `ne`.
-gv_compass_pt(nw) --> `nw`.
-gv_compass_pt(s) --> `s`.
-gv_compass_pt(se) --> `se`.
-gv_compass_pt(sw) --> `sw`.
-gv_compass_pt(w) --> `w`.
+gv_compass_pt('_') --> "_".
+gv_compass_pt(c) --> "c".
+gv_compass_pt(e) --> "e".
+gv_compass_pt(n) --> "n".
+gv_compass_pt(ne) --> "ne".
+gv_compass_pt(nw) --> "nw".
+gv_compass_pt(s) --> "s".
+gv_compass_pt(se) --> "se".
+gv_compass_pt(sw) --> "sw".
+gv_compass_pt(w) --> "w".
 
 
 %! gv_edge_operator(+Directed:boolean)// .
@@ -83,7 +83,7 @@ gv_compass_pt(w) --> `w`.
 % @arg Directed Whether an edge is directed (operator `->`) or
 %                   undirected (operator `--`).
 
-gv_edge_operator(false) --> !, `--`.
+gv_edge_operator(false) --> !, "--".
 gv_edge_operator(true) --> arrow(right, 2).
 
 
@@ -107,11 +107,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
-  gv_node_id(FromId), ` `,
+  gv_node_id(FromId), " ",
 
-  gv_edge_operator(Directed), ` `,
+  gv_edge_operator(Directed), " ",
 
-  gv_node_id(ToId), ` `,
+  gv_node_id(ToId), " ",
 
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
@@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
   indent(I),
-  gv_kind(Kind), ` `,
+  gv_kind(Kind), " ",
   gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
 
 
-%! gv_graph(+GraphTerm:compound)//
+%! gv_graph(+Gif:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
@@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 % @tbd Assert attributes that are generic with respect to a subgraph.
 % @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
 
-gv_graph(graph(VTerms, ETerms, GAttrs)) -->
-  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
+gv_graph(graph(VTerms,ETerms,GAttrs)) -->
+  gv_graph(graph(VTerms,[],ETerms,GAttrs)).
 
-gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
+gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
   {
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
@@ -194,8 +194,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), ` `,
-  gv_id(GName), ` `,
+  gv_graph_type(Directed), " ",
+  gv_id(GName), " ",
 
   % The body of the DOT file appears between curly braces.
   bracketed(
@@ -240,18 +240,18 @@ gv_graph0(
       (NewVTerms == [], RankedVTerms == [])
     }
   ->
-    ``
+    ""
   ;
     line_feed
   ),
 
   % The list of GraphViz nodes.
   '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
-  ({NewVTerms == []} -> `` ; line_feed),
+  ({NewVTerms == []} -> "" ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
   '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
-  ({RankedVTerms == []} -> `` ; line_feed),
+  ({RankedVTerms == []} -> "" ; line_feed),
 
   {
     findall(
@@ -281,8 +281,8 @@ gv_graph0(
 %! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
-gv_graph_type(false) --> `graph`.
-gv_graph_type(true) --> `digraph`.
+gv_graph_type(false) --> "graph".
+gv_graph_type(true) --> "digraph".
 
 
 %! gv_id(?Atom:atom)// is det.
@@ -305,8 +305,9 @@ gv_graph_type(true) --> `digraph`.
 %      This requires an XML grammar!
 
 % HTML strings (variant 4).
-gv_id(Atom) -->
-  dcg_atom_codes(gv_html_like_label, Atom), !.
+gv_id(Content) -->
+  {compound(Content)}, !,
+  gv_html_like_label, Content).
 % Alpha-numeric strings (variant 1).
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -353,19 +354,19 @@ gv_keyword(Codes):-
 % GraphViz has reserved keywords that cannot be used as identifiers.
 % GraphViz keywords are case-insensitive.
 
-gv_keyword --> `digraph`.
-gv_keyword --> `edge`.
-gv_keyword --> `graph`.
-gv_keyword --> `node`.
-gv_keyword --> `strict`.
-gv_keyword --> `subgraph`.
+gv_keyword --> "digraph".
+gv_keyword --> "edge".
+gv_keyword --> "graph".
+gv_keyword --> "node".
+gv_keyword --> "strict".
+gv_keyword --> "subgraph".
 
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(edge) --> `edge`.
-gv_kind(graph) --> `graph`.
-gv_kind(node) --> `node`.
+gv_kind(edge) --> "edge".
+gv_kind(graph) --> "graph".
+gv_kind(node) --> "node".
 
 
 %! gv_node_id(+NodeId:atom)// .
@@ -392,7 +393,7 @@ gv_node_id(Id) -->
 
 gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
   indent(I),
-  gv_node_id(Id), ` `,
+  gv_node_id(Id), " ",
   gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
 
 
@@ -403,23 +404,23 @@ gv_port -->
   gv_port_angle,
   '?'(gv_port_location, []).
 gv_port -->
-  `:`,
+  ":",
   gv_compass_pt(_).
 
 gv_port_angle -->
-  `@`,
+  "@",
   gv_id(_).
 
 gv_port_location -->
-  `:`,
+  ":",
   gv_id(_).
 gv_port_location -->
-  `:`,
+  ":",
   bracketed(
     round,
     (
       gv_id(_),
-      `,`,
+      ",",
       gv_id(_)
     )
   ).
@@ -436,7 +437,7 @@ gv_quoted_string([92,34|T]) --> !,
   gv_quoted_string(T).
 % Add the backslash escape character.
 gv_quoted_string([34|T]) --> !,
-  `\\\"`,
+  "\\\"",
   gv_quoted_string(T).
 % All other characters are allowed without escaping.
 gv_quoted_string([H|T]) -->
@@ -455,7 +456,7 @@ gv_ranked_node_collection(
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), `;`, line_feed,
+    indent(NewI), gv_attribute(rank=same), ";", line_feed,
 
     '*'(
       gv_node_statement(NewI, GraphAttrs),
@@ -475,7 +476,7 @@ gv_ranked_node_collection(
 % This only applies to directed graphs.
 
 gv_strict(false) --> [].
-gv_strict(true) --> `strict `.
+gv_strict(true) --> "strict ".
 
 
 
diff --git a/gv_html.pl b/gv_html.pl
index 3f0b08b..a308ac7 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -1,60 +1,223 @@
 :- module(
   gv_html,
   [
-    gv_html_like_label//1 % +Codes:list(code)
+    gv_html_like_label//1 % +Content:compound
   ]
 ).
 
-/** <module> GraphViz HTML
+/** <module> GraphViz: HTML-like labels
+
+Grammar taken from the GraphViz Web site:
+
+~~~{.txt}
+label 	: 	text
+	| 	table
+text 	: 	textitem
+	| 	text textitem
+textitem 	: 	string
+	| 	<BR/>
+	| 	<FONT> text </FONT>
+	| 	<I> text </I>
+	| 	<B> text </B>
+	| 	<U> text </U>
+	| 	<O> text </O>
+	| 	<SUB> text </SUB>
+	| 	<SUP> text </SUP>
+	| 	<S> text </S>
+table 	: 	[ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
+rows 	: 	row
+	| 	rows row
+	| 	rows <HR/> row
+row 	: 	<TR> cells </TR>
+cells 	: 	cell
+	| 	cells cell
+	| 	cells <VR/> cell
+cell 	: 	<TD> label </TD>
+	| 	<TD> <IMG/> </TD>
+~~~
 
 @author Wouter Beek
-@version 2013/07, 2013/09, 2014/03-2014/06
+@see http://www.graphviz.org/content/node-shapes#html
+@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
 */
 
+:- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
 
 
-%! gv_html_label(+Codes:list(code))// .
+%! gv_html_like_label(?Content:compound)// .
+
+gv_html_like_label(Content) -->
+  bracketed(angular, label(Content)).
+
+
+%! cell(?Contents:compound)// .
+% Supported attributes for TD:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT|TEXT"
+% BALIGN="CENTER|LEFT|RIGHT"
+% BGCOLOR="color"
+% BORDER="value"
+% CELLPADDING="value"
+% CELLSPACING="value"
+% COLOR="color"
+% COLSPAN="value"
+% FIXEDSIZE="FALSE|TRUE"
+% GRADIENTANGLE="value"
+% HEIGHT="value"
+% HREF="value"
+% ID="value"
+% PORT="portName"
+% ROWSPAN="value"
+% SIDES="value"
+% STYLE="value"
+% TARGET="value"
+% TITLE="value"
+% TOOLTIP="value"
+% VALIGN="MIDDLE|BOTTOM|TOP"
+% WIDTH="value"
+% ~~~
 %
-% @see http://www.graphviz.org/doc/info/shapes.html#html
-
-gv_html_label --> gv_html_text, !.
-gv_html_label --> gv_html_table, !.
-gv_html_label --> [].
-
-gv_html_like_label --> bracketed(angular, gv_html_label).
-
-gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
-
-gv_html_table --> html_element(table, _, gv_html_rows).
-gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
-
-gv_html_rows --> gv_html_row, gv_html_rows.
-gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
-gv_html_rows --> gv_html_row.
-
-gv_html_row --> html_element(tr, _, gv_html_cells).
-
-gv_html_cell --> html_element(td, _, gv_html_label).
-gv_html_cell --> html_element(td, _, html_element(img, _)).
-
-gv_html_cells --> gv_html_cell, gv_html_cells.
-gv_html_cells --> gv_html_cell.
-gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
-
-gv_html_text --> gv_html_textitem, gv_html_text.
-gv_html_text --> gv_html_textitem.
-
-gv_html_textitem --> html_string, !.
-gv_html_textitem --> html_entity, !.
-gv_html_textitem --> html_element(br, _), !.
-gv_html_textitem --> html_element(font, _, gv_html_text), !.
-gv_html_textitem --> html_element(i, _, gv_html_text), !.
-gv_html_textitem --> html_element(b, _, gv_html_text), !.
-gv_html_textitem --> html_element(u, _, gv_html_text), !.
-gv_html_textitem --> html_element(sub, _, gv_html_text), !.
-gv_html_textitem --> html_element(sup, _, gv_html_text), !.
-
+% Supported attributes for IMG:
+% ~~~{.txt}
+% SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
+% SRC="value"
+% ~~~
+
+cell(td(Contents)) -->
+  html_element(td, [], label(Contents)).
+cell(td(img)) -->
+  html_element(td, [], html_element(img)).
+
+
+%! cells(?Contents:list(compound))// .
+
+cells([H|T]) -->
+  cell(H),
+  cells(T).
+cells([H,vr|T]) -->
+  cell(H),
+  html_element(vr),
+  cells(T).
+cells([H]) -->
+  cell(H).
+
+
+%! label(?Content:compound)// .
+% GraphViz HTML-like label.
+
+label(Content) -->
+  text(Content).
+label(Content) -->
+  table(Content).
+
+
+%! row(?Contents:compound)// .
+
+row(tr(Contents)) -->
+  html_element(tr, [], cell(Contents)).
+
+
+%! rows(?Contents:list)// .
+
+rows([H|T]) -->
+  row(H),
+  rows.
+rows([H,hr|T]) -->
+  row(H),
+  html_element(hr),
+  rows(T).
+rows([H]) -->
+  row(H).
+
+
+%! table(?Contents:compound)// .
+% Supported attributes for TABLE:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT"
+% BGCOLOR="color"
+% BORDER="value"
+% CELLBORDER="value"
+% CELLPADDING="value"
+% CELLSPACING="value"
+% COLOR="color"
+% COLUMNS="value"
+% FIXEDSIZE="FALSE|TRUE"
+% GRADIENTANGLE="value"
+% HEIGHT="value"
+% HREF="value"
+% ID="value"
+% PORT="portName"
+% ROWS="value"
+% SIDES="value"
+% STYLE="value"
+% TARGET="value"
+% TITLE="value"
+% TOOLTIP="value"
+% VALIGN="MIDDLE|BOTTOM|TOP"
+% WIDTH="value"
+% ~~~
+%
+% Supported attributes for FONT:
+% ~~~{.txt}
+% COLOR="color"
+% FACE="fontname"
+% POINT-SIZE="value"
+% ~~~
+
+table(table(Attrs,Contents)) -->
+  html_element(table, Attrs, rows(Contents)).
+table(table(font(Contents))) -->
+  html_element(font, [], html_element(table, [], rows(Contents))).
+
+
+%! text(?Contents:list)// .
+
+text(Contents) -->
+  '+'(textitem, Contents, []).
+
+
+%! textitem(?Content)// .
+% Supported attributes for BR:
+% ~~~{.txt}
+% ALIGN="CENTER|LEFT|RIGHT"
+% ~~~
+
+textitem(string(String)) -->
+  html_string(String).
+textitem(entity(Name)) -->
+  html_entity(Name).
+textitem(br(Attrs)) -->
+  html_element(br, Attrs).
+textitem(Compound) -->
+  {var(Compound)}, !,
+  html_element(Name, _, text(Content)),
+  {
+    supported_html_element(Name),
+    Compound =.. [Name,Content]
+  }.
+textitem(Compound) -->
+  {
+    Compound =.. [Name,Content],
+    supported_html_element(Name)
+  },
+  html_element(Name, _, text(Content)).
+
+
+
+% HELPERS
+
+%! supported_html_element(+Name:atom) is semidet.
+%! supported_html_element(-Name:atom) is multi.
+
+supported_html_element(b).
+supported_html_element(font).
+supported_html_element(i).
+supported_html_element(o).
+supported_html_element(s).
+supported_html_element(sub).
+supported_html_element(sup).
+supported_html_element(u).
diff --git a/load.pl b/load.pl
index 4b117d1..1681cd0 100644
--- a/load.pl
+++ b/load.pl
@@ -1,12 +1,13 @@
-% Load file for plGraphViz.
+% Load file for the plGraphViz library.
 
-:- dynamic(user:prolog/3).
-:- multifile(user:prolog/3).
-   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
+:- dynamic(user:project/3).
+:- multifile(user:project/3).
+   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.').
 
 :- use_module(load_project).
-:- load_project(plGraphViz, [
+:- load_project([
     plc-'Prolog-Library-Collection',
+    plDcg,
     plHtml
 ]).
 
diff --git a/load_project.pl b/load_project.pl
index 5599b5e..e2196b7 100644
--- a/load_project.pl
+++ b/load_project.pl
@@ -1,8 +1,7 @@
 :- module(
   load_project,
   [
-    load_project/2, % +Parent:atom
-                    % +ChildProjects:list(or([atom,pair(atom)]))
+    load_project/1, % +ChildProjects:list(or([atom,pair(atom)]))
     load_subproject/2, % +ParentFileSearchPath:atom
                        % +Child:or([atom,pair(atom)])
     set_data_subdirectory/1 % +ParentDirectory:atom
@@ -17,7 +16,7 @@ Generic code for loading a project:
   * Load the index of subprojects onto the file search path.
 
 @author Wouter Beek
-@version 2014/06/14
+@version 2014/08/20
 */
 
 :- use_module(library(ansi_term)). % Colorized terminal messages.
@@ -30,11 +29,11 @@ Generic code for loading a project:
 
 
 
-load_project(Parent, ChildProjects):-
-  parent_alias(Parent, ParentFsp),
+load_project(ChildProjects):-
+  parent_alias(ParentFsp),
 
   % Entry point.
-  source_file(load_project(_,_), ThisFile),
+  source_file(load_project(_), ThisFile),
   file_directory_name(ThisFile, ThisDir),
   assert(user:file_search_path(ParentFsp, ThisDir)),
   assert(user:file_search_path(project, ThisDir)),
@@ -92,11 +91,12 @@ load_project_index(Fsp):-
 load_project_index(_).
 
 
-%! parent_alias(+Parent:atom, -ParentFsp:atom) is det.
+%! parent_alias(-ParentFsp:atom) is det.
 
-parent_alias(Parent, ParentFsp):-
-  user:project(Parent, _, ParentFsp), !.
-parent_alias(Parent, Parent).
+parent_alias(ParentFsp):-
+  user:project(_, _, ParentFsp), !.
+parent_alias(ParentFsp):-
+  user:project(ParentFsp, _).
 
 
 %! set_data_subdirectory(+ParentDirectory:atom) is det.
@@ -108,6 +108,8 @@ set_data_subdirectory(ParentDir):-
 
 
 
+% Messages
+
 :- multifile(prolog:message//1).
 
 prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -->
diff --git a/plDcg b/plDcg
new file mode 160000
index 0000000..2cd7321
--- /dev/null
+++ b/plDcg
@@ -0,0 +1 @@
+Subproject commit 2cd7321d6c8a84ca23d08670348914c4a8ca6bb0
diff --git a/plHtml b/plHtml
index 24fff7b..e3abeed 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 24fff7bcf90b6bc4fbf317d504be899dc1b869cb
+Subproject commit e3abeed4041392013965598145806ee33081f76f
diff --git a/run.pl b/run.pl
new file mode 100644
index 0000000..8bba736
--- /dev/null
+++ b/run.pl
@@ -0,0 +1,9 @@
+% Standalone execution of the plGraphViz library.
+
+:- if(current_prolog_flag(argv, ['--debug'|_])).
+  :- ensure_loaded(debug).
+:- else.
+  :- set_prolog_flag(verbose, silent).
+  :- ensure_loaded(load).
+:- endif.
+
 
```
 
<h2 id="47"> 47: 正在比较变动前 df0ab09 和变动后 73e976b </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitmodules b/.gitmodules
index 844b1bd..ba7e7a9 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -7,3 +7,12 @@
 [submodule "plDcg"]
 	path = plDcg
 	url = https://github.com/wouterbeek/plDcg.git
+[submodule "plSvg"]
+	path = plSvg
+	url = https://github.com/wouterbeek/plSvg.git
+[submodule "plHttp"]
+	path = plHttp
+	url = https://github.com/wouterbeek/plHttp.git
+[submodule "plUri"]
+	path = plUri
+	url = https://github.com/wouterbeek/plUri.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 7096ef9..130d471 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 7096ef9749edffe389df6a90d586930c8bf4df70
+Subproject commit 130d471fdafe35858114ff8f9cde3acf66380d99
diff --git a/gv_attrs.pl b/gv_attrs.pl
index df0922a..f0c1c5d 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -21,6 +21,7 @@ Support for GraphViz attributes.
 
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
+:- use_module(os(file_gnu)).
 
 :- use_module(plDcg(dcg_content)).
 :- use_module(plDcg(dcg_generics)).
diff --git a/gv_color.pl b/gv_color.pl
index c5fccd4..4176444 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -17,12 +17,13 @@
 */
 
 :- use_module(library(apply)).
-:- use_module(library(lists)).
+:- use_module(library(lists), except([delete/3])).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
+:- use_module(os(file_gnu)).
 
 :- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_cardinal)).
diff --git a/gv_dot.pl b/gv_dot.pl
index bde2962..0cdc571 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -19,7 +19,7 @@ In GraphViz vertices are called 'nodes'.
 */
 
 :- use_module(library(apply)).
-:- use_module(library(lists)).
+:- use_module(library(lists), except([delete/3])).
 :- use_module(library(ordsets)).
 
 :- use_module(plDcg(dcg_abnf)).
diff --git a/load.pl b/load.pl
index 1681cd0..67dfe22 100644
--- a/load.pl
+++ b/load.pl
@@ -1,13 +1,16 @@
 % Load file for the plGraphViz library.
 
-:- dynamic(user:project/3).
-:- multifile(user:project/3).
+:- dynamic(user:project/2).
+:- multifile(user:project/2).
    user:project(plGraphViz, 'GraphViz support for SWI-Prolog.').
 
 :- use_module(load_project).
 :- load_project([
     plc-'Prolog-Library-Collection',
     plDcg,
-    plHtml
+    plHtml,
+    plHttp,
+    plSvg,
+    plUri
 ]).
 
diff --git a/plDcg b/plDcg
index 2cd7321..3689d78 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit 2cd7321d6c8a84ca23d08670348914c4a8ca6bb0
+Subproject commit 3689d7838cef5ed6e8156e3c8ec39eb7b5f25b78
diff --git a/plHtml b/plHtml
index e3abeed..27b7b71 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit e3abeed4041392013965598145806ee33081f76f
+Subproject commit 27b7b715694daabdce26c56beb799e8d949a3ff5
diff --git a/plHttp b/plHttp
new file mode 160000
index 0000000..933ba4d
--- /dev/null
+++ b/plHttp
@@ -0,0 +1 @@
+Subproject commit 933ba4d4c906128258ef192ede6003a101b81590
diff --git a/plSvg b/plSvg
new file mode 160000
index 0000000..07ba12c
--- /dev/null
+++ b/plSvg
@@ -0,0 +1 @@
+Subproject commit 07ba12c2c373fa41e1580b8c90ee17036680fce8
diff --git a/plUri b/plUri
new file mode 160000
index 0000000..cf5d6e3
--- /dev/null
+++ b/plUri
@@ -0,0 +1 @@
+Subproject commit cf5d6e365ed7bfad0369691554c9895441ae334d
 
```
 
<h2 id="48"> 48: 正在比较变动前 73e976b 和变动后 090c25d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 130d471..1630ca0 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 130d471fdafe35858114ff8f9cde3acf66380d99
+Subproject commit 1630ca0c9622cbe3f9561de21d5e851baa333ca9
diff --git a/plDcg b/plDcg
index 3689d78..df62444 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit 3689d7838cef5ed6e8156e3c8ec39eb7b5f25b78
+Subproject commit df62444ffa0b58de4c7faf9b5630e58a18ee18ec
diff --git a/plHtml b/plHtml
index 27b7b71..429b725 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 27b7b715694daabdce26c56beb799e8d949a3ff5
+Subproject commit 429b7256680588790310c3b6acf81da31d3fc3d2
diff --git a/plHttp b/plHttp
index 933ba4d..faa8215 160000
--- a/plHttp
+++ b/plHttp
@@ -1 +1 @@
-Subproject commit 933ba4d4c906128258ef192ede6003a101b81590
+Subproject commit faa821576b6ab706060f6e8eab2a8a9210b8c842
diff --git a/plUri b/plUri
index cf5d6e3..68dba15 160000
--- a/plUri
+++ b/plUri
@@ -1 +1 @@
-Subproject commit cf5d6e365ed7bfad0369691554c9895441ae334d
+Subproject commit 68dba15c5cf7bb309165d2c9439c02bd22cfba95
 
```
 
<h2 id="49"> 49: 正在比较变动前 090c25d 和变动后 daed8bf </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitmodules b/.gitmodules
index ba7e7a9..844b1bd 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -7,12 +7,3 @@
 [submodule "plDcg"]
 	path = plDcg
 	url = https://github.com/wouterbeek/plDcg.git
-[submodule "plSvg"]
-	path = plSvg
-	url = https://github.com/wouterbeek/plSvg.git
-[submodule "plHttp"]
-	path = plHttp
-	url = https://github.com/wouterbeek/plHttp.git
-[submodule "plUri"]
-	path = plUri
-	url = https://github.com/wouterbeek/plUri.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 1630ca0..18fe981 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 1630ca0c9622cbe3f9561de21d5e851baa333ca9
+Subproject commit 18fe981c492d67be3670406e51602c23b97a6052
diff --git a/load_project.pl b/load_project.pl
index e2196b7..3f0ebef 100644
--- a/load_project.pl
+++ b/load_project.pl
@@ -16,11 +16,12 @@ Generic code for loading a project:
   * Load the index of subprojects onto the file search path.
 
 @author Wouter Beek
-@version 2014/08/20
+@version 2014/11/10
 */
 
 :- use_module(library(ansi_term)). % Colorized terminal messages.
 :- use_module(library(apply)).
+:- use_module(library(pldoc)).
 
 :- dynamic(user:project/2).
 :- multifile(user:project/2).
@@ -30,6 +31,8 @@ Generic code for loading a project:
 
 
 load_project(ChildProjects):-
+  doc_server(9999),
+  
   parent_alias(ParentFsp),
 
   % Entry point.
diff --git a/plDcg b/plDcg
index df62444..19020db 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit df62444ffa0b58de4c7faf9b5630e58a18ee18ec
+Subproject commit 19020db8046bf96d54938e6ba02d65dc2b6f8b50
diff --git a/plHtml b/plHtml
index 429b725..2d6bb5a 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 429b7256680588790310c3b6acf81da31d3fc3d2
+Subproject commit 2d6bb5a083f184570042eee68ddb8780caddb246
diff --git a/plHttp b/plHttp
deleted file mode 160000
index faa8215..0000000
--- a/plHttp
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit faa821576b6ab706060f6e8eab2a8a9210b8c842
diff --git a/plSvg b/plSvg
deleted file mode 160000
index 07ba12c..0000000
--- a/plSvg
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 07ba12c2c373fa41e1580b8c90ee17036680fce8
diff --git a/plUri b/plUri
deleted file mode 160000
index 68dba15..0000000
--- a/plUri
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 68dba15c5cf7bb309165d2c9439c02bd22cfba95
 
```
 
<h2 id="50"> 50: 正在比较变动前 daed8bf 和变动后 528b9af </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitmodules b/.gitmodules
index 844b1bd..6c22435 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -7,3 +7,6 @@
 [submodule "plDcg"]
 	path = plDcg
 	url = https://github.com/wouterbeek/plDcg.git
+[submodule "plUri"]
+	path = plUri
+	url = https://github.com/wouterbeek/plUri.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 18fe981..ec4c91a 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 18fe981c492d67be3670406e51602c23b97a6052
+Subproject commit ec4c91a00704c0c8d9b4ed747cb9b1648355559b
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 67d419a..30761bb 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -51,6 +51,7 @@
 
 :- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index f0c1c5d..649ef9c 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -23,6 +23,7 @@ Support for GraphViz attributes.
 :- use_module(os(file_ext)).
 :- use_module(os(file_gnu)).
 
+:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_content)).
 :- use_module(plDcg(dcg_generics)).
 
@@ -71,7 +72,7 @@ gv_attr(Context, N=V, N=V):-
   % Check validity of context.
   memberchk(Context, UsedBy).
 gv_attr(Context, N=V1, N=V2):-
-  gv_attr(N2, UsedBy, Types, _, Minimum, _),
+  gv_attr(N, UsedBy, Types, _, Minimum, _),
   % Check validity of context.
   memberchk(Context, UsedBy),
   % Check validity of value type.
diff --git a/gv_color.pl b/gv_color.pl
index 4176444..61d26df 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -26,6 +26,7 @@
 :- use_module(os(file_gnu)).
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
 :- use_module(plDcg_rfc(rfc2616_basic)).
diff --git a/gv_dot.pl b/gv_dot.pl
index 0cdc571..e67c469 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -23,10 +23,13 @@ In GraphViz vertices are called 'nodes'.
 :- use_module(library(ordsets)).
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_arrow)).
 :- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_bracket)).
 :- use_module(plDcg(dcg_content)).
 :- use_module(plDcg(dcg_generics)).
 :- use_module(plDcg(dcg_meta)).
+:- use_module(plDcg(dcg_quote)).
 
 :- use_module(plGraphViz(gv_attrs)).
 :- use_module(plGraphViz(gv_html)).
@@ -47,10 +50,10 @@ gv_attribute(Name=Val) -->
 %!   +GraphAttributes:list(nvpair),
 %!   +Attributes:list(nvpair)
 %! )// .
-% ~~~{.abnf}
+% ```abnf
 % attr_list = "[" [a_list] "]" [attr_list]
 % a_list = ID "=" ID [","] [a_list]
-% ~~~
+% ```
 
 % Attributes occur between square brackets.
 gv_attribute_list(Context, _, Attrs1) -->
@@ -59,9 +62,9 @@ gv_attribute_list(Context, _, Attrs1) -->
 
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
-% ~~~
+% ```
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
-% ~~~
+% ```
 
 gv_compass_pt('_') --> "_".
 gv_compass_pt(c) --> "c".
@@ -133,9 +136,9 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 % @arg GraphAttributes A list of name-value pairs.
 % @arg CategoryAttributes A list of name-value pairs.
 %
-% ~~~
+% ```
 % attr_stmt = (graph / node / edge) attr_list
-% ~~~
+% ```
 
 gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
@@ -156,19 +159,19 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 %      they are ignored in the input file.
 %      Only in combinattion with directionality `directed`.
 %
-% ~~~{.abnf}
+% ```abnf
 % graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
-% ~~~
+% ```
 %
 % `GraphTerm` is a compound term of the following form:
-% ~~~{.pl}
+% ```prolog
 % graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
-% ~~~
+% ```
 %
 % `RankedVertexTerms` is a list of compound terms of the following form:
-% ~~~{.pl}
+% ```prolog
 % rank(RankNode,ContentNodes)
-% ~~~
+% ```
 %
 % @tbd Add support for subgraphs (arbitrary nesting).
 % @tbd Add support for escape strings:
@@ -307,7 +310,7 @@ gv_graph_type(true) --> "digraph".
 % HTML strings (variant 4).
 gv_id(Content) -->
   {compound(Content)}, !,
-  gv_html_like_label, Content).
+  gv_html_like_label(Content).
 % Alpha-numeric strings (variant 1).
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -331,14 +334,16 @@ gv_id(Atom) -->
 % Double-quoted strings (variant 3).
 % The quotes are not in the given atom. They are written anyway.
 gv_id(Atom) -->
-  quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !.
+  quoted(dcg_atom_codes(gv_quoted_string, Atom)), !.
 
-gv_id_first(X) --> ascii_letter(X).
+gv_id_first(X) --> letter(X).
 gv_id_first(X) --> underscore(X).
 
 gv_id_rest([]) --> [].
 gv_id_rest([H|T]) -->
-  (ascii_alpha_numeric(H) ; underscore(H)),
+  (   alpha_numeric(H)
+  ;   underscore(H)
+  ),
   gv_id_rest(T).
 
 
@@ -463,7 +468,7 @@ gv_ranked_node_collection(
       [Rank_V_Term|Content_V_Terms],
       []
     ),
-    
+
     % We want to indent the closing curly brace.
     indent(I)
   )),
diff --git a/gv_file.pl b/gv_file.pl
index 789bd56..704e2d4 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -9,9 +9,6 @@
     gif_to_gv_file/3, % +GraphInterchangeFormat:compound
                       % ?ToFile:atom
                       % +Options:list(nvpair)
-    gif_to_svg_dom/3, % +GraphInterchangeFormat:compound
-                      % -SvgDom:list(compound)
-                      % +Options:list(nvpair)
     open_dot/1 % +File:file
   ]
 ).
@@ -35,7 +32,6 @@ and GraphViz output files or SVG DOM structures.
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
 :- use_module(os(run_ext)).
-:- use_module(svg(svg_file)).
 
 :- use_module(plGraphViz(gv_dot)).
 
@@ -175,20 +171,6 @@ gif_to_gv_file(Gif, ToFile, Options):-
   codes_to_gv_file(Codes, ToFile, Options).
 
 
-%! gif_to_svg_dom(
-%!   +GraphInterchangeFormat:compound,
-%!   -SvgDom:list(compound),
-%!   +Options:list(nvpair)
-%! ) is det.
-
-gif_to_svg_dom(Gif, SvgDom, Options1):-
-  % Make sure the file type of the output file is SvgDom.
-  merge_options([to_file_type=svg], Options1, Options2),
-  gif_to_gv_file(Gif, ToFile, Options2),
-  file_to_svg(ToFile, SvgDom),
-  delete_file(ToFile).
-
-
 %! open_dot(+File:atom) is det.
 % Opens the given DOT file.
 %
diff --git a/gv_html.pl b/gv_html.pl
index a308ac7..08306f0 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -9,32 +9,32 @@
 
 Grammar taken from the GraphViz Web site:
 
-~~~{.txt}
-label 	: 	text
-	| 	table
-text 	: 	textitem
-	| 	text textitem
-textitem 	: 	string
-	| 	<BR/>
-	| 	<FONT> text </FONT>
-	| 	<I> text </I>
-	| 	<B> text </B>
-	| 	<U> text </U>
-	| 	<O> text </O>
-	| 	<SUB> text </SUB>
-	| 	<SUP> text </SUP>
-	| 	<S> text </S>
-table 	: 	[ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
-rows 	: 	row
-	| 	rows row
-	| 	rows <HR/> row
-row 	: 	<TR> cells </TR>
-cells 	: 	cell
-	| 	cells cell
-	| 	cells <VR/> cell
-cell 	: 	<TD> label </TD>
-	| 	<TD> <IMG/> </TD>
-~~~
+```
+label :   text
+        | table
+text :   textitem
+       | text textitem
+textitem :   string
+           | <BR/>
+           | <FONT> text </FONT>
+           | <I> text </I>
+           | <B> text </B>
+           | <U> text </U>
+           | <O> text </O>
+           | <SUB> text </SUB>
+           | <SUP> text </SUP>
+           | <S> text </S>
+table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
+rows :   row
+       | rows row
+       | rows <HR/> row
+row: <TR> cells </TR>
+cells :   cell
+        | cells cell
+        | cells <VR/> cell
+cell:   <TD> label </TD>
+      | <TD> <IMG/> </TD>
+```
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/node-shapes#html
@@ -42,6 +42,7 @@ cell 	: 	<TD> label </TD>
 */
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_bracket)).
 :- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
@@ -56,7 +57,7 @@ gv_html_like_label(Content) -->
 
 %! cell(?Contents:compound)// .
 % Supported attributes for TD:
-% ~~~{.txt}
+% ```
 % ALIGN="CENTER|LEFT|RIGHT|TEXT"
 % BALIGN="CENTER|LEFT|RIGHT"
 % BGCOLOR="color"
@@ -79,13 +80,13 @@ gv_html_like_label(Content) -->
 % TOOLTIP="value"
 % VALIGN="MIDDLE|BOTTOM|TOP"
 % WIDTH="value"
-% ~~~
+% ```
 %
 % Supported attributes for IMG:
-% ~~~{.txt}
+% ```
 % SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
 % SRC="value"
-% ~~~
+% ```
 
 cell(td(Contents)) -->
   html_element(td, [], label(Contents)).
@@ -125,7 +126,7 @@ row(tr(Contents)) -->
 
 rows([H|T]) -->
   row(H),
-  rows.
+  rows(T).
 rows([H,hr|T]) -->
   row(H),
   html_element(hr),
@@ -136,7 +137,7 @@ rows([H]) -->
 
 %! table(?Contents:compound)// .
 % Supported attributes for TABLE:
-% ~~~{.txt}
+% ```
 % ALIGN="CENTER|LEFT|RIGHT"
 % BGCOLOR="color"
 % BORDER="value"
@@ -159,14 +160,14 @@ rows([H]) -->
 % TOOLTIP="value"
 % VALIGN="MIDDLE|BOTTOM|TOP"
 % WIDTH="value"
-% ~~~
+% ```
 %
 % Supported attributes for FONT:
-% ~~~{.txt}
+% ```
 % COLOR="color"
 % FACE="fontname"
 % POINT-SIZE="value"
-% ~~~
+% ```
 
 table(table(Attrs,Contents)) -->
   html_element(table, Attrs, rows(Contents)).
@@ -182,9 +183,9 @@ text(Contents) -->
 
 %! textitem(?Content)// .
 % Supported attributes for BR:
-% ~~~{.txt}
+% ```
 % ALIGN="CENTER|LEFT|RIGHT"
-% ~~~
+% ```
 
 textitem(string(String)) -->
   html_string(String).
diff --git a/gv_numeral.pl b/gv_numeral.pl
index 7870eb1..c115372 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -14,59 +14,67 @@
 :- use_module(math(math_ext)).
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_cardinal)).
 
 
 
 %! gv_numeral(?Value:number)// .
-% ~~~{.bnf}
+%
+% # Syntax
+%
+% ```bnf
 % ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
-% ~~~
+% ```
+%
+% ## Generation
+%
+% In the generative case, three notations are allowed (also see below):
+%   1. (non-zero integer-part)
+%   2. (decimal-separator) (non-zero fractional)
+%   3. (non-zero integer-part) (decimal-separator) (non-zero fractional)
+%
+% The following notations are explicitly excluded due to verbosity:
+%   - (non-zero integer-part) (decimal-separator)
+%   - (non-zero integer-part) (decimal-separator) (zero fractional)
+%   - (zero integer-part) (decimal-separator) (non-zero fractional)
+%
+% The following notations are also excluded, but since they violate
+%  well-formedness:
+%   - (non-zero integer-part) (non-zero fractional)
+%   - (decimal-separator)
 
 gv_numeral(N) -->
-  {nonvar(N)},
-  {number_sign_parts(N, Sign, Abs)},
-  ({Sign =:= -1} -> `-` ; ``),
-  gv_numeral_abs(Abs).
+  {var(N)}, !,
+  sign(Sign),
+  (   ".",
+      '+'(decimal_digit, Fractional, [convert1(weights_decimal)]),
+      {IntegerPart = 0}
+  ;   '+'(decimal_digit, IntegerPart, [convert1(weights_decimal)]),
+      (   ".",
+          '*'(decimal_digit, Fractional, [convert1(weights_decimal)])
+      ;   {Fractional = 0}
+      )
+  ),
+  {   number_integer_parts(UnsignedN, IntegerPart, Fractional),
+      N is copysign(UnsignedN, Sign)
+  }.
 gv_numeral(N) -->
-  {var(N)},
-  'sign?'(Sign),
-  gv_numeral_abs(Abs),
-  {number_sign_parts(N, Sign, Abs)}.
-
-
-gv_numeral_abs(N) -->
-  {nonvar(N)},
-  {number_integer_parts(N, N1, N2)},
-  (
-    {N2 =:= 0}
-  ->
-    integer(N1)
-  ;
-    {N1 =:= 0}
-  ->
-    `.`,
-    integer(N2)
-  ;
-    integer(N1),
-    '?'((`.`, 'integer?'(N2)), [])
+  {number_sign_parts(N, Sign, UnsignedN)},
+  sign(Sign),
+  {number_integer_parts(UnsignedN, IntegerPart, Fractional)},
+  (   % [1] The fractional is zero, so only write the integer part
+      %     and do not write the decimal separator.
+      {Fractional =:= 0}
+  ->  integer(IntegerPart)
+  ;   % [2] The integer part is zero, so only write the fractional part,
+      %     preceded by the decimal separator.
+      {IntegerPart =:= 0}
+  ->  ".",
+      integer(Fractional)
+  ;   % [3] Both the integer part and the fractional are non-zero,
+      %     so write both of them, with the decimal separator in-between.
+      integer(IntegerPart),
+      ".",
+      integer(Fractional)
   ).
-gv_numeral_abs(N) -->
-  {var(N)},
-  (
-    `.`,
-    integer(N2)
-  ->
-    {N1 = 0}
-  ;
-    integer(N1),
-    (
-      `.`
-    ->
-      'integer?'(N2)
-    ;
-      {N2 = 0}
-    )
-  ),
-  {number_integer_parts(N, N1, N2)}.
-
diff --git a/load.pl b/load.pl
index 67dfe22..5cec32c 100644
--- a/load.pl
+++ b/load.pl
@@ -9,8 +9,6 @@
     plc-'Prolog-Library-Collection',
     plDcg,
     plHtml,
-    plHttp,
-    plSvg,
     plUri
 ]).
 
diff --git a/plDcg b/plDcg
index 19020db..96e2615 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit 19020db8046bf96d54938e6ba02d65dc2b6f8b50
+Subproject commit 96e261537773270a43d1ff4346273820282f21fb
diff --git a/plHtml b/plHtml
index 2d6bb5a..a7b736f 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 2d6bb5a083f184570042eee68ddb8780caddb246
+Subproject commit a7b736fdf7c435f825193bbc54500a302b0bc4b1
diff --git a/plUri b/plUri
new file mode 160000
index 0000000..59f582c
--- /dev/null
+++ b/plUri
@@ -0,0 +1 @@
+Subproject commit 59f582c68cebc221f964ccb9805a869d05cb7856
 
```
 
<h2 id="51"> 51: 正在比较变动前 528b9af 和变动后 e594ae6 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_color.pl b/gv_color.pl
index 61d26df..da34c1a 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -13,7 +13,7 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2014/06, 2014/10
+@version 2014/06, 2014/10-2014/11
 */
 
 :- use_module(library(apply)).
@@ -51,10 +51,10 @@
 %   3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))`
 
 color(rgb(Red,Green,Blue)) --> !,
-  `#`,
+  "#",
   '#'(3, hex_color, [Red,Green,Blue], []).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
-  `#`,
+  "#",
   '#'(4, hex_color, [Red,Green,Blue,Alpha], []).
 color(hsv(Hue,Saturation,Value)) --> !,
   '#'(3, hsv_color, [Hue,Saturation,Value], []).
@@ -82,7 +82,7 @@ wc(Color-Float) -->
   '?'(wc_weight(Float), []).
 
 wc_weight(Float) -->
-  `;`,
+  ";",
   float(Float).
 
 
 
```
 
<h2 id="52"> 52: 正在比较变动前 e594ae6 和变动后 bbefbf7 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_color.pl b/gv_color.pl
index da34c1a..74c9060 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -25,11 +25,11 @@
 :- use_module(os(file_ext)).
 :- use_module(os(file_gnu)).
 
+:- use_module(plDcg(abnf_core_rules)).
 :- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
-:- use_module(plDcg_rfc(rfc2616_basic)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
```
 
<h2 id="53"> 53: 正在比较变动前 bbefbf7 和变动后 0cc5421 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index 7193a38..b25c15b 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,4 +1 @@
 *~
-*#
-*.db
-data/*
diff --git a/.gitmodules b/.gitmodules
index 6c22435..a63cbff 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,9 +4,3 @@
 [submodule "plHtml"]
 	path = plHtml
 	url = https://github.com/wouterbeek/plHtml.git
-[submodule "plDcg"]
-	path = plDcg
-	url = https://github.com/wouterbeek/plDcg.git
-[submodule "plUri"]
-	path = plUri
-	url = https://github.com/wouterbeek/plUri.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index ec4c91a..d7d21ad 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit ec4c91a00704c0c8d9b4ed747cb9b1648355559b
+Subproject commit d7d21ad4d6d7cec98d8b0122f5303e691998f512
diff --git a/README.md b/README.md
new file mode 100644
index 0000000..3c9e9cf
--- /dev/null
+++ b/README.md
@@ -0,0 +1,8 @@
+plGraphViz
+==========
+
+Export graphs represented as Prolog terms to
+ [GraphViz](http://www.graphviz.org/).
+
+Author: [Wouter Beek](http://www.wouterbeek.com)
+
diff --git a/debug.pl b/debug.pl
index 099cb84..d7339b9 100644
--- a/debug.pl
+++ b/debug.pl
@@ -1,7 +1,9 @@
-% Loads debug tools for the plGraphViz library.
+% Debug file for library plGraphViz.
+
+:- style_check(+charset).
+%:- style_check(+var_branches).
 
 :- [load].
 
 :- use_module(debug_project).
 :- debug_all_files.
-
diff --git a/debug_project.pl b/debug_project.pl
index ab61534..17195c1 100644
--- a/debug_project.pl
+++ b/debug_project.pl
@@ -11,7 +11,7 @@ Generic code for debugging a project:
   * Load all subdirectories and Prolog files contained in those directories.
 
 @author Wouter Beek
-@version 2014/10/31
+@version 2014/11/19
 */
 
 :- use_module(library(ansi_term)).
@@ -54,7 +54,6 @@ do_not_load0(debug_project).
 do_not_load0(index).
 do_not_load0(load).
 do_not_load0(load_project).
-do_not_load0(rfc2616_basic).
 do_not_load0(run).
 
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 30761bb..3c7863d 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -46,12 +46,10 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2014/06, 2014/11
+@version 2014/06
 */
 
 :- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_ascii)).
-:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
 
@@ -99,7 +97,7 @@ gv_attr_type(viewPort).
 % An *addDouble* is represented by a Prolog float.
 
 addDouble(Float) -->
-  '?'(plus_sign, []),
+  '?'(`+`, []),
   double(Float).
 
 
@@ -108,7 +106,7 @@ addDouble(Float) -->
 % `point(X:float,Y:float,InputOnly:boolean)`.
 
 addPoint(Point) -->
-  '?'(plus_sign, []),
+  '?'(`+`, []),
   point(Point).
 
 
@@ -149,10 +147,10 @@ backwards_compatible(invempty).
 backwards_compatible(open).
 
 
-bool(false) --> "false".
-bool(false) --> "no".
-bool(true) --> "true".
-bool(true) --> "yes".
+bool(false) --> `false`.
+bool(false) --> `no`.
+bool(true) --> `true`.
+bool(true) --> `yes`.
 
 
 %! clusterMode(+ClusterMode:atom)// .
@@ -189,7 +187,7 @@ doubleList([H|T]) -->
   '*'(doubleList1, T, []).
 
 doubleList1(Float) -->
-  ":",
+  `:`,
   double(Float).
 
 
@@ -244,16 +242,16 @@ pagedir('TR').
 
 %! point(+Point:compound)// .
 % A *point* is represented by a compound of the following form:
-% `point(X:float,Y:float,Changeable:boolean)`.
+% `point(X:float,Y:float,InputOnly:boolean)`.
 
-point(point(X,Y,Changeable)) -->
+point(point(X,Y,InputOnly)) -->
   float(X),
-  ",",
+  `,`,
   float(Y),
-  input_changeable(Changeable).
+  input_only(InputOnly).
 
-input_changeable(false) --> "".
-input_changeable(true) --> "!".
+input_only(false) --> [].
+input_only(true) --> `!`.
 
 
 pointList(Points) -->
@@ -294,9 +292,9 @@ rankdir('TB').
 
 
 rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  float(LowerLeftX), ",",
-  float(LowerLeftY), ",",
-  float(UpperRightX), ",",
+  float(LowerLeftX), `,`,
+  float(LowerLeftY), `,`,
+  float(UpperRightX), `,`,
   float(UpperRightY).
 
 
@@ -416,3 +414,4 @@ style(node, wedged).
 
 
 % @tbd viewPort
+
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 649ef9c..faf496c 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -2,17 +2,15 @@
   gv_attrs,
   [
     gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph])
-              % +Attribute1:nvpair
-              % -Attribute2:nvpair
+              % +Attr1:nvpair
+              % +Attr2:nvpair
   ]
 ).
 
-/** <module> GraphViz: Attributes
-
-Support for GraphViz attributes.
+/** <module> GraphViz attributes v2
 
 @author Wouter Beek
-@version 2014/06, 2014/11
+@version 2014/06
 */
 
 :- use_module(library(apply)).
@@ -21,11 +19,9 @@ Support for GraphViz attributes.
 
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
-:- use_module(os(file_gnu)).
 
-:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generics)).
+:- use_module(plDcg(dcg_generic)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
@@ -58,40 +54,24 @@ Support for GraphViz attributes.
 
 
 
-%! gv_attr(
-%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
-%!   +Attribute1:nvpair,
-%!   +Attribute2:nvpair
-%! ) is det.
-% Uses the default value in case Value is uninstantiated.
-% Otherwise, performs a typecheck and converts the given value.
-
 gv_attr(Context, N=V, N=V):-
   var(V), !,
   gv_attr(N, UsedBy, _, V, _, _),
-  % Check validity of context.
   memberchk(Context, UsedBy).
 gv_attr(Context, N=V1, N=V2):-
   gv_attr(N, UsedBy, Types, _, Minimum, _),
-  % Check validity of context.
   memberchk(Context, UsedBy),
-  % Check validity of value type.
   member(Type, Types),
-  (   Type == style
-  ->  Dcg =.. [Type,Context,V1]
-  ;   Dcg =.. [Type,V1]
+  (
+    Type == style
+  ->
+    Dcg =.. [Type,Context,V1]
+  ;
+    Dcg =.. [Type,V1]
   ),
   once(dcg_phrase(Dcg, V2)),
-  % Check validity of Value w.r.t. minimum value -- if available.
   check_minimum(V1, Minimum).
 
-
-
-% HELPERS
-
-%! check_minimum(+Value:atom, +Minimum:number) is semidet.
-% Trivially succeeds if no minimum value is available for a given attribute.
-
 check_minimum(_, ''):- !.
 check_minimum(V, Min1):-
   atom_number(Min1, Min2),
diff --git a/gv_color.pl b/gv_color.pl
index 74c9060..cb0cf8c 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -13,27 +13,27 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2014/06, 2014/10-2014/11
+@version 2014/06
 */
 
 :- use_module(library(apply)).
-:- use_module(library(lists), except([delete/3])).
+:- use_module(library(lists)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
-:- use_module(os(file_gnu)).
 
-:- use_module(plDcg(abnf_core_rules)).
 :- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
+:- use_module(plDcg_rfc(rfc2616_basic)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
+:- use_module(plSparql_parse(sparql_char)).
+
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
 %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
@@ -51,10 +51,10 @@
 %   3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))`
 
 color(rgb(Red,Green,Blue)) --> !,
-  "#",
+  `#`,
   '#'(3, hex_color, [Red,Green,Blue], []).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
-  "#",
+  `#`,
   '#'(4, hex_color, [Red,Green,Blue,Alpha], []).
 color(hsv(Hue,Saturation,Value)) --> !,
   '#'(3, hsv_color, [Hue,Saturation,Value], []).
@@ -82,7 +82,7 @@ wc(Color-Float) -->
   '?'(wc_weight(Float), []).
 
 wc_weight(Float) -->
-  ";",
+  `;`,
   float(Float).
 
 
@@ -142,13 +142,3 @@ gv_color_update(_):-
 
 gv_color_url('http://www.graphviz.org/doc/info/colors.html').
 
-
-%! safe_db_attach(+File:atom) is det.
-
-safe_db_attach(File):-
-  exists_file(File), !,
-  db_attach(File, []).
-safe_db_attach(File):-
-  touch_file(File),
-  safe_db_attach(File).
-
diff --git a/gv_dot.pl b/gv_dot.pl
index e67c469..accd5bd 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +Gif:compound
+    gv_graph//1 % +GraphTerm:compound
   ]
 ).
 
@@ -19,17 +19,14 @@ In GraphViz vertices are called 'nodes'.
 */
 
 :- use_module(library(apply)).
-:- use_module(library(lists), except([delete/3])).
+:- use_module(library(lists)).
 :- use_module(library(ordsets)).
 
 :- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_arrow)).
 :- use_module(plDcg(dcg_ascii)).
-:- use_module(plDcg(dcg_bracket)).
 :- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generics)).
+:- use_module(plDcg(dcg_generic)).
 :- use_module(plDcg(dcg_meta)).
-:- use_module(plDcg(dcg_quote)).
 
 :- use_module(plGraphViz(gv_attrs)).
 :- use_module(plGraphViz(gv_html)).
@@ -42,7 +39,7 @@ In GraphViz vertices are called 'nodes'.
 % We assume that the attribute has already been validated.
 
 gv_attribute(Name=Val) -->
-  gv_id(Name), "=", gv_id(Val), ";".
+  gv_id(Name), `=`, gv_id(Val), `;`.
 
 
 %! gv_attribute_list(
@@ -50,10 +47,10 @@ gv_attribute(Name=Val) -->
 %!   +GraphAttributes:list(nvpair),
 %!   +Attributes:list(nvpair)
 %! )// .
-% ```abnf
+% ~~~{.abnf}
 % attr_list = "[" [a_list] "]" [attr_list]
 % a_list = ID "=" ID [","] [a_list]
-% ```
+% ~~~
 
 % Attributes occur between square brackets.
 gv_attribute_list(Context, _, Attrs1) -->
@@ -62,20 +59,20 @@ gv_attribute_list(Context, _, Attrs1) -->
 
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
-% ```
+% ~~~
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
-% ```
+% ~~~
 
-gv_compass_pt('_') --> "_".
-gv_compass_pt(c) --> "c".
-gv_compass_pt(e) --> "e".
-gv_compass_pt(n) --> "n".
-gv_compass_pt(ne) --> "ne".
-gv_compass_pt(nw) --> "nw".
-gv_compass_pt(s) --> "s".
-gv_compass_pt(se) --> "se".
-gv_compass_pt(sw) --> "sw".
-gv_compass_pt(w) --> "w".
+gv_compass_pt('_') --> `_`.
+gv_compass_pt(c) --> `c`.
+gv_compass_pt(e) --> `e`.
+gv_compass_pt(n) --> `n`.
+gv_compass_pt(ne) --> `ne`.
+gv_compass_pt(nw) --> `nw`.
+gv_compass_pt(s) --> `s`.
+gv_compass_pt(se) --> `se`.
+gv_compass_pt(sw) --> `sw`.
+gv_compass_pt(w) --> `w`.
 
 
 %! gv_edge_operator(+Directed:boolean)// .
@@ -86,7 +83,7 @@ gv_compass_pt(w) --> "w".
 % @arg Directed Whether an edge is directed (operator `->`) or
 %                   undirected (operator `--`).
 
-gv_edge_operator(false) --> !, "--".
+gv_edge_operator(false) --> !, `--`.
 gv_edge_operator(true) --> arrow(right, 2).
 
 
@@ -110,11 +107,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
-  gv_node_id(FromId), " ",
+  gv_node_id(FromId), ` `,
 
-  gv_edge_operator(Directed), " ",
+  gv_edge_operator(Directed), ` `,
 
-  gv_node_id(ToId), " ",
+  gv_node_id(ToId), ` `,
 
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
@@ -136,18 +133,18 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 % @arg GraphAttributes A list of name-value pairs.
 % @arg CategoryAttributes A list of name-value pairs.
 %
-% ```
+% ~~~
 % attr_stmt = (graph / node / edge) attr_list
-% ```
+% ~~~
 
 gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
   indent(I),
-  gv_kind(Kind), " ",
+  gv_kind(Kind), ` `,
   gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
 
 
-%! gv_graph(+Gif:compound)//
+%! gv_graph(+GraphTerm:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
@@ -159,19 +156,19 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 %      they are ignored in the input file.
 %      Only in combinattion with directionality `directed`.
 %
-% ```abnf
+% ~~~{.abnf}
 % graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
-% ```
+% ~~~
 %
 % `GraphTerm` is a compound term of the following form:
-% ```prolog
+% ~~~{.pl}
 % graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
-% ```
+% ~~~
 %
 % `RankedVertexTerms` is a list of compound terms of the following form:
-% ```prolog
+% ~~~{.pl}
 % rank(RankNode,ContentNodes)
-% ```
+% ~~~
 %
 % @tbd Add support for subgraphs (arbitrary nesting).
 % @tbd Add support for escape strings:
@@ -179,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 % @tbd Assert attributes that are generic with respect to a subgraph.
 % @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
 
-gv_graph(graph(VTerms,ETerms,GAttrs)) -->
-  gv_graph(graph(VTerms,[],ETerms,GAttrs)).
+gv_graph(graph(VTerms, ETerms, GAttrs)) -->
+  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
 
-gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
+gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   {
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
@@ -197,8 +194,8 @@ gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), " ",
-  gv_id(GName), " ",
+  gv_graph_type(Directed), ` `,
+  gv_id(GName), ` `,
 
   % The body of the DOT file appears between curly braces.
   bracketed(
@@ -243,18 +240,18 @@ gv_graph0(
       (NewVTerms == [], RankedVTerms == [])
     }
   ->
-    ""
+    ``
   ;
     line_feed
   ),
 
   % The list of GraphViz nodes.
   '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
-  ({NewVTerms == []} -> "" ; line_feed),
+  ({NewVTerms == []} -> `` ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
   '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
-  ({RankedVTerms == []} -> "" ; line_feed),
+  ({RankedVTerms == []} -> `` ; line_feed),
 
   {
     findall(
@@ -284,8 +281,8 @@ gv_graph0(
 %! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
-gv_graph_type(false) --> "graph".
-gv_graph_type(true) --> "digraph".
+gv_graph_type(false) --> `graph`.
+gv_graph_type(true) --> `digraph`.
 
 
 %! gv_id(?Atom:atom)// is det.
@@ -308,9 +305,8 @@ gv_graph_type(true) --> "digraph".
 %      This requires an XML grammar!
 
 % HTML strings (variant 4).
-gv_id(Content) -->
-  {compound(Content)}, !,
-  gv_html_like_label(Content).
+gv_id(Atom) -->
+  dcg_atom_codes(gv_html_like_label, Atom), !.
 % Alpha-numeric strings (variant 1).
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -334,16 +330,14 @@ gv_id(Atom) -->
 % Double-quoted strings (variant 3).
 % The quotes are not in the given atom. They are written anyway.
 gv_id(Atom) -->
-  quoted(dcg_atom_codes(gv_quoted_string, Atom)), !.
+  quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !.
 
-gv_id_first(X) --> letter(X).
+gv_id_first(X) --> ascii_letter(X).
 gv_id_first(X) --> underscore(X).
 
 gv_id_rest([]) --> [].
 gv_id_rest([H|T]) -->
-  (   alpha_numeric(H)
-  ;   underscore(H)
-  ),
+  (ascii_alpha_numeric(H) ; underscore(H)),
   gv_id_rest(T).
 
 
@@ -359,19 +353,19 @@ gv_keyword(Codes):-
 % GraphViz has reserved keywords that cannot be used as identifiers.
 % GraphViz keywords are case-insensitive.
 
-gv_keyword --> "digraph".
-gv_keyword --> "edge".
-gv_keyword --> "graph".
-gv_keyword --> "node".
-gv_keyword --> "strict".
-gv_keyword --> "subgraph".
+gv_keyword --> `digraph`.
+gv_keyword --> `edge`.
+gv_keyword --> `graph`.
+gv_keyword --> `node`.
+gv_keyword --> `strict`.
+gv_keyword --> `subgraph`.
 
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(edge) --> "edge".
-gv_kind(graph) --> "graph".
-gv_kind(node) --> "node".
+gv_kind(edge) --> `edge`.
+gv_kind(graph) --> `graph`.
+gv_kind(node) --> `node`.
 
 
 %! gv_node_id(+NodeId:atom)// .
@@ -398,7 +392,7 @@ gv_node_id(Id) -->
 
 gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
   indent(I),
-  gv_node_id(Id), " ",
+  gv_node_id(Id), ` `,
   gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
 
 
@@ -409,23 +403,23 @@ gv_port -->
   gv_port_angle,
   '?'(gv_port_location, []).
 gv_port -->
-  ":",
+  `:`,
   gv_compass_pt(_).
 
 gv_port_angle -->
-  "@",
+  `@`,
   gv_id(_).
 
 gv_port_location -->
-  ":",
+  `:`,
   gv_id(_).
 gv_port_location -->
-  ":",
+  `:`,
   bracketed(
     round,
     (
       gv_id(_),
-      ",",
+      `,`,
       gv_id(_)
     )
   ).
@@ -442,7 +436,7 @@ gv_quoted_string([92,34|T]) --> !,
   gv_quoted_string(T).
 % Add the backslash escape character.
 gv_quoted_string([34|T]) --> !,
-  "\\\"",
+  `\\\"`,
   gv_quoted_string(T).
 % All other characters are allowed without escaping.
 gv_quoted_string([H|T]) -->
@@ -461,14 +455,14 @@ gv_ranked_node_collection(
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), ";", line_feed,
+    indent(NewI), gv_attribute(rank=same), `;`, line_feed,
 
     '*'(
       gv_node_statement(NewI, GraphAttrs),
       [Rank_V_Term|Content_V_Terms],
       []
     ),
-
+    
     % We want to indent the closing curly brace.
     indent(I)
   )),
@@ -481,7 +475,7 @@ gv_ranked_node_collection(
 % This only applies to directed graphs.
 
 gv_strict(false) --> [].
-gv_strict(true) --> "strict ".
+gv_strict(true) --> `strict `.
 
 
 
diff --git a/gv_file.pl b/gv_file.pl
index 704e2d4..bba87f9 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -9,6 +9,9 @@
     gif_to_gv_file/3, % +GraphInterchangeFormat:compound
                       % ?ToFile:atom
                       % +Options:list(nvpair)
+    gif_to_svg_dom/3, % +GraphInterchangeFormat:compound
+                      % -SvgDom:list(compound)
+                      % +Options:list(nvpair)
     open_dot/1 % +File:file
   ]
 ).
@@ -27,11 +30,13 @@ and GraphViz output files or SVG DOM structures.
 
 :- use_module(library(option)).
 :- use_module(library(process)).
+:- use_module(library(predicate_options)). % Declarations.
 
-:- use_module(generics(code_ext)).
+:- use_module(generics(codes_ext)).
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
 :- use_module(os(run_ext)).
+:- use_module(svg(svg_file)).
 
 :- use_module(plGraphViz(gv_dot)).
 
@@ -131,12 +136,15 @@ file_to_gv(FromFile, ToFile, Options):-
   prolog_file_type(ToExtension, graphviz_output), !,
 
   % The output file is either given or created.
-  (   var(ToFile)
-  ->  user:prolog_file_type(ToExtension, ToFileType),
-      file_alternative(FromFile, _, _, ToExtension, ToFile)
-  ;   is_absolute_file_name(ToFile),
-      % The given output file must match a certain file extension.
-      file_name_extension(_, ToExtension, ToFile)
+  (
+    var(ToFile)
+  ->
+    user:prolog_file_type(ToExtension, ToFileType),
+    file_alternative(FromFile, _, _, ToExtension, ToFile)
+  ;
+    is_absolute_file_name(ToFile),
+    % The given output file must match a certain file extension.
+    file_name_extension(_, ToExtension, ToFile)
   ),
   % Now that we have the output file we can prevent the
   % file type / file extension translation predicates from bakctracking.
@@ -146,8 +154,6 @@ file_to_gv(FromFile, ToFile, Options):-
   format(atom(OutputType), '-T~w', [ToExtension]),
   process_create(
     path(Method),
-    % @tbd Windows hack:
-    %%%%'C:\\Program Files (x86)\\Graphviz2.38\\bin\\dot.exe',
     [OutputType,FromFile,'-o',ToFile],
     [process(PID)]
   ),
@@ -171,6 +177,20 @@ gif_to_gv_file(Gif, ToFile, Options):-
   codes_to_gv_file(Codes, ToFile, Options).
 
 
+%! gif_to_svg_dom(
+%!   +GraphInterchangeFormat:compound,
+%!   -SvgDom:list(compound),
+%!   +Options:list(nvpair)
+%! ) is det.
+
+gif_to_svg_dom(Gif, SvgDom, Options1):-
+  % Make sure the file type of the output file is SvgDom.
+  merge_options([to_file_type=svg], Options1, Options2),
+  gif_to_gv_file(Gif, ToFile, Options2),
+  file_to_svg(ToFile, SvgDom),
+  delete_file(ToFile).
+
+
 %! open_dot(+File:atom) is det.
 % Opens the given DOT file.
 %
diff --git a/gv_html.pl b/gv_html.pl
index 08306f0..3f0b08b 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -1,224 +1,60 @@
 :- module(
   gv_html,
   [
-    gv_html_like_label//1 % +Content:compound
+    gv_html_like_label//1 % +Codes:list(code)
   ]
 ).
 
-/** <module> GraphViz: HTML-like labels
-
-Grammar taken from the GraphViz Web site:
-
-```
-label :   text
-        | table
-text :   textitem
-       | text textitem
-textitem :   string
-           | <BR/>
-           | <FONT> text </FONT>
-           | <I> text </I>
-           | <B> text </B>
-           | <U> text </U>
-           | <O> text </O>
-           | <SUB> text </SUB>
-           | <SUP> text </SUP>
-           | <S> text </S>
-table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
-rows :   row
-       | rows row
-       | rows <HR/> row
-row: <TR> cells </TR>
-cells :   cell
-        | cells cell
-        | cells <VR/> cell
-cell:   <TD> label </TD>
-      | <TD> <IMG/> </TD>
-```
+/** <module> GraphViz HTML
 
 @author Wouter Beek
-@see http://www.graphviz.org/content/node-shapes#html
-@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
+@version 2013/07, 2013/09, 2014/03-2014/06
 */
 
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_bracket)).
 :- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
 
 
-%! gv_html_like_label(?Content:compound)// .
-
-gv_html_like_label(Content) -->
-  bracketed(angular, label(Content)).
-
-
-%! cell(?Contents:compound)// .
-% Supported attributes for TD:
-% ```
-% ALIGN="CENTER|LEFT|RIGHT|TEXT"
-% BALIGN="CENTER|LEFT|RIGHT"
-% BGCOLOR="color"
-% BORDER="value"
-% CELLPADDING="value"
-% CELLSPACING="value"
-% COLOR="color"
-% COLSPAN="value"
-% FIXEDSIZE="FALSE|TRUE"
-% GRADIENTANGLE="value"
-% HEIGHT="value"
-% HREF="value"
-% ID="value"
-% PORT="portName"
-% ROWSPAN="value"
-% SIDES="value"
-% STYLE="value"
-% TARGET="value"
-% TITLE="value"
-% TOOLTIP="value"
-% VALIGN="MIDDLE|BOTTOM|TOP"
-% WIDTH="value"
-% ```
+%! gv_html_label(+Codes:list(code))// .
 %
-% Supported attributes for IMG:
-% ```
-% SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
-% SRC="value"
-% ```
-
-cell(td(Contents)) -->
-  html_element(td, [], label(Contents)).
-cell(td(img)) -->
-  html_element(td, [], html_element(img)).
-
-
-%! cells(?Contents:list(compound))// .
-
-cells([H|T]) -->
-  cell(H),
-  cells(T).
-cells([H,vr|T]) -->
-  cell(H),
-  html_element(vr),
-  cells(T).
-cells([H]) -->
-  cell(H).
-
-
-%! label(?Content:compound)// .
-% GraphViz HTML-like label.
-
-label(Content) -->
-  text(Content).
-label(Content) -->
-  table(Content).
-
-
-%! row(?Contents:compound)// .
-
-row(tr(Contents)) -->
-  html_element(tr, [], cell(Contents)).
-
-
-%! rows(?Contents:list)// .
-
-rows([H|T]) -->
-  row(H),
-  rows(T).
-rows([H,hr|T]) -->
-  row(H),
-  html_element(hr),
-  rows(T).
-rows([H]) -->
-  row(H).
-
-
-%! table(?Contents:compound)// .
-% Supported attributes for TABLE:
-% ```
-% ALIGN="CENTER|LEFT|RIGHT"
-% BGCOLOR="color"
-% BORDER="value"
-% CELLBORDER="value"
-% CELLPADDING="value"
-% CELLSPACING="value"
-% COLOR="color"
-% COLUMNS="value"
-% FIXEDSIZE="FALSE|TRUE"
-% GRADIENTANGLE="value"
-% HEIGHT="value"
-% HREF="value"
-% ID="value"
-% PORT="portName"
-% ROWS="value"
-% SIDES="value"
-% STYLE="value"
-% TARGET="value"
-% TITLE="value"
-% TOOLTIP="value"
-% VALIGN="MIDDLE|BOTTOM|TOP"
-% WIDTH="value"
-% ```
-%
-% Supported attributes for FONT:
-% ```
-% COLOR="color"
-% FACE="fontname"
-% POINT-SIZE="value"
-% ```
-
-table(table(Attrs,Contents)) -->
-  html_element(table, Attrs, rows(Contents)).
-table(table(font(Contents))) -->
-  html_element(font, [], html_element(table, [], rows(Contents))).
-
-
-%! text(?Contents:list)// .
-
-text(Contents) -->
-  '+'(textitem, Contents, []).
-
-
-%! textitem(?Content)// .
-% Supported attributes for BR:
-% ```
-% ALIGN="CENTER|LEFT|RIGHT"
-% ```
-
-textitem(string(String)) -->
-  html_string(String).
-textitem(entity(Name)) -->
-  html_entity(Name).
-textitem(br(Attrs)) -->
-  html_element(br, Attrs).
-textitem(Compound) -->
-  {var(Compound)}, !,
-  html_element(Name, _, text(Content)),
-  {
-    supported_html_element(Name),
-    Compound =.. [Name,Content]
-  }.
-textitem(Compound) -->
-  {
-    Compound =.. [Name,Content],
-    supported_html_element(Name)
-  },
-  html_element(Name, _, text(Content)).
-
-
-
-% HELPERS
-
-%! supported_html_element(+Name:atom) is semidet.
-%! supported_html_element(-Name:atom) is multi.
-
-supported_html_element(b).
-supported_html_element(font).
-supported_html_element(i).
-supported_html_element(o).
-supported_html_element(s).
-supported_html_element(sub).
-supported_html_element(sup).
-supported_html_element(u).
+% @see http://www.graphviz.org/doc/info/shapes.html#html
+
+gv_html_label --> gv_html_text, !.
+gv_html_label --> gv_html_table, !.
+gv_html_label --> [].
+
+gv_html_like_label --> bracketed(angular, gv_html_label).
+
+gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
+
+gv_html_table --> html_element(table, _, gv_html_rows).
+gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
+
+gv_html_rows --> gv_html_row, gv_html_rows.
+gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
+gv_html_rows --> gv_html_row.
+
+gv_html_row --> html_element(tr, _, gv_html_cells).
+
+gv_html_cell --> html_element(td, _, gv_html_label).
+gv_html_cell --> html_element(td, _, html_element(img, _)).
+
+gv_html_cells --> gv_html_cell, gv_html_cells.
+gv_html_cells --> gv_html_cell.
+gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
+
+gv_html_text --> gv_html_textitem, gv_html_text.
+gv_html_text --> gv_html_textitem.
+
+gv_html_textitem --> html_string, !.
+gv_html_textitem --> html_entity, !.
+gv_html_textitem --> html_element(br, _), !.
+gv_html_textitem --> html_element(font, _, gv_html_text), !.
+gv_html_textitem --> html_element(i, _, gv_html_text), !.
+gv_html_textitem --> html_element(b, _, gv_html_text), !.
+gv_html_textitem --> html_element(u, _, gv_html_text), !.
+gv_html_textitem --> html_element(sub, _, gv_html_text), !.
+gv_html_textitem --> html_element(sup, _, gv_html_text), !.
+
diff --git a/gv_numeral.pl b/gv_numeral.pl
index c115372..7870eb1 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -14,67 +14,59 @@
 :- use_module(math(math_ext)).
 
 :- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_cardinal)).
 
 
 
 %! gv_numeral(?Value:number)// .
-%
-% # Syntax
-%
-% ```bnf
+% ~~~{.bnf}
 % ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
-% ```
-%
-% ## Generation
-%
-% In the generative case, three notations are allowed (also see below):
-%   1. (non-zero integer-part)
-%   2. (decimal-separator) (non-zero fractional)
-%   3. (non-zero integer-part) (decimal-separator) (non-zero fractional)
-%
-% The following notations are explicitly excluded due to verbosity:
-%   - (non-zero integer-part) (decimal-separator)
-%   - (non-zero integer-part) (decimal-separator) (zero fractional)
-%   - (zero integer-part) (decimal-separator) (non-zero fractional)
-%
-% The following notations are also excluded, but since they violate
-%  well-formedness:
-%   - (non-zero integer-part) (non-zero fractional)
-%   - (decimal-separator)
+% ~~~
 
 gv_numeral(N) -->
-  {var(N)}, !,
-  sign(Sign),
-  (   ".",
-      '+'(decimal_digit, Fractional, [convert1(weights_decimal)]),
-      {IntegerPart = 0}
-  ;   '+'(decimal_digit, IntegerPart, [convert1(weights_decimal)]),
-      (   ".",
-          '*'(decimal_digit, Fractional, [convert1(weights_decimal)])
-      ;   {Fractional = 0}
-      )
-  ),
-  {   number_integer_parts(UnsignedN, IntegerPart, Fractional),
-      N is copysign(UnsignedN, Sign)
-  }.
+  {nonvar(N)},
+  {number_sign_parts(N, Sign, Abs)},
+  ({Sign =:= -1} -> `-` ; ``),
+  gv_numeral_abs(Abs).
 gv_numeral(N) -->
-  {number_sign_parts(N, Sign, UnsignedN)},
-  sign(Sign),
-  {number_integer_parts(UnsignedN, IntegerPart, Fractional)},
-  (   % [1] The fractional is zero, so only write the integer part
-      %     and do not write the decimal separator.
-      {Fractional =:= 0}
-  ->  integer(IntegerPart)
-  ;   % [2] The integer part is zero, so only write the fractional part,
-      %     preceded by the decimal separator.
-      {IntegerPart =:= 0}
-  ->  ".",
-      integer(Fractional)
-  ;   % [3] Both the integer part and the fractional are non-zero,
-      %     so write both of them, with the decimal separator in-between.
-      integer(IntegerPart),
-      ".",
-      integer(Fractional)
+  {var(N)},
+  'sign?'(Sign),
+  gv_numeral_abs(Abs),
+  {number_sign_parts(N, Sign, Abs)}.
+
+
+gv_numeral_abs(N) -->
+  {nonvar(N)},
+  {number_integer_parts(N, N1, N2)},
+  (
+    {N2 =:= 0}
+  ->
+    integer(N1)
+  ;
+    {N1 =:= 0}
+  ->
+    `.`,
+    integer(N2)
+  ;
+    integer(N1),
+    '?'((`.`, 'integer?'(N2)), [])
   ).
+gv_numeral_abs(N) -->
+  {var(N)},
+  (
+    `.`,
+    integer(N2)
+  ->
+    {N1 = 0}
+  ;
+    integer(N1),
+    (
+      `.`
+    ->
+      'integer?'(N2)
+    ;
+      {N2 = 0}
+    )
+  ),
+  {number_integer_parts(N, N1, N2)}.
+
diff --git a/load.pl b/load.pl
index 5cec32c..4b117d1 100644
--- a/load.pl
+++ b/load.pl
@@ -1,14 +1,12 @@
-% Load file for the plGraphViz library.
+% Load file for plGraphViz.
 
-:- dynamic(user:project/2).
-:- multifile(user:project/2).
-   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.').
+:- dynamic(user:prolog/3).
+:- multifile(user:prolog/3).
+   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
 
 :- use_module(load_project).
-:- load_project([
+:- load_project(plGraphViz, [
     plc-'Prolog-Library-Collection',
-    plDcg,
-    plHtml,
-    plUri
+    plHtml
 ]).
 
diff --git a/plDcg b/plDcg
deleted file mode 160000
index 96e2615..0000000
--- a/plDcg
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 96e261537773270a43d1ff4346273820282f21fb
diff --git a/plHtml b/plHtml
index a7b736f..18e657b 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit a7b736fdf7c435f825193bbc54500a302b0bc4b1
+Subproject commit 18e657b22a84d5e98a317ddec58314964ff68bcd
diff --git a/plUri b/plUri
deleted file mode 160000
index 59f582c..0000000
--- a/plUri
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 59f582c68cebc221f964ccb9805a869d05cb7856
diff --git a/run.pl b/run.pl
deleted file mode 100644
index 8bba736..0000000
--- a/run.pl
+++ /dev/null
@@ -1,9 +0,0 @@
-% Standalone execution of the plGraphViz library.
-
-:- if(current_prolog_flag(argv, ['--debug'|_])).
-  :- ensure_loaded(debug).
-:- else.
-  :- set_prolog_flag(verbose, silent).
-  :- ensure_loaded(load).
-:- endif.
-
 
```
 
<h2 id="54"> 54: 正在比较变动前 0cc5421 和变动后 dbc602d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index b25c15b..7193a38 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1 +1,4 @@
 *~
+*#
+*.db
+data/*
diff --git a/.gitmodules b/.gitmodules
index a63cbff..6c22435 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,3 +4,9 @@
 [submodule "plHtml"]
 	path = plHtml
 	url = https://github.com/wouterbeek/plHtml.git
+[submodule "plDcg"]
+	path = plDcg
+	url = https://github.com/wouterbeek/plDcg.git
+[submodule "plUri"]
+	path = plUri
+	url = https://github.com/wouterbeek/plUri.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index d7d21ad..2774ee9 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit d7d21ad4d6d7cec98d8b0122f5303e691998f512
+Subproject commit 2774ee9cba6ac2353150322c744e65857634e575
diff --git a/debug.pl b/debug.pl
index d7339b9..12b4526 100644
--- a/debug.pl
+++ b/debug.pl
@@ -1,9 +1,7 @@
 % Debug file for library plGraphViz.
 
-:- style_check(+charset).
-%:- style_check(+var_branches).
-
 :- [load].
 
 :- use_module(debug_project).
 :- debug_all_files.
+
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 3c7863d..30761bb 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -46,10 +46,12 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2014/06
+@version 2014/06, 2014/11
 */
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
 
@@ -97,7 +99,7 @@ gv_attr_type(viewPort).
 % An *addDouble* is represented by a Prolog float.
 
 addDouble(Float) -->
-  '?'(`+`, []),
+  '?'(plus_sign, []),
   double(Float).
 
 
@@ -106,7 +108,7 @@ addDouble(Float) -->
 % `point(X:float,Y:float,InputOnly:boolean)`.
 
 addPoint(Point) -->
-  '?'(`+`, []),
+  '?'(plus_sign, []),
   point(Point).
 
 
@@ -147,10 +149,10 @@ backwards_compatible(invempty).
 backwards_compatible(open).
 
 
-bool(false) --> `false`.
-bool(false) --> `no`.
-bool(true) --> `true`.
-bool(true) --> `yes`.
+bool(false) --> "false".
+bool(false) --> "no".
+bool(true) --> "true".
+bool(true) --> "yes".
 
 
 %! clusterMode(+ClusterMode:atom)// .
@@ -187,7 +189,7 @@ doubleList([H|T]) -->
   '*'(doubleList1, T, []).
 
 doubleList1(Float) -->
-  `:`,
+  ":",
   double(Float).
 
 
@@ -242,16 +244,16 @@ pagedir('TR').
 
 %! point(+Point:compound)// .
 % A *point* is represented by a compound of the following form:
-% `point(X:float,Y:float,InputOnly:boolean)`.
+% `point(X:float,Y:float,Changeable:boolean)`.
 
-point(point(X,Y,InputOnly)) -->
+point(point(X,Y,Changeable)) -->
   float(X),
-  `,`,
+  ",",
   float(Y),
-  input_only(InputOnly).
+  input_changeable(Changeable).
 
-input_only(false) --> [].
-input_only(true) --> `!`.
+input_changeable(false) --> "".
+input_changeable(true) --> "!".
 
 
 pointList(Points) -->
@@ -292,9 +294,9 @@ rankdir('TB').
 
 
 rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  float(LowerLeftX), `,`,
-  float(LowerLeftY), `,`,
-  float(UpperRightX), `,`,
+  float(LowerLeftX), ",",
+  float(LowerLeftY), ",",
+  float(UpperRightX), ",",
   float(UpperRightY).
 
 
@@ -414,4 +416,3 @@ style(node, wedged).
 
 
 % @tbd viewPort
-
diff --git a/gv_attrs.pl b/gv_attrs.pl
index faf496c..649ef9c 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -2,15 +2,17 @@
   gv_attrs,
   [
     gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph])
-              % +Attr1:nvpair
-              % +Attr2:nvpair
+              % +Attribute1:nvpair
+              % -Attribute2:nvpair
   ]
 ).
 
-/** <module> GraphViz attributes v2
+/** <module> GraphViz: Attributes
+
+Support for GraphViz attributes.
 
 @author Wouter Beek
-@version 2014/06
+@version 2014/06, 2014/11
 */
 
 :- use_module(library(apply)).
@@ -19,9 +21,11 @@
 
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
+:- use_module(os(file_gnu)).
 
+:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generic)).
+:- use_module(plDcg(dcg_generics)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
@@ -54,24 +58,40 @@
 
 
 
+%! gv_attr(
+%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
+%!   +Attribute1:nvpair,
+%!   +Attribute2:nvpair
+%! ) is det.
+% Uses the default value in case Value is uninstantiated.
+% Otherwise, performs a typecheck and converts the given value.
+
 gv_attr(Context, N=V, N=V):-
   var(V), !,
   gv_attr(N, UsedBy, _, V, _, _),
+  % Check validity of context.
   memberchk(Context, UsedBy).
 gv_attr(Context, N=V1, N=V2):-
   gv_attr(N, UsedBy, Types, _, Minimum, _),
+  % Check validity of context.
   memberchk(Context, UsedBy),
+  % Check validity of value type.
   member(Type, Types),
-  (
-    Type == style
-  ->
-    Dcg =.. [Type,Context,V1]
-  ;
-    Dcg =.. [Type,V1]
+  (   Type == style
+  ->  Dcg =.. [Type,Context,V1]
+  ;   Dcg =.. [Type,V1]
   ),
   once(dcg_phrase(Dcg, V2)),
+  % Check validity of Value w.r.t. minimum value -- if available.
   check_minimum(V1, Minimum).
 
+
+
+% HELPERS
+
+%! check_minimum(+Value:atom, +Minimum:number) is semidet.
+% Trivially succeeds if no minimum value is available for a given attribute.
+
 check_minimum(_, ''):- !.
 check_minimum(V, Min1):-
   atom_number(Min1, Min2),
diff --git a/gv_color.pl b/gv_color.pl
index cb0cf8c..c48817c 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -13,27 +13,27 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2014/06
+@version 2014/06, 2014/10-2014/11
 */
 
 :- use_module(library(apply)).
-:- use_module(library(lists)).
+:- use_module(library(lists), except([delete/3])).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
+:- use_module(os(file_gnu)).
 
+:- use_module(plDcg(abnf_core_rules)).
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
-:- use_module(plDcg_rfc(rfc2616_basic)).
 
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
-:- use_module(plSparql_parse(sparql_char)).
-
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
 %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
@@ -51,10 +51,10 @@
 %   3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))`
 
 color(rgb(Red,Green,Blue)) --> !,
-  `#`,
+  "#",
   '#'(3, hex_color, [Red,Green,Blue], []).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
-  `#`,
+  "#",
   '#'(4, hex_color, [Red,Green,Blue,Alpha], []).
 color(hsv(Hue,Saturation,Value)) --> !,
   '#'(3, hsv_color, [Hue,Saturation,Value], []).
@@ -82,7 +82,7 @@ wc(Color-Float) -->
   '?'(wc_weight(Float), []).
 
 wc_weight(Float) -->
-  `;`,
+  ";",
   float(Float).
 
 
diff --git a/gv_dot.pl b/gv_dot.pl
index accd5bd..e67c469 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +GraphTerm:compound
+    gv_graph//1 % +Gif:compound
   ]
 ).
 
@@ -19,14 +19,17 @@ In GraphViz vertices are called 'nodes'.
 */
 
 :- use_module(library(apply)).
-:- use_module(library(lists)).
+:- use_module(library(lists), except([delete/3])).
 :- use_module(library(ordsets)).
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_arrow)).
 :- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_bracket)).
 :- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generic)).
+:- use_module(plDcg(dcg_generics)).
 :- use_module(plDcg(dcg_meta)).
+:- use_module(plDcg(dcg_quote)).
 
 :- use_module(plGraphViz(gv_attrs)).
 :- use_module(plGraphViz(gv_html)).
@@ -39,7 +42,7 @@ In GraphViz vertices are called 'nodes'.
 % We assume that the attribute has already been validated.
 
 gv_attribute(Name=Val) -->
-  gv_id(Name), `=`, gv_id(Val), `;`.
+  gv_id(Name), "=", gv_id(Val), ";".
 
 
 %! gv_attribute_list(
@@ -47,10 +50,10 @@ gv_attribute(Name=Val) -->
 %!   +GraphAttributes:list(nvpair),
 %!   +Attributes:list(nvpair)
 %! )// .
-% ~~~{.abnf}
+% ```abnf
 % attr_list = "[" [a_list] "]" [attr_list]
 % a_list = ID "=" ID [","] [a_list]
-% ~~~
+% ```
 
 % Attributes occur between square brackets.
 gv_attribute_list(Context, _, Attrs1) -->
@@ -59,20 +62,20 @@ gv_attribute_list(Context, _, Attrs1) -->
 
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
-% ~~~
+% ```
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
-% ~~~
+% ```
 
-gv_compass_pt('_') --> `_`.
-gv_compass_pt(c) --> `c`.
-gv_compass_pt(e) --> `e`.
-gv_compass_pt(n) --> `n`.
-gv_compass_pt(ne) --> `ne`.
-gv_compass_pt(nw) --> `nw`.
-gv_compass_pt(s) --> `s`.
-gv_compass_pt(se) --> `se`.
-gv_compass_pt(sw) --> `sw`.
-gv_compass_pt(w) --> `w`.
+gv_compass_pt('_') --> "_".
+gv_compass_pt(c) --> "c".
+gv_compass_pt(e) --> "e".
+gv_compass_pt(n) --> "n".
+gv_compass_pt(ne) --> "ne".
+gv_compass_pt(nw) --> "nw".
+gv_compass_pt(s) --> "s".
+gv_compass_pt(se) --> "se".
+gv_compass_pt(sw) --> "sw".
+gv_compass_pt(w) --> "w".
 
 
 %! gv_edge_operator(+Directed:boolean)// .
@@ -83,7 +86,7 @@ gv_compass_pt(w) --> `w`.
 % @arg Directed Whether an edge is directed (operator `->`) or
 %                   undirected (operator `--`).
 
-gv_edge_operator(false) --> !, `--`.
+gv_edge_operator(false) --> !, "--".
 gv_edge_operator(true) --> arrow(right, 2).
 
 
@@ -107,11 +110,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
   indent(I),
-  gv_node_id(FromId), ` `,
+  gv_node_id(FromId), " ",
 
-  gv_edge_operator(Directed), ` `,
+  gv_edge_operator(Directed), " ",
 
-  gv_node_id(ToId), ` `,
+  gv_node_id(ToId), " ",
 
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
@@ -133,18 +136,18 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 % @arg GraphAttributes A list of name-value pairs.
 % @arg CategoryAttributes A list of name-value pairs.
 %
-% ~~~
+% ```
 % attr_stmt = (graph / node / edge) attr_list
-% ~~~
+% ```
 
 gv_generic_attributes_statement(_, _, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
   indent(I),
-  gv_kind(Kind), ` `,
+  gv_kind(Kind), " ",
   gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
 
 
-%! gv_graph(+GraphTerm:compound)//
+%! gv_graph(+Gif:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
@@ -156,19 +159,19 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 %      they are ignored in the input file.
 %      Only in combinattion with directionality `directed`.
 %
-% ~~~{.abnf}
+% ```abnf
 % graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
-% ~~~
+% ```
 %
 % `GraphTerm` is a compound term of the following form:
-% ~~~{.pl}
+% ```prolog
 % graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
-% ~~~
+% ```
 %
 % `RankedVertexTerms` is a list of compound terms of the following form:
-% ~~~{.pl}
+% ```prolog
 % rank(RankNode,ContentNodes)
-% ~~~
+% ```
 %
 % @tbd Add support for subgraphs (arbitrary nesting).
 % @tbd Add support for escape strings:
@@ -176,10 +179,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
 % @tbd Assert attributes that are generic with respect to a subgraph.
 % @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
 
-gv_graph(graph(VTerms, ETerms, GAttrs)) -->
-  gv_graph(graph(VTerms, [], ETerms, GAttrs)).
+gv_graph(graph(VTerms,ETerms,GAttrs)) -->
+  gv_graph(graph(VTerms,[],ETerms,GAttrs)).
 
-gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
+gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
   {
     shared_attributes(VTerms, SharedVAttrs, NewVTerms),
     shared_attributes(ETerms, SharedEAttrs, NewETerms),
@@ -194,8 +197,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -->
   % States that this file represents a graph according to the GraphViz format.
   indent(I),
   gv_strict(Strict),
-  gv_graph_type(Directed), ` `,
-  gv_id(GName), ` `,
+  gv_graph_type(Directed), " ",
+  gv_id(GName), " ",
 
   % The body of the DOT file appears between curly braces.
   bracketed(
@@ -240,18 +243,18 @@ gv_graph0(
       (NewVTerms == [], RankedVTerms == [])
     }
   ->
-    ``
+    ""
   ;
     line_feed
   ),
 
   % The list of GraphViz nodes.
   '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
-  ({NewVTerms == []} -> `` ; line_feed),
+  ({NewVTerms == []} -> "" ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
   '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
-  ({RankedVTerms == []} -> `` ; line_feed),
+  ({RankedVTerms == []} -> "" ; line_feed),
 
   {
     findall(
@@ -281,8 +284,8 @@ gv_graph0(
 %! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
-gv_graph_type(false) --> `graph`.
-gv_graph_type(true) --> `digraph`.
+gv_graph_type(false) --> "graph".
+gv_graph_type(true) --> "digraph".
 
 
 %! gv_id(?Atom:atom)// is det.
@@ -305,8 +308,9 @@ gv_graph_type(true) --> `digraph`.
 %      This requires an XML grammar!
 
 % HTML strings (variant 4).
-gv_id(Atom) -->
-  dcg_atom_codes(gv_html_like_label, Atom), !.
+gv_id(Content) -->
+  {compound(Content)}, !,
+  gv_html_like_label(Content).
 % Alpha-numeric strings (variant 1).
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -330,14 +334,16 @@ gv_id(Atom) -->
 % Double-quoted strings (variant 3).
 % The quotes are not in the given atom. They are written anyway.
 gv_id(Atom) -->
-  quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !.
+  quoted(dcg_atom_codes(gv_quoted_string, Atom)), !.
 
-gv_id_first(X) --> ascii_letter(X).
+gv_id_first(X) --> letter(X).
 gv_id_first(X) --> underscore(X).
 
 gv_id_rest([]) --> [].
 gv_id_rest([H|T]) -->
-  (ascii_alpha_numeric(H) ; underscore(H)),
+  (   alpha_numeric(H)
+  ;   underscore(H)
+  ),
   gv_id_rest(T).
 
 
@@ -353,19 +359,19 @@ gv_keyword(Codes):-
 % GraphViz has reserved keywords that cannot be used as identifiers.
 % GraphViz keywords are case-insensitive.
 
-gv_keyword --> `digraph`.
-gv_keyword --> `edge`.
-gv_keyword --> `graph`.
-gv_keyword --> `node`.
-gv_keyword --> `strict`.
-gv_keyword --> `subgraph`.
+gv_keyword --> "digraph".
+gv_keyword --> "edge".
+gv_keyword --> "graph".
+gv_keyword --> "node".
+gv_keyword --> "strict".
+gv_keyword --> "subgraph".
 
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(edge) --> `edge`.
-gv_kind(graph) --> `graph`.
-gv_kind(node) --> `node`.
+gv_kind(edge) --> "edge".
+gv_kind(graph) --> "graph".
+gv_kind(node) --> "node".
 
 
 %! gv_node_id(+NodeId:atom)// .
@@ -392,7 +398,7 @@ gv_node_id(Id) -->
 
 gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
   indent(I),
-  gv_node_id(Id), ` `,
+  gv_node_id(Id), " ",
   gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
 
 
@@ -403,23 +409,23 @@ gv_port -->
   gv_port_angle,
   '?'(gv_port_location, []).
 gv_port -->
-  `:`,
+  ":",
   gv_compass_pt(_).
 
 gv_port_angle -->
-  `@`,
+  "@",
   gv_id(_).
 
 gv_port_location -->
-  `:`,
+  ":",
   gv_id(_).
 gv_port_location -->
-  `:`,
+  ":",
   bracketed(
     round,
     (
       gv_id(_),
-      `,`,
+      ",",
       gv_id(_)
     )
   ).
@@ -436,7 +442,7 @@ gv_quoted_string([92,34|T]) --> !,
   gv_quoted_string(T).
 % Add the backslash escape character.
 gv_quoted_string([34|T]) --> !,
-  `\\\"`,
+  "\\\"",
   gv_quoted_string(T).
 % All other characters are allowed without escaping.
 gv_quoted_string([H|T]) -->
@@ -455,14 +461,14 @@ gv_ranked_node_collection(
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), `;`, line_feed,
+    indent(NewI), gv_attribute(rank=same), ";", line_feed,
 
     '*'(
       gv_node_statement(NewI, GraphAttrs),
       [Rank_V_Term|Content_V_Terms],
       []
     ),
-    
+
     % We want to indent the closing curly brace.
     indent(I)
   )),
@@ -475,7 +481,7 @@ gv_ranked_node_collection(
 % This only applies to directed graphs.
 
 gv_strict(false) --> [].
-gv_strict(true) --> `strict `.
+gv_strict(true) --> "strict ".
 
 
 
diff --git a/gv_file.pl b/gv_file.pl
index bba87f9..704e2d4 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -9,9 +9,6 @@
     gif_to_gv_file/3, % +GraphInterchangeFormat:compound
                       % ?ToFile:atom
                       % +Options:list(nvpair)
-    gif_to_svg_dom/3, % +GraphInterchangeFormat:compound
-                      % -SvgDom:list(compound)
-                      % +Options:list(nvpair)
     open_dot/1 % +File:file
   ]
 ).
@@ -30,13 +27,11 @@ and GraphViz output files or SVG DOM structures.
 
 :- use_module(library(option)).
 :- use_module(library(process)).
-:- use_module(library(predicate_options)). % Declarations.
 
-:- use_module(generics(codes_ext)).
+:- use_module(generics(code_ext)).
 :- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
 :- use_module(os(run_ext)).
-:- use_module(svg(svg_file)).
 
 :- use_module(plGraphViz(gv_dot)).
 
@@ -136,15 +131,12 @@ file_to_gv(FromFile, ToFile, Options):-
   prolog_file_type(ToExtension, graphviz_output), !,
 
   % The output file is either given or created.
-  (
-    var(ToFile)
-  ->
-    user:prolog_file_type(ToExtension, ToFileType),
-    file_alternative(FromFile, _, _, ToExtension, ToFile)
-  ;
-    is_absolute_file_name(ToFile),
-    % The given output file must match a certain file extension.
-    file_name_extension(_, ToExtension, ToFile)
+  (   var(ToFile)
+  ->  user:prolog_file_type(ToExtension, ToFileType),
+      file_alternative(FromFile, _, _, ToExtension, ToFile)
+  ;   is_absolute_file_name(ToFile),
+      % The given output file must match a certain file extension.
+      file_name_extension(_, ToExtension, ToFile)
   ),
   % Now that we have the output file we can prevent the
   % file type / file extension translation predicates from bakctracking.
@@ -154,6 +146,8 @@ file_to_gv(FromFile, ToFile, Options):-
   format(atom(OutputType), '-T~w', [ToExtension]),
   process_create(
     path(Method),
+    % @tbd Windows hack:
+    %%%%'C:\\Program Files (x86)\\Graphviz2.38\\bin\\dot.exe',
     [OutputType,FromFile,'-o',ToFile],
     [process(PID)]
   ),
@@ -177,20 +171,6 @@ gif_to_gv_file(Gif, ToFile, Options):-
   codes_to_gv_file(Codes, ToFile, Options).
 
 
-%! gif_to_svg_dom(
-%!   +GraphInterchangeFormat:compound,
-%!   -SvgDom:list(compound),
-%!   +Options:list(nvpair)
-%! ) is det.
-
-gif_to_svg_dom(Gif, SvgDom, Options1):-
-  % Make sure the file type of the output file is SvgDom.
-  merge_options([to_file_type=svg], Options1, Options2),
-  gif_to_gv_file(Gif, ToFile, Options2),
-  file_to_svg(ToFile, SvgDom),
-  delete_file(ToFile).
-
-
 %! open_dot(+File:atom) is det.
 % Opens the given DOT file.
 %
diff --git a/gv_html.pl b/gv_html.pl
index 3f0b08b..08306f0 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -1,60 +1,224 @@
 :- module(
   gv_html,
   [
-    gv_html_like_label//1 % +Codes:list(code)
+    gv_html_like_label//1 % +Content:compound
   ]
 ).
 
-/** <module> GraphViz HTML
+/** <module> GraphViz: HTML-like labels
+
+Grammar taken from the GraphViz Web site:
+
+```
+label :   text
+        | table
+text :   textitem
+       | text textitem
+textitem :   string
+           | <BR/>
+           | <FONT> text </FONT>
+           | <I> text </I>
+           | <B> text </B>
+           | <U> text </U>
+           | <O> text </O>
+           | <SUB> text </SUB>
+           | <SUP> text </SUP>
+           | <S> text </S>
+table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
+rows :   row
+       | rows row
+       | rows <HR/> row
+row: <TR> cells </TR>
+cells :   cell
+        | cells cell
+        | cells <VR/> cell
+cell:   <TD> label </TD>
+      | <TD> <IMG/> </TD>
+```
 
 @author Wouter Beek
-@version 2013/07, 2013/09, 2014/03-2014/06
+@see http://www.graphviz.org/content/node-shapes#html
+@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
 */
 
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_bracket)).
 :- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
 
 
-%! gv_html_label(+Codes:list(code))// .
+%! gv_html_like_label(?Content:compound)// .
+
+gv_html_like_label(Content) -->
+  bracketed(angular, label(Content)).
+
+
+%! cell(?Contents:compound)// .
+% Supported attributes for TD:
+% ```
+% ALIGN="CENTER|LEFT|RIGHT|TEXT"
+% BALIGN="CENTER|LEFT|RIGHT"
+% BGCOLOR="color"
+% BORDER="value"
+% CELLPADDING="value"
+% CELLSPACING="value"
+% COLOR="color"
+% COLSPAN="value"
+% FIXEDSIZE="FALSE|TRUE"
+% GRADIENTANGLE="value"
+% HEIGHT="value"
+% HREF="value"
+% ID="value"
+% PORT="portName"
+% ROWSPAN="value"
+% SIDES="value"
+% STYLE="value"
+% TARGET="value"
+% TITLE="value"
+% TOOLTIP="value"
+% VALIGN="MIDDLE|BOTTOM|TOP"
+% WIDTH="value"
+% ```
 %
-% @see http://www.graphviz.org/doc/info/shapes.html#html
-
-gv_html_label --> gv_html_text, !.
-gv_html_label --> gv_html_table, !.
-gv_html_label --> [].
-
-gv_html_like_label --> bracketed(angular, gv_html_label).
-
-gv_html_like_label(Content) --> bracketed(angular, html_dcg(Content)).
-
-gv_html_table --> html_element(table, _, gv_html_rows).
-gv_html_table --> html_element(font, _, html_element(table, _, gv_html_rows)).
-
-gv_html_rows --> gv_html_row, gv_html_rows.
-gv_html_rows --> gv_html_row, html_element(hr, _), gv_html_rows.
-gv_html_rows --> gv_html_row.
-
-gv_html_row --> html_element(tr, _, gv_html_cells).
-
-gv_html_cell --> html_element(td, _, gv_html_label).
-gv_html_cell --> html_element(td, _, html_element(img, _)).
-
-gv_html_cells --> gv_html_cell, gv_html_cells.
-gv_html_cells --> gv_html_cell.
-gv_html_cells --> gv_html_cell, html_element(vr, _), gv_html_cells.
-
-gv_html_text --> gv_html_textitem, gv_html_text.
-gv_html_text --> gv_html_textitem.
-
-gv_html_textitem --> html_string, !.
-gv_html_textitem --> html_entity, !.
-gv_html_textitem --> html_element(br, _), !.
-gv_html_textitem --> html_element(font, _, gv_html_text), !.
-gv_html_textitem --> html_element(i, _, gv_html_text), !.
-gv_html_textitem --> html_element(b, _, gv_html_text), !.
-gv_html_textitem --> html_element(u, _, gv_html_text), !.
-gv_html_textitem --> html_element(sub, _, gv_html_text), !.
-gv_html_textitem --> html_element(sup, _, gv_html_text), !.
-
+% Supported attributes for IMG:
+% ```
+% SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
+% SRC="value"
+% ```
+
+cell(td(Contents)) -->
+  html_element(td, [], label(Contents)).
+cell(td(img)) -->
+  html_element(td, [], html_element(img)).
+
+
+%! cells(?Contents:list(compound))// .
+
+cells([H|T]) -->
+  cell(H),
+  cells(T).
+cells([H,vr|T]) -->
+  cell(H),
+  html_element(vr),
+  cells(T).
+cells([H]) -->
+  cell(H).
+
+
+%! label(?Content:compound)// .
+% GraphViz HTML-like label.
+
+label(Content) -->
+  text(Content).
+label(Content) -->
+  table(Content).
+
+
+%! row(?Contents:compound)// .
+
+row(tr(Contents)) -->
+  html_element(tr, [], cell(Contents)).
+
+
+%! rows(?Contents:list)// .
+
+rows([H|T]) -->
+  row(H),
+  rows(T).
+rows([H,hr|T]) -->
+  row(H),
+  html_element(hr),
+  rows(T).
+rows([H]) -->
+  row(H).
+
+
+%! table(?Contents:compound)// .
+% Supported attributes for TABLE:
+% ```
+% ALIGN="CENTER|LEFT|RIGHT"
+% BGCOLOR="color"
+% BORDER="value"
+% CELLBORDER="value"
+% CELLPADDING="value"
+% CELLSPACING="value"
+% COLOR="color"
+% COLUMNS="value"
+% FIXEDSIZE="FALSE|TRUE"
+% GRADIENTANGLE="value"
+% HEIGHT="value"
+% HREF="value"
+% ID="value"
+% PORT="portName"
+% ROWS="value"
+% SIDES="value"
+% STYLE="value"
+% TARGET="value"
+% TITLE="value"
+% TOOLTIP="value"
+% VALIGN="MIDDLE|BOTTOM|TOP"
+% WIDTH="value"
+% ```
+%
+% Supported attributes for FONT:
+% ```
+% COLOR="color"
+% FACE="fontname"
+% POINT-SIZE="value"
+% ```
+
+table(table(Attrs,Contents)) -->
+  html_element(table, Attrs, rows(Contents)).
+table(table(font(Contents))) -->
+  html_element(font, [], html_element(table, [], rows(Contents))).
+
+
+%! text(?Contents:list)// .
+
+text(Contents) -->
+  '+'(textitem, Contents, []).
+
+
+%! textitem(?Content)// .
+% Supported attributes for BR:
+% ```
+% ALIGN="CENTER|LEFT|RIGHT"
+% ```
+
+textitem(string(String)) -->
+  html_string(String).
+textitem(entity(Name)) -->
+  html_entity(Name).
+textitem(br(Attrs)) -->
+  html_element(br, Attrs).
+textitem(Compound) -->
+  {var(Compound)}, !,
+  html_element(Name, _, text(Content)),
+  {
+    supported_html_element(Name),
+    Compound =.. [Name,Content]
+  }.
+textitem(Compound) -->
+  {
+    Compound =.. [Name,Content],
+    supported_html_element(Name)
+  },
+  html_element(Name, _, text(Content)).
+
+
+
+% HELPERS
+
+%! supported_html_element(+Name:atom) is semidet.
+%! supported_html_element(-Name:atom) is multi.
+
+supported_html_element(b).
+supported_html_element(font).
+supported_html_element(i).
+supported_html_element(o).
+supported_html_element(s).
+supported_html_element(sub).
+supported_html_element(sup).
+supported_html_element(u).
diff --git a/gv_numeral.pl b/gv_numeral.pl
index 7870eb1..c115372 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -14,59 +14,67 @@
 :- use_module(math(math_ext)).
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_cardinal)).
 
 
 
 %! gv_numeral(?Value:number)// .
-% ~~~{.bnf}
+%
+% # Syntax
+%
+% ```bnf
 % ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
-% ~~~
+% ```
+%
+% ## Generation
+%
+% In the generative case, three notations are allowed (also see below):
+%   1. (non-zero integer-part)
+%   2. (decimal-separator) (non-zero fractional)
+%   3. (non-zero integer-part) (decimal-separator) (non-zero fractional)
+%
+% The following notations are explicitly excluded due to verbosity:
+%   - (non-zero integer-part) (decimal-separator)
+%   - (non-zero integer-part) (decimal-separator) (zero fractional)
+%   - (zero integer-part) (decimal-separator) (non-zero fractional)
+%
+% The following notations are also excluded, but since they violate
+%  well-formedness:
+%   - (non-zero integer-part) (non-zero fractional)
+%   - (decimal-separator)
 
 gv_numeral(N) -->
-  {nonvar(N)},
-  {number_sign_parts(N, Sign, Abs)},
-  ({Sign =:= -1} -> `-` ; ``),
-  gv_numeral_abs(Abs).
+  {var(N)}, !,
+  sign(Sign),
+  (   ".",
+      '+'(decimal_digit, Fractional, [convert1(weights_decimal)]),
+      {IntegerPart = 0}
+  ;   '+'(decimal_digit, IntegerPart, [convert1(weights_decimal)]),
+      (   ".",
+          '*'(decimal_digit, Fractional, [convert1(weights_decimal)])
+      ;   {Fractional = 0}
+      )
+  ),
+  {   number_integer_parts(UnsignedN, IntegerPart, Fractional),
+      N is copysign(UnsignedN, Sign)
+  }.
 gv_numeral(N) -->
-  {var(N)},
-  'sign?'(Sign),
-  gv_numeral_abs(Abs),
-  {number_sign_parts(N, Sign, Abs)}.
-
-
-gv_numeral_abs(N) -->
-  {nonvar(N)},
-  {number_integer_parts(N, N1, N2)},
-  (
-    {N2 =:= 0}
-  ->
-    integer(N1)
-  ;
-    {N1 =:= 0}
-  ->
-    `.`,
-    integer(N2)
-  ;
-    integer(N1),
-    '?'((`.`, 'integer?'(N2)), [])
+  {number_sign_parts(N, Sign, UnsignedN)},
+  sign(Sign),
+  {number_integer_parts(UnsignedN, IntegerPart, Fractional)},
+  (   % [1] The fractional is zero, so only write the integer part
+      %     and do not write the decimal separator.
+      {Fractional =:= 0}
+  ->  integer(IntegerPart)
+  ;   % [2] The integer part is zero, so only write the fractional part,
+      %     preceded by the decimal separator.
+      {IntegerPart =:= 0}
+  ->  ".",
+      integer(Fractional)
+  ;   % [3] Both the integer part and the fractional are non-zero,
+      %     so write both of them, with the decimal separator in-between.
+      integer(IntegerPart),
+      ".",
+      integer(Fractional)
   ).
-gv_numeral_abs(N) -->
-  {var(N)},
-  (
-    `.`,
-    integer(N2)
-  ->
-    {N1 = 0}
-  ;
-    integer(N1),
-    (
-      `.`
-    ->
-      'integer?'(N2)
-    ;
-      {N2 = 0}
-    )
-  ),
-  {number_integer_parts(N, N1, N2)}.
-
diff --git a/load.pl b/load.pl
index 4b117d1..5cec32c 100644
--- a/load.pl
+++ b/load.pl
@@ -1,12 +1,14 @@
-% Load file for plGraphViz.
+% Load file for the plGraphViz library.
 
-:- dynamic(user:prolog/3).
-:- multifile(user:prolog/3).
-   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz).
+:- dynamic(user:project/2).
+:- multifile(user:project/2).
+   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.').
 
 :- use_module(load_project).
-:- load_project(plGraphViz, [
+:- load_project([
     plc-'Prolog-Library-Collection',
-    plHtml
+    plDcg,
+    plHtml,
+    plUri
 ]).
 
diff --git a/plDcg b/plDcg
new file mode 160000
index 0000000..ad6c88a
--- /dev/null
+++ b/plDcg
@@ -0,0 +1 @@
+Subproject commit ad6c88a86234c50ffb31bdbfd50edf5709654f75
diff --git a/plHtml b/plHtml
index 18e657b..f96e87b 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 18e657b22a84d5e98a317ddec58314964ff68bcd
+Subproject commit f96e87bb4e4fa525f5e84814914834625ac9f715
diff --git a/plUri b/plUri
new file mode 160000
index 0000000..ec0a88e
--- /dev/null
+++ b/plUri
@@ -0,0 +1 @@
+Subproject commit ec0a88e1040ea624b09904f9a76c258775e98bff
diff --git a/run.pl b/run.pl
new file mode 100644
index 0000000..8bba736
--- /dev/null
+++ b/run.pl
@@ -0,0 +1,9 @@
+% Standalone execution of the plGraphViz library.
+
+:- if(current_prolog_flag(argv, ['--debug'|_])).
+  :- ensure_loaded(debug).
+:- else.
+  :- set_prolog_flag(verbose, silent).
+  :- ensure_loaded(load).
+:- endif.
+
 
```
 
<h2 id="55"> 55: 正在比较变动前 dbc602d 和变动后 a2456df </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_color.pl b/gv_color.pl
index c48817c..0510f98 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -22,6 +22,7 @@
 :- use_module(library(xpath)).
 
 :- use_module(generics(db_ext)).
+:- use_module(generics(persistent_db_ext)).
 :- use_module(os(file_ext)).
 :- use_module(os(file_gnu)).
 
@@ -121,9 +122,7 @@ gv_color_file(File):-
 
 gv_color_init:-
   gv_color_file(File),
-  safe_db_attach(File),
-  file_age(File, Age),
-  gv_color_update(Age).
+  persistent_db_init(File, gv_color_update).
 
 
 %! gv_color_update(+Age:float) is det.
diff --git a/plHtml b/plHtml
index f96e87b..c98f740 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit f96e87bb4e4fa525f5e84814914834625ac9f715
+Subproject commit c98f740d593fff74bfa3cf3d08af13c857daa899
 
```
 
<h2 id="56"> 56: 正在比较变动前 a2456df 和变动后 20c6017 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_numeral.pl b/gv_numeral.pl
index c115372..d36fa59 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -61,7 +61,7 @@ gv_numeral(N) -->
   }.
 gv_numeral(N) -->
   {number_sign_parts(N, Sign, UnsignedN)},
-  sign(Sign),
+  sign_negative(Sign),
   {number_integer_parts(UnsignedN, IntegerPart, Fractional)},
   (   % [1] The fractional is zero, so only write the integer part
       %     and do not write the decimal separator.
 
```
 
<h2 id="57"> 57: 正在比较变动前 20c6017 和变动后 f694d77 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 2774ee9..58f43f0 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 2774ee9cba6ac2353150322c744e65857634e575
+Subproject commit 58f43f0e2fca088206582a18b868fe85a7603432
diff --git a/plDcg b/plDcg
index ad6c88a..c61080f 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit ad6c88a86234c50ffb31bdbfd50edf5709654f75
+Subproject commit c61080f3d8df6ba6d48b0d70f5ba52047c8cbd29
diff --git a/plUri b/plUri
index ec0a88e..66a7652 160000
--- a/plUri
+++ b/plUri
@@ -1 +1 @@
-Subproject commit ec0a88e1040ea624b09904f9a76c258775e98bff
+Subproject commit 66a7652bc1ab6a4dc1fc790b09894d6c51d42dcf
 
```
 
<h2 id="58"> 58: 正在比较变动前 f694d77 和变动后 af5d96d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 58f43f0..1b264ab 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 58f43f0e2fca088206582a18b868fe85a7603432
+Subproject commit 1b264ab8b668b44035c96f320f8798f7940ad2fa
diff --git a/README.md b/README.md
index 3c9e9cf..f89c694 100644
--- a/README.md
+++ b/README.md
@@ -1,8 +1,113 @@
 plGraphViz
 ==========
 
-Export graphs represented as Prolog terms to
+Easily export graphs represented as Prolog terms to
  [GraphViz](http://www.graphviz.org/).
 
-Author: [Wouter Beek](http://www.wouterbeek.com)
+### Example
+
+~~~prolog
+$ swipl run.pl
+?- use_module(plGraphViz(gv_file)).
+?- graph_to_gv_file(
+     graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]),
+     File,
+     [method(sfdp),output(png)]
+   ).
+   File = 'PATH/plGraphViz/data/tmp.png'
+~~~
+
+The graphic can be saved to a different file by instantiating
+ the `File` argument.
+
+![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png "Example graph.")
+
+---
+
+### Method option
+
+Option `method(+atom)` sets the drawing method that is used by GraphViz
+ to place the vertices and edges.
+The following values are supported.
+
+| **Value**       | **Description**         |
+| `circo`         | Circular layout.        |
+| `dot` (default) | Directed graph.         |
+| `fdp`           | Undirected graph.       |
+| `neato`         | Undirected graph.       |
+| `osage`         | Tree map.               |
+| `sfdp`          | Large undirected graph. |
+| `twopi`         | Radical layouts.        |
+
+---
+
+### Output type option
+
+Option `output(+atom)` sets the type of file the graph is written to.
+The following values are supported.
+
+| **Value**             | **Description**                       |
+|:---------------------:|:--------------------------------------|
+| `bmp`                 | Windows Bitmap Format                 |
+| `canon`               |                                       |
+| `dot`                 |                                       |
+| `gv`,  `xdot`, `xdot1.2`, `xdot1.4` | DOT                     |
+| `cgimage`             | CGImage bitmap format                 |
+| `cmap`                | Client-side imagemap (deprecated)     |
+| `eps`                 | Encapsulated PostScript               |
+| `exr`                 | OpenEXR                               |
+| `fig`                 |                                       |
+| `gd`, `gd2`           | GD/GD2 formats                        |
+| `gif`                 |                                       |
+| `gtk`                 | GTK canvas                            |
+| `ico`                 | Icon Image File Format                |
+| `imap`                |                                       |
+| `cmapx`               | Server-side and client-side imagemaps |
+| `imap_np`, `cmapx_np` | Server-side and client-side imagemaps |
+| `ismap`               | Server-side imagemap (deprecated)     |
+| `jp2`                 | JPEG 2000                             |
+| `jpg`, `jpeg`, `jpe`  | JPEG                                  |
+| `pct`, `pict`         | PICT                                  |
+| `pdf` (default)       | Portable Document Format (PDF)        |
+| `pic`                 | Kernighan's PIC graphics language     |
+| `plain`, `plain-ext`  | Simple text format                    |
+| `png`                 | Portable Network Graphics format      |
+| `pov`                 | POV-Ray markup language (prototype)   |
+| `ps`                  | PostScript                            |
+| `ps2`                 | PostScript for PDF                    |
+| `psd`                 | PSD                                   |
+| `sgi`                 | SGI                                   |
+| `svg`, `svgz`         | Scalable Vector Graphics              |
+| `tga`                 | Truevision TGA                        |
+| `tif`, `tiff`         | TIFF (Tag Image File Format)          |
+| `tk`                  | TK graphics                           |
+| `vml`, `vmlz`         | Vector Markup Language (VML)          |
+| `vrml`                | VRML                                  |
+| `wbmp`                | Wireless BitMap format                |
+| `webp`                | Image format for the Web              |
+| `xlib`, `x11`         | Xlib canvas                           |
+
+---
+
+### HTML-like labels
+
+Example of using HTML-like labels:
+
+~~~prolog
+graph_to_gv_file(
+  graph(
+    [vertex(1,[]),vertex(2,[label=html(table([tr([td(a),td(b)]),tr([td(c),td(d)])]))])],
+    [edge(1,2,[label='From 1 to 2.'])],
+    []
+  ),
+  File,
+  []
+).
+~~~
+
+![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example2.png "Example graph with HTML-like labels.")
+
+---
+
+Developed during 2013-2014 by [Wouter Beek](http://www.wouterbeek.com).
 
diff --git a/example1.png b/example1.png
new file mode 100644
index 0000000..31e7ba6
Binary files /dev/null and b/example1.png differ
diff --git a/example2.png b/example2.png
new file mode 100644
index 0000000..6e44b16
Binary files /dev/null and b/example2.png differ
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 30761bb..3237b4b 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -54,11 +54,14 @@
 :- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
+:- use_module(plDcg(dcg_quote)).
 
 :- use_module(plGraphViz(gv_html)).
 
 
 
+
+
 %! gv_attr_type(?Type:atom) is nondet.
 
 gv_attr_type(addDouble).
@@ -95,6 +98,7 @@ gv_attr_type(style).
 gv_attr_type(viewPort).
 
 
+
 %! addDouble(+Float:float)// .
 % An *addDouble* is represented by a Prolog float.
 
@@ -103,6 +107,7 @@ addDouble(Float) -->
   double(Float).
 
 
+
 %! addPoint(+Point:compound)// .
 % An *addPoint* is represented by a compound of the following form:
 % `point(X:float,Y:float,InputOnly:boolean)`.
@@ -112,6 +117,7 @@ addPoint(Point) -->
   point(Point).
 
 
+
 %! arrowType(+ArrowType:atom)// .
 
 arrowType(V) -->
@@ -149,12 +155,16 @@ backwards_compatible(invempty).
 backwards_compatible(open).
 
 
+
+%! bool(+Value:boolean)// .
+
 bool(false) --> "false".
 bool(false) --> "no".
 bool(true) --> "true".
 bool(true) --> "yes".
 
 
+
 %! clusterMode(+ClusterMode:atom)// .
 
 clusterMode(V) -->
@@ -166,6 +176,7 @@ clusterMode(local).
 clusterMode(none).
 
 
+
 %! dirType(+DirectionType:oneof([back,both,forward,none]))// .
 
 dirType(DirType) -->
@@ -178,44 +189,57 @@ dirType(forward).
 dirType(none).
 
 
+
+%! double(+Double:float)// .
+
 double(Double1) -->
   % float//1 will check for float type.
   {Double2 is Double1 * 1.0},
   float(Double2).
 
 
-doubleList([H|T]) -->
-  double(H),
-  '*'(doubleList1, T, []).
 
-doubleList1(Float) -->
-  ":",
-  double(Float).
+%! doubleList(+Doubles:list(float))// .
+
+doubleList(L) -->
+  '+'(double, L, [separator(colon)]).
+
 
 
 %! escString(+String:atom)// .
 % @tbd Support for context-dependent replacements.
 
 escString(String) -->
-  atom(String).
+  quoted(atom(String)).
+
 
 
 % @tbd layerList
 
 
+
 % @tbd layerRange
 
 
+
+%! lblString(+String:compound)// .
+
+lblString(html(V)) -->
+  gv_html_like_label(V).
 lblString(V) -->
   escString(V).
-lblString(V) -->
-  gv_html_like_label(V).
 
 
+
+%! int(+Integer:integer)// .
+
 int(V) -->
   integer(V).
 
 
+
+%! outputMode(+OutputMode:atom)// .
+
 outputMode(V) -->
   {outputMode(V)},
   atom(V).
@@ -225,9 +249,13 @@ outputMode(edgesfirst).
 outputMode(nodesfirst).
 
 
+
 % @tbd packMode
 
 
+
+%! pagedir(+PageDirection:atom)// .
+
 pagedir(V) -->
   {pagedir(V)},
   atom(V).
@@ -242,6 +270,7 @@ pagedir('TL').
 pagedir('TR').
 
 
+
 %! point(+Point:compound)// .
 % A *point* is represented by a compound of the following form:
 % `point(X:float,Y:float,Changeable:boolean)`.
@@ -256,13 +285,20 @@ input_changeable(false) --> "".
 input_changeable(true) --> "!".
 
 
+
+%! pointList(+Points:list(compound))// .
+
 pointList(Points) -->
   '*'(point, Points, []).
 
 
+
 % @tbd portPos
 
 
+
+%! quadType(+QuadType:atom)// .
+
 quadType(V) -->
   {quadType(V)},
   atom(V).
@@ -272,6 +308,9 @@ quadType(none).
 quadType(normal).
 
 
+
+%! rankType(+RankType:atom)// .
+
 rankType(V) -->
   {rankType(V)},
   atom(V).
@@ -283,6 +322,9 @@ rankType(sink).
 rankType(source).
 
 
+
+%! rankdir(+RankDirection:atom)// .
+
 rankdir(V) -->
   {rankdir(V)},
   atom(V).
@@ -293,6 +335,9 @@ rankdir('RL').
 rankdir('TB').
 
 
+
+%! rect(+Rectangle:compound)// .
+
 rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
   float(LowerLeftX), ",",
   float(LowerLeftY), ",",
@@ -300,6 +345,9 @@ rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
   float(UpperRightY).
 
 
+
+%! shape(+Shape:atom)// .
+
 shape(V) -->
   {polygon_based_shape(V)},
   atom(V).
@@ -361,6 +409,9 @@ polygon_based_shape(tripleoctagon).
 polygon_based_shape(utr).
 
 
+
+%! smoothType(+SmoothType:atom)// .
+
 smoothType(V) -->
   {smoothType(V)},
   atom(V).
@@ -374,19 +425,23 @@ smoothType(spring).
 smoothType(triangle).
 
 
+
 % @tbd splineType
 
 
+
 % @tbd startType
 
 
-%! string(?Content:atom)// .
+
+%! string(?String:atom)// .
 % A GraphViz string.
 
 string(Content) -->
   atom(Content).
 
 
+
 %! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet.
 
 style(Context, Style) -->
@@ -415,4 +470,5 @@ style(node, striped).
 style(node, wedged).
 
 
+
 % @tbd viewPort
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 649ef9c..e3ba03c 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -1,9 +1,8 @@
 :- module(
   gv_attrs,
   [
-    gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph])
-              % +Attribute1:nvpair
-              % -Attribute2:nvpair
+    gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph])
+               % +Attribute:nvpair
   ]
 ).
 
@@ -25,6 +24,7 @@ Support for GraphViz attributes.
 
 :- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_content)).
+:- use_module(plDcg(dcg_meta)).
 :- use_module(plDcg(dcg_generics)).
 
 :- use_module(plHtml(html)).
@@ -58,32 +58,45 @@ Support for GraphViz attributes.
 
 
 
-%! gv_attr(
+
+
+%! gv_attr_value(
 %!   +Context:oneof([cluster,edge,graph,node,subgraph]),
-%!   +Attribute1:nvpair,
-%!   +Attribute2:nvpair
-%! ) is det.
+%!   +Attribute:nvpair
+%! )// is det.
 % Uses the default value in case Value is uninstantiated.
 % Otherwise, performs a typecheck and converts the given value.
 
-gv_attr(Context, N=V, N=V):-
-  var(V), !,
-  gv_attr(N, UsedBy, _, V, _, _),
-  % Check validity of context.
-  memberchk(Context, UsedBy).
-gv_attr(Context, N=V1, N=V2):-
-  gv_attr(N, UsedBy, Types, _, Minimum, _),
-  % Check validity of context.
-  memberchk(Context, UsedBy),
-  % Check validity of value type.
-  member(Type, Types),
-  (   Type == style
-  ->  Dcg =.. [Type,Context,V1]
-  ;   Dcg =.. [Type,V1]
-  ),
-  once(dcg_phrase(Dcg, V2)),
-  % Check validity of Value w.r.t. minimum value -- if available.
-  check_minimum(V1, Minimum).
+% Use the default if no value is given.
+gv_attr_value(Context, Name=Value) -->
+  {
+    var(Value), !,
+    gv_attr(Name, UsedBy, _, DefaultValue, _, _),
+    % Check validity of context.
+    memberchk(Context, UsedBy)
+  },
+  gv_attr_value(Context, Name=DefaultValue).
+gv_attr_value(Context, Name=Value) -->
+  {
+    % Check the validity of the context argument.
+    gv_attr(Name, UsedBy, Types, _, Minimum, _),
+    memberchk(Context, UsedBy),
+    
+    %  Pick a value type non-deterministically.
+    member(Type, Types),
+    
+    % The `style` type is the only one that requires the context argument.
+    (   Type == style
+    ->  Dcg =.. [Type,Context]
+    ;   Dcg =.. [Type]
+    ),
+    
+    % Check validity of Value w.r.t. minimum value -- if available.
+    check_minimum(Value, Minimum)
+  },
+  dcg_call(Dcg, Value).
+
+
 
 
 
diff --git a/gv_dot.pl b/gv_dot.pl
index e67c469..6db4451 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -13,9 +13,16 @@ Methods for writing to the GraphViz DOT format.
 
 In GraphViz vertices are called 'nodes'.
 
+~~~abnf
+attr_list = "[" [a_list] "]" [attr_list]
+a_list = ID "=" ID [","] [a_list]
+~~~
+
+---
+
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2013/07, 2013/09, 2014/03-2014/06
+@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
 */
 
 :- use_module(library(apply)).
@@ -37,28 +44,21 @@ In GraphViz vertices are called 'nodes'.
 
 
 
-%! gv_attribute(+Attribute:nvpair)// is det.
-% A single GraphViz attribute.
-% We assume that the attribute has already been validated.
 
-gv_attribute(Name=Val) -->
-  gv_id(Name), "=", gv_id(Val), ";".
 
+%! gv_attr(
+%!   +Context:oneof([edge,graph,node]),
+%!   +Attribute:nvpair
+%! )// is det.
+% A single GraphViz attribute.
+% We assume that the attribute has already been validated.
 
-%! gv_attribute_list(
-%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
-%!   +GraphAttributes:list(nvpair),
-%!   +Attributes:list(nvpair)
-%! )// .
-% ```abnf
-% attr_list = "[" [a_list] "]" [attr_list]
-% a_list = ID "=" ID [","] [a_list]
-% ```
+gv_attr(Context, Name=Value) -->
+  gv_id(Name),
+  "=",
+  gv_attr_value(Context, Name=Value),
+  ";".
 
-% Attributes occur between square brackets.
-gv_attribute_list(Context, _, Attrs1) -->
-  {maplist(gv_attr(Context), Attrs1, Attrs2)},
-  bracketed(square, '*'(gv_attribute, Attrs2, [])).
 
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
@@ -78,6 +78,7 @@ gv_compass_pt(sw) --> "sw".
 gv_compass_pt(w) --> "w".
 
 
+
 %! gv_edge_operator(+Directed:boolean)// .
 % The binary edge operator between two vertices.
 % The operator that is used depends on whether the graph is directed or
@@ -90,10 +91,10 @@ gv_edge_operator(false) --> !, "--".
 gv_edge_operator(true) --> arrow(right, 2).
 
 
+
 %! gv_edge_statement(
 %!   +Indent:nonneg,
 %!   +Directed:boolean,
-%!   +GraphAttributes:list(nvpair),
 %!   +EdgeTerm:compound
 %! )// is det.
 % A GraphViz statement describing an edge.
@@ -108,7 +109,7 @@ gv_edge_operator(true) --> arrow(right, 2).
 %      at the from and/or to location.
 % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
 
-gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
+gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -->
   indent(I),
   gv_node_id(FromId), " ",
 
@@ -118,14 +119,14 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
-  gv_attribute_list(edge, GAttrs, EAttrs),
+  bracketed(square, '*'(gv_attr(edge), EAttrs, [])),
   line_feed.
 
 
+
 %! gv_generic_attributes_statement(
 %!   +Kind:oneof([edge,graph,node]),
 %!   +Indent:integer,
-%!   +GraphAttributes:list(nvpair),
 %!   +CategoryAttributes:list(nvpair)
 %! )//
 % A GraphViz statement describing generic attributes for a category of items.
@@ -140,11 +141,13 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -->
 % attr_stmt = (graph / node / edge) attr_list
 % ```
 
-gv_generic_attributes_statement(_, _, _, []) --> [], !.
-gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -->
+gv_generic_attributes_statement(_, _, []) --> [], !.
+gv_generic_attributes_statement(Kind, I, KindAttrs) -->
   indent(I),
   gv_kind(Kind), " ",
-  gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed.
+  bracketed(square, '*'(gv_attr(Kind), KindAttrs, [])),
+  line_feed.
+
 
 
 %! gv_graph(+Gif:compound)//
@@ -224,13 +227,13 @@ gv_graph0(
   {NewI is I + 1},
 
   % Attributes that apply to the graph as a whole.
-  gv_generic_attributes_statement(graph, NewI, GAttrs, GAttrs),
+  gv_generic_attributes_statement(graph, NewI, GAttrs),
 
   % Attributes that are the same for all nodes.
-  gv_generic_attributes_statement(node, NewI, GAttrs, SharedVAttrs),
+  gv_generic_attributes_statement(node, NewI, SharedVAttrs),
 
   % Attributes that are the same for all edges.
-  gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs),
+  gv_generic_attributes_statement(edge, NewI, SharedEAttrs),
 
   % Only add a line_feed if some content was already written
   % and some content is about to be written.
@@ -249,19 +252,19 @@ gv_graph0(
   ),
 
   % The list of GraphViz nodes.
-  '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []),
+  '*'(gv_node_statement(NewI), NewVTerms, []),
   ({NewVTerms == []} -> "" ; line_feed),
 
   % The ranked GraphViz nodes (displayed at the same height).
-  '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []),
+  '*'(gv_ranked_node_collection(NewI), RankedVTerms, []),
   ({RankedVTerms == []} -> "" ; line_feed),
 
   {
     findall(
       edge(FromId,ToId,[]),
       (
-        nth0(Index1, RankedVTerms, rank(vertex(FromId,_,_),_)),
-        nth0(Index2, RankedVTerms, rank(vertex(ToId,_,_),_)),
+        nth0(Index1, RankedVTerms, rank(vertex(FromId,_),_)),
+        nth0(Index2, RankedVTerms, rank(vertex(ToId,_),_)),
         % We assume that the rank vertices are nicely ordered.
         succ(Index1, Index2)
       ),
@@ -270,10 +273,10 @@ gv_graph0(
   },
 
   % The rank edges.
-  '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges, []),
+  '*'(gv_edge_statement(NewI, Directed), RankEdges, []),
 
   % The non-rank edges.
-  '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms, []),
+  '*'(gv_edge_statement(NewI, Directed), NewETerms, []),
 
   % Note that we do not include a line_feed here.
 
@@ -281,6 +284,7 @@ gv_graph0(
   indent(I).
 
 
+
 %! gv_graph_type(+Directed:boolean)// .
 % The type of graph that is represented.
 
@@ -288,6 +292,7 @@ gv_graph_type(false) --> "graph".
 gv_graph_type(true) --> "digraph".
 
 
+
 %! gv_id(?Atom:atom)// is det.
 % Parse a GraphViz identifier.
 % There are 4 variants:
@@ -347,6 +352,7 @@ gv_id_rest([H|T]) -->
   gv_id_rest(T).
 
 
+
 %! gv_keyword(+Codes:list(code)) is semidet.
 % Succeeds if the given codes for a GraphViz reserved keyword.
 
@@ -367,6 +373,7 @@ gv_keyword --> "strict".
 gv_keyword --> "subgraph".
 
 
+
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
 gv_kind(edge) --> "edge".
@@ -374,6 +381,7 @@ gv_kind(graph) --> "graph".
 gv_kind(node) --> "node".
 
 
+
 %! gv_node_id(+NodeId:atom)// .
 % GraphViz node identifiers can be of the following two types:
 %   1. A GraphViz identifier, see gv_id//1.
@@ -389,17 +397,16 @@ gv_node_id(Id) -->
 %  gv_port.
 
 
-%! gv_node_statement(
-%!   +Indent:integer,
-%!   +GraphAttributes,
-%!   +VertexTerm:compound
-%! )// .
+
+%! gv_node_statement(+Indent:nonneg, +VertexTerm:compound)// .
 % A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes').
 
-gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -->
+gv_node_statement(I, vertex(Id,VAttrs)) -->
   indent(I),
   gv_node_id(Id), " ",
-  gv_attribute_list(node, GraphAttrs, VAttrs), line_feed.
+  bracketed(square, '*'(gv_attr(node), VAttrs, [])),
+  line_feed.
+
 
 
 gv_port -->
@@ -431,6 +438,7 @@ gv_port_location -->
   ).
 
 
+
 gv_quoted_string([]) --> [].
 % Just to be sure, we do not allow the double quote
 % that closes the string to be escaped.
@@ -450,21 +458,22 @@ gv_quoted_string([H|T]) -->
   gv_quoted_string(T).
 
 
-gv_ranked_node_collection(
-  I,
-  GraphAttrs,
-  rank(Rank_V_Term,Content_V_Terms)
-) -->
+
+gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -->
   indent(I),
   bracketed(curly, (
     line_feed,
 
     % The rank attribute.
     {NewI is I + 1},
-    indent(NewI), gv_attribute(rank=same), ";", line_feed,
+    indent(NewI),
+    gv_attr(subgraph, rank=same),
+    ";",
+    line_feed,
 
+    % Vertice statements.
     '*'(
-      gv_node_statement(NewI, GraphAttrs),
+      gv_node_statement(NewI),
       [Rank_V_Term|Content_V_Terms],
       []
     ),
@@ -475,6 +484,7 @@ gv_ranked_node_collection(
   line_feed.
 
 
+
 %! gv_strict(+Strict:boolean)// is det.
 % The keyword denoting that the graph is strict, i.e., has no self-arcs and
 % no multi-edges.
@@ -485,7 +495,9 @@ gv_strict(true) --> "strict ".
 
 
 
-% Helpers
+
+
+% HELPERS
 
 add_default_nvpair(Attrs1, N, Default, Attrs2):-
   add_default_nvpair(Attrs1, N, Default, _, Attrs2).
@@ -508,12 +520,15 @@ extract_shared(Argss, Shared):-
 remove_shared_attributes(Shared, Args1, Args2):-
   ord_subtract(Args1, Shared, Args2).
 
-shared_attributes(Terms1, Shared, Terms2):-
-  maplist(term_components(Func), Terms1, Args1, Args2, Args3a),
-  extract_shared(Args3a, Shared),
-  maplist(remove_shared_attributes(Shared), Args3a, Args3b),
-  maplist(term_components(Func), Terms2, Args1, Args2, Args3b).
+shared_attributes(Terms1, SharedAs, Terms2):-
+  maplist(term_to_attrs, Terms1, As1),
+  extract_shared(As1, SharedAs),
+  maplist(remove_shared_attributes(SharedAs), As1, As2),
+  maplist(term_change_attrs, Terms1, As2, Terms2).
+
+term_change_attrs(edge(From,To,_), A, edge(From,To,A)).
+term_change_attrs(vertex(Id,_), A, vertex(Id,A)).
 
-term_components(Func, Term, Arg1, Arg2, Arg3):-
-  Term =.. [Func,Arg1,Arg2,Arg3].
+term_to_attrs(edge(_,_,A), A).
+term_to_attrs(vertex(_,A), A).
 
diff --git a/gv_file.pl b/gv_file.pl
index 704e2d4..a7901e4 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -1,14 +1,14 @@
 :- module(
   gv_file,
   [
-    file_to_gv/2, % +File:atom
+    file_to_gv/2, % +InputFile:atom
                   % +Options:list(nvpair)
-    file_to_gv/3, % +FromFile:atom
-                  % ?ToFile:atom
+    file_to_gv/3, % +InputFile:atom
+                  % ?OutputFile:atom
                   % +Options:list(nvpair)
-    gif_to_gv_file/3, % +GraphInterchangeFormat:compound
-                      % ?ToFile:atom
-                      % +Options:list(nvpair)
+    graph_to_gv_file/3, % +Graph:compound
+                        % ?OutputFile:atom
+                        % +Options:list(nvpair)
     open_dot/1 % +File:file
   ]
 ).
@@ -35,44 +35,6 @@ and GraphViz output files or SVG DOM structures.
 
 :- use_module(plGraphViz(gv_dot)).
 
-:- dynamic(user:file_type_program/2).
-:- multifile(user:file_type_program/2).
-
-:- dynamic(user:module_uses/2).
-:- multifile(user:module_uses/2).
-
-:- dynamic(user:prolog_file_type/2).
-:- multifile(user:prolog_file_type/2).
-
-% Register DOT.
-:- db_add_novel(user:prolog_file_type(dot, dot)).
-:- db_add_novel(user:prolog_file_type(dot, graphviz)).
-:- db_add_novel(user:file_type_program(dot, dotty)).
-:- db_add_novel(user:file_type_program(dot, dotx)).
-:- db_add_novel(user:module_uses(gv_file, file_type(dot))).
-
-% Register JPG/JPEG.
-:- db_add_novel(user:prolog_file_type(jpeg, jpeg)).
-:- db_add_novel(user:prolog_file_type(jpeg, graphviz_output)).
-:- db_add_novel(user:prolog_file_type(jpg, jpeg)).
-:- db_add_novel(user:prolog_file_type(jpg, graphviz_output)).
-
-% Register PDF.
-:- db_add_novel(user:prolog_file_type(pdf, pdf)).
-:- db_add_novel(user:prolog_file_type(pdf, graphviz_output)).
-
-% Register PNG.
-:- db_add_novel(user:prolog_file_type(png, png)).
-:- db_add_novel(user:prolog_file_type(png, graphviz_output)).
-
-% Register SVG.
-:- db_add_novel(user:prolog_file_type(svg, graphviz_output)).
-:- db_add_novel(user:prolog_file_type(svg, svg)).
-
-% Register XDOT.
-:- db_add_novel(user:prolog_file_type(xdot, graphviz_output)).
-:- db_add_novel(user:prolog_file_type(xdot, xdot)).
-
 :- predicate_options(codes_to_gv_file/3, 3, [
      pass_to(file_to_gv/3, 3)
    ]).
@@ -80,13 +42,13 @@ and GraphViz output files or SVG DOM structures.
      pass_to(file_to_gv/3, 3)
    ]).
 :- predicate_options(file_to_gv/3, 3, [
-     method(+oneof([dot,sfdp])),
-     to_file_type(+oneof([dot,jpeg,pdf,svg,xdot]))
+     method(+atom),
+     output(+atom)
    ]).
 :- predicate_options(gif_to_svg_dom/3, 3, [
-     pass_to(gif_to_gv_file/3, 3)
+     pass_to(graph_to_gv_file/3, 3)
    ]).
-:- predicate_options(gif_to_gv_file/3, 3, [
+:- predicate_options(graph_to_gv_file/3, 3, [
      pass_to(codes_to_gv_file/3, 3)
    ]).
 
@@ -94,81 +56,93 @@ and GraphViz output files or SVG DOM structures.
 
 %! codes_to_gv_file(
 %!   +Codes:list(code),
-%!   ?ToFile:atom,
+%!   ?OutputFile:atom,
 %!   +Options:list(nvpair)
 %! ) is det.
 
-codes_to_gv_file(Codes, ToFile, Options):-
-  absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]),
+codes_to_gv_file(Codes, OutputFile, Options):-
+  absolute_file_name(data(tmp), TmpFile, [access(write),extensions([dot])]),
   setup_call_cleanup(
     open(TmpFile, write, Write, [encoding(utf8)]),
     put_codes(Write, Codes),
     close(Write)
   ),
-  file_to_gv(TmpFile, ToFile, Options).
+  file_to_gv(TmpFile, OutputFile, Options).
+
 
 
-%! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det.
+%! file_to_gv(+InputFile:atom, +Options:list(nvpair)) is det.
 
-file_to_gv(FromFile, Options):-
-  file_to_gv(FromFile, _, Options).
+file_to_gv(InputFile, Options):-
+  file_to_gv(InputFile, _, Options).
 
-%! file_to_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det.
+%! file_to_gv(
+%!   +InputFile:atom,
+%!   ?OutputFile:atom,
+%!   +Options:list(nvpair)
+%! ) is det.
 % Converts a GraphViz DOT file to an image file, using a specific
 % visualization method.
 
-file_to_gv(FromFile, ToFile, Options):-
-  option(to_file_type(dot), Options), !,
-  rename_file(FromFile, ToFile).
-file_to_gv(FromFile, ToFile, Options):-
-  % The method option.
+file_to_gv(InputFile, OutputFile, Options):-
+  option(output(dot), Options), !,
+  (   var(OutputFile)
+  ->  OutputFile = InputFile
+  ;   rename_file(InputFile, OutputFile)
+  ).
+file_to_gv(InputFile, OutputFile, Options):-
+  % Typecheck for `method` option.
   option(method(Method), Options, dot),
-  must_be(oneof([dot,sfdp]), Method),
+  findall(Method0, gv_method(Method0), Methods),
+  must_be(oneof(Methods), Method),
 
-  % The file type option.
-  option(to_file_type(ToFileType), Options, pdf),
-  prolog_file_type(ToExtension, ToFileType),
-  prolog_file_type(ToExtension, graphviz_output), !,
+  % Typecheck for `output` option.
+  option(output(OutputType), Options, pdf),
+  findall(OutputType0, gv_output_type(OutputType0), OutputTypes),
+  must_be(oneof(OutputTypes), OutputType),
 
   % The output file is either given or created.
-  (   var(ToFile)
-  ->  user:prolog_file_type(ToExtension, ToFileType),
-      file_alternative(FromFile, _, _, ToExtension, ToFile)
-  ;   is_absolute_file_name(ToFile),
+  (   var(OutputFile)
+  ->  file_alternative(InputFile, _, _, OutputType, OutputFile)
+  ;   is_absolute_file_name(OutputFile),
       % The given output file must match a certain file extension.
-      file_name_extension(_, ToExtension, ToFile)
+      file_name_extension(_, OutputType, OutputFile)
   ),
-  % Now that we have the output file we can prevent the
-  % file type / file extension translation predicates from bakctracking.
-  !,
 
   % Run the GraphViz conversion command in the shell.
-  format(atom(OutputType), '-T~w', [ToExtension]),
+  format(atom(OutputTypeFlag), '-T~a', [OutputType]),
+  format(atom(OutputFileFlag), '-o~a', [OutputFile]),
   process_create(
     path(Method),
     % @tbd Windows hack:
     %%%%'C:\\Program Files (x86)\\Graphviz2.38\\bin\\dot.exe',
-    [OutputType,FromFile,'-o',ToFile],
+    [OutputTypeFlag,file(InputFile),OutputFileFlag],
     [process(PID)]
   ),
   process_wait(PID, exit(ShellStatus)),
   exit_code_handler('GraphViz', ShellStatus).
 
 
-%! gif_to_gv_file(+Gif:compound, ?ToFile:atom, +Options:list(nvpair)) is det.
+
+%! graph_to_gv_file(
+%!   +Graph:compound,
+%!   ?OutputFile:atom,
+%!   +Options:list(nvpair)
+%! ) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
-%   * =|method(+Method:oneof([dot,sfdp])|=
+%   * `method(+Method:atom`
 %     The algorithm used by GraphViz for positioning the tree nodes.
 %     Either =dot= (default) or =sfdp=.
-%   * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|=
+%   * `output(+FileType:atom)`
 %     The file type of the generated GraphViz file.
 %     Default: `pdf`.
 
-gif_to_gv_file(Gif, ToFile, Options):-
+graph_to_gv_file(Gif, OutputFile, Options):-
   once(phrase(gv_graph(Gif), Codes)),
-  codes_to_gv_file(Codes, ToFile, Options).
+  codes_to_gv_file(Codes, OutputFile, Options).
+
 
 
 %! open_dot(+File:atom) is det.
@@ -181,3 +155,69 @@ open_dot(File):-
   once(find_program_by_file_type(dot, Program)),
   run_program(Program, [File]).
 
+
+
+
+% HELPERS
+
+gv_method(circo).
+gv_method(dot).
+gv_method(fdp).
+gv_method(neato).
+gv_method(osage).
+gv_method(sfdp).
+gv_method(twopi).
+
+
+
+gv_output_type(bmp).
+gv_output_type(canon).
+gv_output_type(dot).
+gv_output_type(gv).
+gv_output_type(xdot).
+gv_output_type('xdot1.2').
+gv_output_type('xdot1.4').
+gv_output_type(cgimage).
+gv_output_type(cmap).
+gv_output_type(eps).
+gv_output_type(exr).
+gv_output_type(fig).
+gv_output_type(gd).
+gv_output_type(gd2).
+gv_output_type(gif).
+gv_output_type(gtk).
+gv_output_type(ico).
+gv_output_type(imap).
+gv_output_type(cmapx).
+gv_output_type(imap_np).
+gv_output_type(cmapx_np).
+gv_output_type(ismap).
+gv_output_type(jp2).
+gv_output_type(jpg).
+gv_output_type(jpeg).
+gv_output_type(jpe).
+gv_output_type(pct).
+gv_output_type(pict).
+gv_output_type(pdf).
+gv_output_type(pic).
+gv_output_type(plain).
+gv_output_type('plain-ext').
+gv_output_type(png).
+gv_output_type(pov).
+gv_output_type(ps).
+gv_output_type(ps2).
+gv_output_type(psd).
+gv_output_type(sgi).
+gv_output_type(svg).
+gv_output_type(svgz).
+gv_output_type(tga).
+gv_output_type(tif).
+gv_output_type(tiff).
+gv_output_type(tk).
+gv_output_type(vml).
+gv_output_type(vmlz).
+gv_output_type(vrml).
+gv_output_type(wbmp).
+gv_output_type(webp).
+gv_output_type(xlib).
+gv_output_type(x11).
diff --git a/gv_html.pl b/gv_html.pl
index 08306f0..9a4d33a 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -9,7 +9,7 @@
 
 Grammar taken from the GraphViz Web site:
 
-```
+~~~
 label :   text
         | table
 text :   textitem
@@ -34,7 +34,9 @@ cells :   cell
         | cells <VR/> cell
 cell:   <TD> label </TD>
       | <TD> <IMG/> </TD>
-```
+~~~
+
+---
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/node-shapes#html
@@ -49,49 +51,56 @@ cell:   <TD> label </TD>
 
 
 
+
+
 %! gv_html_like_label(?Content:compound)// .
 
 gv_html_like_label(Content) -->
   bracketed(angular, label(Content)).
 
 
+
 %! cell(?Contents:compound)// .
-% Supported attributes for TD:
-% ```
-% ALIGN="CENTER|LEFT|RIGHT|TEXT"
-% BALIGN="CENTER|LEFT|RIGHT"
-% BGCOLOR="color"
-% BORDER="value"
-% CELLPADDING="value"
-% CELLSPACING="value"
-% COLOR="color"
-% COLSPAN="value"
-% FIXEDSIZE="FALSE|TRUE"
-% GRADIENTANGLE="value"
-% HEIGHT="value"
-% HREF="value"
-% ID="value"
-% PORT="portName"
-% ROWSPAN="value"
-% SIDES="value"
-% STYLE="value"
-% TARGET="value"
-% TITLE="value"
-% TOOLTIP="value"
-% VALIGN="MIDDLE|BOTTOM|TOP"
-% WIDTH="value"
-% ```
+% Supported attributes for `TD`:
+%   - `ALIGN="CENTER|LEFT|RIGHT|TEXT"`
+%   - `BALIGN="CENTER|LEFT|RIGHT"`
+%   - `BGCOLOR="color"`
+%   - `BORDER="value"`
+%   - `CELLPADDING="value"`
+%   - `CELLSPACING="value"`
+%   - `COLOR="color"`
+%   - `COLSPAN="value"`
+%   - `FIXEDSIZE="FALSE|TRUE"`
+%   - `GRADIENTANGLE="value"`
+%   - `HEIGHT="value"`
+%   - `HREF="value"`
+%   - `ID="value"`
+%   - `PORT="portName"`
+%   - `ROWSPAN="value"`
+%   - `SIDES="value"`
+%   - `STYLE="value"`
+%   - `TARGET="value"`
+%   - `TITLE="value"`
+%   - `TOOLTIP="value"`
+%   - `VALIGN="MIDDLE|BOTTOM|TOP"`
+%   - `WIDTH="value"`
 %
-% Supported attributes for IMG:
-% ```
-% SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"
-% SRC="value"
-% ```
+% Supported attributes for `IMG`:
+%   - `SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"`
+%   - `SRC="value"`
 
 cell(td(Contents)) -->
-  html_element(td, [], label(Contents)).
-cell(td(img)) -->
-  html_element(td, [], html_element(img)).
+  cell(td([],Contents)).
+cell(td(Attrs1,Image)) -->
+  {(  Image =.. [img,Attrs2]
+  ->  true
+  ;   Image == img
+  ->  Attrs2 = []
+  )},
+  html_element(td, Attrs1, html_element(img,Attrs2)).
+cell(td(Attrs,Contents)) -->
+  html_element(td, Attrs, label(Contents)).
+
 
 
 %! cells(?Contents:list(compound))// .
@@ -107,19 +116,22 @@ cells([H]) -->
   cell(H).
 
 
+
 %! label(?Content:compound)// .
 % GraphViz HTML-like label.
 
 label(Content) -->
-  text(Content).
-label(Content) -->
   table(Content).
+label(Content) -->
+  text(Content).
+
 
 
 %! row(?Contents:compound)// .
 
 row(tr(Contents)) -->
-  html_element(tr, [], cell(Contents)).
+  html_element(tr, [], cells(Contents)).
+
 
 
 %! rows(?Contents:list)// .
@@ -127,72 +139,108 @@ row(tr(Contents)) -->
 rows([H|T]) -->
   row(H),
   rows(T).
-rows([H,hr|T]) -->
-  row(H),
+rows([hr|T]) -->
   html_element(hr),
   rows(T).
 rows([H]) -->
   row(H).
 
 
+
 %! table(?Contents:compound)// .
-% Supported attributes for TABLE:
-% ```
-% ALIGN="CENTER|LEFT|RIGHT"
-% BGCOLOR="color"
-% BORDER="value"
-% CELLBORDER="value"
-% CELLPADDING="value"
-% CELLSPACING="value"
-% COLOR="color"
-% COLUMNS="value"
-% FIXEDSIZE="FALSE|TRUE"
-% GRADIENTANGLE="value"
-% HEIGHT="value"
-% HREF="value"
-% ID="value"
-% PORT="portName"
-% ROWS="value"
-% SIDES="value"
-% STYLE="value"
-% TARGET="value"
-% TITLE="value"
-% TOOLTIP="value"
-% VALIGN="MIDDLE|BOTTOM|TOP"
-% WIDTH="value"
-% ```
+% ~~~
+% table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
+% ~~~
 %
-% Supported attributes for FONT:
-% ```
-% COLOR="color"
-% FACE="fontname"
-% POINT-SIZE="value"
-% ```
-
+% Supported attributes for `TABLE`:
+%   - `ALIGN="CENTER|LEFT|RIGHT"`
+%   - `BGCOLOR="color"`
+%   - `BORDER="value"`
+%   - `CELLBORDER="value"`
+%   - `CELLPADDING="value"`
+%   - `CELLSPACING="value"`
+%   - `COLOR="color"`
+%   - `COLUMNS="value"`
+%   - `FIXEDSIZE="FALSE|TRUE"`
+%   - `GRADIENTANGLE="value"`
+%   - `HEIGHT="value"`
+%   - `HREF="value"`
+%   - `ID="value"`
+%   - `PORT="portName"`
+%   - `ROWS="value"`
+%   - `SIDES="value"`
+%   - `STYLE="value"`
+%   - `TARGET="value"`
+%   - `TITLE="value"`
+%   - `TOOLTIP="value"`
+%   - `VALIGN="MIDDLE|BOTTOM|TOP"`
+%   - `WIDTH="value"`
+%
+% Supported attributes for `FONT`:
+%  - `COLOR="color"`
+%    Sets the color of the font within the scope of `<FONT>...</FONT>`,
+%     or the border color of the table or cell within the scope of
+%     `<TABLE>...</TABLE>`, or `<TD>...</TD>`.
+%    This color can be overridden by a `COLOR` attribute in descendents.
+%    By default, the font color is determined by the `fontcolor` attribute
+%     of the corresponding node, edge or graph, and the border color is
+%     determined by the color attribute of the corresponding node, edge or
+%     graph.
+%   - `FACE="fontname"`
+%   - `POINT-SIZE="value"`
+
+table(table(Contents)) -->
+  table(table([],Contents)).
 table(table(Attrs,Contents)) -->
   html_element(table, Attrs, rows(Contents)).
-table(table(font(Contents))) -->
-  html_element(font, [], html_element(table, [], rows(Contents))).
+table(font(Table)) -->
+  table(font([],Table)).
+table(font(Attrs1,Table)) -->
+  {(  Table =.. [table,Attrs2,Contents]
+  ->  true
+  ;   Table =.. [table,Contents]
+  ->  Attrs2 = []
+  )},
+  html_element(font, Attrs1, table(table(Attrs2,Contents))).
+
 
 
 %! text(?Contents:list)// .
+% ~~~
+% text :   textitem
+%        | text textitem
+% ~~~
 
 text(Contents) -->
+  {is_list(Contents)}, !,
   '+'(textitem, Contents, []).
-
-
-%! textitem(?Content)// .
+text(Content) -->
+  text([Content]).
+
+
+
+%! textitem(?Content:compound)// .
+% ~~~
+% textitem :   string
+%            | <BR/>
+%            | <FONT> text </FONT>
+%            | <I> text </I>
+%            | <B> text </B>
+%            | <U> text </U>
+%            | <O> text </O>
+%            | <SUB> text </SUB>
+%            | <SUP> text </SUP>
+%            | <S> text </S>
+% ~~~
+%
 % Supported attributes for BR:
-% ```
-% ALIGN="CENTER|LEFT|RIGHT"
-% ```
+%   - `ALIGN="CENTER|LEFT|RIGHT"`
 
-textitem(string(String)) -->
-  html_string(String).
-textitem(entity(Name)) -->
-  html_entity(Name).
+textitem(br) -->
+  textitem(br([])).
 textitem(br(Attrs)) -->
   html_element(br, Attrs).
+% Compound term: parser.
 textitem(Compound) -->
   {var(Compound)}, !,
   html_element(Name, _, text(Content)),
@@ -200,12 +248,17 @@ textitem(Compound) -->
     supported_html_element(Name),
     Compound =.. [Name,Content]
   }.
+% Compound term: generator.
 textitem(Compound) -->
   {
     Compound =.. [Name,Content],
     supported_html_element(Name)
   },
   html_element(Name, _, text(Content)).
+textitem(String) -->
+  html_string(String).
+
+
 
 
 
diff --git a/plDcg b/plDcg
index c61080f..d2e4a8a 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit c61080f3d8df6ba6d48b0d70f5ba52047c8cbd29
+Subproject commit d2e4a8a094b7c405222574a4f9fe8c472296d7e6
diff --git a/plHtml b/plHtml
index c98f740..dfd7c27 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit c98f740d593fff74bfa3cf3d08af13c857daa899
+Subproject commit dfd7c27dfd102e8eb6bfd9c516fccfcd23b5abf0
diff --git a/plUri b/plUri
index 66a7652..0be7e9c 160000
--- a/plUri
+++ b/plUri
@@ -1 +1 @@
-Subproject commit 66a7652bc1ab6a4dc1fc790b09894d6c51d42dcf
+Subproject commit 0be7e9cae7b42dea30f08aa751438d382387b8a2
 
```
 
<h2 id="59"> 59: 正在比较变动前 af5d96d 和变动后 ab4b616 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/README.md b/README.md
index f89c694..fff981c 100644
--- a/README.md
+++ b/README.md
@@ -3,6 +3,40 @@ plGraphViz
 
 Easily export graphs represented as Prolog terms to
  [GraphViz](http://www.graphviz.org/).
+The Prolog terms have the following form:
+
+~~~prolog
+graph(Vertices, Edges, GraphAttrs)
+~~~
+
+`Vertices` and `Edges` are lists of compounds terms of
+ the following form:
+
+~~~prolog
+vertex(Id, VertexAttrs)
+edges(FromId, ToId, EdgeAttrs)
+~~~
+
+`Id` identifies a vertex and need not occur in any of the edges
+ (i.e., unconnected vertices are allowed).
+`FromId` and `ToId` may occur in the list of vertices,
+ in order to draw an edge between vertices with set attributes.
+
+Attributes have the form `Name=Value`.
+`GraphAttrs` are attributes of the graph.
+`VertexAttrs` are attributes of the vertex.
+`EdgeAttrs` are attributes of the edge.
+
+Attribute values are given as Prolog terms as well,
+ and are type-checked before exporting.
+Many of the GraphViz attributes are supported.
+New ones are added on an as-needed bases
+ (open an issue on Github if you want to see a specific feature added).
+Supports HTML-like labels, allowing complex tables to be shown
+ inside vertices.
+Support for vertex clusters is currently under way.
+
+---
 
 ### Example
 
@@ -17,14 +51,14 @@ $ swipl run.pl
    File = 'PATH/plGraphViz/data/tmp.png'
 ~~~
 
+![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png "Example graph.")
+
 The graphic can be saved to a different file by instantiating
  the `File` argument.
 
-![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png "Example graph.")
-
 ---
 
-### Method option
+### 'Method' option
 
 Option `method(+atom)` sets the drawing method that is used by GraphViz
  to place the vertices and edges.
@@ -41,7 +75,7 @@ The following values are supported.
 
 ---
 
-### Output type option
+### 'Output' option
 
 Option `output(+atom)` sets the type of file the graph is written to.
 The following values are supported.
 
```
 
<h2 id="60"> 60: 正在比较变动前 ab4b616 和变动后 74bd19d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 3237b4b..4678991 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -438,7 +438,7 @@ smoothType(triangle).
 % A GraphViz string.
 
 string(Content) -->
-  atom(Content).
+  quoted(atom(Content)).
 
 
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 6db4451..d01b656 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +Gif:compound
+    gv_graph//1 % +Graph:compound
   ]
 ).
 
@@ -150,7 +150,7 @@ gv_generic_attributes_statement(Kind, I, KindAttrs) -->
 
 
 
-%! gv_graph(+Gif:compound)//
+%! gv_graph(+Graph:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
 
```
 
<h2 id="61"> 61: 正在比较变动前 74bd19d 和变动后 8ffff6f </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/README.md b/README.md
index fff981c..9413d36 100644
--- a/README.md
+++ b/README.md
@@ -38,6 +38,14 @@ Support for vertex clusters is currently under way.
 
 ---
 
+### Installation
+
+~~~shell
+$ git clone https://github.com/wouterbeek/plGraphViz.git
+$ cd plGraphViz
+$ git submodule update --init
+~~~
+
 ### Example
 
 ~~~prolog
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 4678991..3237b4b 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -438,7 +438,7 @@ smoothType(triangle).
 % A GraphViz string.
 
 string(Content) -->
-  quoted(atom(Content)).
+  atom(Content).
 
 
 
diff --git a/gv_dot.pl b/gv_dot.pl
index d01b656..6db4451 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +Graph:compound
+    gv_graph//1 % +Gif:compound
   ]
 ).
 
@@ -150,7 +150,7 @@ gv_generic_attributes_statement(Kind, I, KindAttrs) -->
 
 
 
-%! gv_graph(+Graph:compound)//
+%! gv_graph(+Gif:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
 
```
 
<h2 id="62"> 62: 正在比较变动前 8ffff6f 和变动后 ac3423a </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 3237b4b..4678991 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -438,7 +438,7 @@ smoothType(triangle).
 % A GraphViz string.
 
 string(Content) -->
-  atom(Content).
+  quoted(atom(Content)).
 
 
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 6db4451..d01b656 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +Gif:compound
+    gv_graph//1 % +Graph:compound
   ]
 ).
 
@@ -150,7 +150,7 @@ gv_generic_attributes_statement(Kind, I, KindAttrs) -->
 
 
 
-%! gv_graph(+Gif:compound)//
+%! gv_graph(+Graph:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
 
```
 
<h2 id="63"> 63: 正在比较变动前 ac3423a 和变动后 57932e4 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 1b264ab..3c731a0 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 1b264ab8b668b44035c96f320f8798f7940ad2fa
+Subproject commit 3c731a03db6ee32031815d24c505e784273f46ef
 
```
 
<h2 id="64"> 64: 正在比较变动前 57932e4 和变动后 315b16e </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index a7901e4..efd8c89 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -45,7 +45,7 @@ and GraphViz output files or SVG DOM structures.
      method(+atom),
      output(+atom)
    ]).
-:- predicate_options(gif_to_svg_dom/3, 3, [
+:- predicate_options(graph_to_svg_dom/3, 3, [
      pass_to(graph_to_gv_file/3, 3)
    ]).
 :- predicate_options(graph_to_gv_file/3, 3, [
 
```
 
<h2 id="65"> 65: 正在比较变动前 315b16e 和变动后 898b5d2 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index efd8c89..52506e8 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -29,7 +29,6 @@ and GraphViz output files or SVG DOM structures.
 :- use_module(library(process)).
 
 :- use_module(generics(code_ext)).
-:- use_module(generics(db_ext)).
 :- use_module(os(file_ext)).
 :- use_module(os(run_ext)).
 
@@ -45,9 +44,6 @@ and GraphViz output files or SVG DOM structures.
      method(+atom),
      output(+atom)
    ]).
-:- predicate_options(graph_to_svg_dom/3, 3, [
-     pass_to(graph_to_gv_file/3, 3)
-   ]).
 :- predicate_options(graph_to_gv_file/3, 3, [
      pass_to(codes_to_gv_file/3, 3)
    ]).
 
```
 
<h2 id="66"> 66: 正在比较变动前 898b5d2 和变动后 4279a49 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 52506e8..188cfa6 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -6,9 +6,9 @@
     file_to_gv/3, % +InputFile:atom
                   % ?OutputFile:atom
                   % +Options:list(nvpair)
-    graph_to_gv_file/3, % +Graph:compound
-                        % ?OutputFile:atom
-                        % +Options:list(nvpair)
+    export_graph_to_gv_file/3, % +ExportGraph:compound
+                               % ?OutputFile:atom
+                               % +Options:list(nvpair)
     open_dot/1 % +File:file
   ]
 ).
@@ -22,7 +22,7 @@ Also converts between GraphViz DOT formatted files
 and GraphViz output files or SVG DOM structures.
 
 @author Wouter Beek
-@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08
+@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11
 */
 
 :- use_module(library(option)).
@@ -34,6 +34,11 @@ and GraphViz output files or SVG DOM structures.
 
 :- use_module(plGraphViz(gv_dot)).
 
+:- dynamic(user:prolog_file_type/2).
+:- multifile(user:prolog_file_type/2).
+
+user:prolog_file_type(dot, dot).
+
 :- predicate_options(codes_to_gv_file/3, 3, [
      pass_to(file_to_gv/3, 3)
    ]).
@@ -44,12 +49,14 @@ and GraphViz output files or SVG DOM structures.
      method(+atom),
      output(+atom)
    ]).
-:- predicate_options(graph_to_gv_file/3, 3, [
+:- predicate_options(export_graph_to_gv_file/3, 3, [
      pass_to(codes_to_gv_file/3, 3)
    ]).
 
 
 
+
+
 %! codes_to_gv_file(
 %!   +Codes:list(code),
 %!   ?OutputFile:atom,
@@ -120,23 +127,23 @@ file_to_gv(InputFile, OutputFile, Options):-
 
 
 
-%! graph_to_gv_file(
-%!   +Graph:compound,
+%! export_graph_to_gv_file(
+%!   +ExportGraph:compound,
 %!   ?OutputFile:atom,
 %!   +Options:list(nvpair)
 %! ) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
-%   * `method(+Method:atom`
+%   - `method(+Method:atom`
 %     The algorithm used by GraphViz for positioning the tree nodes.
 %     Either =dot= (default) or =sfdp=.
-%   * `output(+FileType:atom)`
+%   - `output(+FileType:atom)`
 %     The file type of the generated GraphViz file.
 %     Default: `pdf`.
 
-graph_to_gv_file(Gif, OutputFile, Options):-
-  once(phrase(gv_graph(Gif), Codes)),
+export_graph_to_gv_file(ExportGraph, OutputFile, Options):-
+  once(phrase(gv_graph(ExportGraph), Codes)),
   codes_to_gv_file(Codes, OutputFile, Options).
 
 
@@ -154,6 +161,7 @@ open_dot(File):-
 
 
 
+
 % HELPERS
 
 gv_method(circo).
 
```
 
<h2 id="67"> 67: 正在比较变动前 4279a49 和变动后 c173073 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index d01b656..a4197a9 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -13,10 +13,10 @@ Methods for writing to the GraphViz DOT format.
 
 In GraphViz vertices are called 'nodes'.
 
-~~~abnf
+```abnf
 attr_list = "[" [a_list] "]" [attr_list]
 a_list = ID "=" ID [","] [a_list]
-~~~
+```
 
 ---
 
diff --git a/gv_html.pl b/gv_html.pl
index 9a4d33a..63f2d82 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -9,7 +9,7 @@
 
 Grammar taken from the GraphViz Web site:
 
-~~~
+```
 label :   text
         | table
 text :   textitem
@@ -34,7 +34,7 @@ cells :   cell
         | cells <VR/> cell
 cell:   <TD> label </TD>
       | <TD> <IMG/> </TD>
-~~~
+```
 
 ---
 
@@ -148,9 +148,9 @@ rows([H]) -->
 
 
 %! table(?Contents:compound)// .
-% ~~~
+% ```
 % table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
-% ~~~
+% ```
 %
 % Supported attributes for `TABLE`:
 %   - `ALIGN="CENTER|LEFT|RIGHT"`
@@ -206,10 +206,10 @@ table(font(Attrs1,Table)) -->
 
 
 %! text(?Contents:list)// .
-% ~~~
+% ```
 % text :   textitem
 %        | text textitem
-% ~~~
+% ```
 
 text(Contents) -->
   {is_list(Contents)}, !,
@@ -220,7 +220,7 @@ text(Content) -->
 
 
 %! textitem(?Content:compound)// .
-% ~~~
+% ```
 % textitem :   string
 %            | <BR/>
 %            | <FONT> text </FONT>
@@ -231,7 +231,7 @@ text(Content) -->
 %            | <SUB> text </SUB>
 %            | <SUP> text </SUP>
 %            | <S> text </S>
-% ~~~
+% ```
 %
 % Supported attributes for BR:
 %   - `ALIGN="CENTER|LEFT|RIGHT"`
 
```
 
<h2 id="68"> 68: 正在比较变动前 c173073 和变动后 107c515 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index e3ba03c..6e61373 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -129,7 +129,7 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
 
 gv_attrs_download:-
   gv_attrs_url(Url),
-  download_html(Url, Dom, [html_dialect(html4),verbose(silent)]),
+  download_html_dom(Url, Dom, [html_dialect(html4),verbose(silent)]),
 
   xpath(Dom, //table(@align=center), TableDom),
   % @tbd This does not work, since in `record_name(Element, Name)`,
diff --git a/gv_color.pl b/gv_color.pl
index 0510f98..c1c6fde 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -94,7 +94,7 @@ wc_weight(Float) -->
 
 gv_color_download:-
   gv_color_url(Url),
-  download_html(Url, Dom, [html_dialect(html4),verbose(silent)]),
+  download_html_dom(Url, Dom, [html_dialect(html4),verbose(silent)]),
   xpath(Dom, //table(1), TableDom1),
   xpath(Dom, //table(2), TableDom2),
   maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]).
 
```
 
<h2 id="69"> 69: 正在比较变动前 107c515 和变动后 8f574bb </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 6e61373..0fa4dcc 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -2,7 +2,7 @@
   gv_attrs,
   [
     gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph])
-               % +Attribute:nvpair
+                     % +Attribute:nvpair
   ]
 ).
 
@@ -11,7 +11,7 @@
 Support for GraphViz attributes.
 
 @author Wouter Beek
-@version 2014/06, 2014/11
+@version 2014/06, 2014/11-2014/12
 */
 
 :- use_module(library(apply)).
@@ -30,7 +30,7 @@ Support for GraphViz attributes.
 :- use_module(plHtml(html)).
 :- use_module(plHtml(html_table)).
 
-:- use_module(plGraphViz(gv_attr_type)). % DCGs implementing attribute types.
+:- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]).
 
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
@@ -94,7 +94,7 @@ gv_attr_value(Context, Name=Value) -->
     % Check validity of Value w.r.t. minimum value -- if available.
     check_minimum(Value, Minimum)
   },
-  dcg_call(Dcg, Value).
+  dcg_call(gv_attr_type:Dcg, Value).
 
 
 
 
```
 
<h2 id="70"> 70: 正在比较变动前 8f574bb 和变动后 d7088dd </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index a4197a9..e7b6748 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -341,12 +341,12 @@ gv_id(Atom) -->
 gv_id(Atom) -->
   quoted(dcg_atom_codes(gv_quoted_string, Atom)), !.
 
-gv_id_first(X) --> letter(X).
+gv_id_first(X) --> ascii_letter(X).
 gv_id_first(X) --> underscore(X).
 
 gv_id_rest([]) --> [].
 gv_id_rest([H|T]) -->
-  (   alpha_numeric(H)
+  (   ascii_alpha_numeric(H)
   ;   underscore(H)
   ),
   gv_id_rest(T).
 
```
 
<h2 id="71"> 71: 正在比较变动前 d7088dd 和变动后 94ed05d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/README.md b/README.md
index 9413d36..eb8512b 100644
--- a/README.md
+++ b/README.md
@@ -51,7 +51,7 @@ $ git submodule update --init
 ~~~prolog
 $ swipl run.pl
 ?- use_module(plGraphViz(gv_file)).
-?- graph_to_gv_file(
+?- export_graph_to_gv_file(
      graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]),
      File,
      [method(sfdp),output(png)]
@@ -136,7 +136,7 @@ The following values are supported.
 Example of using HTML-like labels:
 
 ~~~prolog
-graph_to_gv_file(
+export_graph_to_gv_file(
   graph(
     [vertex(1,[]),vertex(2,[label=html(table([tr([td(a),td(b)]),tr([td(c),td(d)])]))])],
     [edge(1,2,[label='From 1 to 2.'])],
 
```
 
<h2 id="72"> 72: 正在比较变动前 94ed05d 和变动后 f481060 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 188cfa6..101dc4d 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -94,6 +94,7 @@ file_to_gv(InputFile, OutputFile, Options):-
   ;   rename_file(InputFile, OutputFile)
   ).
 file_to_gv(InputFile, OutputFile, Options):-
+gtrace,
   % Typecheck for `method` option.
   option(method(Method), Options, dot),
   findall(Method0, gv_method(Method0), Methods),
 
```
 
<h2 id="73"> 73: 正在比较变动前 f481060 和变动后 ce492ef </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 4678991..6d2e4f5 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -46,7 +46,7 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2014/06, 2014/11
+@version 2014/06, 2014/11-2014/12
 */
 
 :- use_module(plDcg(dcg_abnf)).
@@ -54,7 +54,9 @@
 :- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_cardinal)).
 :- use_module(plDcg(dcg_content)).
+:- use_module(plDcg(dcg_generics)).
 :- use_module(plDcg(dcg_quote)).
+:- use_module(plDcg(dcg_replace)).
 
 :- use_module(plGraphViz(gv_html)).
 
@@ -210,7 +212,10 @@ doubleList(L) -->
 % @tbd Support for context-dependent replacements.
 
 escString(String) -->
-  quoted(atom(String)).
+  {dcg_phrase(dcg_replace(double_quote, escaped_double_quote), String, String0)},
+  quoted(atom(String0)).
+escaped_double_quote -->
+  "\\\"".
 
 
 
diff --git a/gv_dot.pl b/gv_dot.pl
index e7b6748..c51b4cf 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -22,7 +22,7 @@ a_list = ID "=" ID [","] [a_list]
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
+@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11-2014/12
 */
 
 :- use_module(library(apply)).
@@ -32,6 +32,7 @@ a_list = ID "=" ID [","] [a_list]
 :- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_arrow)).
 :- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_atom)).
 :- use_module(plDcg(dcg_bracket)).
 :- use_module(plDcg(dcg_content)).
 :- use_module(plDcg(dcg_generics)).
@@ -111,12 +112,11 @@ gv_edge_operator(true) --> arrow(right, 2).
 
 gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -->
   indent(I),
-  gv_node_id(FromId), " ",
 
+  gv_node_id(FromId), " ",
   gv_edge_operator(Directed), " ",
-
   gv_node_id(ToId), " ",
-
+  
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
   bracketed(square, '*'(gv_attr(edge), EAttrs, [])),
@@ -293,7 +293,7 @@ gv_graph_type(true) --> "digraph".
 
 
 
-%! gv_id(?Atom:atom)// is det.
+%! gv_id(?Atom:compound)// is det.
 % Parse a GraphViz identifier.
 % There are 4 variants:
 %   1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters,
@@ -306,17 +306,26 @@ gv_graph_type(true) --> "digraph".
 %      is converted to `"`. All other characters are left unchanged.
 %      In particular, `\\` remains `\\`.
 %      Layout engines may apply additional escape sequences.
+%      Represented by a Prolog term of the form `double_quoted_string(ATOM)`.
 %   4. An HTML string (`<...>`).
+%      Represented by a Prolog term of the form `html_like_label(COMPOUND)`.
 %
 % @tbd Add support for HTML-like labels:
 %      http://www.graphviz.org/doc/info/shapes.html#html
 %      This requires an XML grammar!
 
-% HTML strings (variant 4).
-gv_id(Content) -->
-  {compound(Content)}, !,
+% HTML strings (assumed to be the same as HTML-like labels).
+gv_id(html_like_label(Content)) --> !,
   gv_html_like_label(Content).
-% Alpha-numeric strings (variant 1).
+% Double-quoted strings.
+% The quotes are already part of the given atom.
+gv_id(double_quoted_string(Atom)) --> !,
+  quoted(atom(Atom)).
+% Numerals.
+gv_id(N) -->
+  {number(N)}, !,
+  gv_numeral(N).
+% Alpha-numeric strings.
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
   gv_id_first(H),
@@ -324,22 +333,6 @@ gv_id(Atom) -->
   % Variant 1 identifiers should not be (case-variants of) a
   % GraphViz keyword.
   {\+ gv_keyword([H|T])}.
-% Numerals (variant 2)
-gv_id(N) -->
-  {number(N)}, !,
-  gv_numeral(N).
-% Double-quoted strings (variant 3).
-% The quotes are already part of the given atom.
-gv_id(Atom) -->
-  {
-    atom_codes(Atom, [H|T]),
-    append(S, [H], T)
-  },
-  dcg_between(double_quote(H), gv_quoted_string(S)), !.
-% Double-quoted strings (variant 3).
-% The quotes are not in the given atom. They are written anyway.
-gv_id(Atom) -->
-  quoted(dcg_atom_codes(gv_quoted_string, Atom)), !.
 
 gv_id_first(X) --> ascii_letter(X).
 gv_id_first(X) --> underscore(X).
@@ -382,7 +375,7 @@ gv_kind(node) --> "node".
 
 
 
-%! gv_node_id(+NodeId:atom)// .
+%! gv_node_id(+NodeId:compound)// .
 % GraphViz node identifiers can be of the following two types:
 %   1. A GraphViz identifier, see gv_id//1.
 %   2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0.
@@ -439,26 +432,6 @@ gv_port_location -->
 
 
 
-gv_quoted_string([]) --> [].
-% Just to be sure, we do not allow the double quote
-% that closes the string to be escaped.
-gv_quoted_string([X]) -->
-  {X \== 92}, !,
-  [X].
-% A double quote is only allowed if it is escaped by a backslash.
-gv_quoted_string([92,34|T]) --> !,
-  gv_quoted_string(T).
-% Add the backslash escape character.
-gv_quoted_string([34|T]) --> !,
-  "\\\"",
-  gv_quoted_string(T).
-% All other characters are allowed without escaping.
-gv_quoted_string([H|T]) -->
-  [H],
-  gv_quoted_string(T).
-
-
-
 gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -->
   indent(I),
   bracketed(curly, (
diff --git a/gv_file.pl b/gv_file.pl
index 101dc4d..d191e10 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -22,7 +22,7 @@ Also converts between GraphViz DOT formatted files
 and GraphViz output files or SVG DOM structures.
 
 @author Wouter Beek
-@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11
+@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11-2014/12
 */
 
 :- use_module(library(option)).
@@ -38,6 +38,7 @@ and GraphViz output files or SVG DOM structures.
 :- multifile(user:prolog_file_type/2).
 
 user:prolog_file_type(dot, dot).
+user:prolog_file_type(pdf, pdf).
 
 :- predicate_options(codes_to_gv_file/3, 3, [
      pass_to(file_to_gv/3, 3)
@@ -94,7 +95,6 @@ file_to_gv(InputFile, OutputFile, Options):-
   ;   rename_file(InputFile, OutputFile)
   ).
 file_to_gv(InputFile, OutputFile, Options):-
-gtrace,
   % Typecheck for `method` option.
   option(method(Method), Options, dot),
   findall(Method0, gv_method(Method0), Methods),
@@ -108,9 +108,7 @@ gtrace,
   % The output file is either given or created.
   (   var(OutputFile)
   ->  file_alternative(InputFile, _, _, OutputType, OutputFile)
-  ;   is_absolute_file_name(OutputFile),
-      % The given output file must match a certain file extension.
-      file_name_extension(_, OutputType, OutputFile)
+  ;   is_absolute_file_name(OutputFile)
   ),
 
   % Run the GraphViz conversion command in the shell.
 
```
 
<h2 id="74"> 74: 正在比较变动前 ce492ef 和变动后 ddef555 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 6d2e4f5..b886f9f 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -229,7 +229,7 @@ escaped_double_quote -->
 
 %! lblString(+String:compound)// .
 
-lblString(html(V)) -->
+lblString(html_like_label(V)) -->
   gv_html_like_label(V).
 lblString(V) -->
   escString(V).
diff --git a/gv_html.pl b/gv_html.pl
index 63f2d82..1410c25 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -236,8 +236,6 @@ text(Content) -->
 % Supported attributes for BR:
 %   - `ALIGN="CENTER|LEFT|RIGHT"`
 
-textitem(br) -->
-  textitem(br([])).
 textitem(br(Attrs)) -->
   html_element(br, Attrs).
 % Compound term: parser.
 
```
 
<h2 id="75"> 75: 正在比较变动前 ddef555 和变动后 af27fdd </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_color.pl b/gv_color.pl
index c1c6fde..2263fa1 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -17,7 +17,7 @@
 */
 
 :- use_module(library(apply)).
-:- use_module(library(lists), except([delete/3])).
+:- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
diff --git a/gv_dot.pl b/gv_dot.pl
index c51b4cf..e047a74 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -26,7 +26,7 @@ a_list = ID "=" ID [","] [a_list]
 */
 
 :- use_module(library(apply)).
-:- use_module(library(lists), except([delete/3])).
+:- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(ordsets)).
 
 :- use_module(plDcg(dcg_abnf)).
 
```
 
<h2 id="76"> 76: 正在比较变动前 af27fdd 和变动后 f390238 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index b886f9f..b68f753 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -46,7 +46,7 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2014/06, 2014/11-2014/12
+@version 2014/06, 2014/11-2015/01
 */
 
 :- use_module(plDcg(dcg_abnf)).
@@ -57,6 +57,7 @@
 :- use_module(plDcg(dcg_generics)).
 :- use_module(plDcg(dcg_quote)).
 :- use_module(plDcg(dcg_replace)).
+:- use_module(plDcg(language/c)).
 
 :- use_module(plGraphViz(gv_html)).
 
@@ -104,9 +105,9 @@ gv_attr_type(viewPort).
 %! addDouble(+Float:float)// .
 % An *addDouble* is represented by a Prolog float.
 
-addDouble(Float) -->
-  '?'(plus_sign, []),
-  double(Float).
+addDouble(N) -->
+  ("+" ; ""),
+  c_double(N).
 
 
 
@@ -115,7 +116,7 @@ addDouble(Float) -->
 % `point(X:float,Y:float,InputOnly:boolean)`.
 
 addPoint(Point) -->
-  '?'(plus_sign, []),
+  ("+" ; ""),
   point(Point).
 
 
@@ -194,10 +195,8 @@ dirType(none).
 
 %! double(+Double:float)// .
 
-double(Double1) -->
-  % float//1 will check for float type.
-  {Double2 is Double1 * 1.0},
-  float(Double2).
+double(N) -->
+  c_double(N).
 
 
 
diff --git a/gv_numeral.pl b/gv_numeral.pl
index d36fa59..cf595d9 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -19,7 +19,7 @@
 
 
 
-%! gv_numeral(?Value:number)// .
+%! gv_numeral(?Value:compound)// .
 %
 % # Syntax
 %
@@ -45,36 +45,39 @@
 %   - (decimal-separator)
 
 gv_numeral(N) -->
-  {var(N)}, !,
-  sign(Sign),
-  (   ".",
-      '+'(decimal_digit, Fractional, [convert1(weights_decimal)]),
-      {IntegerPart = 0}
-  ;   '+'(decimal_digit, IntegerPart, [convert1(weights_decimal)]),
-      (   ".",
-          '*'(decimal_digit, Fractional, [convert1(weights_decimal)])
-      ;   {Fractional = 0}
+  (   {ground(N)}
+  ->  '[-]?'(N),
+      {N0 is abs(N)},
+      {rational_parts(N0, I, F)},
+      (   % [1] The fractional is zero, so only write the integer part
+          %     and do not write the decimal separator.
+          {F =:= 0}
+      ->  {weights_nonneg(IW, I)},
+          '[0-9]+'(IW)
+      ;   % [2] The integer part is zero, so only write the fractional part,
+          %     preceded by the decimal separator.
+          {I =:= 0}
+      ->  ".",
+          {weights_fraction(FW, F)},
+          '[0-9]*'(FW)
+      ;   % [3] Both the integer part and the fractional are non-zero,
+          %     so write both of them, with the decimal separator in-between.
+          {weights_nonneg(IW, I)},
+          '[0-9]+'(IW),
+          ".",
+          {weights_fraction(FW, F)},
+          '[0-9]*'(FW)
       )
-  ),
-  {   number_integer_parts(UnsignedN, IntegerPart, Fractional),
-      N is copysign(UnsignedN, Sign)
-  }.
-gv_numeral(N) -->
-  {number_sign_parts(N, Sign, UnsignedN)},
-  sign_negative(Sign),
-  {number_integer_parts(UnsignedN, IntegerPart, Fractional)},
-  (   % [1] The fractional is zero, so only write the integer part
-      %     and do not write the decimal separator.
-      {Fractional =:= 0}
-  ->  integer(IntegerPart)
-  ;   % [2] The integer part is zero, so only write the fractional part,
-      %     preceded by the decimal separator.
-      {IntegerPart =:= 0}
-  ->  ".",
-      integer(Fractional)
-  ;   % [3] Both the integer part and the fractional are non-zero,
-      %     so write both of them, with the decimal separator in-between.
-      integer(IntegerPart),
-      ".",
-      integer(Fractional)
+  ;   '[-]?'(Sg),
+      (   ".",
+          '[0-9]+'(FW),
+          {IW = []}
+      ;   '[0-9]+'(IW),
+          (   ".",
+              '[0-9]*'(FW),
+          ;   {FW = []}
+          )
+      ),
+      {rational_parts_weights(N0, IW, FW)},
+      {N is copysign(N0, Sg)}
   ).
 
```
 
<h2 id="77"> 77: 正在比较变动前 f390238 和变动后 c5f7d82 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_numeral.pl b/gv_numeral.pl
index cf595d9..c9b3e1d 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -8,12 +8,15 @@
 /** <module> GraphViz numeral
 
 @author Wouter Beek
-@version 2014/05-2014/06
+@version 2014/05-2014/06, 2015/01
 */
 
 :- use_module(math(math_ext)).
+:- use_module(math(radix)).
+:- use_module(math(rational_ext)).
 
 :- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_abnf_common)).
 :- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_cardinal)).
 
 
```
 
<h2 id="78"> 78: 正在比较变动前 c5f7d82 和变动后 acf6467 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index b68f753..157681f 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -49,6 +49,8 @@
 @version 2014/06, 2014/11-2015/01
 */
 
+:- use_module(library(dcg/basics), [float//1,integer//1]).
+
 :- use_module(plDcg(dcg_abnf)).
 :- use_module(plDcg(dcg_ascii)).
 :- use_module(plDcg(dcg_atom)).
diff --git a/gv_color.pl b/gv_color.pl
index 2263fa1..7aea965 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -13,10 +13,11 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2014/06, 2014/10-2014/11
+@version 2014/06, 2014/10-2014/11, 2015/01
 */
 
 :- use_module(library(apply)).
+:- use_module(library(dcg/basics), [float//1]).
 :- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
diff --git a/gv_numeral.pl b/gv_numeral.pl
index c9b3e1d..439a024 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -77,7 +77,7 @@ gv_numeral(N) -->
           {IW = []}
       ;   '[0-9]+'(IW),
           (   ".",
-              '[0-9]*'(FW),
+              '[0-9]*'(FW)
           ;   {FW = []}
           )
       ),
 
```
 
<h2 id="79"> 79: 正在比较变动前 acf6467 和变动后 6656a2d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 157681f..3ae0920 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -59,7 +59,6 @@
 :- use_module(plDcg(dcg_generics)).
 :- use_module(plDcg(dcg_quote)).
 :- use_module(plDcg(dcg_replace)).
-:- use_module(plDcg(language/c)).
 
 :- use_module(plGraphViz(gv_html)).
 
@@ -109,7 +108,7 @@ gv_attr_type(viewPort).
 
 addDouble(N) -->
   ("+" ; ""),
-  c_double(N).
+  float(N).
 
 
 
@@ -198,7 +197,7 @@ dirType(none).
 %! double(+Double:float)// .
 
 double(N) -->
-  c_double(N).
+  float(N).
 
 
 
diff --git a/gv_numeral.pl b/gv_numeral.pl
index 439a024..5776a4a 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -22,6 +22,8 @@
 
 
 
+
+
 %! gv_numeral(?Value:compound)// .
 %
 % # Syntax
 
```
 
<h2 id="80"> 80: 正在比较变动前 6656a2d 和变动后 256c9ce </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 3c731a0..06aa96f 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 3c731a03db6ee32031815d24c505e784273f46ef
+Subproject commit 06aa96fbeef941157e9bcccc7c088d72ba8c8d3a
diff --git a/plDcg b/plDcg
index d2e4a8a..2f2ae3a 160000
--- a/plDcg
+++ b/plDcg
@@ -1 +1 @@
-Subproject commit d2e4a8a094b7c405222574a4f9fe8c472296d7e6
+Subproject commit 2f2ae3a9228e8add2dfa4835ff045a3635a062ba
diff --git a/plHtml b/plHtml
index dfd7c27..b8bd7a6 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit dfd7c27dfd102e8eb6bfd9c516fccfcd23b5abf0
+Subproject commit b8bd7a6d92f1076a5be2c4686e998a0bfc840ac8
diff --git a/plUri b/plUri
index 0be7e9c..6550f33 160000
--- a/plUri
+++ b/plUri
@@ -1 +1 @@
-Subproject commit 0be7e9cae7b42dea30f08aa751438d382387b8a2
+Subproject commit 6550f331120c7f63739f69692791760afb507280
 
```
 
<h2 id="81"> 81: 正在比较变动前 256c9ce 和变动后 bf4ebea </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitmodules b/.gitmodules
index 6c22435..26ddd86 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,9 +4,6 @@
 [submodule "plHtml"]
 	path = plHtml
 	url = https://github.com/wouterbeek/plHtml.git
-[submodule "plDcg"]
-	path = plDcg
-	url = https://github.com/wouterbeek/plDcg.git
 [submodule "plUri"]
 	path = plUri
 	url = https://github.com/wouterbeek/plUri.git
diff --git a/debug_project.pl b/debug_project.pl
index 17195c1..d53a92f 100644
--- a/debug_project.pl
+++ b/debug_project.pl
@@ -1,7 +1,8 @@
 :- module(
   debug_project,
   [
-    debug_all_files/0
+    debug_all_files/0,
+    start_pldoc_server/0
   ]
 ).
 
@@ -11,20 +12,35 @@ Generic code for debugging a project:
   * Load all subdirectories and Prolog files contained in those directories.
 
 @author Wouter Beek
-@version 2014/11/19
+@version 2015/02/26
 */
 
 :- use_module(library(ansi_term)).
 :- use_module(library(apply)).
+:- use_module(library(pldoc)).
+:- use_module(library(portray_text)).
+
+:- set_prolog_flag(
+  answer_write_options,
+  [max_depth(100),portrayed(true),spacing(next_argument)]
+).
+:- set_prolog_flag(
+  debugger_write_options,
+  [max_depth(100),portrayed(true),spacing(next_argument)]
+).
+:- set_portray_text(ellipsis, 1000).
+
+:- dynamic(user:debug_mode).
+:- multifile(user:debug_mode).
+
+:- initialization(init_debug_mode).
 
-:- use_module(os(dir_ext)).
 
-% Avoid errors when using gtrace/0 in threads.
-:- initialization(guitracer).
 
 
 
 debug_all_files:-
+  ensure_loaded(plc(io/dir_ext)),
   absolute_file_name(project(.), Dir, [access(read),file_type(directory)]),
   directory_files(
     Dir,
@@ -55,6 +71,30 @@ do_not_load0(index).
 do_not_load0(load).
 do_not_load0(load_project).
 do_not_load0(run).
+do_not_load0(style).
+
+
+
+%! start_pldoc_server is det.
+% The plDoc server should be started *before* documented modules are loaded.
+
+start_pldoc_server:-
+  doc_server(9999).
+
+
+
+
+
+% INITIALIZATION
+
+init_debug_mode:-
+  % Set the debug mode flag.
+  (   user:debug_mode
+  ->  true
+  ;   assert(user:debug_mode)
+  ),
+  % Avoid errors when using gtrace/0 in threads.
+  guitracer.
 
 
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 3ae0920..9794eef 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -51,14 +51,14 @@
 
 :- use_module(library(dcg/basics), [float//1,integer//1]).
 
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_ascii)).
-:- use_module(plDcg(dcg_atom)).
-:- use_module(plDcg(dcg_cardinal)).
-:- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generics)).
-:- use_module(plDcg(dcg_quote)).
-:- use_module(plDcg(dcg_replace)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_ascii)).
+:- use_module(plc(dcg/dcg_atom)).
+:- use_module(plc(dcg/dcg_cardinal)).
+:- use_module(plc(dcg/dcg_content)).
+:- use_module(plc(dcg/dcg_generics)).
+:- use_module(plc(dcg/dcg_quote)).
+:- use_module(plc(dcg/dcg_replace)).
 
 :- use_module(plGraphViz(gv_html)).
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 0fa4dcc..4e7ae2d 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -18,17 +18,16 @@ Support for GraphViz attributes.
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(generics(db_ext)).
-:- use_module(os(file_ext)).
-:- use_module(os(file_gnu)).
-
-:- use_module(plDcg(dcg_atom)).
-:- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_meta)).
-:- use_module(plDcg(dcg_generics)).
+:- use_module(plc(dcg/dcg_atom)).
+:- use_module(plc(dcg/dcg_content)).
+:- use_module(plc(dcg/dcg_meta)).
+:- use_module(plc(dcg/dcg_generics)).
+:- use_module(plc(generics/db_ext)).
+:- use_module(plc(io/file_ext)).
+:- use_module(plc(io/file_gnu)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(html_table)).
+:- use_module(plHtml(elements/html_table)).
 
 :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]).
 
@@ -100,7 +99,7 @@ gv_attr_value(Context, Name=Value) -->
 
 
 
-% HELPERS
+% HELPERS %
 
 %! check_minimum(+Value:atom, +Minimum:number) is semidet.
 % Trivially succeeds if no minimum value is available for a given attribute.
@@ -112,7 +111,9 @@ check_minimum(V, Min1):-
 
 
 
-% INITIALIZATION
+
+
+% INITIALIZATION %
 
 %! assert_gv_attr_row(+Row:list(atom)) is det.
 
diff --git a/gv_color.pl b/gv_color.pl
index 7aea965..34d99eb 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -22,19 +22,18 @@
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(generics(db_ext)).
-:- use_module(generics(persistent_db_ext)).
-:- use_module(os(file_ext)).
-:- use_module(os(file_gnu)).
-
-:- use_module(plDcg(abnf_core_rules)).
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_atom)).
-:- use_module(plDcg(dcg_cardinal)).
-:- use_module(plDcg(dcg_content)).
+:- use_module(plc(dcg/abnf_core_rules)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_atom)).
+:- use_module(plc(dcg/dcg_cardinal)).
+:- use_module(plc(dcg/dcg_content)).
+:- use_module(plc(generics/db_ext)).
+:- use_module(plc(generics/persistent_db_ext)).
+:- use_module(plc(io/file_ext)).
+:- use_module(plc(io/file_gnu)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(html_table)).
+:- use_module(plHtml(elements/html_table)).
 
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
@@ -46,6 +45,8 @@
 
 
 
+
+
 % color(+Color:compound)// .
 % A *color* is represented by a compound term of one of the following forms:
 %   1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)`
@@ -89,7 +90,9 @@ wc_weight(Float) -->
 
 
 
-% INITIALIZATION
+
+
+% INITIALIZATION %
 
 %! gv_color_download is det.
 
diff --git a/gv_dot.pl b/gv_dot.pl
index e047a74..19657f5 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -29,15 +29,15 @@ a_list = ID "=" ID [","] [a_list]
 :- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(ordsets)).
 
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_arrow)).
-:- use_module(plDcg(dcg_ascii)).
-:- use_module(plDcg(dcg_atom)).
-:- use_module(plDcg(dcg_bracket)).
-:- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generics)).
-:- use_module(plDcg(dcg_meta)).
-:- use_module(plDcg(dcg_quote)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_arrow)).
+:- use_module(plc(dcg/dcg_ascii)).
+:- use_module(plc(dcg/dcg_atom)).
+:- use_module(plc(dcg/dcg_bracket)).
+:- use_module(plc(dcg/dcg_content)).
+:- use_module(plc(dcg/dcg_generics)).
+:- use_module(plc(dcg/dcg_meta)).
+:- use_module(plc(dcg/dcg_quote)).
 
 :- use_module(plGraphViz(gv_attrs)).
 :- use_module(plGraphViz(gv_html)).
diff --git a/gv_file.pl b/gv_file.pl
index d191e10..6cb739f 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -28,9 +28,9 @@ and GraphViz output files or SVG DOM structures.
 :- use_module(library(option)).
 :- use_module(library(process)).
 
-:- use_module(generics(code_ext)).
-:- use_module(os(file_ext)).
-:- use_module(os(run_ext)).
+:- use_module(plc(generics/code_ext)).
+:- use_module(plc(io/file_ext)).
+:- use_module(plc(process/run_ext)).
 
 :- use_module(plGraphViz(gv_dot)).
 
@@ -41,18 +41,18 @@ user:prolog_file_type(dot, dot).
 user:prolog_file_type(pdf, pdf).
 
 :- predicate_options(codes_to_gv_file/3, 3, [
-     pass_to(file_to_gv/3, 3)
-   ]).
+  pass_to(file_to_gv/3, 3)
+]).
 :- predicate_options(file_to_gv/2, 2, [
-     pass_to(file_to_gv/3, 3)
-   ]).
+  pass_to(file_to_gv/3, 3)
+]).
 :- predicate_options(file_to_gv/3, 3, [
-     method(+atom),
-     output(+atom)
-   ]).
+  method(+atom),
+  output(+atom)
+]).
 :- predicate_options(export_graph_to_gv_file/3, 3, [
-     pass_to(codes_to_gv_file/3, 3)
-   ]).
+  pass_to(codes_to_gv_file/3, 3)
+]).
 
 
 
diff --git a/gv_html.pl b/gv_html.pl
index 1410c25..65ae2bd 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -43,9 +43,9 @@ cell:   <TD> label </TD>
 @version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
 */
 
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_bracket)).
-:- use_module(plDcg(dcg_content)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_bracket)).
+:- use_module(plc(dcg/dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
diff --git a/gv_numeral.pl b/gv_numeral.pl
index 5776a4a..ac294b4 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -11,14 +11,13 @@
 @version 2014/05-2014/06, 2015/01
 */
 
-:- use_module(math(math_ext)).
-:- use_module(math(radix)).
-:- use_module(math(rational_ext)).
-
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_abnf_common)).
-:- use_module(plDcg(dcg_ascii)).
-:- use_module(plDcg(dcg_cardinal)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_abnf_common)).
+:- use_module(plc(dcg/dcg_ascii)).
+:- use_module(plc(dcg/dcg_cardinal)).
+:- use_module(plc(math/math_ext)).
+:- use_module(plc(math/radix)).
+:- use_module(plc(math/rational_ext)).
 
 
 
diff --git a/load.pl b/load.pl
index 5cec32c..de8b5ca 100644
--- a/load.pl
+++ b/load.pl
@@ -7,7 +7,6 @@
 :- use_module(load_project).
 :- load_project([
     plc-'Prolog-Library-Collection',
-    plDcg,
     plHtml,
     plUri
 ]).
diff --git a/plDcg b/plDcg
deleted file mode 160000
index 2f2ae3a..0000000
--- a/plDcg
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 2f2ae3a9228e8add2dfa4835ff045a3635a062ba
 
```
 
<h2 id="82"> 82: 正在比较变动前 bf4ebea 和变动后 70aec99 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitmodules b/.gitmodules
index 26ddd86..6c22435 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,6 +4,9 @@
 [submodule "plHtml"]
 	path = plHtml
 	url = https://github.com/wouterbeek/plHtml.git
+[submodule "plDcg"]
+	path = plDcg
+	url = https://github.com/wouterbeek/plDcg.git
 [submodule "plUri"]
 	path = plUri
 	url = https://github.com/wouterbeek/plUri.git
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 06aa96f..9d0e491 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 06aa96fbeef941157e9bcccc7c088d72ba8c8d3a
+Subproject commit 9d0e49135bbd1916d901ccd18be605699f48c5cc
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 9794eef..3ae0920 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -51,14 +51,14 @@
 
 :- use_module(library(dcg/basics), [float//1,integer//1]).
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_ascii)).
-:- use_module(plc(dcg/dcg_atom)).
-:- use_module(plc(dcg/dcg_cardinal)).
-:- use_module(plc(dcg/dcg_content)).
-:- use_module(plc(dcg/dcg_generics)).
-:- use_module(plc(dcg/dcg_quote)).
-:- use_module(plc(dcg/dcg_replace)).
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_atom)).
+:- use_module(plDcg(dcg_cardinal)).
+:- use_module(plDcg(dcg_content)).
+:- use_module(plDcg(dcg_generics)).
+:- use_module(plDcg(dcg_quote)).
+:- use_module(plDcg(dcg_replace)).
 
 :- use_module(plGraphViz(gv_html)).
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 4e7ae2d..25519af 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -18,16 +18,17 @@ Support for GraphViz attributes.
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(plc(dcg/dcg_atom)).
-:- use_module(plc(dcg/dcg_content)).
-:- use_module(plc(dcg/dcg_meta)).
-:- use_module(plc(dcg/dcg_generics)).
-:- use_module(plc(generics/db_ext)).
-:- use_module(plc(io/file_ext)).
-:- use_module(plc(io/file_gnu)).
+:- use_module(generics(db_ext)).
+:- use_module(os(file_ext)).
+:- use_module(os(file_gnu)).
+
+:- use_module(plDcg(dcg_atom)).
+:- use_module(plDcg(dcg_content)).
+:- use_module(plDcg(dcg_meta)).
+:- use_module(plDcg(dcg_generics)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(elements/html_table)).
+:- use_module(plHtml(html_table)).
 
 :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]).
 
@@ -80,16 +81,16 @@ gv_attr_value(Context, Name=Value) -->
     % Check the validity of the context argument.
     gv_attr(Name, UsedBy, Types, _, Minimum, _),
     memberchk(Context, UsedBy),
-    
+
     %  Pick a value type non-deterministically.
     member(Type, Types),
-    
+
     % The `style` type is the only one that requires the context argument.
     (   Type == style
     ->  Dcg =.. [Type,Context]
     ;   Dcg =.. [Type]
     ),
-    
+
     % Check validity of Value w.r.t. minimum value -- if available.
     check_minimum(Value, Minimum)
   },
@@ -99,7 +100,7 @@ gv_attr_value(Context, Name=Value) -->
 
 
 
-% HELPERS %
+% HELPERS
 
 %! check_minimum(+Value:atom, +Minimum:number) is semidet.
 % Trivially succeeds if no minimum value is available for a given attribute.
@@ -111,9 +112,7 @@ check_minimum(V, Min1):-
 
 
 
-
-
-% INITIALIZATION %
+% INITIALIZATION
 
 %! assert_gv_attr_row(+Row:list(atom)) is det.
 
@@ -130,13 +129,8 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
 
 gv_attrs_download:-
   gv_attrs_url(Url),
-  download_html_dom(Url, Dom, [html_dialect(html4),verbose(silent)]),
-
+  download_html_dom(Url, Dom, [dialect(html4),silent(true)]),
   xpath(Dom, //table(@align=center), TableDom),
-  % @tbd This does not work, since in `record_name(Element, Name)`,
-  %      `Element` is a signleton list whereas a compound term is expected.
-  %%%%xpath(Dom, /html/body/table, TableDom),
-
   html_to_table(TableDom, _, Rows),
   maplist(assert_gv_attr_row, Rows).
 
diff --git a/gv_color.pl b/gv_color.pl
index 34d99eb..7aea965 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -22,18 +22,19 @@
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(plc(dcg/abnf_core_rules)).
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_atom)).
-:- use_module(plc(dcg/dcg_cardinal)).
-:- use_module(plc(dcg/dcg_content)).
-:- use_module(plc(generics/db_ext)).
-:- use_module(plc(generics/persistent_db_ext)).
-:- use_module(plc(io/file_ext)).
-:- use_module(plc(io/file_gnu)).
+:- use_module(generics(db_ext)).
+:- use_module(generics(persistent_db_ext)).
+:- use_module(os(file_ext)).
+:- use_module(os(file_gnu)).
+
+:- use_module(plDcg(abnf_core_rules)).
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_atom)).
+:- use_module(plDcg(dcg_cardinal)).
+:- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(elements/html_table)).
+:- use_module(plHtml(html_table)).
 
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
@@ -45,8 +46,6 @@
 
 
 
-
-
 % color(+Color:compound)// .
 % A *color* is represented by a compound term of one of the following forms:
 %   1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)`
@@ -90,9 +89,7 @@ wc_weight(Float) -->
 
 
 
-
-
-% INITIALIZATION %
+% INITIALIZATION
 
 %! gv_color_download is det.
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 19657f5..e047a74 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -29,15 +29,15 @@ a_list = ID "=" ID [","] [a_list]
 :- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(ordsets)).
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_arrow)).
-:- use_module(plc(dcg/dcg_ascii)).
-:- use_module(plc(dcg/dcg_atom)).
-:- use_module(plc(dcg/dcg_bracket)).
-:- use_module(plc(dcg/dcg_content)).
-:- use_module(plc(dcg/dcg_generics)).
-:- use_module(plc(dcg/dcg_meta)).
-:- use_module(plc(dcg/dcg_quote)).
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_arrow)).
+:- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_atom)).
+:- use_module(plDcg(dcg_bracket)).
+:- use_module(plDcg(dcg_content)).
+:- use_module(plDcg(dcg_generics)).
+:- use_module(plDcg(dcg_meta)).
+:- use_module(plDcg(dcg_quote)).
 
 :- use_module(plGraphViz(gv_attrs)).
 :- use_module(plGraphViz(gv_html)).
diff --git a/gv_file.pl b/gv_file.pl
index 6cb739f..d191e10 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -28,9 +28,9 @@ and GraphViz output files or SVG DOM structures.
 :- use_module(library(option)).
 :- use_module(library(process)).
 
-:- use_module(plc(generics/code_ext)).
-:- use_module(plc(io/file_ext)).
-:- use_module(plc(process/run_ext)).
+:- use_module(generics(code_ext)).
+:- use_module(os(file_ext)).
+:- use_module(os(run_ext)).
 
 :- use_module(plGraphViz(gv_dot)).
 
@@ -41,18 +41,18 @@ user:prolog_file_type(dot, dot).
 user:prolog_file_type(pdf, pdf).
 
 :- predicate_options(codes_to_gv_file/3, 3, [
-  pass_to(file_to_gv/3, 3)
-]).
+     pass_to(file_to_gv/3, 3)
+   ]).
 :- predicate_options(file_to_gv/2, 2, [
-  pass_to(file_to_gv/3, 3)
-]).
+     pass_to(file_to_gv/3, 3)
+   ]).
 :- predicate_options(file_to_gv/3, 3, [
-  method(+atom),
-  output(+atom)
-]).
+     method(+atom),
+     output(+atom)
+   ]).
 :- predicate_options(export_graph_to_gv_file/3, 3, [
-  pass_to(codes_to_gv_file/3, 3)
-]).
+     pass_to(codes_to_gv_file/3, 3)
+   ]).
 
 
 
diff --git a/gv_html.pl b/gv_html.pl
index 65ae2bd..1410c25 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -43,9 +43,9 @@ cell:   <TD> label </TD>
 @version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
 */
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_bracket)).
-:- use_module(plc(dcg/dcg_content)).
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_bracket)).
+:- use_module(plDcg(dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
diff --git a/gv_numeral.pl b/gv_numeral.pl
index ac294b4..5776a4a 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -11,13 +11,14 @@
 @version 2014/05-2014/06, 2015/01
 */
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_abnf_common)).
-:- use_module(plc(dcg/dcg_ascii)).
-:- use_module(plc(dcg/dcg_cardinal)).
-:- use_module(plc(math/math_ext)).
-:- use_module(plc(math/radix)).
-:- use_module(plc(math/rational_ext)).
+:- use_module(math(math_ext)).
+:- use_module(math(radix)).
+:- use_module(math(rational_ext)).
+
+:- use_module(plDcg(dcg_abnf)).
+:- use_module(plDcg(dcg_abnf_common)).
+:- use_module(plDcg(dcg_ascii)).
+:- use_module(plDcg(dcg_cardinal)).
 
 
 
diff --git a/load.pl b/load.pl
index de8b5ca..5cec32c 100644
--- a/load.pl
+++ b/load.pl
@@ -7,6 +7,7 @@
 :- use_module(load_project).
 :- load_project([
     plc-'Prolog-Library-Collection',
+    plDcg,
     plHtml,
     plUri
 ]).
diff --git a/plDcg b/plDcg
new file mode 160000
index 0000000..45a2d2b
--- /dev/null
+++ b/plDcg
@@ -0,0 +1 @@
+Subproject commit 45a2d2b3ce1e3e18533586005b2a6a63eb2300d0
diff --git a/plHtml b/plHtml
index b8bd7a6..c2491cb 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit b8bd7a6d92f1076a5be2c4686e998a0bfc840ac8
+Subproject commit c2491cb789baef4b2c7b9e30ca79d65a7213af02
diff --git a/plUri b/plUri
index 6550f33..f1696b3 160000
--- a/plUri
+++ b/plUri
@@ -1 +1 @@
-Subproject commit 6550f331120c7f63739f69692791760afb507280
+Subproject commit f1696b3c41635b4c6af3e961e819a5e6c0bf5b75
 
```
 
<h2 id="83"> 83: 正在比较变动前 70aec99 和变动后 e06e6ba </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitmodules b/.gitmodules
index 6c22435..26ddd86 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,9 +4,6 @@
 [submodule "plHtml"]
 	path = plHtml
 	url = https://github.com/wouterbeek/plHtml.git
-[submodule "plDcg"]
-	path = plDcg
-	url = https://github.com/wouterbeek/plDcg.git
 [submodule "plUri"]
 	path = plUri
 	url = https://github.com/wouterbeek/plUri.git
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 3ae0920..9794eef 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -51,14 +51,14 @@
 
 :- use_module(library(dcg/basics), [float//1,integer//1]).
 
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_ascii)).
-:- use_module(plDcg(dcg_atom)).
-:- use_module(plDcg(dcg_cardinal)).
-:- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generics)).
-:- use_module(plDcg(dcg_quote)).
-:- use_module(plDcg(dcg_replace)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_ascii)).
+:- use_module(plc(dcg/dcg_atom)).
+:- use_module(plc(dcg/dcg_cardinal)).
+:- use_module(plc(dcg/dcg_content)).
+:- use_module(plc(dcg/dcg_generics)).
+:- use_module(plc(dcg/dcg_quote)).
+:- use_module(plc(dcg/dcg_replace)).
 
 :- use_module(plGraphViz(gv_html)).
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 25519af..68f42db 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -18,17 +18,16 @@ Support for GraphViz attributes.
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(generics(db_ext)).
-:- use_module(os(file_ext)).
-:- use_module(os(file_gnu)).
-
-:- use_module(plDcg(dcg_atom)).
-:- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_meta)).
-:- use_module(plDcg(dcg_generics)).
+:- use_module(plc(dcg/dcg_atom)).
+:- use_module(plc(dcg/dcg_content)).
+:- use_module(plc(dcg/dcg_meta)).
+:- use_module(plc(dcg/dcg_generics)).
+:- use_module(plc(generics/db_ext)).
+:- use_module(plc(io/file_ext)).
+:- use_module(plc(io/file_gnu)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(html_table)).
+:- use_module(plHtml(elements/html_table)).
 
 :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]).
 
@@ -100,7 +99,7 @@ gv_attr_value(Context, Name=Value) -->
 
 
 
-% HELPERS
+% HELPERS %
 
 %! check_minimum(+Value:atom, +Minimum:number) is semidet.
 % Trivially succeeds if no minimum value is available for a given attribute.
@@ -112,7 +111,9 @@ check_minimum(V, Min1):-
 
 
 
-% INITIALIZATION
+
+
+% INITIALIZATION %
 
 %! assert_gv_attr_row(+Row:list(atom)) is det.
 
diff --git a/gv_color.pl b/gv_color.pl
index 7aea965..34d99eb 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -22,19 +22,18 @@
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(generics(db_ext)).
-:- use_module(generics(persistent_db_ext)).
-:- use_module(os(file_ext)).
-:- use_module(os(file_gnu)).
-
-:- use_module(plDcg(abnf_core_rules)).
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_atom)).
-:- use_module(plDcg(dcg_cardinal)).
-:- use_module(plDcg(dcg_content)).
+:- use_module(plc(dcg/abnf_core_rules)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_atom)).
+:- use_module(plc(dcg/dcg_cardinal)).
+:- use_module(plc(dcg/dcg_content)).
+:- use_module(plc(generics/db_ext)).
+:- use_module(plc(generics/persistent_db_ext)).
+:- use_module(plc(io/file_ext)).
+:- use_module(plc(io/file_gnu)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(html_table)).
+:- use_module(plHtml(elements/html_table)).
 
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
@@ -46,6 +45,8 @@
 
 
 
+
+
 % color(+Color:compound)// .
 % A *color* is represented by a compound term of one of the following forms:
 %   1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)`
@@ -89,7 +90,9 @@ wc_weight(Float) -->
 
 
 
-% INITIALIZATION
+
+
+% INITIALIZATION %
 
 %! gv_color_download is det.
 
diff --git a/gv_dot.pl b/gv_dot.pl
index e047a74..19657f5 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -29,15 +29,15 @@ a_list = ID "=" ID [","] [a_list]
 :- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(ordsets)).
 
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_arrow)).
-:- use_module(plDcg(dcg_ascii)).
-:- use_module(plDcg(dcg_atom)).
-:- use_module(plDcg(dcg_bracket)).
-:- use_module(plDcg(dcg_content)).
-:- use_module(plDcg(dcg_generics)).
-:- use_module(plDcg(dcg_meta)).
-:- use_module(plDcg(dcg_quote)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_arrow)).
+:- use_module(plc(dcg/dcg_ascii)).
+:- use_module(plc(dcg/dcg_atom)).
+:- use_module(plc(dcg/dcg_bracket)).
+:- use_module(plc(dcg/dcg_content)).
+:- use_module(plc(dcg/dcg_generics)).
+:- use_module(plc(dcg/dcg_meta)).
+:- use_module(plc(dcg/dcg_quote)).
 
 :- use_module(plGraphViz(gv_attrs)).
 :- use_module(plGraphViz(gv_html)).
diff --git a/gv_file.pl b/gv_file.pl
index d191e10..6cb739f 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -28,9 +28,9 @@ and GraphViz output files or SVG DOM structures.
 :- use_module(library(option)).
 :- use_module(library(process)).
 
-:- use_module(generics(code_ext)).
-:- use_module(os(file_ext)).
-:- use_module(os(run_ext)).
+:- use_module(plc(generics/code_ext)).
+:- use_module(plc(io/file_ext)).
+:- use_module(plc(process/run_ext)).
 
 :- use_module(plGraphViz(gv_dot)).
 
@@ -41,18 +41,18 @@ user:prolog_file_type(dot, dot).
 user:prolog_file_type(pdf, pdf).
 
 :- predicate_options(codes_to_gv_file/3, 3, [
-     pass_to(file_to_gv/3, 3)
-   ]).
+  pass_to(file_to_gv/3, 3)
+]).
 :- predicate_options(file_to_gv/2, 2, [
-     pass_to(file_to_gv/3, 3)
-   ]).
+  pass_to(file_to_gv/3, 3)
+]).
 :- predicate_options(file_to_gv/3, 3, [
-     method(+atom),
-     output(+atom)
-   ]).
+  method(+atom),
+  output(+atom)
+]).
 :- predicate_options(export_graph_to_gv_file/3, 3, [
-     pass_to(codes_to_gv_file/3, 3)
-   ]).
+  pass_to(codes_to_gv_file/3, 3)
+]).
 
 
 
diff --git a/gv_html.pl b/gv_html.pl
index 1410c25..65ae2bd 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -43,9 +43,9 @@ cell:   <TD> label </TD>
 @version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
 */
 
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_bracket)).
-:- use_module(plDcg(dcg_content)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_bracket)).
+:- use_module(plc(dcg/dcg_content)).
 
 :- use_module(plHtml(html_dcg)).
 
diff --git a/gv_numeral.pl b/gv_numeral.pl
index 5776a4a..ac294b4 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -11,14 +11,13 @@
 @version 2014/05-2014/06, 2015/01
 */
 
-:- use_module(math(math_ext)).
-:- use_module(math(radix)).
-:- use_module(math(rational_ext)).
-
-:- use_module(plDcg(dcg_abnf)).
-:- use_module(plDcg(dcg_abnf_common)).
-:- use_module(plDcg(dcg_ascii)).
-:- use_module(plDcg(dcg_cardinal)).
+:- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_abnf_common)).
+:- use_module(plc(dcg/dcg_ascii)).
+:- use_module(plc(dcg/dcg_cardinal)).
+:- use_module(plc(math/math_ext)).
+:- use_module(plc(math/radix)).
+:- use_module(plc(math/rational_ext)).
 
 
 
diff --git a/load.pl b/load.pl
index 5cec32c..de8b5ca 100644
--- a/load.pl
+++ b/load.pl
@@ -7,7 +7,6 @@
 :- use_module(load_project).
 :- load_project([
     plc-'Prolog-Library-Collection',
-    plDcg,
     plHtml,
     plUri
 ]).
diff --git a/plDcg b/plDcg
deleted file mode 160000
index 45a2d2b..0000000
--- a/plDcg
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 45a2d2b3ce1e3e18533586005b2a6a63eb2300d0
 
```
 
<h2 id="84"> 84: 正在比较变动前 e06e6ba 和变动后 0fd12ca </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/plHtml b/plHtml
index c2491cb..37bd0bf 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit c2491cb789baef4b2c7b9e30ca79d65a7213af02
+Subproject commit 37bd0bf33676fc06f9153221715a2cf00c4065d0
diff --git a/plUri b/plUri
index f1696b3..6550f33 160000
--- a/plUri
+++ b/plUri
@@ -1 +1 @@
-Subproject commit f1696b3c41635b4c6af3e961e819a5e6c0bf5b75
+Subproject commit 6550f331120c7f63739f69692791760afb507280
 
```
 
<h2 id="85"> 85: 正在比较变动前 0fd12ca 和变动后 67c4157 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/README.md b/README.md
index eb8512b..b4e3017 100644
--- a/README.md
+++ b/README.md
@@ -1,26 +1,25 @@
 plGraphViz
 ==========
 
-Easily export graphs represented as Prolog terms to
- [GraphViz](http://www.graphviz.org/).
+This library allows you to easily export graphs represented as Prolog terms
+using [GraphViz](http://www.graphviz.org/), an advanced graph drawing library.
 The Prolog terms have the following form:
 
 ~~~prolog
 graph(Vertices, Edges, GraphAttrs)
 ~~~
 
-`Vertices` and `Edges` are lists of compounds terms of
- the following form:
+`Vertices` and `Edges` are lists of compound terms of the following form:
 
 ~~~prolog
 vertex(Id, VertexAttrs)
-edges(FromId, ToId, EdgeAttrs)
+edge(FromId, ToId, EdgeAttrs)
 ~~~
 
-`Id` identifies a vertex and need not occur in any of the edges
- (i.e., unconnected vertices are allowed).
+`Id` identifies a vertex and may or may not occur in any of the edges
+(i.e., unconnected vertices are allowed).
 `FromId` and `ToId` may occur in the list of vertices,
- in order to draw an edge between vertices with set attributes.
+in order to draw an edge between vertices with set attributes.
 
 Attributes have the form `Name=Value`.
 `GraphAttrs` are attributes of the graph.
@@ -28,13 +27,12 @@ Attributes have the form `Name=Value`.
 `EdgeAttrs` are attributes of the edge.
 
 Attribute values are given as Prolog terms as well,
- and are type-checked before exporting.
+and are type-checked before exporting.
 Many of the GraphViz attributes are supported.
 New ones are added on an as-needed bases
- (open an issue on Github if you want to see a specific feature added).
-Supports HTML-like labels, allowing complex tables to be shown
- inside vertices.
-Support for vertex clusters is currently under way.
+(open an issue on Github if you want to see a specific feature added!).
+HTML-like labels are supported, allowing complex tables to be shown
+inside vertices.
 
 ---
 
@@ -62,7 +60,7 @@ $ swipl run.pl
 ![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png "Example graph.")
 
 The graphic can be saved to a different file by instantiating
- the `File` argument.
+the `File` argument.
 
 ---
 
@@ -152,4 +150,3 @@ export_graph_to_gv_file(
 ---
 
 Developed during 2013-2014 by [Wouter Beek](http://www.wouterbeek.com).
-
 
```
 
<h2 id="86"> 86: 正在比较变动前 67c4157 和变动后 b972e2b </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 68f42db..8ba1535 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -11,7 +11,7 @@
 Support for GraphViz attributes.
 
 @author Wouter Beek
-@version 2014/06, 2014/11-2014/12
+@version 2014/06, 2014/11-2014/12, 2015/03
 */
 
 :- use_module(library(apply)).
@@ -23,6 +23,7 @@ Support for GraphViz attributes.
 :- use_module(plc(dcg/dcg_meta)).
 :- use_module(plc(dcg/dcg_generics)).
 :- use_module(plc(generics/db_ext)).
+:- use_module(plc(generics/print_ext)).
 :- use_module(plc(io/file_ext)).
 :- use_module(plc(io/file_gnu)).
 
@@ -129,11 +130,16 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
 % Downloads the table describing GraphViz attributes from `graphviz.org`.
 
 gv_attrs_download:-
-  gv_attrs_url(Url),
-  download_html_dom(Url, Dom, [dialect(html4),silent(true)]),
-  xpath(Dom, //table(@align=center), TableDom),
-  html_to_table(TableDom, _, Rows),
-  maplist(assert_gv_attr_row, Rows).
+  report_on_process(
+    'Updating GraphViz attributes table... ',
+    (
+      gv_attrs_uri(Uri),
+      download_html_dom(Uri, Dom, [dialect(html5),silent(true)]),
+      xpath(Dom, //table(@align=lower_case(center)), TableDom),
+      html_to_table(TableDom, _, Rows),
+      maplist(assert_gv_attr_row, Rows)
+    )
+  ).
 
 
 %! gv_attrs_file(-File:atom) is det.
@@ -167,9 +173,9 @@ gv_attrs_update(_):-
   gv_attrs_download.
 
 
-%! gv_attrs_url(-Url:url) is det.
+%! gv_attrs_uri(-Url:url) is det.
 
-gv_attrs_url('http://www.graphviz.org/doc/info/attrs.html').
+gv_attrs_uri('http://www.graphviz.org/doc/info/attrs.html').
 
 
 %! safe_db_attach(+File:atom) is det.
diff --git a/gv_color.pl b/gv_color.pl
index 34d99eb..0ab3fa7 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -13,7 +13,7 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2014/06, 2014/10-2014/11, 2015/01
+@version 2014/06, 2014/10-2014/11, 2015/01, 2015/03
 */
 
 :- use_module(library(apply)).
@@ -29,6 +29,7 @@
 :- use_module(plc(dcg/dcg_content)).
 :- use_module(plc(generics/db_ext)).
 :- use_module(plc(generics/persistent_db_ext)).
+:- use_module(plc(generics/print_ext)).
 :- use_module(plc(io/file_ext)).
 :- use_module(plc(io/file_gnu)).
 
@@ -97,11 +98,16 @@ wc_weight(Float) -->
 %! gv_color_download is det.
 
 gv_color_download:-
-  gv_color_url(Url),
-  download_html_dom(Url, Dom, [html_dialect(html4),verbose(silent)]),
-  xpath(Dom, //table(1), TableDom1),
-  xpath(Dom, //table(2), TableDom2),
-  maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]).
+  report_on_process(
+    'Updating the GraphViz color table...',
+    (
+      gv_color_uri(Uri),
+      download_html_dom(Uri, Dom, [html_dialect(html4),silent(true)]),
+      xpath(Dom, //table(1), TableDom1),
+      xpath(Dom, //table(2), TableDom2),
+      maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2])
+    )
+  ).
 
 assert_color_table(Colorscheme, TableDom):-
   html_to_table(TableDom, _, Rows),
@@ -141,7 +147,7 @@ gv_color_update(_):-
   gv_color_download.
 
 
-%! gv_color_url(-Url:url) is det.
+%! gv_color_uri(-Url:url) is det.
 
-gv_color_url('http://www.graphviz.org/doc/info/colors.html').
+gv_color_uri('http://www.graphviz.org/doc/info/colors.html').
 
 
```
 
<h2 id="87"> 87: 正在比较变动前 b972e2b 和变动后 8bbc84c </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 6cb739f..991df5f 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -22,7 +22,8 @@ Also converts between GraphViz DOT formatted files
 and GraphViz output files or SVG DOM structures.
 
 @author Wouter Beek
-@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11-2014/12
+@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11-2014/12,
+         2015/03
 */
 
 :- use_module(library(option)).
@@ -30,7 +31,8 @@ and GraphViz output files or SVG DOM structures.
 
 :- use_module(plc(generics/code_ext)).
 :- use_module(plc(io/file_ext)).
-:- use_module(plc(process/run_ext)).
+:- use_module(plc(process/process_ext)).
+:- use_module(plc(process/program_db)).
 
 :- use_module(plGraphViz(gv_dot)).
 
@@ -114,15 +116,12 @@ file_to_gv(InputFile, OutputFile, Options):-
   % Run the GraphViz conversion command in the shell.
   format(atom(OutputTypeFlag), '-T~a', [OutputType]),
   format(atom(OutputFileFlag), '-o~a', [OutputFile]),
-  process_create(
-    path(Method),
-    % @tbd Windows hack:
-    %%%%'C:\\Program Files (x86)\\Graphviz2.38\\bin\\dot.exe',
+  atomic_list_concat(['GraphViz',Method], ' ', Program),
+  handle_process(
+    Method,
     [OutputTypeFlag,file(InputFile),OutputFileFlag],
-    [process(PID)]
-  ),
-  process_wait(PID, exit(ShellStatus)),
-  exit_code_handler('GraphViz', ShellStatus).
+    [detached(true),program(Program)]
+  ).
 
 
 
@@ -155,7 +154,7 @@ export_graph_to_gv_file(ExportGraph, OutputFile, Options):-
 
 open_dot(File):-
   once(find_program_by_file_type(dot, Program)),
-  run_program(Program, [File]).
+  handle_process(Program, [File], [program('GraphViz DOT')]).
 
 
 
 
```
 
<h2 id="88"> 88: 正在比较变动前 8bbc84c 和变动后 033fa14 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index 7193a38..e6bec15 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,4 +1,5 @@
 *~
 *#
 *.db
+*.log
 data/*
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index 9d0e491..ca7adb3 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit 9d0e49135bbd1916d901ccd18be605699f48c5cc
+Subproject commit ca7adb30da33a289e40b01e5e163f860d5c096c7
diff --git a/README.md b/README.md
index b4e3017..23a45db 100644
--- a/README.md
+++ b/README.md
@@ -48,7 +48,6 @@ $ git submodule update --init
 
 ~~~prolog
 $ swipl run.pl
-?- use_module(plGraphViz(gv_file)).
 ?- export_graph_to_gv_file(
      graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]),
      File,
diff --git a/gv_file.pl b/gv_file.pl
index 991df5f..2e0539d 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -42,9 +42,6 @@ and GraphViz output files or SVG DOM structures.
 user:prolog_file_type(dot, dot).
 user:prolog_file_type(pdf, pdf).
 
-:- predicate_options(codes_to_gv_file/3, 3, [
-  pass_to(file_to_gv/3, 3)
-]).
 :- predicate_options(file_to_gv/2, 2, [
   pass_to(file_to_gv/3, 3)
 ]).
@@ -53,30 +50,13 @@ user:prolog_file_type(pdf, pdf).
   output(+atom)
 ]).
 :- predicate_options(export_graph_to_gv_file/3, 3, [
-  pass_to(codes_to_gv_file/3, 3)
+  pass_to(file_to_gv/3, 3)
 ]).
 
 
 
 
 
-%! codes_to_gv_file(
-%!   +Codes:list(code),
-%!   ?OutputFile:atom,
-%!   +Options:list(nvpair)
-%! ) is det.
-
-codes_to_gv_file(Codes, OutputFile, Options):-
-  absolute_file_name(data(tmp), TmpFile, [access(write),extensions([dot])]),
-  setup_call_cleanup(
-    open(TmpFile, write, Write, [encoding(utf8)]),
-    put_codes(Write, Codes),
-    close(Write)
-  ),
-  file_to_gv(TmpFile, OutputFile, Options).
-
-
-
 %! file_to_gv(+InputFile:atom, +Options:list(nvpair)) is det.
 
 file_to_gv(InputFile, Options):-
@@ -120,7 +100,7 @@ file_to_gv(InputFile, OutputFile, Options):-
   handle_process(
     Method,
     [OutputTypeFlag,file(InputFile),OutputFileFlag],
-    [detached(true),program(Program)]
+    [program(Program)]
   ).
 
 
@@ -142,19 +122,30 @@ file_to_gv(InputFile, OutputFile, Options):-
 
 export_graph_to_gv_file(ExportGraph, OutputFile, Options):-
   once(phrase(gv_graph(ExportGraph), Codes)),
-  codes_to_gv_file(Codes, OutputFile, Options).
+  
+  % Be thread-safe.
+  thread_self(Id),
+  atomic_list_concat([gv_file,Id], '_', ThreadName),
+  absolute_file_name(
+    data(ThreadName),
+    TmpFile,
+    [access(write),extensions([dot])]
+  ),
+  setup_call_cleanup(
+    open(TmpFile, write, Write, [encoding(utf8)]),
+    put_codes(Write, Codes),
+    close(Write)
+  ),
+  file_to_gv(TmpFile, OutputFile, Options).
 
 
 
 %! open_dot(+File:atom) is det.
 % Opens the given DOT file.
-%
-% @tbd Test support on Windows.
-% @tbd Test support on OS-X.
 
 open_dot(File):-
   once(find_program_by_file_type(dot, Program)),
-  handle_process(Program, [File], [program('GraphViz DOT')]).
+  handle_process(Program, [file(File)], []).
 
 
 
diff --git a/plHtml b/plHtml
index 37bd0bf..2919705 160000
--- a/plHtml
+++ b/plHtml
@@ -1 +1 @@
-Subproject commit 37bd0bf33676fc06f9153221715a2cf00c4065d0
+Subproject commit 2919705d079b1ab28bf3c502a87d1648fd842ed3
diff --git a/plUri b/plUri
index 6550f33..1a55127 160000
--- a/plUri
+++ b/plUri
@@ -1 +1 @@
-Subproject commit 6550f331120c7f63739f69692791760afb507280
+Subproject commit 1a55127517ee0b0cf2ad4fecbe3f84402f5f4c12
diff --git a/run.pl b/run.pl
index 8bba736..8c751f4 100644
--- a/run.pl
+++ b/run.pl
@@ -7,3 +7,5 @@
   :- ensure_loaded(load).
 :- endif.
 
+:- use_module(plGraphViz(gv_file)).
+
 
```
 
<h2 id="89"> 89: 正在比较变动前 033fa14 和变动后 fdb5a9e </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 9794eef..ce8012b 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -212,7 +212,13 @@ doubleList(L) -->
 % @tbd Support for context-dependent replacements.
 
 escString(String) -->
-  {dcg_phrase(dcg_replace(double_quote, escaped_double_quote), String, String0)},
+  {
+    atom_phrase(
+      dcg_replace(double_quote, escaped_double_quote),
+      String,
+      String0
+    )
+  },
   quoted(atom(String0)).
 escaped_double_quote -->
   "\\\"".
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 8ba1535..fc8529a 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -119,8 +119,8 @@ check_minimum(V, Min1):-
 %! assert_gv_attr_row(+Row:list(atom)) is det.
 
 assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
-  dcg_phrase(translate_usedby(UsedBy2), UsedBy1),
-  once(dcg_phrase(translate_type(Types2), Types1)),
+  atom_phrase(translate_usedby(UsedBy2), UsedBy1),
+  once(atom_phrase(translate_type(Types2), Types1)),
   sort(UsedBy2, UsedBy3),
   translate_default(Default1, Default2),
   assert_gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes).
 
```
 
<h2 id="90"> 90: 正在比较变动前 fdb5a9e 和变动后 6ec582e </h2>
[back to content](#compare)
 
``` diff
 
 
```
 
<h2 id="91"> 91: 正在比较变动前 6ec582e 和变动后 68b53b8 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index fc8529a..20036b3 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -28,7 +28,7 @@ Support for GraphViz attributes.
 :- use_module(plc(io/file_gnu)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(elements/html_table)).
+:- use_module(plHtml(element/html_table)).
 
 :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]).
 
diff --git a/gv_color.pl b/gv_color.pl
index 0ab3fa7..7da7313 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -34,7 +34,7 @@
 :- use_module(plc(io/file_gnu)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(elements/html_table)).
+:- use_module(plHtml(element/html_table)).
 
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
 
```
 
<h2 id="92"> 92: 正在比较变动前 68b53b8 和变动后 46e8f3c </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 20036b3..add0721 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -28,7 +28,7 @@ Support for GraphViz attributes.
 :- use_module(plc(io/file_gnu)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(element/html_table)).
+:- use_module(plHtml(html_table)).
 
 :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]).
 
diff --git a/gv_color.pl b/gv_color.pl
index 7da7313..41e153b 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -34,7 +34,7 @@
 :- use_module(plc(io/file_gnu)).
 
 :- use_module(plHtml(html)).
-:- use_module(plHtml(element/html_table)).
+:- use_module(plHtml(html_table)).
 
 :- db_add_novel(user:prolog_file_type(log, logging)).
 
 
```
 
<h2 id="93"> 93: 正在比较变动前 46e8f3c 和变动后 3162d88 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_file.pl b/gv_file.pl
index 2e0539d..2c6ed93 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -113,7 +113,7 @@ file_to_gv(InputFile, OutputFile, Options):-
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
-%   - `method(+Method:atom`
+%   - `method(+Method:atom)`
 %     The algorithm used by GraphViz for positioning the tree nodes.
 %     Either =dot= (default) or =sfdp=.
 %   - `output(+FileType:atom)`
@@ -122,7 +122,7 @@ file_to_gv(InputFile, OutputFile, Options):-
 
 export_graph_to_gv_file(ExportGraph, OutputFile, Options):-
   once(phrase(gv_graph(ExportGraph), Codes)),
-  
+
   % Be thread-safe.
   thread_self(Id),
   atomic_list_concat([gv_file,Id], '_', ThreadName),
 
```
 
<h2 id="94"> 94: 正在比较变动前 3162d88 和变动后 714b2e0 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index ce8012b..1e3515c 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -49,7 +49,7 @@
 @version 2014/06, 2014/11-2015/01
 */
 
-:- use_module(library(dcg/basics), [float//1,integer//1]).
+:- use_module(library(dcg/basics)).
 
 :- use_module(plc(dcg/dcg_abnf)).
 :- use_module(plc(dcg/dcg_ascii)).
diff --git a/gv_attrs.pl b/gv_attrs.pl
index add0721..489ce51 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -15,6 +15,7 @@ Support for GraphViz attributes.
 */
 
 :- use_module(library(apply)).
+:- use_module(library(dcg/basics)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
diff --git a/gv_color.pl b/gv_color.pl
index 41e153b..c4c82b4 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -17,7 +17,7 @@
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/basics), [float//1]).
+:- use_module(library(dcg/basics)).
 :- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
diff --git a/gv_dot.pl b/gv_dot.pl
index 19657f5..637a5ab 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -26,6 +26,7 @@ a_list = ID "=" ID [","] [a_list]
 */
 
 :- use_module(library(apply)).
+:- use_module(library(dcg/basics)).
 :- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(ordsets)).
 
 
```
 
<h2 id="95"> 95: 正在比较变动前 714b2e0 和变动后 af7a387 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 1e3515c..6d572ab 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -49,7 +49,7 @@
 @version 2014/06, 2014/11-2015/01
 */
 
-:- use_module(library(dcg/basics)).
+:- use_module(library(dcg/basics), except([string//1])).
 
 :- use_module(plc(dcg/dcg_abnf)).
 :- use_module(plc(dcg/dcg_ascii)).
 
```
 
<h2 id="96"> 96: 正在比较变动前 af7a387 和变动后 7b434e3 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_color.pl b/gv_color.pl
index c4c82b4..1f3f9d6 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -22,8 +22,8 @@
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(plc(dcg/abnf_core_rules)).
 :- use_module(plc(dcg/dcg_abnf)).
+:- use_module(plc(dcg/dcg_abnf_rules)).
 :- use_module(plc(dcg/dcg_atom)).
 :- use_module(plc(dcg/dcg_cardinal)).
 :- use_module(plc(dcg/dcg_content)).
diff --git a/gv_numeral.pl b/gv_numeral.pl
index ac294b4..bff1255 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -16,6 +16,7 @@
 :- use_module(plc(dcg/dcg_ascii)).
 :- use_module(plc(dcg/dcg_cardinal)).
 :- use_module(plc(math/math_ext)).
+:- use_module(plc(math/positional)).
 :- use_module(plc(math/radix)).
 :- use_module(plc(math/rational_ext)).
 
@@ -56,7 +57,7 @@ gv_numeral(N) -->
       (   % [1] The fractional is zero, so only write the integer part
           %     and do not write the decimal separator.
           {F =:= 0}
-      ->  {weights_nonneg(IW, I)},
+      ->  {positional(I, IW)},
           '[0-9]+'(IW)
       ;   % [2] The integer part is zero, so only write the fractional part,
           %     preceded by the decimal separator.
@@ -66,7 +67,7 @@ gv_numeral(N) -->
           '[0-9]*'(FW)
       ;   % [3] Both the integer part and the fractional are non-zero,
           %     so write both of them, with the decimal separator in-between.
-          {weights_nonneg(IW, I)},
+          {positional(I, IW)},
           '[0-9]+'(IW),
           ".",
           {weights_fraction(FW, F)},
 
```
 
<h2 id="97"> 97: 正在比较变动前 7b434e3 和变动后 dcbcb4d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_dot.pl b/gv_dot.pl
index 637a5ab..e98361b 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -146,151 +146,14 @@ gv_generic_attributes_statement(_, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, KindAttrs) -->
   indent(I),
   gv_kind(Kind), " ",
-  bracketed(square, '*'(gv_attr(Kind), KindAttrs, [])),
-  line_feed.
-
-
-
-%! gv_graph(+Graph:compound)//
-% The follow graph attributes are supported,
-% beyond the GraphViz attributes for graphs:
-%   * `directed(+boolean)`
-%      Whether the graph is directed (`true`) or undirected (`false`).
-%      Default: `false`.
-%   * `name(+GraphName:atom)`
-%   * `strict(+StrictGraph:boolean)`
-%      This forbids the creation of self-arcs and multi-edges;
-%      they are ignored in the input file.
-%      Only in combinattion with directionality `directed`.
-%
-% ```abnf
-% graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
-% ```
-%
-% `GraphTerm` is a compound term of the following form:
-% ```prolog
-% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
-% ```
-%
-% `RankedVertexTerms` is a list of compound terms of the following form:
-% ```prolog
-% rank(RankNode,ContentNodes)
-% ```
-%
-% @tbd Add support for subgraphs (arbitrary nesting).
-% @tbd Add support for escape strings:
-%      http://www.graphviz.org/doc/info/attrs.html#k:escString
-% @tbd Assert attributes that are generic with respect to a subgraph.
-% @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
-
-gv_graph(graph(VTerms,ETerms,GAttrs)) -->
-  gv_graph(graph(VTerms,[],ETerms,GAttrs)).
-
-gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -->
-  {
-    shared_attributes(VTerms, SharedVAttrs, NewVTerms),
-    shared_attributes(ETerms, SharedEAttrs, NewETerms),
-    select_nvpair(strict=Strict, GAttrs1, GAttrs2, false),
-    select_nvpair(directed=Directed, GAttrs2, GAttrs3, true),
-    select_nvpair(name=GName, GAttrs3, GAttrs4, noname),
-    add_default_nvpair(GAttrs4, overlap, false, GAttrs5),
-    I = 0
-  },
-
-  % The first statement in the GraphViz output.
-  % States that this file represents a graph according to the GraphViz format.
-  indent(I),
-  gv_strict(Strict),
-  gv_graph_type(Directed), " ",
-  gv_id(GName), " ",
-
-  % The body of the DOT file appears between curly braces.
-  bracketed(
-    curly,
-    gv_graph0(
-      I,
-      NewVTerms, SharedVAttrs, RankedVTerms,
-      NewETerms, SharedEAttrs,
-      Directed, GAttrs5
-    )
-  ),
-  line_feed.
-
-gv_graph0(
-  I,
-  NewVTerms, SharedVAttrs, RankedVTerms,
-  NewETerms, SharedEAttrs,
-  Directed, GAttrs
-) -->
-  line_feed,
-
-  % The following lines are indented.
-  {NewI is I + 1},
-
-  % Attributes that apply to the graph as a whole.
-  gv_generic_attributes_statement(graph, NewI, GAttrs),
-
-  % Attributes that are the same for all nodes.
-  gv_generic_attributes_statement(node, NewI, SharedVAttrs),
-
-  % Attributes that are the same for all edges.
-  gv_generic_attributes_statement(edge, NewI, SharedEAttrs),
-
-  % Only add a line_feed if some content was already written
-  % and some content is about to be written.
-  (
-    {
-      % Succeeds if no content was written.
-      (GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])
-    ;
-      % Succeeds if no content is about to be written.
-      (NewVTerms == [], RankedVTerms == [])
-    }
-  ->
-    ""
-  ;
-    line_feed
-  ),
-
-  % The list of GraphViz nodes.
-  '*'(gv_node_statement(NewI), NewVTerms, []),
-  ({NewVTerms == []} -> "" ; line_feed),
-
-  % The ranked GraphViz nodes (displayed at the same height).
-  '*'(gv_ranked_node_collection(NewI), RankedVTerms, []),
-  ({RankedVTerms == []} -> "" ; line_feed),
-
-  {
-    findall(
-      edge(FromId,ToId,[]),
-      (
-        nth0(Index1, RankedVTerms, rank(vertex(FromId,_),_)),
-        nth0(Index2, RankedVTerms, rank(vertex(ToId,_),_)),
-        % We assume that the rank vertices are nicely ordered.
-        succ(Index1, Index2)
-      ),
-      RankEdges
-    )
-  },
-
-  % The rank edges.
-  '*'(gv_edge_statement(NewI, Directed), RankEdges, []),
-
-  % The non-rank edges.
-  '*'(gv_edge_statement(NewI, Directed), NewETerms, []),
-
-  % Note that we do not include a line_feed here.
+  "[",
+  gv_attrs(Kind, KindAttrs),
+  "]\n".
 
-  % We want to indent the closing curly brace.
-  indent(I).
-
-
-
-%! gv_graph_type(+Directed:boolean)// .
-% The type of graph that is represented.
-
-gv_graph_type(false) --> "graph".
-gv_graph_type(true) --> "digraph".
+gv_attrs(_, []) --> !, "".
+gv_attrs(Kind, [H|T]) -->
+  gv_attr(Kind, H),
+  gv_attrs(Kind, T).
 
 
 
@@ -456,53 +319,3 @@ gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -->
     indent(I)
   )),
   line_feed.
-
-
-
-%! gv_strict(+Strict:boolean)// is det.
-% The keyword denoting that the graph is strict, i.e., has no self-arcs and
-% no multi-edges.
-% This only applies to directed graphs.
-
-gv_strict(false) --> [].
-gv_strict(true) --> "strict ".
-
-
-
-
-
-% HELPERS
-
-add_default_nvpair(Attrs1, N, Default, Attrs2):-
-  add_default_nvpair(Attrs1, N, Default, _, Attrs2).
-
-add_default_nvpair(Attrs, N, _, V, Attrs):-
-  memberchk(N=V, Attrs), !.
-add_default_nvpair(Attrs1, N, Default, Default, Attrs2):-
-  ord_add_element(Attrs1, N=Default, Attrs2).
-
-select_nvpair(N=V, Attrs1, Attrs2, _):-
-  memberchk(N=V, Attrs1), !,
-  select(N=V, Attrs1, Attrs2).
-select_nvpair(_=Default, Attrs, Attrs, Default).
-
-
-extract_shared([], []):- !.
-extract_shared(Argss, Shared):-
-  ord_intersection(Argss, Shared).
-
-remove_shared_attributes(Shared, Args1, Args2):-
-  ord_subtract(Args1, Shared, Args2).
-
-shared_attributes(Terms1, SharedAs, Terms2):-
-  maplist(term_to_attrs, Terms1, As1),
-  extract_shared(As1, SharedAs),
-  maplist(remove_shared_attributes(SharedAs), As1, As2),
-  maplist(term_change_attrs, Terms1, As2, Terms2).
-
-term_change_attrs(edge(From,To,_), A, edge(From,To,A)).
-term_change_attrs(vertex(Id,_), A, vertex(Id,A)).
-
-term_to_attrs(edge(_,_,A), A).
-term_to_attrs(vertex(_,A), A).
-
diff --git a/gv_file.pl b/gv_file.pl
index 2c6ed93..5d2228e 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -1,40 +1,24 @@
 :- module(
   gv_file,
   [
-    file_to_gv/2, % +InputFile:atom
-                  % +Options:list(nvpair)
-    file_to_gv/3, % +InputFile:atom
-                  % ?OutputFile:atom
-                  % +Options:list(nvpair)
-    export_graph_to_gv_file/3, % +ExportGraph:compound
-                               % ?OutputFile:atom
-                               % +Options:list(nvpair)
-    open_dot/1 % +File:file
+    gv_export/3 % +ExportGraph:compound
+                % +OutputFile:atom
+                % +Options:list(nvpair)
   ]
 ).
 
 /** <module> GraphViz file
 
-Predicates for converting GIF-formatted terms
-into GraphViz output files or SVG DOM structures.
-
-Also converts between GraphViz DOT formatted files
-and GraphViz output files or SVG DOM structures.
-
 @author Wouter Beek
-@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11-2014/12,
-         2015/03
+@version 2015/07
 */
 
+:- use_module(library(error)).
+:- use_module(library(gv/gv_dot)).
 :- use_module(library(option)).
 :- use_module(library(process)).
 
-:- use_module(plc(generics/code_ext)).
-:- use_module(plc(io/file_ext)).
 :- use_module(plc(process/process_ext)).
-:- use_module(plc(process/program_db)).
-
-:- use_module(plGraphViz(gv_dot)).
 
 :- dynamic(user:prolog_file_type/2).
 :- multifile(user:prolog_file_type/2).
@@ -42,29 +26,43 @@ and GraphViz output files or SVG DOM structures.
 user:prolog_file_type(dot, dot).
 user:prolog_file_type(pdf, pdf).
 
-:- predicate_options(file_to_gv/2, 2, [
-  pass_to(file_to_gv/3, 3)
-]).
-:- predicate_options(file_to_gv/3, 3, [
-  method(+atom),
-  output(+atom)
-]).
-:- predicate_options(export_graph_to_gv_file/3, 3, [
-  pass_to(file_to_gv/3, 3)
-]).
-
+:- predicate_options(gv_export/3, 3, [pass_to(file_to_gv/3, 3)]).
+:- predicate_options(file_to_gv/3, 3, [method(+atom),output(+atom)]).
 
 
 
+%! gv_export(
+%!   +ExportGraph:compound,
+%!   +OutputFile:atom,
+%!   +Options:list(nvpair)
+%! ) is det.
+% Returns a file containing a GraphViz visualization of the given graph.
+%
+% The following options are supported:
+%   - `method(+Method:atom)`
+%     The algorithm used by GraphViz for positioning the tree nodes.
+%     Either =dot= (default) or =sfdp=.
+%   - `output(+FileType:atom)`
+%     The file type of the generated GraphViz file.
+%     Default: `pdf`.
 
-%! file_to_gv(+InputFile:atom, +Options:list(nvpair)) is det.
+gv_export(ExportGraph, OutputFile, Options):-
+  once(phrase(gv_graph(ExportGraph), Codes)),
 
-file_to_gv(InputFile, Options):-
-  file_to_gv(InputFile, _, Options).
+  % Be thread-safe.
+  thread_self(Id),
+  atomic_list_concat([gv_file,Id], '_', ThreadName),
+  absolute_file_name(data(ThreadName), TmpFile, [access(write),file_type(dot)]),
+  setup_call_cleanup(
+    open(TmpFile, write, Write, [encoding(utf8)]),
+    put_codes(Write, Codes),
+    close(Write)
+  ),
+  file_to_gv(TmpFile, OutputFile, Options).
 
 %! file_to_gv(
 %!   +InputFile:atom,
-%!   ?OutputFile:atom,
+%!   +OutputFile:atom,
 %!   +Options:list(nvpair)
 %! ) is det.
 % Converts a GraphViz DOT file to an image file, using a specific
@@ -87,12 +85,6 @@ file_to_gv(InputFile, OutputFile, Options):-
   findall(OutputType0, gv_output_type(OutputType0), OutputTypes),
   must_be(oneof(OutputTypes), OutputType),
 
-  % The output file is either given or created.
-  (   var(OutputFile)
-  ->  file_alternative(InputFile, _, _, OutputType, OutputFile)
-  ;   is_absolute_file_name(OutputFile)
-  ),
-
   % Run the GraphViz conversion command in the shell.
   format(atom(OutputTypeFlag), '-T~a', [OutputType]),
   format(atom(OutputFileFlag), '-o~a', [OutputFile]),
@@ -105,53 +97,7 @@ file_to_gv(InputFile, OutputFile, Options):-
 
 
 
-%! export_graph_to_gv_file(
-%!   +ExportGraph:compound,
-%!   ?OutputFile:atom,
-%!   +Options:list(nvpair)
-%! ) is det.
-% Returns a file containing a GraphViz visualization of the given graph.
-%
-% The following options are supported:
-%   - `method(+Method:atom)`
-%     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
-%   - `output(+FileType:atom)`
-%     The file type of the generated GraphViz file.
-%     Default: `pdf`.
-
-export_graph_to_gv_file(ExportGraph, OutputFile, Options):-
-  once(phrase(gv_graph(ExportGraph), Codes)),
-
-  % Be thread-safe.
-  thread_self(Id),
-  atomic_list_concat([gv_file,Id], '_', ThreadName),
-  absolute_file_name(
-    data(ThreadName),
-    TmpFile,
-    [access(write),extensions([dot])]
-  ),
-  setup_call_cleanup(
-    open(TmpFile, write, Write, [encoding(utf8)]),
-    put_codes(Write, Codes),
-    close(Write)
-  ),
-  file_to_gv(TmpFile, OutputFile, Options).
-
-
-
-%! open_dot(+File:atom) is det.
-% Opens the given DOT file.
-
-open_dot(File):-
-  once(find_program_by_file_type(dot, Program)),
-  handle_process(Program, [file(File)], []).
-
-
-
-
-
-% HELPERS
+% HELPERS %
 
 gv_method(circo).
 gv_method(dot).
@@ -162,7 +108,6 @@ gv_method(sfdp).
 gv_method(twopi).
 
 
-
 gv_output_type(bmp).
 gv_output_type(canon).
 gv_output_type(dot).
diff --git a/gv_graph.pl b/gv_graph.pl
new file mode 100644
index 0000000..dd4af97
--- /dev/null
+++ b/gv_graph.pl
@@ -0,0 +1,229 @@
+:- module(
+  gv_graph,
+  [
+    gv_graph//1 % +Graph:compound
+  ]
+).
+
+/** <module> GraphViz graph
+
+@author Wouter Beek
+@version 2015/07
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(lists)).
+:- use_module(library(option)).
+
+
+
+%! gv_graph(+Graph:compound)//
+% The follow graph attributes are supported,
+% beyond the GraphViz attributes for graphs:
+%   * `directed(+boolean)`
+%      Whether the graph is directed (`true`) or undirected (`false`).
+%      Default: `false`.
+%   * `name(+GraphName:atom)`
+%   * `strict(+StrictGraph:boolean)`
+%      This forbids the creation of self-arcs and multi-edges;
+%      they are ignored in the input file.
+%      Only in combinattion with directionality `directed`.
+%
+% ```abnf
+% graph = ["strict"] ("graph" / "digraph") [ID] "{" stmt_list "}"
+% ```
+%
+% `GraphTerm` is a compound term of the following form:
+% ```prolog
+% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes)
+% ```
+%
+% `RankedVertexTerms` is a list of compound terms of the following form:
+% ```prolog
+% rank(RankNode,ContentNodes)
+% ```
+%
+% @tbd Add support for subgraphs (arbitrary nesting).
+% @tbd Add support for escape strings:
+%      http://www.graphviz.org/doc/info/attrs.html#k:escString
+% @tbd Assert attributes that are generic with respect to a subgraph.
+% @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
+
+gv_graph(G) -->
+  gv_graph(G, 0).
+
+gv_graph(G1, I) -->
+  {
+    include_ranks(G1, G2),
+    G2 = graph(VTerms,RankedVTerms,ETerms,GAttrs1),
+    shared_attributes(VTerms, SharedVAttrs, NewVTerms),
+    shared_attributes(ETerms, SharedEAttrs, NewETerms),
+    add_default(GAttrs1, overlap(false), GAttrs2),
+    I = 0
+  },
+
+  % The first statement in the GraphViz output.
+  % States that this file represents a graph according to the GraphViz format.
+  indent(I),
+  
+  % Strictness.
+  {select_option(strict(Strict), GAttrs2, GAttrs3, false)},
+  gv_strict(Strict),
+  
+  % Directedness.
+  {select_option(directed(Directed), GAttrs3, GAttrs4, true)},
+  gv_graph_type(Directed), " ",
+  
+  % Graph name.
+  (   {select_name(GName), GAttrs4, GAttrs5)}
+  ->  gv_id(GName), " ",
+  ;   {GAttrs5 = GAttrs4}
+  ),
+
+  % The body of the DOT file appears between curly braces.
+  "{\n",
+
+  % The following lines are indented.
+  {NewI is I + 1},
+
+  % Attributes that apply to the graph as a whole.
+  gv_generic_attributes_statement(graph, NewI, GAttrs5),
+
+  % Attributes that are the same for all nodes.
+  gv_generic_attributes_statement(node, NewI, SharedVAttrs),
+
+  % Attributes that are the same for all edges.
+  gv_generic_attributes_statement(edge, NewI, SharedEAttrs),
+
+  % Only add a line_feed if some content was already written
+  % and some content is about to be written.
+  (   % Succeeds if no content was written.
+      {(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])}
+  ->  ""
+  ;   % Succeeds if no content is about to be written.
+      {(NewVTerms == [], RankedVTerms == [])}
+  ->  ""
+  ;   "\n"
+  ),
+
+  % The list of GraphViz nodes.
+  gv_node_statements(NewI, NewVTerms),
+  (   {NewVTerms == []}
+  ->  ""
+  ;   "\n"
+  ),
+
+  % The ranked GraphViz nodes (displayed at the same height).
+  gv_ranked_node_collections(NewI, RankedVTerms),
+  (   {RankedVTerms == []}
+  ->  ""
+  ;   "\n"
+  ),
+
+  {
+    findall(
+      edge(FromId,ToId,[]),
+      (
+        nth0(Index1, RankedVTerms, rank(vertex(FromId,_),_)),
+        nth0(Index2, RankedVTerms, rank(vertex(ToId,_),_)),
+        % We assume that the rank vertices are nicely ordered.
+        succ(Index1, Index2)
+      ),
+      RankEdges
+    )
+  },
+
+  % The rank edges.
+  gv_edge_statements(NewI, Directed, RankEdges),
+
+  % The non-rank edges.
+  gv_edge_statements(NewI, Directed, NewETerms),
+  
+  % Note that we do not include a line_feed here.
+
+  % We want to indent the closing curly brace.
+  indent(I),
+  "}\n".
+
+gv_edge_statements(_, _, []) --> !, "".
+gv_edge_statements(I, Dir, [H|T]) -->
+  gv_edge_statement(I, Dir, H),
+  gv_edge_statements(I, Dir, T).
+
+gv_node_statements(_, []) --> !, "".
+gv_node_statements(I, [H|T]) -->
+  gv_node_statement(I, H),
+  gv_node_statements(I, T).
+
+gv_ranked_node_collections(_, []) --> !, "".
+gv_ranked_node_collections(I, [H|T]) -->
+  gv_ranked_node_collection(I, H),
+  gv_ranked_node_collections(I, T),
+
+
+
+% HELPERS %
+
+%! add_default_option(
+%!   +Options:list(compound),
+%!   +Default:compound,
+%!   -NewOptions:list(compound)
+%! ) is det.
+
+add_default(L1, Opt, L2):-
+  Opt =.. [N,V],
+  Opt0 =.. [N,_],
+  (   option(Opt0, L1)
+  ->  true
+  ;   L2 = [Opt|L1]
+  ).
+
+
+%! gv_graph_type(+Directed:boolean)// is det.
+% The type of graph that is represented.
+
+gv_graph_type(false) --> "graph".
+gv_graph_type(true) --> "digraph".
+
+
+%! gv_strict(+Strict:boolean)// is det.
+% The keyword denoting that the graph is strict, i.e., has no self-arcs and
+% no multi-edges.
+% This only applies to directed graphs.
+
+gv_strict(false) --> [].
+gv_strict(true) --> "strict ".
+
+
+%! invlude_ranges(+Graph:compound, -GraphWithRanks:compound) is det.
+% Ensures that there is a ranks components in
+% the graph-denoting compound term.
+
+include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)).
+include_ranks(graph(Vs,Es,L), graph(Vs,[],Es,L)).
+
+
+%! shared_attributes(
+%!   +Terms:list(compound),
+%!   -SharedAttributes:list(compound),
+%!   -NewTerms:list(compound)
+%! ) is det.
+
+shared_attributes(Ts1, Shared, Ts2):-
+  maplist(term_to_attrs, Ts1, L1),
+  extract_shared(L1, Shared),
+  maplist(remove_shared_attributes(Shared), L1, L2),
+  maplist(term_change_attrs, Ts1, L2, Ts2).
+
+term_to_attrs(edge(_,_,A), A).
+term_to_attrs(vertex(_,A), A).
+
+extract_shared([], []):- !.
+extract_shared(Argss, Shared):-
+  ord_intersection(Argss, Shared).
+
+remove_shared_attributes(Shared, Args1, Args2):-
+  ord_subtract(Args1, Shared, Args2).
+
+term_change_attrs(edge(From,To,_), A, edge(From,To,A)).
+term_change_attrs(vertex(Id,_), A, vertex(Id,A)).
 
```
 
<h2 id="98"> 98: 正在比较变动前 dcbcb4d 和变动后 50a3dbc </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
index ca7adb3..88874a7 160000
--- a/Prolog-Library-Collection
+++ b/Prolog-Library-Collection
@@ -1 +1 @@
-Subproject commit ca7adb30da33a289e40b01e5e163f860d5c096c7
+Subproject commit 88874a7f451df36309d1d6ade03bc7186b4f6c8b
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index 6d572ab..b3e41ca 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -51,15 +51,6 @@
 
 :- use_module(library(dcg/basics), except([string//1])).
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_ascii)).
-:- use_module(plc(dcg/dcg_atom)).
-:- use_module(plc(dcg/dcg_cardinal)).
-:- use_module(plc(dcg/dcg_content)).
-:- use_module(plc(dcg/dcg_generics)).
-:- use_module(plc(dcg/dcg_quote)).
-:- use_module(plc(dcg/dcg_replace)).
-
 :- use_module(plGraphViz(gv_html)).
 
 
@@ -203,25 +194,32 @@ double(N) -->
 
 %! doubleList(+Doubles:list(float))// .
 
-doubleList(L) -->
-  '+'(double, L, [separator(colon)]).
+doubleList([]) --> !, "".
+doubleList([H]) --> !, double(H)
+doubleList([H|T]) --> double(H), ":", doubleList(T).
 
 
 
 %! escString(+String:atom)// .
 % @tbd Support for context-dependent replacements.
 
-escString(String) -->
+escString(S1) -->
   {
-    atom_phrase(
-      dcg_replace(double_quote, escaped_double_quote),
-      String,
-      String0
-    )
+    atom_codes(S1, Cs1),
+    phrase(escape_double_quotes, Cs1, Cs2),
+    atom_codes(S2, Cs2)
   },
-  quoted(atom(String0)).
-escaped_double_quote -->
-  "\\\"".
+  "\"",
+  atom(S2),
+  "\"".
+
+escape_double_quotes, [92,34] -->
+  [34], !,
+  escape_double_quotes.
+escape_double_quotes, [X] -->
+  [X],
+  escape_double_quotes.
+
 
 
 
@@ -449,7 +447,9 @@ smoothType(triangle).
 % A GraphViz string.
 
 string(Content) -->
-  quoted(atom(Content)).
+  "\"",
+  atom(Content),
+  "\"".
 
 
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 489ce51..1e8ccdf 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -6,34 +6,25 @@
   ]
 ).
 
-/** <module> GraphViz: Attributes
-
-Support for GraphViz attributes.
+/** <module> GraphViz attributes
 
 @author Wouter Beek
-@version 2014/06, 2014/11-2014/12, 2015/03
+@version 2015/07
 */
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/basics)).
+:- use_module(library(lists)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
-:- use_module(plc(dcg/dcg_atom)).
-:- use_module(plc(dcg/dcg_content)).
-:- use_module(plc(dcg/dcg_meta)).
-:- use_module(plc(dcg/dcg_generics)).
-:- use_module(plc(generics/db_ext)).
-:- use_module(plc(generics/print_ext)).
-:- use_module(plc(io/file_ext)).
-:- use_module(plc(io/file_gnu)).
-
-:- use_module(plHtml(html)).
-:- use_module(plHtml(html_table)).
-
 :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]).
+:- use_module(plGraphViz(gv_util)).
+
+:- dynamic(user:prolog_file_type/2).
+:- multifile(user:prolog_file_type/2).
 
-:- db_add_novel(user:prolog_file_type(log, logging)).
+user:prolog_file_type(log, logging).
 
 %! gv_attr(
 %!   ?Name:atom,
@@ -131,13 +122,13 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
 % Downloads the table describing GraphViz attributes from `graphviz.org`.
 
 gv_attrs_download:-
-  report_on_process(
+  verbose_process(
     'Updating GraphViz attributes table... ',
     (
       gv_attrs_uri(Uri),
-      download_html_dom(Uri, Dom, [dialect(html5),silent(true)]),
+      html_download(Uri, Dom),
       xpath(Dom, //table(@align=lower_case(center)), TableDom),
-      html_to_table(TableDom, _, Rows),
+      html_table(TableDom, _, Rows),
       maplist(assert_gv_attr_row, Rows)
     )
   ).
@@ -146,22 +137,19 @@ gv_attrs_download:-
 %! gv_attrs_file(-File:atom) is det.
 
 gv_attrs_file(File):-
-  absolute_file_name(
-    data(gv_attrs),
-    File,
-    [access(write),file_type(logging)]
-  ).
+  absolute_file_name(gv_attrs, File, [access(write),file_type(logging)]).
 
 
 %! gv_attrs_init is det.
 
 gv_attrs_init:-
   gv_attrs_file(File),
-  safe_db_attach(File),
+  persistent_db_attach(File),
   file_age(File, Age),
   gv_attrs_update(Age).
 
 
+
 %! gv_attrs_update(+Age:float) is det.
 
 % The persistent store is still fresh.
@@ -174,20 +162,12 @@ gv_attrs_update(_):-
   gv_attrs_download.
 
 
+
 %! gv_attrs_uri(-Url:url) is det.
 
 gv_attrs_uri('http://www.graphviz.org/doc/info/attrs.html').
 
 
-%! safe_db_attach(+File:atom) is det.
-
-safe_db_attach(File):-
-  exists_file(File), !,
-  db_attach(File, []).
-safe_db_attach(File):-
-  touch_file(File),
-  safe_db_attach(File).
-
 
 %! translate_default(+Default1:atom, -Default2:atom) is det.
 
@@ -198,24 +178,36 @@ translate_default('<none>', _):- !.
 translate_default(Default, Default).
 
 
+
 %! translate_type(-Types:list(atom))// is det.
 
+translate_type([]) --> !, [].
 translate_type([H|T]) -->
   {gv_attr_type(H)},
   atom(H),
   whites,
   translate_type(T).
-translate_type([]) --> !, [].
+
 
 
 %! translated_usedby(
 %!   -UsedBy:list(oneof([cluster,edge,graph,node,subgraph]))
 %! )// is det.
 
-translate_usedby([cluster|T]) --> `C`, !, translate_usedby(T).
-translate_usedby([edge|T]) --> `E`, !, translate_usedby(T).
-translate_usedby([graph|T]) --> `G`, !, translate_usedby(T).
-translate_usedby([node|T]) --> `N`, !, translate_usedby(T).
-translate_usedby([subgraph|T]) --> `S`, !, translate_usedby(T).
-translate_usedby([]) --> [].
-
+translate_usedby([cluster|T]) -->
+  "C", !,
+  translate_usedby(T).
+translate_usedby([edge|T]) -->
+  "E", !,
+  translate_usedby(T).
+translate_usedby([graph|T]) -->
+  "G", !,
+  translate_usedby(T).
+translate_usedby([node|T]) -->
+  "N", !,
+  translate_usedby(T).
+translate_usedby([subgraph|T]) -->
+  "S", !,
+  translate_usedby(T).
+translate_usedby([]) -->
+  "".
diff --git a/gv_color.pl b/gv_color.pl
index 1f3f9d6..b8cf308 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -56,34 +56,41 @@
 
 color(rgb(Red,Green,Blue)) --> !,
   "#",
-  '#'(3, hex_color, [Red,Green,Blue], []).
+  hex_color(Red),
+  hex_color(Green),
+  hex_color(Blue).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
-  "#",
-  '#'(4, hex_color, [Red,Green,Blue,Alpha], []).
+  color(rgb(Red,Green,Blue)),
+  hex_color(Alpha).
 color(hsv(Hue,Saturation,Value)) --> !,
-  '#'(3, hsv_color, [Hue,Saturation,Value], []).
+  hsv_color(Hue),
+  hsv_color(Saturation),
+  hsv_color(Value).
 color(Name) -->
   {gv_color(_, Name)},
   atom(Name).
 
 hex_color(I) -->
-  {W1 is I / 16},
-  'HEX'(W1),
-  {W2 is I mod 16},
-  'HEX'(W2).
+  xinteger(I).
 
 hsv_color(D, Head, Tail):-
   format(codes(Head,Tail), '~2f', [D]).
 
 
+
 %! colorList(+Pairs:list(pair(compound,float)))// .
 
-colorList(Pairs) -->
-  '+'(wc, Pairs, []).
+colorList([H]) --> !,
+  wc(H).
+colorList([H|T]) -->
+  wc(H),
+  colorList(T).
 
 wc(Color-Float) -->
   color(Color),
-  '?'(wc_weight(Float), []).
+  (   wc_weight(Float)
+  ;   ""
+  ).
 
 wc_weight(Float) -->
   ";",
diff --git a/gv_dot.pl b/gv_dot.pl
index e98361b..c26d629 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -30,19 +30,8 @@ a_list = ID "=" ID [","] [a_list]
 :- use_module(library(lists), except([delete/3,subset/2])).
 :- use_module(library(ordsets)).
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_arrow)).
-:- use_module(plc(dcg/dcg_ascii)).
-:- use_module(plc(dcg/dcg_atom)).
-:- use_module(plc(dcg/dcg_bracket)).
-:- use_module(plc(dcg/dcg_content)).
-:- use_module(plc(dcg/dcg_generics)).
-:- use_module(plc(dcg/dcg_meta)).
-:- use_module(plc(dcg/dcg_quote)).
-
 :- use_module(plGraphViz(gv_attrs)).
 :- use_module(plGraphViz(gv_html)).
-:- use_module(plGraphViz(gv_numeral)).
 
 
 
@@ -90,7 +79,7 @@ gv_compass_pt(w) --> "w".
 %                   undirected (operator `--`).
 
 gv_edge_operator(false) --> !, "--".
-gv_edge_operator(true) --> arrow(right, 2).
+gv_edge_operator(true) --> "->".
 
 
 
@@ -120,7 +109,9 @@ gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -->
   
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
-  bracketed(square, '*'(gv_attr(edge), EAttrs, [])),
+  "[",
+  gv_attrs(edge, EAttrs),
+  "]",
   line_feed.
 
 
@@ -184,11 +175,14 @@ gv_id(html_like_label(Content)) --> !,
 % Double-quoted strings.
 % The quotes are already part of the given atom.
 gv_id(double_quoted_string(Atom)) --> !,
-  quoted(atom(Atom)).
+  "\"",
+  atom(Atom),
+  "\"".
 % Numerals.
 gv_id(N) -->
   {number(N)}, !,
-  gv_numeral(N).
+  % @tbd Use gv_numeral//1.
+  number(N).
 % Alpha-numeric strings.
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -198,8 +192,10 @@ gv_id(Atom) -->
   % GraphViz keyword.
   {\+ gv_keyword([H|T])}.
 
-gv_id_first(X) --> ascii_letter(X).
-gv_id_first(X) --> underscore(X).
+gv_id_first(X) -->
+  ascii_alpha(X).
+gv_id_first(X) -->
+  underscore(X).
 
 gv_id_rest([]) --> [].
 gv_id_rest([H|T]) -->
@@ -213,10 +209,10 @@ gv_id_rest([H|T]) -->
 %! gv_keyword(+Codes:list(code)) is semidet.
 % Succeeds if the given codes for a GraphViz reserved keyword.
 
-gv_keyword(Codes):-
+gv_keyword(Cs):-
   % Obviously, the keywords do not occur on the difference list input.
   % So we must use phrase/[2,3].
-  phrase(gv_keyword, Codes).
+  phrase(gv_keyword, Cs).
 
 %! gv_keyword// .
 % GraphViz has reserved keywords that cannot be used as identifiers.
@@ -260,18 +256,23 @@ gv_node_id(Id) -->
 
 gv_node_statement(I, vertex(Id,VAttrs)) -->
   indent(I),
-  gv_node_id(Id), " ",
-  bracketed(square, '*'(gv_attr(node), VAttrs, [])),
-  line_feed.
+  gv_node_id(Id),
+  " [",
+  gv_attrs(node, VAttrs),
+  "\n".
 
 
 
 gv_port -->
   gv_port_location,
-  '?'(gv_port_angle, []).
+  (   gv_port_angle
+  ;   ""
+  ).
 gv_port -->
   gv_port_angle,
-  '?'(gv_port_location, []).
+  (   gv_port_location
+  ;   ""
+  ).
 gv_port -->
   ":",
   gv_compass_pt(_).
@@ -284,38 +285,31 @@ gv_port_location -->
   ":",
   gv_id(_).
 gv_port_location -->
-  ":",
-  bracketed(
-    round,
-    (
-      gv_id(_),
-      ",",
-      gv_id(_)
-    )
-  ).
+  ":(",
+  gv_id(_),
+  ",",
+  gv_id(_)
+  ")".
 
 
 
 gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -->
   indent(I),
-  bracketed(curly, (
-    line_feed,
-
-    % The rank attribute.
-    {NewI is I + 1},
-    indent(NewI),
-    gv_attr(subgraph, rank=same),
-    ";",
-    line_feed,
-
-    % Vertice statements.
-    '*'(
-      gv_node_statement(NewI),
-      [Rank_V_Term|Content_V_Terms],
-      []
-    ),
-
-    % We want to indent the closing curly brace.
-    indent(I)
-  )),
-  line_feed.
+  "{\n",
+  
+  % The rank attribute.
+  {NewI is I + 1},
+  indent(NewI),
+  gv_attr(subgraph, rank=same),
+  ";\n",
+  
+  % Vertice statements.
+  '*'(
+    gv_node_statement(NewI),
+    [Rank_V_Term|Content_V_Terms],
+    []
+  ),
+  
+  % We want to indent the closing curly brace.
+  indent(I),
+  "\n".
diff --git a/gv_file.pl b/gv_file.pl
index 5d2228e..45135f3 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -18,8 +18,6 @@
 :- use_module(library(option)).
 :- use_module(library(process)).
 
-:- use_module(plc(process/process_ext)).
-
 :- dynamic(user:prolog_file_type/2).
 :- multifile(user:prolog_file_type/2).
 
@@ -88,11 +86,10 @@ file_to_gv(InputFile, OutputFile, Options):-
   % Run the GraphViz conversion command in the shell.
   format(atom(OutputTypeFlag), '-T~a', [OutputType]),
   format(atom(OutputFileFlag), '-o~a', [OutputFile]),
-  atomic_list_concat(['GraphViz',Method], ' ', Program),
-  handle_process(
-    Method,
+  process_ext(
+    path(Method),
     [OutputTypeFlag,file(InputFile),OutputFileFlag],
-    [program(Program)]
+    []
   ).
 
 
diff --git a/gv_html.pl b/gv_html.pl
index 65ae2bd..79d2564 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -56,7 +56,9 @@ cell:   <TD> label </TD>
 %! gv_html_like_label(?Content:compound)// .
 
 gv_html_like_label(Content) -->
-  bracketed(angular, label(Content)).
+  "<",
+  label(Content),
+  ">".
 
 
 
diff --git a/gv_util.pl b/gv_util.pl
new file mode 100644
index 0000000..b2cbdcc
--- /dev/null
+++ b/gv_util.pl
@@ -0,0 +1,260 @@
+:- module(
+  gv_util,
+  [
+    ascii_alpha//1, % ?X:code
+    atom_phrase/2, % :Goal_1
+                   % +Atom:atom
+    atom_phrase/3, % :Goal_1
+                   % +Atom1:atom
+                   % -Atom2:atom
+    file_age/2, % +File:atom
+                % -Age:float
+    html_download/2, % +Uri:atom
+                     % -Dom:compound
+    indent//1, % +N:nonneg
+    persistent_db_attach/2, % +Module:atom
+                            % +File:atom
+    underscore//1, % ?X:code
+    verbose_process/2 % +Process:atom
+                      % :Goal_0
+  ]
+).
+
+/** <module> GraphViz utilities
+
+Utilities that should not be specific to the GraphViz library
+but that are considered too small to publish independently.
+
+@author Wouter Beek
+@version 2015/07
+*/
+
+:- use_module(library(ansi_term)).
+:- use_module(library(http/http_open)).
+:- use_module(library(http/http_ssl_plugin)). % HTTPS support.
+:- use_module(library(lambda)).
+:- use_module(library(option)).
+:- use_module(library(process)).
+:- use_module(library(sgml)).
+:- use_module(library(xpath)).
+
+:- meta_predicate(atom_phrase(1,+)).
+:- meta_predicate(atom_phrase(1,+,-)).
+:- meta_predicate(dcg_call(//,?,?)).
+:- meta_predicate(dcg_call(1,+,?,?)).
+:- meta_predicate(http_get(+,1,+)).
+:- meta_predicate(http_stream(+,1,+)).
+:- meta_predicate(verbose_process(+,0)).
+
+
+
+%! ascii_alpha(?X:code)// .
+
+ascii_alpha(X) -->
+  between_code(65, 90, X)
+ascii_alpha(X) -->
+  between_code(97, 122, X)
+
+
+
+%! ascii_alpha_numeric(?X:code)// .
+
+ascii_alpha_numeric(X) -->
+  ascii_alpha(X).
+ascii_alpha_numeric(X) -->
+  ascii_numberic(X).
+
+
+
+%! ascii_numeric(?X:code)// .
+
+ascii_numeric(X) -->
+  between_code(48, 57, X).
+
+
+
+%! atom_phrase(:Goal_1, +Atom:atom) is det.
+
+atom_phrase(Goal_1, A):-
+  atom_codes(A, Cs),
+  phrase(Goal_1, Cs).
+
+
+
+%! atom_phrase(:Goal_1, +Atom1:atom, +Atom2:atom) is det.
+
+atom_phrase(Goal_1, A1, A2):-
+  atom_codes(A1, Cs1),
+  phrase(Goal_1, Cs1, Cs2),
+  atom_codes(A2, Cs2).
+
+
+
+%! between_code(+Low:code, +High:code, ?X:code)// .
+
+between_code(Low, High, X) -->
+  [X],
+  {between(Low, High, X)}.
+
+
+
+%! dcg_call(:Dcg_0)// is det.
+
+dcg_call(Dcg, X, Y):-
+  call(Dcg, X, Y).
+
+%! dcg_call(:Dcg_1, +Argument1)// is det.
+
+dcg_call(Dcg, A1, X, Y):-
+  call(Dcg, A1, X, Y).
+
+
+
+%! file_age(+File:atom, -Age:float) is det.
+
+file_age(File, Age):-
+  time_file(File, LastModified),
+  get_time(Now),
+  Age is Now - LastModified.
+
+
+
+%! html_download(+Uri:atom, -Dom:compound) is det.
+
+html_download(Uri, Dom):-
+  http_get(
+    Uri,
+    \Stream^load_html(Stream, Dom, [dialect(html5),max_errors(-1)]),
+    copy
+    []
+  ).
+
+
+
+%! http_get(+Uri:atom, :Success_1, +Options:list(compound)) is det.
+
+http_get(Uri, Success_1, Opts0):-
+  merge_options([method(get),status_code(Status)], Opts0, Opts),
+  setup_call_cleanup(
+    http_open(Uri, Stream, Opts),
+    http_stream(Status, Success_1, Stream),
+    close(Stream)
+  ).
+
+%! http_stream(+Status:between(100,599), :Success_1, +Read:stream) is det.
+
+http_stream(Status, Success_1, Stream):-
+  between(200, 299, Status), !,
+  call(Success_1, Stream).
+http_stream(Status, _, Stream):-
+  format(user_error, '[STATUS ~D] ', [Status]),
+  copy_stream_data(Stream, user_error),
+  format(user_error, '\n', []).
+
+
+
+%! html_table(+Dom:list(compound), -Header:list, -Data:list(list)) is det.
+
+html_table(Dom, Header, Data):-
+  ignore(html_table_row(header, Dom, Header)),
+  findall(
+    Data0,
+    html_table_row(data, Table, Data0),
+    Data
+  ).
+
+%! html_table_row(
+%!   +Mode:oneof([data,header]),
+%!   +Dom:list(compound),
+%!   -Data:list
+%! ) is det.
+
+html_table_row(data, Dom, Row):- !,
+  xpath(Dom, //tr, Tr),
+  findall(
+    Cell,
+    xpath(Tr, //td(normalize_space), Cell),
+    Row
+  ),
+  Row \== [].
+html_table_row(header, Dom, Row):-
+  xpath(Dom, //tr, Tr),
+  findall(
+    Cell,
+    xpath(Tr, //th(normalize_space), Cell),
+    Row
+  ),
+  Row \== [].
+
+
+
+%! indent(+N:nonneg)// is det.
+
+indent(0) --> !, "".
+indent(N) -->
+  " ",
+  {succ(M, N)},
+  indent(M).
+
+
+
+%! persistent_db_attach(+Module:atom, +File:atom) is det.
+% Safe attachement of a persistent database dump.
+% This first make sure the given file exists.
+
+persistent_db_attach(Mod, File):-
+  exists_file(File), !,
+  Mod:db_attach(File, []).
+persistent_db_attach(Mod, File):-
+  touch_file(File),
+  persistent_db_attach(Mod, File).
+
+touch_file(File):-
+  create_process(path(touch), [file(File)], []).
+
+
+
+%! underscore(?C:code)// .
+
+underscore(95) -->
+  [95].
+
+
+
+%! verbose_process(+Name:atom, :Goal_0) is det.
+
+verbose_process(Name, Goal_0):-
+  setup_call_catcher_cleanup(
+    start(Name),
+    Goal_0,
+    E,
+    (   E == true
+    ->  success(Name)
+    ;   failure(Name)
+    )
+  ).
+
+failure(Name):-
+  warning('[FAILURE]'),
+  normal(' Process '),
+  normal(Name),
+  normal(':'),
+  nl,
+  normal(E).
+
+start(Name):-
+  normal('Starting process '),
+  normal(Name),
+  normal('.').
+
+success(Name):-
+  success('[SUCCESS]'),
+  normal(' Ending process '),
+  normal(Name),
+  normal('.').
+
+emphasis(X):- ansi_format([bold], '~a', [X]).
+normal(X):- ansi_format([], '~a', [X]).
+notification(X):- ansi_format([bold,fg(yellow)], '~a', [X]).
+success(X):- ansi_format([bold,fg(green)], '~a', [X]).
+warning(X):- ansi_format([bold,fg(red)], '~a', [X]).
 
```
 
<h2 id="99"> 99: 正在比较变动前 50a3dbc 和变动后 a97e8e1 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection
deleted file mode 160000
index 88874a7..0000000
--- a/Prolog-Library-Collection
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 88874a7f451df36309d1d6ade03bc7186b4f6c8b
diff --git a/debug.pl b/debug.pl
deleted file mode 100644
index 12b4526..0000000
--- a/debug.pl
+++ /dev/null
@@ -1,7 +0,0 @@
-% Debug file for library plGraphViz.
-
-:- [load].
-
-:- use_module(debug_project).
-:- debug_all_files.
-
diff --git a/debug_project.pl b/debug_project.pl
deleted file mode 100644
index d53a92f..0000000
--- a/debug_project.pl
+++ /dev/null
@@ -1,106 +0,0 @@
-:- module(
-  debug_project,
-  [
-    debug_all_files/0,
-    start_pldoc_server/0
-  ]
-).
-
-/** <module> Debug project
-
-Generic code for debugging a project:
-  * Load all subdirectories and Prolog files contained in those directories.
-
-@author Wouter Beek
-@version 2015/02/26
-*/
-
-:- use_module(library(ansi_term)).
-:- use_module(library(apply)).
-:- use_module(library(pldoc)).
-:- use_module(library(portray_text)).
-
-:- set_prolog_flag(
-  answer_write_options,
-  [max_depth(100),portrayed(true),spacing(next_argument)]
-).
-:- set_prolog_flag(
-  debugger_write_options,
-  [max_depth(100),portrayed(true),spacing(next_argument)]
-).
-:- set_portray_text(ellipsis, 1000).
-
-:- dynamic(user:debug_mode).
-:- multifile(user:debug_mode).
-
-:- initialization(init_debug_mode).
-
-
-
-
-
-debug_all_files:-
-  ensure_loaded(plc(io/dir_ext)),
-  absolute_file_name(project(.), Dir, [access(read),file_type(directory)]),
-  directory_files(
-    Dir,
-    Files1,
-    [
-      file_types([prolog]),
-      include_directories(false),
-      include_self(false),
-      recursive(true)
-    ]
-  ),
-  exclude(do_not_load, Files1, Files2),
-  maplist(use_module0, Files2).
-use_module0(File):-
-  print_message(informational, loading_module(File)),
-  use_module(File).
-
-do_not_load(File1):-
-  file_base_name(File1, File2),
-  file_name_extension(File3, pl, File2),
-  do_not_load0(File3).
-
-do_not_load0(dcg_ascii).
-do_not_load0(dcg_unicode).
-do_not_load0(debug).
-do_not_load0(debug_project).
-do_not_load0(index).
-do_not_load0(load).
-do_not_load0(load_project).
-do_not_load0(run).
-do_not_load0(style).
-
-
-
-%! start_pldoc_server is det.
-% The plDoc server should be started *before* documented modules are loaded.
-
-start_pldoc_server:-
-  doc_server(9999).
-
-
-
-
-
-% INITIALIZATION
-
-init_debug_mode:-
-  % Set the debug mode flag.
-  (   user:debug_mode
-  ->  true
-  ;   assert(user:debug_mode)
-  ),
-  % Avoid errors when using gtrace/0 in threads.
-  guitracer.
-
-
-
-% MESSAGES
-
-:- multifile(prolog:message//1).
-
-prolog:message(loading_module(File)) -->
-  ['[M] ',File].
diff --git a/gv_attr_type.pl b/gv_attr_type.pl
index b3e41ca..4e1b7f2 100644
--- a/gv_attr_type.pl
+++ b/gv_attr_type.pl
@@ -36,7 +36,7 @@
   ]
 ).
 :- reexport(
-  plGraphViz(gv_color),
+  library(gv/gv_color),
   [
     color//1, % +Color:compound
     colorList//1 % +ColorList:list(compound)
@@ -46,12 +46,15 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2014/06, 2014/11-2015/01
+@version 2015/07
 */
 
 :- use_module(library(dcg/basics), except([string//1])).
-
-:- use_module(plGraphViz(gv_html)).
+:- use_module(library(dcg/dcg_abnf)).
+:- use_module(library(dcg/dcg_ascii)).
+:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(dcg/dcg_quoted)).
+:- use_module(library(gv/gv_html)).
 
 
 
@@ -194,9 +197,8 @@ double(N) -->
 
 %! doubleList(+Doubles:list(float))// .
 
-doubleList([]) --> !, "".
-doubleList([H]) --> !, double(H)
-doubleList([H|T]) --> double(H), ":", doubleList(T).
+doubleList(L) -->
+  '*'(double, L, [separator(colon)]).
 
 
 
@@ -204,14 +206,8 @@ doubleList([H|T]) --> double(H), ":", doubleList(T).
 % @tbd Support for context-dependent replacements.
 
 escString(S1) -->
-  {
-    atom_codes(S1, Cs1),
-    phrase(escape_double_quotes, Cs1, Cs2),
-    atom_codes(S2, Cs2)
-  },
-  "\"",
-  atom(S2),
-  "\"".
+  {atom_phrase(escape_double_quotes, S1, S2)},
+  quoted(atom(S2)).
 
 escape_double_quotes, [92,34] -->
   [34], !,
@@ -285,9 +281,7 @@ pagedir('TR').
 % `point(X:float,Y:float,Changeable:boolean)`.
 
 point(point(X,Y,Changeable)) -->
-  float(X),
-  ",",
-  float(Y),
+  '#'(2, float, [X,Y], [separator(comma)]),
   input_changeable(Changeable).
 
 input_changeable(false) --> "".
@@ -348,10 +342,12 @@ rankdir('TB').
 %! rect(+Rectangle:compound)// .
 
 rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  float(LowerLeftX), ",",
-  float(LowerLeftY), ",",
-  float(UpperRightX), ",",
-  float(UpperRightY).
+  '#'(
+    4,
+    float,
+    [LowerLeftX,LowerLeftY,UpperRightX,UpperRightY],
+    [separator(comma)]
+  ).
 
 
 
@@ -447,9 +443,7 @@ smoothType(triangle).
 % A GraphViz string.
 
 string(Content) -->
-  "\"",
-  atom(Content),
-  "\"".
+  quoted(atom(Content)).
 
 
 
diff --git a/gv_attrs.pl b/gv_attrs.pl
index 1e8ccdf..cce4f9d 100644
--- a/gv_attrs.pl
+++ b/gv_attrs.pl
@@ -13,13 +13,18 @@
 */
 
 :- use_module(library(apply)).
+:- use_module(library(deb_ext)).
 :- use_module(library(dcg/basics)).
+:- use_module(library(dcg/dcg_call)).
+:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(file_ext)).
+:- use_module(library(http/html_download)).
+:- use_module(library(http/html_table)).
 :- use_module(library(lists)).
-:- use_module(library(persistency)).
+:- use_module(library(persistency_ext)).
 :- use_module(library(xpath)).
 
-:- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]).
-:- use_module(plGraphViz(gv_util)).
+:- use_module(library(gv/gv_attr_type), [gv_attr_type/1]).
 
 :- dynamic(user:prolog_file_type/2).
 :- multifile(user:prolog_file_type/2).
@@ -144,7 +149,7 @@ gv_attrs_file(File):-
 
 gv_attrs_init:-
   gv_attrs_file(File),
-  persistent_db_attach(File),
+  attach_persistent_db(File),
   file_age(File, Age),
   gv_attrs_update(Age).
 
diff --git a/gv_color.pl b/gv_color.pl
index b8cf308..dd1690b 100644
--- a/gv_color.pl
+++ b/gv_color.pl
@@ -18,7 +18,7 @@
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/basics)).
-:- use_module(library(lists), except([delete/3,subset/2])).
+:- use_module(library(lists)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
@@ -56,16 +56,12 @@
 
 color(rgb(Red,Green,Blue)) --> !,
   "#",
-  hex_color(Red),
-  hex_color(Green),
-  hex_color(Blue).
+  '#'(3, hex_color, [Red,Green,Blue], []).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
   color(rgb(Red,Green,Blue)),
   hex_color(Alpha).
 color(hsv(Hue,Saturation,Value)) --> !,
-  hsv_color(Hue),
-  hsv_color(Saturation),
-  hsv_color(Value).
+  '#'(3, hsv_color, [Hue,Saturation,Value], []).
 color(Name) -->
   {gv_color(_, Name)},
   atom(Name).
@@ -80,11 +76,8 @@ hsv_color(D, Head, Tail):-
 
 %! colorList(+Pairs:list(pair(compound,float)))// .
 
-colorList([H]) --> !,
-  wc(H).
-colorList([H|T]) -->
-  wc(H),
-  colorList(T).
+colorList(L) -->
+  '+'(wc, L, []).
 
 wc(Color-Float) -->
   color(Color),
@@ -105,11 +98,11 @@ wc_weight(Float) -->
 %! gv_color_download is det.
 
 gv_color_download:-
-  report_on_process(
+  verbose_call(
     'Updating the GraphViz color table...',
     (
       gv_color_uri(Uri),
-      download_html_dom(Uri, Dom, [html_dialect(html4),silent(true)]),
+      html_download(Uri, Dom),
       xpath(Dom, //table(1), TableDom1),
       xpath(Dom, //table(2), TableDom2),
       maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2])
@@ -117,7 +110,7 @@ gv_color_download:-
   ).
 
 assert_color_table(Colorscheme, TableDom):-
-  html_to_table(TableDom, _, Rows),
+  html_table(TableDom, _, Rows),
   append(Rows, Cells),
   forall(
     member(Cell, Cells),
@@ -157,4 +150,3 @@ gv_color_update(_):-
 %! gv_color_uri(-Url:url) is det.
 
 gv_color_uri('http://www.graphviz.org/doc/info/colors.html').
-
diff --git a/gv_dot.pl b/gv_dot.pl
index c26d629..9c53cc5 100644
--- a/gv_dot.pl
+++ b/gv_dot.pl
@@ -1,7 +1,6 @@
 :- module(
   gv_dot,
   [
-    gv_graph//1 % +Graph:compound
   ]
 ).
 
@@ -22,17 +21,19 @@ a_list = ID "=" ID [","] [a_list]
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11-2014/12
+@version 2015/07
 */
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/basics)).
-:- use_module(library(lists), except([delete/3,subset/2])).
+:- use_module(library(dcg/dcg_ascii)).
+:- use_module(library(dcg/dcg_bracketed)).
+:- use_module(library(dcg/dcg_content)).
+:- use_module(library(gv/gv_attrs)).
+:- use_module(library(gv/gv_html)).
+:- use_module(library(lists)).
 :- use_module(library(ordsets)).
 
-:- use_module(plGraphViz(gv_attrs)).
-:- use_module(plGraphViz(gv_html)).
-
 
 
 
@@ -44,14 +45,24 @@ a_list = ID "=" ID [","] [a_list]
 % A single GraphViz attribute.
 % We assume that the attribute has already been validated.
 
-gv_attr(Context, Name=Value) -->
-  gv_id(Name),
+gv_attr(Context, N=V) -->
+  gv_id(N),
   "=",
-  gv_attr_value(Context, Name=Value),
+  gv_attr_value(Context, N=V),
   ";".
 
 
 
+%! gv_attrs(
+%!   +Kind:oneof([edge,graph,node]),
+%!   +Attributes:list(compound)
+%! )// is det.
+
+gv_attrs(Kind, L) -->
+  bracketed(square, '*'(gv_attr, L, [])).
+
+
+
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
 % ```
 % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
@@ -76,7 +87,7 @@ gv_compass_pt(w) --> "w".
 % undirected.
 %
 % @arg Directed Whether an edge is directed (operator `->`) or
-%                   undirected (operator `--`).
+%               undirected (operator `--`).
 
 gv_edge_operator(false) --> !, "--".
 gv_edge_operator(true) --> "->".
@@ -109,10 +120,8 @@ gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -->
   
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
-  "[",
   gv_attrs(edge, EAttrs),
-  "]",
-  line_feed.
+  "\n".
 
 
 
@@ -137,14 +146,8 @@ gv_generic_attributes_statement(_, _, []) --> [], !.
 gv_generic_attributes_statement(Kind, I, KindAttrs) -->
   indent(I),
   gv_kind(Kind), " ",
-  "[",
   gv_attrs(Kind, KindAttrs),
-  "]\n".
-
-gv_attrs(_, []) --> !, "".
-gv_attrs(Kind, [H|T]) -->
-  gv_attr(Kind, H),
-  gv_attrs(Kind, T).
+  "\n".
 
 
 
@@ -175,9 +178,7 @@ gv_id(html_like_label(Content)) --> !,
 % Double-quoted strings.
 % The quotes are already part of the given atom.
 gv_id(double_quoted_string(Atom)) --> !,
-  "\"",
-  atom(Atom),
-  "\"".
+  quoted(atom(Atom)).
 % Numerals.
 gv_id(N) -->
   {number(N)}, !,
@@ -193,7 +194,7 @@ gv_id(Atom) -->
   {\+ gv_keyword([H|T])}.
 
 gv_id_first(X) -->
-  ascii_alpha(X).
+  ascii_letter(X).
 gv_id_first(X) -->
   underscore(X).
 
@@ -257,7 +258,6 @@ gv_node_id(Id) -->
 gv_node_statement(I, vertex(Id,VAttrs)) -->
   indent(I),
   gv_node_id(Id),
-  " [",
   gv_attrs(node, VAttrs),
   "\n".
 
@@ -293,9 +293,12 @@ gv_port_location -->
 
 
 
-gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -->
+gv_ranked_node_collection(I, Rank) -->
   indent(I),
-  "{\n",
+  bracketed(curly, gv_ranked_node_collection0(I, Rank)).
+
+gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
+  "\n",
   
   % The rank attribute.
   {NewI is I + 1},
diff --git a/gv_file.pl b/gv_file.pl
index 45135f3..da17737 100644
--- a/gv_file.pl
+++ b/gv_file.pl
@@ -29,6 +29,8 @@ user:prolog_file_type(pdf, pdf).
 
 
 
+
+
 %! gv_export(
 %!   +ExportGraph:compound,
 %!   +OutputFile:atom,
diff --git a/gv_graph.pl b/gv_graph.pl
index dd4af97..9ae7353 100644
--- a/gv_graph.pl
+++ b/gv_graph.pl
@@ -12,11 +12,15 @@
 */
 
 :- use_module(library(apply)).
+:- use_module(library(dcg/dcg_abnf)).
+:- use_module(library(dcg/dcg_content)).
 :- use_module(library(lists)).
 :- use_module(library(option)).
 
 
 
+
+
 %! gv_graph(+Graph:compound)//
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
@@ -145,20 +149,16 @@ gv_graph(G1, I) -->
   indent(I),
   "}\n".
 
-gv_edge_statements(_, _, []) --> !, "".
-gv_edge_statements(I, Dir, [H|T]) -->
-  gv_edge_statement(I, Dir, H),
-  gv_edge_statements(I, Dir, T).
+gv_edge_statements(I, Dir, L) -->
+  '*'(gv_edge_statement(I, Dir), L, []).
+
+gv_node_statements(I, L) -->
+  '*'(gv_node_statement(I), L, []).
+
+gv_ranked_node_collections(I, L) -->
+  '*'(gv_ranked_node_collection(I), L, []).
 
-gv_node_statements(_, []) --> !, "".
-gv_node_statements(I, [H|T]) -->
-  gv_node_statement(I, H),
-  gv_node_statements(I, T).
 
-gv_ranked_node_collections(_, []) --> !, "".
-gv_ranked_node_collections(I, [H|T]) -->
-  gv_ranked_node_collection(I, H),
-  gv_ranked_node_collections(I, T),
 
 
 
@@ -191,7 +191,7 @@ gv_graph_type(true) --> "digraph".
 % no multi-edges.
 % This only applies to directed graphs.
 
-gv_strict(false) --> [].
+gv_strict(false) --> "".
 gv_strict(true) --> "strict ".
 
 
diff --git a/gv_html.pl b/gv_html.pl
index 79d2564..ced6d6b 100644
--- a/gv_html.pl
+++ b/gv_html.pl
@@ -40,14 +40,13 @@ cell:   <TD> label </TD>
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/node-shapes#html
-@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11
+@version 2015/07
 */
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_bracket)).
-:- use_module(plc(dcg/dcg_content)).
-
-:- use_module(plHtml(html_dcg)).
+:- use_module(library(dcg/dcg_abnf)).
+:- use_module(library(dcg/dcg_bracket)).
+:- use_module(library(dcg/dcg_content)).
+:- use_module(library(http/html_dcg)).
 
 
 
@@ -56,9 +55,7 @@ cell:   <TD> label </TD>
 %! gv_html_like_label(?Content:compound)// .
 
 gv_html_like_label(Content) -->
-  "<",
-  label(Content),
-  ">".
+  bracketed(angular, label(Content)).
 
 
 
@@ -262,7 +259,7 @@ textitem(String) -->
 
 
 
-% HELPERS
+% HELPERS %
 
 %! supported_html_element(+Name:atom) is semidet.
 %! supported_html_element(-Name:atom) is multi.
diff --git a/gv_numeral.pl b/gv_numeral.pl
index bff1255..1e5c723 100644
--- a/gv_numeral.pl
+++ b/gv_numeral.pl
@@ -11,14 +11,14 @@
 @version 2014/05-2014/06, 2015/01
 */
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_abnf_common)).
-:- use_module(plc(dcg/dcg_ascii)).
-:- use_module(plc(dcg/dcg_cardinal)).
-:- use_module(plc(math/math_ext)).
-:- use_module(plc(math/positional)).
-:- use_module(plc(math/radix)).
-:- use_module(plc(math/rational_ext)).
+:- use_module(library(dcg/dcg_abnf)).
+:- use_module(library(dcg/dcg_abnf_common)).
+:- use_module(library(dcg/dcg_ascii)).
+:- use_module(library(dcg/dcg_cardinal)).
+:- use_module(library(math/math_ext)).
+:- use_module(library(math/positional)).
+:- use_module(library(math/radconv)).
+:- use_module(library(math/rational_ext)).
 
 
 
@@ -63,14 +63,14 @@ gv_numeral(N) -->
           %     preceded by the decimal separator.
           {I =:= 0}
       ->  ".",
-          {weights_fraction(FW, F)},
+          {positional_fraction(FW, F)},
           '[0-9]*'(FW)
       ;   % [3] Both the integer part and the fractional are non-zero,
           %     so write both of them, with the decimal separator in-between.
           {positional(I, IW)},
           '[0-9]+'(IW),
           ".",
-          {weights_fraction(FW, F)},
+          {positional_fraction(FW, F)},
           '[0-9]*'(FW)
       )
   ;   '[-]?'(Sg),
diff --git a/gv_util.pl b/gv_util.pl
deleted file mode 100644
index b2cbdcc..0000000
--- a/gv_util.pl
+++ /dev/null
@@ -1,260 +0,0 @@
-:- module(
-  gv_util,
-  [
-    ascii_alpha//1, % ?X:code
-    atom_phrase/2, % :Goal_1
-                   % +Atom:atom
-    atom_phrase/3, % :Goal_1
-                   % +Atom1:atom
-                   % -Atom2:atom
-    file_age/2, % +File:atom
-                % -Age:float
-    html_download/2, % +Uri:atom
-                     % -Dom:compound
-    indent//1, % +N:nonneg
-    persistent_db_attach/2, % +Module:atom
-                            % +File:atom
-    underscore//1, % ?X:code
-    verbose_process/2 % +Process:atom
-                      % :Goal_0
-  ]
-).
-
-/** <module> GraphViz utilities
-
-Utilities that should not be specific to the GraphViz library
-but that are considered too small to publish independently.
-
-@author Wouter Beek
-@version 2015/07
-*/
-
-:- use_module(library(ansi_term)).
-:- use_module(library(http/http_open)).
-:- use_module(library(http/http_ssl_plugin)). % HTTPS support.
-:- use_module(library(lambda)).
-:- use_module(library(option)).
-:- use_module(library(process)).
-:- use_module(library(sgml)).
-:- use_module(library(xpath)).
-
-:- meta_predicate(atom_phrase(1,+)).
-:- meta_predicate(atom_phrase(1,+,-)).
-:- meta_predicate(dcg_call(//,?,?)).
-:- meta_predicate(dcg_call(1,+,?,?)).
-:- meta_predicate(http_get(+,1,+)).
-:- meta_predicate(http_stream(+,1,+)).
-:- meta_predicate(verbose_process(+,0)).
-
-
-
-%! ascii_alpha(?X:code)// .
-
-ascii_alpha(X) -->
-  between_code(65, 90, X)
-ascii_alpha(X) -->
-  between_code(97, 122, X)
-
-
-
-%! ascii_alpha_numeric(?X:code)// .
-
-ascii_alpha_numeric(X) -->
-  ascii_alpha(X).
-ascii_alpha_numeric(X) -->
-  ascii_numberic(X).
-
-
-
-%! ascii_numeric(?X:code)// .
-
-ascii_numeric(X) -->
-  between_code(48, 57, X).
-
-
-
-%! atom_phrase(:Goal_1, +Atom:atom) is det.
-
-atom_phrase(Goal_1, A):-
-  atom_codes(A, Cs),
-  phrase(Goal_1, Cs).
-
-
-
-%! atom_phrase(:Goal_1, +Atom1:atom, +Atom2:atom) is det.
-
-atom_phrase(Goal_1, A1, A2):-
-  atom_codes(A1, Cs1),
-  phrase(Goal_1, Cs1, Cs2),
-  atom_codes(A2, Cs2).
-
-
-
-%! between_code(+Low:code, +High:code, ?X:code)// .
-
-between_code(Low, High, X) -->
-  [X],
-  {between(Low, High, X)}.
-
-
-
-%! dcg_call(:Dcg_0)// is det.
-
-dcg_call(Dcg, X, Y):-
-  call(Dcg, X, Y).
-
-%! dcg_call(:Dcg_1, +Argument1)// is det.
-
-dcg_call(Dcg, A1, X, Y):-
-  call(Dcg, A1, X, Y).
-
-
-
-%! file_age(+File:atom, -Age:float) is det.
-
-file_age(File, Age):-
-  time_file(File, LastModified),
-  get_time(Now),
-  Age is Now - LastModified.
-
-
-
-%! html_download(+Uri:atom, -Dom:compound) is det.
-
-html_download(Uri, Dom):-
-  http_get(
-    Uri,
-    \Stream^load_html(Stream, Dom, [dialect(html5),max_errors(-1)]),
-    copy
-    []
-  ).
-
-
-
-%! http_get(+Uri:atom, :Success_1, +Options:list(compound)) is det.
-
-http_get(Uri, Success_1, Opts0):-
-  merge_options([method(get),status_code(Status)], Opts0, Opts),
-  setup_call_cleanup(
-    http_open(Uri, Stream, Opts),
-    http_stream(Status, Success_1, Stream),
-    close(Stream)
-  ).
-
-%! http_stream(+Status:between(100,599), :Success_1, +Read:stream) is det.
-
-http_stream(Status, Success_1, Stream):-
-  between(200, 299, Status), !,
-  call(Success_1, Stream).
-http_stream(Status, _, Stream):-
-  format(user_error, '[STATUS ~D] ', [Status]),
-  copy_stream_data(Stream, user_error),
-  format(user_error, '\n', []).
-
-
-
-%! html_table(+Dom:list(compound), -Header:list, -Data:list(list)) is det.
-
-html_table(Dom, Header, Data):-
-  ignore(html_table_row(header, Dom, Header)),
-  findall(
-    Data0,
-    html_table_row(data, Table, Data0),
-    Data
-  ).
-
-%! html_table_row(
-%!   +Mode:oneof([data,header]),
-%!   +Dom:list(compound),
-%!   -Data:list
-%! ) is det.
-
-html_table_row(data, Dom, Row):- !,
-  xpath(Dom, //tr, Tr),
-  findall(
-    Cell,
-    xpath(Tr, //td(normalize_space), Cell),
-    Row
-  ),
-  Row \== [].
-html_table_row(header, Dom, Row):-
-  xpath(Dom, //tr, Tr),
-  findall(
-    Cell,
-    xpath(Tr, //th(normalize_space), Cell),
-    Row
-  ),
-  Row \== [].
-
-
-
-%! indent(+N:nonneg)// is det.
-
-indent(0) --> !, "".
-indent(N) -->
-  " ",
-  {succ(M, N)},
-  indent(M).
-
-
-
-%! persistent_db_attach(+Module:atom, +File:atom) is det.
-% Safe attachement of a persistent database dump.
-% This first make sure the given file exists.
-
-persistent_db_attach(Mod, File):-
-  exists_file(File), !,
-  Mod:db_attach(File, []).
-persistent_db_attach(Mod, File):-
-  touch_file(File),
-  persistent_db_attach(Mod, File).
-
-touch_file(File):-
-  create_process(path(touch), [file(File)], []).
-
-
-
-%! underscore(?C:code)// .
-
-underscore(95) -->
-  [95].
-
-
-
-%! verbose_process(+Name:atom, :Goal_0) is det.
-
-verbose_process(Name, Goal_0):-
-  setup_call_catcher_cleanup(
-    start(Name),
-    Goal_0,
-    E,
-    (   E == true
-    ->  success(Name)
-    ;   failure(Name)
-    )
-  ).
-
-failure(Name):-
-  warning('[FAILURE]'),
-  normal(' Process '),
-  normal(Name),
-  normal(':'),
-  nl,
-  normal(E).
-
-start(Name):-
-  normal('Starting process '),
-  normal(Name),
-  normal('.').
-
-success(Name):-
-  success('[SUCCESS]'),
-  normal(' Ending process '),
-  normal(Name),
-  normal('.').
-
-emphasis(X):- ansi_format([bold], '~a', [X]).
-normal(X):- ansi_format([], '~a', [X]).
-notification(X):- ansi_format([bold,fg(yellow)], '~a', [X]).
-success(X):- ansi_format([bold,fg(green)], '~a', [X]).
-warning(X):- ansi_format([bold,fg(red)], '~a', [X]).
diff --git a/load.pl b/load.pl
deleted file mode 100644
index de8b5ca..0000000
--- a/load.pl
+++ /dev/null
@@ -1,13 +0,0 @@
-% Load file for the plGraphViz library.
-
-:- dynamic(user:project/2).
-:- multifile(user:project/2).
-   user:project(plGraphViz, 'GraphViz support for SWI-Prolog.').
-
-:- use_module(load_project).
-:- load_project([
-    plc-'Prolog-Library-Collection',
-    plHtml,
-    plUri
-]).
-
diff --git a/load_project.pl b/load_project.pl
deleted file mode 100644
index 3f0ebef..0000000
--- a/load_project.pl
+++ /dev/null
@@ -1,125 +0,0 @@
-:- module(
-  load_project,
-  [
-    load_project/1, % +ChildProjects:list(or([atom,pair(atom)]))
-    load_subproject/2, % +ParentFileSearchPath:atom
-                       % +Child:or([atom,pair(atom)])
-    set_data_subdirectory/1 % +ParentDirectory:atom
-  ]
-).
-
-/** <module> Load project
-
-Generic code for loading a project:
-  * Create a subdirectory for data.
-  * Load the root of subprojects onto the file search path.
-  * Load the index of subprojects onto the file search path.
-
-@author Wouter Beek
-@version 2014/11/10
-*/
-
-:- use_module(library(ansi_term)). % Colorized terminal messages.
-:- use_module(library(apply)).
-:- use_module(library(pldoc)).
-
-:- dynamic(user:project/2).
-:- multifile(user:project/2).
-:- dynamic(user:project/3).
-:- multifile(user:project/3).
-
-
-
-load_project(ChildProjects):-
-  doc_server(9999),
-  
-  parent_alias(ParentFsp),
-
-  % Entry point.
-  source_file(load_project(_), ThisFile),
-  file_directory_name(ThisFile, ThisDir),
-  assert(user:file_search_path(ParentFsp, ThisDir)),
-  assert(user:file_search_path(project, ThisDir)),
-
-  % Set the data subdirectory.
-  set_data_subdirectory(ThisDir),
-
-  % Load the root of submodules onto the file search path.
-  maplist(load_subproject(ParentFsp), ChildProjects),
-
-  % Load the index into the file search path.
-  load_project_index(ParentFsp).
-
-
-
-%! load_subproject(
-%!   +ParentFileSearchPath:atom,
-%!   +Child:or([atom,pair(atom)])
-%! ) is det.
-
-load_subproject(ParentFsp, ChildFsp-ChildDir):- !,
-  load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir),
-  load_project_index(ChildFsp).
-load_subproject(ParentFsp, Child):-
-  load_subproject(ParentFsp, Child-Child).
-
-
-%! load_subproject_file_search_path(
-%!   +ParentFileSearchPath:atom,
-%!   +ChildFileSearchPath:atom,
-%!   +ChildDirectory:atom
-%! ) is det.
-
-% The file search path for the subproject has already been set.
-load_subproject_file_search_path(_, ChildFsp, _):-
-  user:file_search_path(ChildFsp, _).
-load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir):-
-  Spec =.. [ParentFsp,ChildDir],
-  absolute_file_name(Spec, _, [access(read),file_type(directory)]), !,
-  assert(user:file_search_path(ChildFsp, Spec)).
-load_subproject_file_search_path(_, ChildFsp, ChildDir):-
-  print_message(warning, missing_subproject_directory(ChildFsp,ChildDir)).
-
-
-%! load_project_index(+FileSearchPath:atom) is det.
-
-load_project_index(Fsp):-
-  Spec =.. [Fsp,index],
-  absolute_file_name(
-    Spec,
-    File,
-    [access(read),file_errors(fail),file_type(prolog)]
-  ), !,
-  ensure_loaded(File).
-load_project_index(_).
-
-
-%! parent_alias(-ParentFsp:atom) is det.
-
-parent_alias(ParentFsp):-
-  user:project(_, _, ParentFsp), !.
-parent_alias(ParentFsp):-
-  user:project(ParentFsp, _).
-
-
-%! set_data_subdirectory(+ParentDirectory:atom) is det.
-
-set_data_subdirectory(ParentDir):-
-  directory_file_path(ParentDir, data, DataDir),
-  make_directory_path(DataDir),
-  assert(user:file_search_path(data, DataDir)).
-
-
-
-% Messages
-
-:- multifile(prolog:message//1).
-
-prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -->
-  [
-    'The ~a submodule is not present.'-[ChildFsp], nl,
-    'Check whether subdirectory ~a is present in your project directory:'-[ChildDir], nl,
-    '    git submodule init', nl,
-    '    git submodule update'
-  ].
-
diff --git a/plHtml b/plHtml
deleted file mode 160000
index 2919705..0000000
--- a/plHtml
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 2919705d079b1ab28bf3c502a87d1648fd842ed3
diff --git a/plUri b/plUri
deleted file mode 160000
index 1a55127..0000000
--- a/plUri
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 1a55127517ee0b0cf2ad4fecbe3f84402f5f4c12
diff --git a/run.pl b/run.pl
deleted file mode 100644
index 8c751f4..0000000
--- a/run.pl
+++ /dev/null
@@ -1,11 +0,0 @@
-% Standalone execution of the plGraphViz library.
-
-:- if(current_prolog_flag(argv, ['--debug'|_])).
-  :- ensure_loaded(debug).
-:- else.
-  :- set_prolog_flag(verbose, silent).
-  :- ensure_loaded(load).
-:- endif.
-
-:- use_module(plGraphViz(gv_file)).
-
 
```
 
<h2 id="100"> 100: 正在比较变动前 a97e8e1 和变动后 9513a9b </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/LICENSE.txt b/LICENSE.txt
new file mode 100644
index 0000000..c7b7798
--- /dev/null
+++ b/LICENSE.txt
@@ -0,0 +1,21 @@
+The MIT License (MIT)
+
+Copyright (c) 2015 Wouter Beek
+
+Permission is hereby granted, free of charge, to any person obtaining a copy
+of this software and associated documentation files (the "Software"), to deal
+in the Software without restriction, including without limitation the rights
+to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+copies of the Software, and to permit persons to whom the Software is
+furnished to do so, subject to the following conditions:
+
+The above copyright notice and this permission notice shall be included in
+all copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
+THE SOFTWARE.
diff --git a/pack.pl b/pack.pl
new file mode 100644
index 0000000..f0f5b22
--- /dev/null
+++ b/pack.pl
@@ -0,0 +1,9 @@
+author('Wouter Beek', 'me@wouterbeek.com').
+download('https://github.com/wouterbeek/plGraphViz/release/*.zip').
+home('https://github.com/wouterbeek/plGraphViz').
+maintainer('Wouter Beek', 'me@wouterbeek.com').
+name(plGraphViz).
+packager('Wouter Beek', 'me@wouterbeek.com').
+requires('Prolog_Library_Collection').
+title(plGraphViz).
+version('0.0.1').
diff --git a/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
similarity index 86%
rename from gv_attr_type.pl
rename to prolog/gv/gv_attr_type.pl
index 4e1b7f2..ff163fe 100644
--- a/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_attr_type,
   [
-    gv_attr_type/1, % ?Type:atom
+    gv_attr_type//1, % ?Type:atom
     addDouble//1, % +Double:float
     addPoint//1, % +Point:compound
     arrowType//1, % +ArrowType:atom
@@ -62,38 +62,38 @@
 
 %! gv_attr_type(?Type:atom) is nondet.
 
-gv_attr_type(addDouble).
-gv_attr_type(addPoint).
-gv_attr_type(arrowType).
-gv_attr_type(bool).
-gv_attr_type(color).
-gv_attr_type(colorList).
-gv_attr_type(clusterMode).
-gv_attr_type(dirType).
-gv_attr_type(double).
-gv_attr_type(doubleList).
-gv_attr_type(escString).
-gv_attr_type(layerList).
-gv_attr_type(layerRange).
-gv_attr_type(lblString).
-gv_attr_type(int).
-gv_attr_type(outputMode).
-gv_attr_type(packMode).
-gv_attr_type(pagedir).
-gv_attr_type(point).
-gv_attr_type(pointList).
-gv_attr_type(portPos).
-gv_attr_type(quadType).
-gv_attr_type(rankType).
-gv_attr_type(rankdir).
-gv_attr_type(rect).
-gv_attr_type(shape).
-gv_attr_type(smoothType).
-gv_attr_type(splineType).
-gv_attr_type(startType).
-gv_attr_type(string).
-gv_attr_type(style).
-gv_attr_type(viewPort).
+gv_attr_type(addDouble) --> "addDouble".
+gv_attr_type(addPoint) --> "addPoint".
+gv_attr_type(arrowType) --> "arrowType".
+gv_attr_type(bool) --> "bool".
+gv_attr_type(color) --> "color".
+gv_attr_type(colorList) --> "colorList".
+gv_attr_type(clusterMode) --> "clusterMode".
+gv_attr_type(dirType) --> "dirType".
+gv_attr_type(double) --> "double".
+gv_attr_type(doubleList) --> "doubleList".
+gv_attr_type(escString) --> "escString".
+gv_attr_type(layerList) --> "layerList".
+gv_attr_type(layerRange) --> "layerRange".
+gv_attr_type(lblString) --> "lblString".
+gv_attr_type(int) --> "int".
+gv_attr_type(outputMode) --> "outputMode".
+gv_attr_type(packMode) --> "packMode".
+gv_attr_type(pagedir) --> "pagedir".
+gv_attr_type(point) --> "point".
+gv_attr_type(pointList) --> "pointList".
+gv_attr_type(portPos) --> "portPos".
+gv_attr_type(quadType) --> "quadType".
+gv_attr_type(rankType) --> "rankType".
+gv_attr_type(rankdir) --> "rankdir".
+gv_attr_type(rect) --> "rect".
+gv_attr_type(shape) --> "shape".
+gv_attr_type(smoothType) --> "smoothType".
+gv_attr_type(splineType) --> "splineType".
+gv_attr_type(startType) --> "startType".
+gv_attr_type(string) --> "string".
+gv_attr_type(style) --> "style".
+gv_attr_type(viewPort) --> "viewPort".
 
 
 
diff --git a/gv_attrs.pl b/prolog/gv/gv_attrs.pl
similarity index 86%
rename from gv_attrs.pl
rename to prolog/gv/gv_attrs.pl
index cce4f9d..d773a8b 100644
--- a/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -24,12 +24,7 @@
 :- use_module(library(persistency_ext)).
 :- use_module(library(xpath)).
 
-:- use_module(library(gv/gv_attr_type), [gv_attr_type/1]).
-
-:- dynamic(user:prolog_file_type/2).
-:- multifile(user:prolog_file_type/2).
-
-user:prolog_file_type(log, logging).
+:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
 
 %! gv_attr(
 %!   ?Name:atom,
@@ -127,32 +122,30 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
 % Downloads the table describing GraphViz attributes from `graphviz.org`.
 
 gv_attrs_download:-
-  verbose_process(
-    'Updating GraphViz attributes table... ',
-    (
-      gv_attrs_uri(Uri),
-      html_download(Uri, Dom),
-      xpath(Dom, //table(@align=lower_case(center)), TableDom),
-      html_table(TableDom, _, Rows),
-      maplist(assert_gv_attr_row, Rows)
-    )
+  verbose_call(
+    'updating GraphViz attributes table',
+    gv_attrs_download0
   ).
 
+gv_attrs_download0:-
+  gv_attrs_uri(Uri),
+  html_download(Uri, Dom),
+  xpath_chk(Dom, //table(@align=lower_case(center)), TableDom),
+  html_table(TableDom, _, Rows),
+  maplist(assert_gv_attr_row, Rows).
+
 
 %! gv_attrs_file(-File:atom) is det.
 
 gv_attrs_file(File):-
-  absolute_file_name(gv_attrs, File, [access(write),file_type(logging)]).
+  absolute_file_name('gv_attrs.log', File, [access(write)]).
 
 
 %! gv_attrs_init is det.
 
 gv_attrs_init:-
   gv_attrs_file(File),
-  attach_persistent_db(File),
-  file_age(File, Age),
-  gv_attrs_update(Age).
-
+  init_persistent_db(File, gv_attrs_update).
 
 
 %! gv_attrs_update(+Age:float) is det.
@@ -186,12 +179,13 @@ translate_default(Default, Default).
 
 %! translate_type(-Types:list(atom))// is det.
 
-translate_type([]) --> !, [].
 translate_type([H|T]) -->
-  {gv_attr_type(H)},
-  atom(H),
+  gv_attr_type(H),
   whites,
   translate_type(T).
+translate_type([H]) -->
+  gv_attr_type(H).
+translate_type([]) --> "".
 
 
 
diff --git a/gv_color.pl b/prolog/gv/gv_color.pl
similarity index 78%
rename from gv_color.pl
rename to prolog/gv/gv_color.pl
index dd1690b..0553aa2 100644
--- a/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -17,27 +17,17 @@
 */
 
 :- use_module(library(apply)).
+:- use_module(library(deb_ext)).
 :- use_module(library(dcg/basics)).
+:- use_module(library(dcg/dcg_abnf)).
+:- use_module(library(dcg/dcg_content)).
+:- use_module(library(file_ext)).
+:- use_module(library(http/html_download)).
+:- use_module(library(http/html_table)).
 :- use_module(library(lists)).
-:- use_module(library(persistency)).
+:- use_module(library(persistency_ext)).
 :- use_module(library(xpath)).
 
-:- use_module(plc(dcg/dcg_abnf)).
-:- use_module(plc(dcg/dcg_abnf_rules)).
-:- use_module(plc(dcg/dcg_atom)).
-:- use_module(plc(dcg/dcg_cardinal)).
-:- use_module(plc(dcg/dcg_content)).
-:- use_module(plc(generics/db_ext)).
-:- use_module(plc(generics/persistent_db_ext)).
-:- use_module(plc(generics/print_ext)).
-:- use_module(plc(io/file_ext)).
-:- use_module(plc(io/file_gnu)).
-
-:- use_module(plHtml(html)).
-:- use_module(plHtml(html_table)).
-
-:- db_add_novel(user:prolog_file_type(log, logging)).
-
 %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
 
 :- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)).
@@ -99,7 +89,7 @@ wc_weight(Float) -->
 
 gv_color_download:-
   verbose_call(
-    'Updating the GraphViz color table...',
+    'updating the GraphViz color table',
     (
       gv_color_uri(Uri),
       html_download(Uri, Dom),
@@ -121,18 +111,14 @@ assert_color_table(Colorscheme, TableDom):-
 %! gv_color_file(-File:atom) is det.
 
 gv_color_file(File):-
-  absolute_file_name(
-    data(gv_color),
-    File,
-    [access(write),file_type(logging)]
-  ).
+  absolute_file_name('gv_color.log', File, [access(write)]).
 
 
 %! gv_color_init is det.
 
 gv_color_init:-
   gv_color_file(File),
-  persistent_db_init(File, gv_color_update).
+  init_persistent_db(File, gv_color_update).
 
 
 %! gv_color_update(+Age:float) is det.
diff --git a/gv_file.pl b/prolog/gv/gv_file.pl
similarity index 96%
rename from gv_file.pl
rename to prolog/gv/gv_file.pl
index da17737..a175071 100644
--- a/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -13,8 +13,9 @@
 @version 2015/07
 */
 
+:- use_module(library(code_ext)).
 :- use_module(library(error)).
-:- use_module(library(gv/gv_dot)).
+:- use_module(library(gv/gv_graph)).
 :- use_module(library(option)).
 :- use_module(library(process)).
 
@@ -55,7 +56,7 @@ gv_export(ExportGraph, OutputFile, Options):-
   absolute_file_name(data(ThreadName), TmpFile, [access(write),file_type(dot)]),
   setup_call_cleanup(
     open(TmpFile, write, Write, [encoding(utf8)]),
-    put_codes(Write, Codes),
+    with_output_to(Write, put_codes(Codes)),
     close(Write)
   ),
   file_to_gv(TmpFile, OutputFile, Options).
@@ -88,7 +89,7 @@ file_to_gv(InputFile, OutputFile, Options):-
   % Run the GraphViz conversion command in the shell.
   format(atom(OutputTypeFlag), '-T~a', [OutputType]),
   format(atom(OutputFileFlag), '-o~a', [OutputFile]),
-  process_ext(
+  process_create(
     path(Method),
     [OutputTypeFlag,file(InputFile),OutputFileFlag],
     []
diff --git a/gv_graph.pl b/prolog/gv/gv_graph.pl
similarity index 93%
rename from gv_graph.pl
rename to prolog/gv/gv_graph.pl
index 9ae7353..6bd4b86 100644
--- a/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -7,6 +7,13 @@
 
 /** <module> GraphViz graph
 
+Generates GraphViz graphs in the DOT format based on
+a Prolog representation of a graph.
+
+In GraphViz vertices are called 'nodes'.
+
+---
+
 @author Wouter Beek
 @version 2015/07
 */
@@ -14,6 +21,7 @@
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_content)).
+:- use_module(library(gv/gv_graph_comp)).
 :- use_module(library(lists)).
 :- use_module(library(option)).
 
@@ -79,8 +87,9 @@ gv_graph(G1, I) -->
   gv_graph_type(Directed), " ",
   
   % Graph name.
-  (   {select_name(GName), GAttrs4, GAttrs5)}
-  ->  gv_id(GName), " ",
+  (   {select_option(name(GName), GAttrs4, GAttrs5)}
+  ->  gv_id(GName),
+      " "
   ;   {GAttrs5 = GAttrs4}
   ),
 
@@ -102,7 +111,7 @@ gv_graph(G1, I) -->
   % Only add a line_feed if some content was already written
   % and some content is about to be written.
   (   % Succeeds if no content was written.
-      {(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])}
+      {(GAttrs5 == [], SharedVAttrs == [], SharedEAttrs == [])}
   ->  ""
   ;   % Succeeds if no content is about to be written.
       {(NewVTerms == [], RankedVTerms == [])}
@@ -171,8 +180,8 @@ gv_ranked_node_collections(I, L) -->
 %! ) is det.
 
 add_default(L1, Opt, L2):-
-  Opt =.. [N,V],
-  Opt0 =.. [N,_],
+  Opt =.. [N,_Value],
+  Opt0 =.. [N,_FreshVar],
   (   option(Opt0, L1)
   ->  true
   ;   L2 = [Opt|L1]
diff --git a/gv_dot.pl b/prolog/gv/gv_graph_comp.pl
similarity index 79%
rename from gv_dot.pl
rename to prolog/gv/gv_graph_comp.pl
index 9c53cc5..8a7d28a 100644
--- a/gv_dot.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -1,16 +1,21 @@
 :- module(
-  gv_dot,
+  gv_graph_comp,
   [
+    gv_edge_statement//3, % +Indent:nonneg
+                          % +Directed:boolean
+                          % +Edge:compound
+    gv_generic_attributes_statement//3, % +Kind:oneof([edge,graph,node])
+                                        % +Indent:nonneg
+                                        % +CategoryAttributes:list(compound)
+    gv_id//1, % +Name:compound
+    gv_node_statement//2, % +Indent:nonneg
+                          % +Vertex:compound
+    gv_ranked_node_collection//2 % +Indent:nonneg
+				 % +Rank:???    
   ]
 ).
 
-/** <module> GraphViz DOT generator
-
-DCG rules for GraphViz DOT file generation.
-
-Methods for writing to the GraphViz DOT format.
-
-In GraphViz vertices are called 'nodes'.
+/** <module> GraphViz graph components
 
 ```abnf
 attr_list = "[" [a_list] "]" [attr_list]
@@ -26,9 +31,11 @@ a_list = ID "=" ID [","] [a_list]
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/basics)).
+:- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_ascii)).
 :- use_module(library(dcg/dcg_bracketed)).
 :- use_module(library(dcg/dcg_content)).
+:- use_module(library(dcg/dcg_quoted)).
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_html)).
 :- use_module(library(lists)).
@@ -38,66 +45,10 @@ a_list = ID "=" ID [","] [a_list]
 
 
 
-%! gv_attr(
-%!   +Context:oneof([edge,graph,node]),
-%!   +Attribute:nvpair
-%! )// is det.
-% A single GraphViz attribute.
-% We assume that the attribute has already been validated.
-
-gv_attr(Context, N=V) -->
-  gv_id(N),
-  "=",
-  gv_attr_value(Context, N=V),
-  ";".
-
-
-
-%! gv_attrs(
-%!   +Kind:oneof([edge,graph,node]),
-%!   +Attributes:list(compound)
-%! )// is det.
-
-gv_attrs(Kind, L) -->
-  bracketed(square, '*'(gv_attr, L, [])).
-
-
-
-%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
-% ```
-% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
-% ```
-
-gv_compass_pt('_') --> "_".
-gv_compass_pt(c) --> "c".
-gv_compass_pt(e) --> "e".
-gv_compass_pt(n) --> "n".
-gv_compass_pt(ne) --> "ne".
-gv_compass_pt(nw) --> "nw".
-gv_compass_pt(s) --> "s".
-gv_compass_pt(se) --> "se".
-gv_compass_pt(sw) --> "sw".
-gv_compass_pt(w) --> "w".
-
-
-
-%! gv_edge_operator(+Directed:boolean)// .
-% The binary edge operator between two vertices.
-% The operator that is used depends on whether the graph is directed or
-% undirected.
-%
-% @arg Directed Whether an edge is directed (operator `->`) or
-%               undirected (operator `--`).
-
-gv_edge_operator(false) --> !, "--".
-gv_edge_operator(true) --> "->".
-
-
-
 %! gv_edge_statement(
 %!   +Indent:nonneg,
 %!   +Directed:boolean,
-%!   +EdgeTerm:compound
+%!   +Edge:compound
 %! )// is det.
 % A GraphViz statement describing an edge.
 %
@@ -105,29 +56,40 @@ gv_edge_operator(true) --> "->".
 % @arg Directed Whether the graph is directed or not.
 % @arg GraphAttributes The attributes of the graph. Some of these attributes
 %      may be used in the edge statement (e.g., the colorscheme).
-% @arg EdgeTerm A compound term in the GIFormat, representing an edge.
+% @arg Edge A compound term in the GIFormat, representing an edge.
 %
 % @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1
 %      at the from and/or to location.
 % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
 
-gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -->
+gv_edge_statement(I, Dir, edge(From,To,Attrs)) -->
   indent(I),
 
-  gv_node_id(FromId), " ",
-  gv_edge_operator(Directed), " ",
-  gv_node_id(ToId), " ",
+  gv_node_id(From), " ",
+  gv_edge_operator(Dir), " ",
+  gv_node_id(To), " ",
   
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
-  gv_attrs(edge, EAttrs),
+  gv_attrs(edge, Attrs),
   "\n".
 
+%! gv_edge_operator(+Directed:boolean)// .
+% The binary edge operator between two vertices.
+% The operator that is used depends on whether the graph is directed or
+% undirected.
+%
+% @arg Directed Whether an edge is directed (operator `->`) or
+%      undirected (operator `--`).
+
+gv_edge_operator(false) --> !, "--".
+gv_edge_operator(true) --> "->".
+
 
 
 %! gv_generic_attributes_statement(
 %!   +Kind:oneof([edge,graph,node]),
-%!   +Indent:integer,
+%!   +Indent:nonneg,
 %!   +CategoryAttributes:list(nvpair)
 %! )//
 % A GraphViz statement describing generic attributes for a category of items.
@@ -142,16 +104,88 @@ gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -->
 % attr_stmt = (graph / node / edge) attr_list
 % ```
 
-gv_generic_attributes_statement(_, _, []) --> [], !.
-gv_generic_attributes_statement(Kind, I, KindAttrs) -->
+gv_generic_attributes_statement(_, _, []) --> !, "".
+gv_generic_attributes_statement(Kind, I, Attrs) -->
   indent(I),
   gv_kind(Kind), " ",
-  gv_attrs(Kind, KindAttrs),
+  gv_attrs(Kind, Attrs),
+  "\n".
+
+%! gv_kind(+Kind:oneof([edge,graph,node]))// .
+
+gv_kind(edge) --> "edge".
+gv_kind(graph) --> "graph".
+gv_kind(node) --> "node".
+
+
+
+%! gv_node_statement(+Indent:nonneg, +Vertex:compound)// is det.
+% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes').
+
+gv_node_statement(I, vertex(Id,Attrs)) -->
+  indent(I),
+  gv_node_id(Id),
+  gv_attrs(node, Attrs),
+  "\n".
+
+
+
+%! gv_ranked_node_collection(+Indent:nonneg, Rank:???)// is det.
+
+gv_ranked_node_collection(I, Rank) -->
+  indent(I),
+  bracketed(curly, gv_ranked_node_collection0(I, Rank)).
+
+gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
+  "\n",
+  
+  % The rank attribute.
+  {NewI is I + 1},
+  indent(NewI),
+  gv_attr(subgraph, rank=same),
+  ";\n",
+  
+  % Vertice statements.
+  '*'(
+    gv_node_statement(NewI),
+    [Rank_V_Term|Content_V_Terms],
+    []
+  ),
+  
+  % We want to indent the closing curly brace.
+  indent(I),
   "\n".
 
 
 
-%! gv_id(?Atom:compound)// is det.
+
+
+% HELPERS %
+
+%! gv_attrs(
+%!   +Kind:oneof([edge,graph,node]),
+%!   +Attributes:list(compound)
+%! )// is det.
+
+gv_attrs(Kind, L) -->
+  bracketed(square, '*'(gv_attr(Kind), L, [])).
+
+%! gv_attr(
+%!   +Context:oneof([edge,graph,node]),
+%!   +Attribute:nvpair
+%! )// is det.
+% A single GraphViz attribute.
+% We assume that the attribute has already been validated.
+
+gv_attr(Context, N=V) -->
+  gv_id(N),
+  "=",
+  gv_attr_value(Context, N=V),
+  ";".
+
+
+
+%! gv_id(+Id:compound)// is det.
 % Parse a GraphViz identifier.
 % There are 4 variants:
 %   1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters,
@@ -193,20 +227,24 @@ gv_id(Atom) -->
   % GraphViz keyword.
   {\+ gv_keyword([H|T])}.
 
+%! gv_id_first(+First:code)// is det.
+% Generates the first character of a GraphViz identifier.
+
 gv_id_first(X) -->
   ascii_letter(X).
 gv_id_first(X) -->
   underscore(X).
 
-gv_id_rest([]) --> [].
+%! gv_id_rest(+NonFirst:code)// is det.
+% Generates a non-first character of a GraphViz identifier.
+
+gv_id_rest([]) --> !, "".
 gv_id_rest([H|T]) -->
   (   ascii_alpha_numeric(H)
   ;   underscore(H)
   ),
   gv_id_rest(T).
 
-
-
 %! gv_keyword(+Codes:list(code)) is semidet.
 % Succeeds if the given codes for a GraphViz reserved keyword.
 
@@ -228,14 +266,6 @@ gv_keyword --> "subgraph".
 
 
 
-%! gv_kind(+Kind:oneof([edge,graph,node]))// .
-
-gv_kind(edge) --> "edge".
-gv_kind(graph) --> "graph".
-gv_kind(node) --> "node".
-
-
-
 %! gv_node_id(+NodeId:compound)// .
 % GraphViz node identifiers can be of the following two types:
 %   1. A GraphViz identifier, see gv_id//1.
@@ -252,16 +282,7 @@ gv_node_id(Id) -->
 
 
 
-%! gv_node_statement(+Indent:nonneg, +VertexTerm:compound)// .
-% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes').
-
-gv_node_statement(I, vertex(Id,VAttrs)) -->
-  indent(I),
-  gv_node_id(Id),
-  gv_attrs(node, VAttrs),
-  "\n".
-
-
+%! gv_port// is det.
 
 gv_port -->
   gv_port_location,
@@ -285,34 +306,25 @@ gv_port_location -->
   ":",
   gv_id(_).
 gv_port_location -->
-  ":(",
-  gv_id(_),
-  ",",
-  gv_id(_)
-  ")".
-
-
+  ":",
+  bracketed((
+    gv_id(_),
+    ",",
+    gv_id(_)
+  )).
 
-gv_ranked_node_collection(I, Rank) -->
-  indent(I),
-  bracketed(curly, gv_ranked_node_collection0(I, Rank)).
+%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
+% ```
+% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
+% ```
 
-gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
-  "\n",
-  
-  % The rank attribute.
-  {NewI is I + 1},
-  indent(NewI),
-  gv_attr(subgraph, rank=same),
-  ";\n",
-  
-  % Vertice statements.
-  '*'(
-    gv_node_statement(NewI),
-    [Rank_V_Term|Content_V_Terms],
-    []
-  ),
-  
-  % We want to indent the closing curly brace.
-  indent(I),
-  "\n".
+gv_compass_pt('_') --> "_".
+gv_compass_pt(c) --> "c".
+gv_compass_pt(e) --> "e".
+gv_compass_pt(n) --> "n".
+gv_compass_pt(ne) --> "ne".
+gv_compass_pt(nw) --> "nw".
+gv_compass_pt(s) --> "s".
+gv_compass_pt(se) --> "se".
+gv_compass_pt(sw) --> "sw".
+gv_compass_pt(w) --> "w".
diff --git a/gv_html.pl b/prolog/gv/gv_html.pl
similarity index 99%
rename from gv_html.pl
rename to prolog/gv/gv_html.pl
index ced6d6b..c16d26b 100644
--- a/gv_html.pl
+++ b/prolog/gv/gv_html.pl
@@ -44,7 +44,7 @@ cell:   <TD> label </TD>
 */
 
 :- use_module(library(dcg/dcg_abnf)).
-:- use_module(library(dcg/dcg_bracket)).
+:- use_module(library(dcg/dcg_bracketed)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(http/html_dcg)).
 
diff --git a/gv_numeral.pl b/prolog/gv/gv_numeral.pl
similarity index 98%
rename from gv_numeral.pl
rename to prolog/gv/gv_numeral.pl
index 1e5c723..4ba0d64 100644
--- a/gv_numeral.pl
+++ b/prolog/gv/gv_numeral.pl
@@ -14,7 +14,6 @@
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_abnf_common)).
 :- use_module(library(dcg/dcg_ascii)).
-:- use_module(library(dcg/dcg_cardinal)).
 :- use_module(library(math/math_ext)).
 :- use_module(library(math/positional)).
 :- use_module(library(math/radconv)).
diff --git a/test/debug.pl b/test/debug.pl
new file mode 100644
index 0000000..b0f85ea
--- /dev/null
+++ b/test/debug.pl
@@ -0,0 +1,15 @@
+:- use_module(library(ansi_term)).
+:- use_module(library(prolog_pack)).
+
+pack_ensure_removed(Pack):-
+  pack_property(Pack, _), !,
+  pack_remove(Pack).
+pack_ensure_removed(_).
+
+test:-
+  pack_ensure_removed(plGraphViz),
+  source_file(test, ThisFile),
+  file_directory_name(ThisFile, ThisDirectory),
+  assert(user:file_search_path(gvTest, ThisDirectory)),
+  assert(user:file_search_path(library, gvTest('../prolog'))).
+:- test.
diff --git a/test/test.pl b/test/test.pl
new file mode 100644
index 0000000..6e59928
--- /dev/null
+++ b/test/test.pl
@@ -0,0 +1,10 @@
+:- ensure_loaded(debug).
+
+:- use_module(library(gv/gv_attrs)).
+:- use_module(library(gv/gv_attr_type)).
+:- use_module(library(gv/gv_color)).
+:- use_module(library(gv/gv_file)).
+:- use_module(library(gv/gv_graph)).
+:- use_module(library(gv/gv_graph_comp)).
+:- use_module(library(gv/gv_html)).
+:- use_module(library(gv/gv_numeral)).
 
```
 
<h2 id="101"> 101: 正在比较变动前 9513a9b 和变动后 7163f60 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index 0553aa2..6c2cc4c 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -90,15 +90,17 @@ wc_weight(Float) -->
 gv_color_download:-
   verbose_call(
     'updating the GraphViz color table',
-    (
-      gv_color_uri(Uri),
-      html_download(Uri, Dom),
-      xpath(Dom, //table(1), TableDom1),
-      xpath(Dom, //table(2), TableDom2),
-      maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2])
-    )
+    gv_color_download0
   ).
 
+gv_color_download0:-
+  gv_color_uri(Uri),
+  html_download(Uri, Dom),
+  xpath_chk(Dom, //table(1), TableDom1),
+  xpath_chk(Dom, //table(2), TableDom2),
+  maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]).
+
+
 assert_color_table(Colorscheme, TableDom):-
   html_table(TableDom, _, Rows),
   append(Rows, Cells),
 
```
 
<h2 id="102"> 102: 正在比较变动前 7163f60 和变动后 b2f4aef </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index f0f5b22..cf24d04 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.1').
+version('0.0.2').
 
```
 
<h2 id="103"> 103: 正在比较变动前 b2f4aef 和变动后 ba30c25 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index cf24d04..775776f 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.2').
+version('0.0.3').
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 8a7d28a..7fd9709 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -177,7 +177,8 @@ gv_attrs(Kind, L) -->
 % A single GraphViz attribute.
 % We assume that the attribute has already been validated.
 
-gv_attr(Context, N=V) -->
+gv_attr(Context, Attr) -->
+  {Attr =.. [N,V]},
   gv_id(N),
   "=",
   gv_attr_value(Context, N=V),
 
```
 
<h2 id="104"> 104: 正在比较变动前 ba30c25 和变动后 0eea41b </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 775776f..ea8929c 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.3').
+version('0.0.4').
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
index a175071..7a92cf5 100644
--- a/prolog/gv/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -53,7 +53,7 @@ gv_export(ExportGraph, OutputFile, Options):-
   % Be thread-safe.
   thread_self(Id),
   atomic_list_concat([gv_file,Id], '_', ThreadName),
-  absolute_file_name(data(ThreadName), TmpFile, [access(write),file_type(dot)]),
+  absolute_file_name(ThreadName, TmpFile, [access(write),file_type(dot)]),
   setup_call_cleanup(
     open(TmpFile, write, Write, [encoding(utf8)]),
     with_output_to(Write, put_codes(Codes)),
@@ -69,20 +69,26 @@ gv_export(ExportGraph, OutputFile, Options):-
 % Converts a GraphViz DOT file to an image file, using a specific
 % visualization method.
 
-file_to_gv(InputFile, OutputFile, Options):-
-  option(output(dot), Options), !,
+file_to_gv(InputFile, OutputFile, Opts):-
+  var(OutputFile), !,
+  option(output(Ext), Opts, pdf),
+  file_name_extension(out, Ext, LocalName),
+  absolute_file_name(LocalName, OutputFile, Opts),
+  file_to_gv(InputFile, OutputFile, Opts).
+file_to_gv(InputFile, OutputFile, Opts):-
+  option(output(dot), Opts), !,
   (   var(OutputFile)
   ->  OutputFile = InputFile
   ;   rename_file(InputFile, OutputFile)
   ).
-file_to_gv(InputFile, OutputFile, Options):-
+file_to_gv(InputFile, OutputFile, Opts):-
   % Typecheck for `method` option.
-  option(method(Method), Options, dot),
+  option(method(Method), Opts, dot),
   findall(Method0, gv_method(Method0), Methods),
   must_be(oneof(Methods), Method),
 
   % Typecheck for `output` option.
-  option(output(OutputType), Options, pdf),
+  option(output(OutputType), Opts, pdf),
   findall(OutputType0, gv_output_type(OutputType0), OutputTypes),
   must_be(oneof(OutputTypes), OutputType),
 
 
```
 
<h2 id="105"> 105: 正在比较变动前 0eea41b 和变动后 c1691bd </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index ea8929c..8806f20 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.4').
+version('0.0.5').
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index d773a8b..0e6b003 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -18,8 +18,8 @@
 :- use_module(library(dcg/dcg_call)).
 :- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(file_ext)).
-:- use_module(library(http/html_download)).
-:- use_module(library(http/html_table)).
+:- use_module(library(html/html_download)).
+:- use_module(library(html/html_table)).
 :- use_module(library(lists)).
 :- use_module(library(persistency_ext)).
 :- use_module(library(xpath)).
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index 6c2cc4c..bc08dcc 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -22,8 +22,8 @@
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(file_ext)).
-:- use_module(library(http/html_download)).
-:- use_module(library(http/html_table)).
+:- use_module(library(html/html_download)).
+:- use_module(library(html/html_table)).
 :- use_module(library(lists)).
 :- use_module(library(persistency_ext)).
 :- use_module(library(xpath)).
diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl
new file mode 100644
index 0000000..e85849d
--- /dev/null
+++ b/prolog/gv/gv_dom.pl
@@ -0,0 +1,35 @@
+:- module(
+  gv_dom,
+  [
+    gv_dom/3 % +ExportGraph:compound
+             % -Dom:list(compound)
+             % +Options:list(compound)
+  ]
+).
+
+/** <module> GraphViz DOM
+
+@author Wouter Beek
+@version 2015/07
+*/
+
+:- use_module(library(gv/gv_file)).
+:- use_module(library(option)).
+:- use_module(library(svg/svg_dom)).
+
+
+
+
+
+%! gv_dom(
+%!   +ExportGraph:compound,
+%!   -Dom:list(compound),
+%!   +Options:list(compound)
+%! ) is det.
+
+gv_dom(ExportG, Dom, Opts1):-
+  % Make sure the file type of the output file is SvgDom.
+  merge_options([output(svg)], Opts1, Opts2),
+  gv_export(ExportG, ToFile, Opts2),
+  svg_dom(ToFile, Dom),
+  delete_file(ToFile).
diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl
index c16d26b..5f2db03 100644
--- a/prolog/gv/gv_html.pl
+++ b/prolog/gv/gv_html.pl
@@ -46,7 +46,7 @@ cell:   <TD> label </TD>
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_bracketed)).
 :- use_module(library(dcg/dcg_content)).
-:- use_module(library(http/html_dcg)).
+:- use_module(library(html/html_dcg)).
 
 
 
 
```
 
<h2 id="106"> 106: 正在比较变动前 c1691bd 和变动后 3de9fc2 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 8806f20..d590fb2 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.5').
+version('0.0.6').
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
new file mode 100644
index 0000000..0bc966a
--- /dev/null
+++ b/prolog/graph/build_export_graph.pl
@@ -0,0 +1,360 @@
+:- module(
+  build_export_graph,
+  [
+    build_export_graph/3 % +Graph:compound
+                         % -ExportGraph:compound
+                         % +Options:list(compound)
+  ]
+).
+
+/** <module> Build graph representation for exporting
+
+Support for building GIF representations.
+
+# Graph Intermediate Format (GIF)
+
+## Graph
+
+```prolog
+graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(nvpair))
+```
+
+### Edge
+
+```prolog
+edge(FromVertexId,ToVertexId,Attributes:list(nvpair))
+```
+
+### Rank
+
+```prolog
+rank(RankVertex:compound,ContentVertices:ordset(compound))
+```
+
+### Vertex
+
+```prolog
+vertex(Id,Attributes:list(nvpair))
+```
+
+# Property functions
+
+Edge label:
+  1. [[graph_edge]] edge_label/2
+
+Vertex coordinates:
+  1. [[circle_coords]] circular_coord/4
+  2. [[random_coords]] random_coord/4
+
+---
+
+@author Wouter Beek
+@version 2015/07
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(list_ext)).
+:- use_module(library(option_ext)).
+:- use_module(library(ordsets)).
+
+:- predicate_options(build_export_graph/4, 4, [
+     pass_to(edge_term/3, 3),
+     pass_to(graph_attributes/2, 2),
+     pass_to(vertex_term/3, 3)
+   ]).
+:- predicate_options(edge_term/3, 3, [
+     edge_arrowhead(+callable),
+     edge_color(+callable),
+     edge_id(+callable),
+     edge_label(+callable),
+     edge_penwidth(+callable),
+     edge_style(+callable)
+   ]).
+:- predicate_options(graph_attributes/2, 2, [
+     graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8'])),
+     graph_colorscheme(+oneof([none,svg,x11])),
+     graph_directed(+boolean),
+     graph_fontsize(+float),
+     graph_label(+atom),
+     graph_overlap(+boolean)
+   ]).
+:- predicate_options(vertex_term/3, 3, [
+     vertex_color(+callable),
+     vertex_id(+callable),
+     vertex_image(+callable),
+     vertex_label(+callable),
+     vertex_peripheries(+callable),
+     vertex_position(+callable),
+     vertex_shape(+callable),
+     vertex_uri(+callable)
+   ]).
+
+:- meta_predicate(build_export_graph(+,-,:)).
+
+is_meta(edge_arrowhead).
+is_meta(edge_color).
+is_meta(edge_id).
+is_meta(edge_label).
+is_meta(edge_penwidth).
+is_meta(edge_style).
+is_meta(vertex_color).
+is_meta(vertex_id).
+is_meta(vertex_image).
+is_meta(vertex_label).
+is_meta(vertex_peripheries).
+is_meta(vertex_position).
+is_meta(vertex_shape).
+is_meta(vertex_uri).
+
+
+
+
+
+%! build_export_graph(
+%!   +Graph:compound,
+%!   -ExportGraph:compound,
+%!   +Options:list(compound)
+%! ) is det.
+
+build_export_graph(graph(Vs,Es), graph(VTerms,ETerms,GAttrs), Opts1):-
+  meta_options(is_meta, Opts1, Opts2),
+
+  % V terms.
+  maplist(vertex_term0(Vs, Opts2), Vs, VTerms),
+
+  % Edge terms.
+  maplist(edge_term0(Vs, Opts2), Es, ETerms),
+
+  % Graph attributes.
+  graph_attributes(GAttrs, Opts2).
+
+vertex_term0(Vs, Opts, V, VTerm):-
+  vertex_term(Vs, V, VTerm, Opts).
+
+edge_term0(Vs, Opts, E, ETerm):-
+  edge_term(Vs, E, ETerm, Opts).
+
+
+
+%! edge_term(
+%!   +Vertices:ordset(compound),
+%!   +Edge:compound,
+%!   -EdgeTerm:compound,
+%!   +Options:list(compound)
+%! ) is det.
+% The following options are supported:
+%   * `edge_arrowhead(+callable)`
+%     No default.
+%   * `edge_color(+callable)`
+%     No default.
+%   * `edge_id(+callable)`
+%     Function that assignes the unique identifiers for an edge's
+%     incident vertices.
+%   * `edge_label(+callable)`
+%     No default.
+%   * `edge_penwidth(+callable)`
+%     No default.
+%   * `edge_style(+callable)`
+%     No default.
+
+edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
+  % Arrowhead
+  if_option(edge_arrowhead(ArrowheadFunction), Opts,
+    call(ArrowheadFunction, E, EArrowhead)
+  ),
+  
+  % Color.
+  if_option(edge_color(ColorFunction), Opts,
+    call(ColorFunction, E, EColor)
+  ),
+  
+  % Id.
+  (   option(edge_id(IdFunction), Opts)
+  ->  call(IdFunction, E, FromId, ToId)
+  ;     E = edge(FromV,_,ToV),
+        nth0chk(FromId, Vs, FromV),
+        nth0chk(ToId, Vs, ToV)
+  ),
+  
+  % Label.
+  if_option(edge_label(LabelFunction), Opts,
+    call(LabelFunction, E, ELabel)
+  ),
+  
+  % Penwidth.
+  if_option(edge_penwidth(PenwidthFunction), Opts,
+    call(PenwidthFunction, E, EPenwidth)
+  ),
+  
+  % Style.
+  if_option(edge_style(StyleFunction), Opts,
+    call(StyleFunction, E, EStyle)
+  ),
+
+  merge_options(
+    [
+      arrowhead=EArrowhead,
+      color=EColor,
+      label=ELabel,
+      penwidth=EPenwidth,
+      style=EStyle
+    ],
+    EAttrs
+  ).
+
+
+
+%! graph_attributes(
+%!   -GraphAttributes:list(nvpair),
+%!   +Options:list(compound)
+%! ) is det.
+% The following options are supported:
+%   * `graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8']))`
+%     The name of the character set that is used to encode text in the graph.
+%     Default: `UTF-8`.
+%   * `graph_colorscheme(+oneof([none,svg,x11]))`
+%     The colorscheme from which the color in this graph are taken.
+%     Default: `x11`.
+%   * `graph_directed(+boolean)`
+%     Whether the graph is directed (`true`) or undirected (`false`).
+%     Default: `false`.
+%   * `graph_fontsize(+float)`
+%     The font size of text in the graph.
+%     Default: `11.0`.
+%   * `graph_label(+atom)`
+%     The graph label.
+%     No default.
+%   * `graph_overlap(+boolean)`
+%     Whether the vertices are allowed to overlap.
+%     Default: `false`.
+
+graph_attributes(GAttrs, Opts):-
+  % Characer set.
+  option(graph_charset(Charset), Opts, 'UTF-8'),
+  % Colorscheme.
+  option(graph_colorscheme(Colorscheme), Opts, x11),
+  % Directed.
+  option(graph_directed(Directed), Opts, false),
+  % Fontsize.
+  option(graph_fontsize(Fontsize), Opts, 11.0),
+  % Label.
+  option(graph_label(GLabel), Opts, ''),
+  % Overlap.
+  option(graph_overlap(Overlap), Opts, false),
+
+  merge_options(
+    [
+      charset=Charset,
+      colorscheme=Colorscheme,
+      directed=Directed,
+      fontsize=Fontsize,
+      label=GLabel,
+      overlap=Overlap
+    ],
+    GAttrs
+  ).
+
+
+
+%! vertex_term(
+%!   +Vertices:ordset(compound),
+%!   +Vertex:compound,
+%!   -VertexTerm:compound,
+%!   +Options:list(compound)
+%! ) is det.
+% The following options are supported:
+%   * `vertex_color(:ColorFunction)`
+%     A function that assigns colors to vertices.
+%     No default.
+%   * `vertex_id(:ColorFunction)`
+%     A functions that assigns unique identifiers to vertices.
+%   * `vertex_image(:ImageFunction)`
+%     A function that assigns images to vertices.
+%     No default.
+%   * `vertex_label(:LabelFunction)`
+%     A function that assigns labels to vertices.
+%     No default.
+%   * `vertex_peripheries(:PeripheriesFunction)`
+%     A function that assinges peripheries to vertices.
+%     No default.
+%   * `vertex_position(:PositionFunction)`
+%     No default.
+%   * `vertex_shape(:ShapeFunction)`
+%     A function that assinges shapes to vertices.
+%     No default.
+%   * `vertex_uri(:UriFunction)`
+
+vertex_term(Vs, V, vertex(VId,VAttrs), Opts):-
+  % Color.
+  if_option(vertex_color(ColorFunction), Opts,
+    call(ColorFunction, V, VColor)
+  ),
+  
+  % Id.
+  (   option(vertex_id(IdFunction), Opts)
+  ->  call(IdFunction, V, VId)
+  ;   nth0chk(VId, Vs, V)
+  ),
+  
+  % Image.
+  ignore(
+    if_option(vertex_image(ImageFunction), Opts,
+      call(ImageFunction, V, VImage)
+    )
+  ),
+
+  % Label.
+  if_option(vertex_label(LabelFunction), Opts,
+    call(LabelFunction, V, VLabel)
+  ),
+
+  % Peripheries.
+  if_option(vertex_peripheries(PeripheriesFunction), Opts,
+    call(PeripheriesFunction, V, VPeripheries)
+  ),
+
+  % Position.
+  if_option(vertex_position(PositionFunction), Opts,
+    call(PositionFunction, Vs, Opts, V, VPosition)
+  ),
+
+  % Shape.
+  if_option(vertex_shape(ShapeFunction), Opts,
+    call(ShapeFunction, V, VShape)
+  ),
+  
+  % URI
+  if_option(vertex_uri(UriFunction), Opts,
+    call(UriFunction, V, VUri)
+  ),
+
+  merge_options(
+    [
+      color=VColor,
+      image=VImage,
+      label=VLabel,
+      peripheries=VPeripheries,
+      pos=VPosition,
+      shape=VShape,
+      'URL'=VUri
+    ],
+    VAttrs
+  ).
+
+
+
+
+
+% HELPERS %
+
+%! merge_options(+FromOptions:list(nvpair), -ToOptions:list(nvpair)) is det.
+
+merge_options([], []).
+% Skip uninstantiated values.
+merge_options([H|T1], T2):-
+  merge_options(T1, T2),
+  H =.. [_,V],
+  var(V), !.
+% Include instantiated values.
+merge_options([H|T1], [H|T2]):-
+  merge_options(T1, T2).
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 0e6b003..6634b3e 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -18,14 +18,13 @@
 :- use_module(library(dcg/dcg_call)).
 :- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(file_ext)).
+:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
 :- use_module(library(html/html_download)).
 :- use_module(library(html/html_table)).
 :- use_module(library(lists)).
 :- use_module(library(persistency_ext)).
 :- use_module(library(xpath)).
 
-:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
-
 %! gv_attr(
 %!   ?Name:atom,
 %!   ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
diff --git a/test/test.pl b/test/test.pl
index 6e59928..898c04e 100644
--- a/test/test.pl
+++ b/test/test.pl
@@ -1,10 +1,13 @@
 :- ensure_loaded(debug).
 
-:- use_module(library(gv/gv_attrs)).
-:- use_module(library(gv/gv_attr_type)).
-:- use_module(library(gv/gv_color)).
-:- use_module(library(gv/gv_file)).
-:- use_module(library(gv/gv_graph)).
-:- use_module(library(gv/gv_graph_comp)).
-:- use_module(library(gv/gv_html)).
-:- use_module(library(gv/gv_numeral)).
+%/graph
+  :- use_module(library(graph/build_export_graph)).
+%/gv
+  :- use_module(library(gv/gv_attrs)).
+  :- use_module(library(gv/gv_attr_type)).
+  :- use_module(library(gv/gv_color)).
+  :- use_module(library(gv/gv_file)).
+  :- use_module(library(gv/gv_graph)).
+  :- use_module(library(gv/gv_graph_comp)).
+  :- use_module(library(gv/gv_html)).
+  :- use_module(library(gv/gv_numeral)).
 
```
 
<h2 id="107"> 107: 正在比较变动前 3de9fc2 和变动后 cb34d89 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index d590fb2..8093a1f 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.6').
+version('0.0.7').
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 6634b3e..5e55234 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -22,7 +22,7 @@
 :- use_module(library(html/html_download)).
 :- use_module(library(html/html_table)).
 :- use_module(library(lists)).
-:- use_module(library(persistency_ext)).
+:- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
 %! gv_attr(
@@ -144,7 +144,13 @@ gv_attrs_file(File):-
 
 gv_attrs_init:-
   gv_attrs_file(File),
-  init_persistent_db(File, gv_attrs_update).
+  (   exists_file(File)
+  ->  true
+  ;   touch(File)
+  ),
+  db_attach(File, []),
+  file_age(File, Age),
+  gv_attrs_update(Age).
 
 
 %! gv_attrs_update(+Age:float) is det.
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index bc08dcc..9235e27 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -25,7 +25,7 @@
 :- use_module(library(html/html_download)).
 :- use_module(library(html/html_table)).
 :- use_module(library(lists)).
-:- use_module(library(persistency_ext)).
+:- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
 %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
@@ -120,7 +120,13 @@ gv_color_file(File):-
 
 gv_color_init:-
   gv_color_file(File),
-  init_persistent_db(File, gv_color_update).
+  (   exists_file(File)
+  ->  true
+  ;   touch(File)
+  ),
+  db_attach(File, []),
+  file_age(File, Age),
+  gv_color_update(Age).
 
 
 %! gv_color_update(+Age:float) is det.
 
```
 
<h2 id="108"> 108: 正在比较变动前 cb34d89 和变动后 7f0e20f </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 8093a1f..487feb1 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.7').
+version('0.0.8').
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index 6bd4b86..7f008c7 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -84,7 +84,8 @@ gv_graph(G1, I) -->
   
   % Directedness.
   {select_option(directed(Directed), GAttrs3, GAttrs4, true)},
-  gv_graph_type(Directed), " ",
+  gv_graph_type(Directed),
+  " ",
   
   % Graph name.
   (   {select_option(name(GName), GAttrs4, GAttrs5)}
@@ -183,7 +184,7 @@ add_default(L1, Opt, L2):-
   Opt =.. [N,_Value],
   Opt0 =.. [N,_FreshVar],
   (   option(Opt0, L1)
-  ->  true
+  ->  L2 = L1
   ;   L2 = [Opt|L1]
   ).
 
 
```
 
<h2 id="109"> 109: 正在比较变动前 7f0e20f 和变动后 c16a7a7 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 487feb1..57e9348 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.8').
+version('0.0.9').
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index 0bc966a..67a9e1b 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -193,11 +193,11 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
 
   merge_options(
     [
-      arrowhead=EArrowhead,
-      color=EColor,
-      label=ELabel,
-      penwidth=EPenwidth,
-      style=EStyle
+      arrowhead(EArrowhead),
+      color(EColor),
+      label(ELabel),
+      penwidth(EPenwidth),
+      style(EStyle)
     ],
     EAttrs
   ).
@@ -244,12 +244,12 @@ graph_attributes(GAttrs, Opts):-
 
   merge_options(
     [
-      charset=Charset,
-      colorscheme=Colorscheme,
-      directed=Directed,
-      fontsize=Fontsize,
-      label=GLabel,
-      overlap=Overlap
+      charset(Charset),
+      colorscheme(Colorscheme),
+      directed(Directed),
+      fontsize(Fontsize),
+      label(GLabel),
+      overlap(Overlap)
     ],
     GAttrs
   ).
@@ -330,13 +330,13 @@ vertex_term(Vs, V, vertex(VId,VAttrs), Opts):-
 
   merge_options(
     [
-      color=VColor,
-      image=VImage,
-      label=VLabel,
-      peripheries=VPeripheries,
-      pos=VPosition,
-      shape=VShape,
-      'URL'=VUri
+      color(VColor),
+      image(VImage),
+      label(VLabel),
+      peripheries(VPeripheries),
+      pos(VPosition),
+      shape(VShape),
+      'URL'(VUri)
     ],
     VAttrs
   ).
 
```
 
<h2 id="110"> 110: 正在比较变动前 c16a7a7 和变动后 8bbb08c </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 57e9348..d1fef6b 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.9').
+version('0.0.10').
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index 7f008c7..bff4257 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -160,13 +160,13 @@ gv_graph(G1, I) -->
   "}\n".
 
 gv_edge_statements(I, Dir, L) -->
-  '*'(gv_edge_statement(I, Dir), L, []).
+  '*'(gv_edge_statement(I, Dir), L, []), !.
 
 gv_node_statements(I, L) -->
-  '*'(gv_node_statement(I), L, []).
+  '*'(gv_node_statement(I), L, []), !.
 
 gv_ranked_node_collections(I, L) -->
-  '*'(gv_ranked_node_collection(I), L, []).
+  '*'(gv_ranked_node_collection(I), L, []), !.
 
 
 
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 7fd9709..930fb32 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -109,7 +109,7 @@ gv_generic_attributes_statement(Kind, I, Attrs) -->
   indent(I),
   gv_kind(Kind), " ",
   gv_attrs(Kind, Attrs),
-  "\n".
+  "\n", !.
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
 
```
 
<h2 id="111"> 111: 正在比较变动前 8bbb08c 和变动后 34c8b1a </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index d1fef6b..854ddee 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.10').
+version('0.0.11').
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 5e55234..5d97cb1 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -20,10 +20,10 @@
 :- use_module(library(file_ext)).
 :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
 :- use_module(library(html/html_download)).
-:- use_module(library(html/html_table)).
 :- use_module(library(lists)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
+:- use_module(library(xpath/xpath_table)).
 
 %! gv_attr(
 %!   ?Name:atom,
@@ -130,7 +130,7 @@ gv_attrs_download0:-
   gv_attrs_uri(Uri),
   html_download(Uri, Dom),
   xpath_chk(Dom, //table(@align=lower_case(center)), TableDom),
-  html_table(TableDom, _, Rows),
+  xpath_table(TableDom, _, Rows),
   maplist(assert_gv_attr_row, Rows).
 
 
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index 9235e27..d6eb478 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -13,7 +13,7 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2014/06, 2014/10-2014/11, 2015/01, 2015/03
+@version 2015/08
 */
 
 :- use_module(library(apply)).
@@ -23,10 +23,10 @@
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(file_ext)).
 :- use_module(library(html/html_download)).
-:- use_module(library(html/html_table)).
 :- use_module(library(lists)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
+:- use_module(library(xpath/xpath_table)).
 
 %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
 
@@ -102,7 +102,7 @@ gv_color_download0:-
 
 
 assert_color_table(Colorscheme, TableDom):-
-  html_table(TableDom, _, Rows),
+  xpath_table(TableDom, _, Rows),
   append(Rows, Cells),
   forall(
     member(Cell, Cells),
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
index 7a92cf5..577a33a 100644
--- a/prolog/gv/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -25,8 +25,13 @@
 user:prolog_file_type(dot, dot).
 user:prolog_file_type(pdf, pdf).
 
-:- predicate_options(gv_export/3, 3, [pass_to(file_to_gv/3, 3)]).
-:- predicate_options(file_to_gv/3, 3, [method(+atom),output(+atom)]).
+:- predicate_options(gv_export/3, 3, [
+     pass_to(file_to_gv/3, 3)
+   ]).
+:- predicate_options(file_to_gv/3, 3, [
+     method(+atom),
+     output(+atom)
+   ]).
 
 
 
 
```
 
<h2 id="112"> 112: 正在比较变动前 34c8b1a 和变动后 d883d06 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 854ddee..74f024d 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.11').
+version('0.0.12').
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index 67a9e1b..e96f484 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -171,7 +171,10 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
   % Id.
   (   option(edge_id(IdFunction), Opts)
   ->  call(IdFunction, E, FromId, ToId)
-  ;     E = edge(FromV,_,ToV),
+  ;     (   E = edge(FromV,_,ToV)
+        ->  true
+        ;   E = edge(FromV,ToV)
+        ),
         nth0chk(FromId, Vs, FromV),
         nth0chk(ToId, Vs, ToV)
   ),
 
```
 
<h2 id="113"> 113: 正在比较变动前 d883d06 和变动后 66ac0a0 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 74f024d..2a85425 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.12').
+version('0.0.13').
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index e96f484..b031d16 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -241,7 +241,8 @@ graph_attributes(GAttrs, Opts):-
   % Fontsize.
   option(graph_fontsize(Fontsize), Opts, 11.0),
   % Label.
-  option(graph_label(GLabel), Opts, ''),
+  % Defaults to the empty string.
+  option(graph_label(GLabel), Opts, '""'),
   % Overlap.
   option(graph_overlap(Overlap), Opts, false),
 
 
```
 
<h2 id="114"> 114: 正在比较变动前 66ac0a0 和变动后 ab5a102 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 2a85425..dfee09c 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.13').
+version('0.0.14').
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
index ff163fe..c6508a3 100644
--- a/prolog/gv/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -213,9 +213,9 @@ escape_double_quotes, [92,34] -->
   [34], !,
   escape_double_quotes.
 escape_double_quotes, [X] -->
-  [X],
+  [X], !,
   escape_double_quotes.
-
+escape_double_quotes --> [].
 
 
 
 
```
 
<h2 id="115"> 115: 正在比较变动前 ab5a102 和变动后 65f43b8 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index e6bec15..7193a38 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,5 +1,4 @@
 *~
 *#
 *.db
-*.log
 data/*
diff --git a/gv_attrs.log b/gv_attrs.log
new file mode 100644
index 0000000..a9c6010
--- /dev/null
+++ b/gv_attrs.log
@@ -0,0 +1,169 @@
+assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')).
+assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')).
+assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')).
+assert(gv_attr('_background',[graph],[string],_,'','')).
+assert(gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only')).
+assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')).
+assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')).
+assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')).
+assert(gv_attr(bb,[graph],[rect],'','','write only')).
+assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')).
+assert(gv_attr(center,[graph],[bool],false,'','')).
+assert(gv_attr(charset,[graph],[string],'"UTF-8"','','')).
+assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')).
+assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')).
+assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')).
+assert(gv_attr(comment,[edge,graph,node],[string],'','','')).
+assert(gv_attr(compound,[graph],[bool],false,'','dot only')).
+assert(gv_attr(concentrate,[graph],[bool],false,'','')).
+assert(gv_attr(constraint,[edge],[bool],true,'','dot only')).
+assert(gv_attr(decorate,[edge],[bool],false,'','')).
+assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')).
+assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')).
+assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')).
+assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')).
+assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')).
+assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')).
+assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')).
+assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')).
+assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')).
+assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')).
+assert(gv_attr(fixedsize,[node],[bool,string],false,'','')).
+assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')).
+assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','')).
+assert(gv_attr(fontnames,[graph],[string],'','','svg only')).
+assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')).
+assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')).
+assert(gv_attr(forcelabels,[graph],[bool],true,'','')).
+assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')).
+assert(gv_attr(group,[node],[string],'','','dot only')).
+assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(head_lp,[edge],[point],'','','write only')).
+assert(gv_attr(headclip,[edge],[bool],true,'','')).
+assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(headlabel,[edge],[lblString],'','','')).
+assert(gv_attr(headport,[edge],[portPos],center,'','')).
+assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(height,[node],[double],'0.5','0.02','')).
+assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
+assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
+assert(gv_attr(image,[node],[string],'','','')).
+assert(gv_attr(imagepath,[graph],[string],'','','')).
+assert(gv_attr(imagescale,[node],[bool,string],false,'','')).
+assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')).
+assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','')).
+assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')).
+assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')).
+assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')).
+assert(gv_attr(labelfloat,[edge],[bool],false,'','')).
+assert(gv_attr(labelfontcolor,[edge],[color],black,'','')).
+assert(gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','')).
+assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')).
+assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(labeljust,[cluster,graph],[string],'"c"','','')).
+assert(gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','')).
+assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(landscape,[graph],[bool],false,'','')).
+assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')).
+assert(gv_attr(layerlistsep,[graph],[string],'","','','')).
+assert(gv_attr(layers,[graph],[layerList],'','','')).
+assert(gv_attr(layerselect,[graph],[layerRange],'','','')).
+assert(gv_attr(layersep,[graph],[string],'" :\\t"','','')).
+assert(gv_attr(layout,[graph],[string],'','','')).
+assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')).
+assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')).
+assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')).
+assert(gv_attr(lhead,[edge],[string],'','','dot only')).
+assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')).
+assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')).
+assert(gv_attr(ltail,[edge],[string],'','','dot only')).
+assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')).
+assert(gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','')).
+assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')).
+assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')).
+assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')).
+assert(gv_attr(minlen,[edge],[int],'1','0','dot only')).
+assert(gv_attr(mode,[graph],[string],major,'','neato only')).
+assert(gv_attr(model,[graph],[string],shortpath,'','neato only')).
+assert(gv_attr(mosek,[graph],[bool],false,'','neato only')).
+assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')).
+assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')).
+assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')).
+assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')).
+assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')).
+assert(gv_attr(ordering,[graph,node],[string],'','','dot only')).
+assert(gv_attr(orientation,[node],[double],'0.0','360.0','')).
+assert(gv_attr(orientation,[graph],[string],'','','')).
+assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')).
+assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')).
+assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')).
+assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')).
+assert(gv_attr(pack,[graph],[bool,int],false,'','')).
+assert(gv_attr(packmode,[graph],[packMode],node,'','')).
+assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')).
+assert(gv_attr(page,[graph],[double,point],'','','')).
+assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')).
+assert(gv_attr(pencolor,[cluster],[color],black,'','')).
+assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')).
+assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')).
+assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')).
+assert(gv_attr(pos,[edge,node],[point,splineType],'','','')).
+assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')).
+assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')).
+assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')).
+assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')).
+assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')).
+assert(gv_attr(ratio,[graph],[double,string],'','','')).
+assert(gv_attr(rects,[node],[rect],'','','write only')).
+assert(gv_attr(regular,[node],[bool],false,'','')).
+assert(gv_attr(remincross,[graph],[bool],true,'','dot only')).
+assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')).
+assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')).
+assert(gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only')).
+assert(gv_attr(rotate,[graph],[int],'0','','')).
+assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')).
+assert(gv_attr(samehead,[edge],[string],'','','dot only')).
+assert(gv_attr(sametail,[edge],[string],'','','dot only')).
+assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')).
+assert(gv_attr(scale,[graph],[double,point],'','','not dot')).
+assert(gv_attr(searchsize,[graph],[int],'30','','dot only')).
+assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')).
+assert(gv_attr(shape,[node],[shape],ellipse,'','')).
+assert(gv_attr(shapefile,[node],[string],'','','')).
+assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')).
+assert(gv_attr(sides,[node],[int],'4','0','')).
+assert(gv_attr(size,[graph],[double,point],'','','')).
+assert(gv_attr(skew,[node],[double],'0.0','-100.0','')).
+assert(gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only')).
+assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')).
+assert(gv_attr(splines,[graph],[bool,string],'','','')).
+assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')).
+assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')).
+assert(gv_attr(stylesheet,[graph],[string],'','','svg only')).
+assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(tail_lp,[edge],[point],'','','write only')).
+assert(gv_attr(tailclip,[edge],[bool],true,'','')).
+assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(taillabel,[edge],[lblString],'','','')).
+assert(gv_attr(tailport,[edge],[portPos],center,'','')).
+assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')).
+assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')).
+assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')).
+assert(gv_attr(vertices,[node],[pointList],'','','write only')).
+assert(gv_attr(viewport,[graph],[viewPort],'','','')).
+assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')).
+assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')).
+assert(gv_attr(width,[node],[double],'0.75','0.01','')).
+assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')).
+assert(gv_attr(xlabel,[edge,node],[lblString],'','','')).
+assert(gv_attr(xlp,[edge,node],[point],'','','write only')).
+assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')).
diff --git a/gv_color.log b/gv_color.log
new file mode 100644
index 0000000..23d6cdf
--- /dev/null
+++ b/gv_color.log
@@ -0,0 +1,802 @@
+assert(gv_color(x11,aliceblue)).
+assert(gv_color(x11,antiquewhite)).
+assert(gv_color(x11,antiquewhite1)).
+assert(gv_color(x11,antiquewhite2)).
+assert(gv_color(x11,antiquewhite3)).
+assert(gv_color(x11,antiquewhite4)).
+assert(gv_color(x11,aquamarine)).
+assert(gv_color(x11,aquamarine1)).
+assert(gv_color(x11,aquamarine2)).
+assert(gv_color(x11,aquamarine3)).
+assert(gv_color(x11,aquamarine4)).
+assert(gv_color(x11,azure)).
+assert(gv_color(x11,azure1)).
+assert(gv_color(x11,azure2)).
+assert(gv_color(x11,azure3)).
+assert(gv_color(x11,azure4)).
+assert(gv_color(x11,beige)).
+assert(gv_color(x11,bisque)).
+assert(gv_color(x11,bisque1)).
+assert(gv_color(x11,bisque2)).
+assert(gv_color(x11,bisque3)).
+assert(gv_color(x11,bisque4)).
+assert(gv_color(x11,black)).
+assert(gv_color(x11,blanchedalmond)).
+assert(gv_color(x11,blue)).
+assert(gv_color(x11,blue1)).
+assert(gv_color(x11,blue2)).
+assert(gv_color(x11,blue3)).
+assert(gv_color(x11,blue4)).
+assert(gv_color(x11,blueviolet)).
+assert(gv_color(x11,brown)).
+assert(gv_color(x11,brown1)).
+assert(gv_color(x11,brown2)).
+assert(gv_color(x11,brown3)).
+assert(gv_color(x11,brown4)).
+assert(gv_color(x11,burlywood)).
+assert(gv_color(x11,burlywood1)).
+assert(gv_color(x11,burlywood2)).
+assert(gv_color(x11,burlywood3)).
+assert(gv_color(x11,burlywood4)).
+assert(gv_color(x11,cadetblue)).
+assert(gv_color(x11,cadetblue1)).
+assert(gv_color(x11,cadetblue2)).
+assert(gv_color(x11,cadetblue3)).
+assert(gv_color(x11,cadetblue4)).
+assert(gv_color(x11,chartreuse)).
+assert(gv_color(x11,chartreuse1)).
+assert(gv_color(x11,chartreuse2)).
+assert(gv_color(x11,chartreuse3)).
+assert(gv_color(x11,chartreuse4)).
+assert(gv_color(x11,chocolate)).
+assert(gv_color(x11,chocolate1)).
+assert(gv_color(x11,chocolate2)).
+assert(gv_color(x11,chocolate3)).
+assert(gv_color(x11,chocolate4)).
+assert(gv_color(x11,coral)).
+assert(gv_color(x11,coral1)).
+assert(gv_color(x11,coral2)).
+assert(gv_color(x11,coral3)).
+assert(gv_color(x11,coral4)).
+assert(gv_color(x11,cornflowerblue)).
+assert(gv_color(x11,cornsilk)).
+assert(gv_color(x11,cornsilk1)).
+assert(gv_color(x11,cornsilk2)).
+assert(gv_color(x11,cornsilk3)).
+assert(gv_color(x11,cornsilk4)).
+assert(gv_color(x11,crimson)).
+assert(gv_color(x11,cyan)).
+assert(gv_color(x11,cyan1)).
+assert(gv_color(x11,cyan2)).
+assert(gv_color(x11,cyan3)).
+assert(gv_color(x11,cyan4)).
+assert(gv_color(x11,darkgoldenrod)).
+assert(gv_color(x11,darkgoldenrod1)).
+assert(gv_color(x11,darkgoldenrod2)).
+assert(gv_color(x11,darkgoldenrod3)).
+assert(gv_color(x11,darkgoldenrod4)).
+assert(gv_color(x11,darkgreen)).
+assert(gv_color(x11,darkkhaki)).
+assert(gv_color(x11,darkolivegreen)).
+assert(gv_color(x11,darkolivegreen1)).
+assert(gv_color(x11,darkolivegreen2)).
+assert(gv_color(x11,darkolivegreen3)).
+assert(gv_color(x11,darkolivegreen4)).
+assert(gv_color(x11,darkorange)).
+assert(gv_color(x11,darkorange1)).
+assert(gv_color(x11,darkorange2)).
+assert(gv_color(x11,darkorange3)).
+assert(gv_color(x11,darkorange4)).
+assert(gv_color(x11,darkorchid)).
+assert(gv_color(x11,darkorchid1)).
+assert(gv_color(x11,darkorchid2)).
+assert(gv_color(x11,darkorchid3)).
+assert(gv_color(x11,darkorchid4)).
+assert(gv_color(x11,darksalmon)).
+assert(gv_color(x11,darkseagreen)).
+assert(gv_color(x11,darkseagreen1)).
+assert(gv_color(x11,darkseagreen2)).
+assert(gv_color(x11,darkseagreen3)).
+assert(gv_color(x11,darkseagreen4)).
+assert(gv_color(x11,darkslateblue)).
+assert(gv_color(x11,darkslategray)).
+assert(gv_color(x11,darkslategray1)).
+assert(gv_color(x11,darkslategray2)).
+assert(gv_color(x11,darkslategray3)).
+assert(gv_color(x11,darkslategray4)).
+assert(gv_color(x11,darkslategrey)).
+assert(gv_color(x11,darkturquoise)).
+assert(gv_color(x11,darkviolet)).
+assert(gv_color(x11,deeppink)).
+assert(gv_color(x11,deeppink1)).
+assert(gv_color(x11,deeppink2)).
+assert(gv_color(x11,deeppink3)).
+assert(gv_color(x11,deeppink4)).
+assert(gv_color(x11,deepskyblue)).
+assert(gv_color(x11,deepskyblue1)).
+assert(gv_color(x11,deepskyblue2)).
+assert(gv_color(x11,deepskyblue3)).
+assert(gv_color(x11,deepskyblue4)).
+assert(gv_color(x11,dimgray)).
+assert(gv_color(x11,dimgrey)).
+assert(gv_color(x11,dodgerblue)).
+assert(gv_color(x11,dodgerblue1)).
+assert(gv_color(x11,dodgerblue2)).
+assert(gv_color(x11,dodgerblue3)).
+assert(gv_color(x11,dodgerblue4)).
+assert(gv_color(x11,firebrick)).
+assert(gv_color(x11,firebrick1)).
+assert(gv_color(x11,firebrick2)).
+assert(gv_color(x11,firebrick3)).
+assert(gv_color(x11,firebrick4)).
+assert(gv_color(x11,floralwhite)).
+assert(gv_color(x11,forestgreen)).
+assert(gv_color(x11,gainsboro)).
+assert(gv_color(x11,ghostwhite)).
+assert(gv_color(x11,gold)).
+assert(gv_color(x11,gold1)).
+assert(gv_color(x11,gold2)).
+assert(gv_color(x11,gold3)).
+assert(gv_color(x11,gold4)).
+assert(gv_color(x11,goldenrod)).
+assert(gv_color(x11,goldenrod1)).
+assert(gv_color(x11,goldenrod2)).
+assert(gv_color(x11,goldenrod3)).
+assert(gv_color(x11,goldenrod4)).
+assert(gv_color(x11,gray)).
+assert(gv_color(x11,gray0)).
+assert(gv_color(x11,gray1)).
+assert(gv_color(x11,gray10)).
+assert(gv_color(x11,gray100)).
+assert(gv_color(x11,gray11)).
+assert(gv_color(x11,gray12)).
+assert(gv_color(x11,gray13)).
+assert(gv_color(x11,gray14)).
+assert(gv_color(x11,gray15)).
+assert(gv_color(x11,gray16)).
+assert(gv_color(x11,gray17)).
+assert(gv_color(x11,gray18)).
+assert(gv_color(x11,gray19)).
+assert(gv_color(x11,gray2)).
+assert(gv_color(x11,gray20)).
+assert(gv_color(x11,gray21)).
+assert(gv_color(x11,gray22)).
+assert(gv_color(x11,gray23)).
+assert(gv_color(x11,gray24)).
+assert(gv_color(x11,gray25)).
+assert(gv_color(x11,gray26)).
+assert(gv_color(x11,gray27)).
+assert(gv_color(x11,gray28)).
+assert(gv_color(x11,gray29)).
+assert(gv_color(x11,gray3)).
+assert(gv_color(x11,gray30)).
+assert(gv_color(x11,gray31)).
+assert(gv_color(x11,gray32)).
+assert(gv_color(x11,gray33)).
+assert(gv_color(x11,gray34)).
+assert(gv_color(x11,gray35)).
+assert(gv_color(x11,gray36)).
+assert(gv_color(x11,gray37)).
+assert(gv_color(x11,gray38)).
+assert(gv_color(x11,gray39)).
+assert(gv_color(x11,gray4)).
+assert(gv_color(x11,gray40)).
+assert(gv_color(x11,gray41)).
+assert(gv_color(x11,gray42)).
+assert(gv_color(x11,gray43)).
+assert(gv_color(x11,gray44)).
+assert(gv_color(x11,gray45)).
+assert(gv_color(x11,gray46)).
+assert(gv_color(x11,gray47)).
+assert(gv_color(x11,gray48)).
+assert(gv_color(x11,gray49)).
+assert(gv_color(x11,gray5)).
+assert(gv_color(x11,gray50)).
+assert(gv_color(x11,gray51)).
+assert(gv_color(x11,gray52)).
+assert(gv_color(x11,gray53)).
+assert(gv_color(x11,gray54)).
+assert(gv_color(x11,gray55)).
+assert(gv_color(x11,gray56)).
+assert(gv_color(x11,gray57)).
+assert(gv_color(x11,gray58)).
+assert(gv_color(x11,gray59)).
+assert(gv_color(x11,gray6)).
+assert(gv_color(x11,gray60)).
+assert(gv_color(x11,gray61)).
+assert(gv_color(x11,gray62)).
+assert(gv_color(x11,gray63)).
+assert(gv_color(x11,gray64)).
+assert(gv_color(x11,gray65)).
+assert(gv_color(x11,gray66)).
+assert(gv_color(x11,gray67)).
+assert(gv_color(x11,gray68)).
+assert(gv_color(x11,gray69)).
+assert(gv_color(x11,gray7)).
+assert(gv_color(x11,gray70)).
+assert(gv_color(x11,gray71)).
+assert(gv_color(x11,gray72)).
+assert(gv_color(x11,gray73)).
+assert(gv_color(x11,gray74)).
+assert(gv_color(x11,gray75)).
+assert(gv_color(x11,gray76)).
+assert(gv_color(x11,gray77)).
+assert(gv_color(x11,gray78)).
+assert(gv_color(x11,gray79)).
+assert(gv_color(x11,gray8)).
+assert(gv_color(x11,gray80)).
+assert(gv_color(x11,gray81)).
+assert(gv_color(x11,gray82)).
+assert(gv_color(x11,gray83)).
+assert(gv_color(x11,gray84)).
+assert(gv_color(x11,gray85)).
+assert(gv_color(x11,gray86)).
+assert(gv_color(x11,gray87)).
+assert(gv_color(x11,gray88)).
+assert(gv_color(x11,gray89)).
+assert(gv_color(x11,gray9)).
+assert(gv_color(x11,gray90)).
+assert(gv_color(x11,gray91)).
+assert(gv_color(x11,gray92)).
+assert(gv_color(x11,gray93)).
+assert(gv_color(x11,gray94)).
+assert(gv_color(x11,gray95)).
+assert(gv_color(x11,gray96)).
+assert(gv_color(x11,gray97)).
+assert(gv_color(x11,gray98)).
+assert(gv_color(x11,gray99)).
+assert(gv_color(x11,green)).
+assert(gv_color(x11,green1)).
+assert(gv_color(x11,green2)).
+assert(gv_color(x11,green3)).
+assert(gv_color(x11,green4)).
+assert(gv_color(x11,greenyellow)).
+assert(gv_color(x11,grey)).
+assert(gv_color(x11,grey0)).
+assert(gv_color(x11,grey1)).
+assert(gv_color(x11,grey10)).
+assert(gv_color(x11,grey100)).
+assert(gv_color(x11,grey11)).
+assert(gv_color(x11,grey12)).
+assert(gv_color(x11,grey13)).
+assert(gv_color(x11,grey14)).
+assert(gv_color(x11,grey15)).
+assert(gv_color(x11,grey16)).
+assert(gv_color(x11,grey17)).
+assert(gv_color(x11,grey18)).
+assert(gv_color(x11,grey19)).
+assert(gv_color(x11,grey2)).
+assert(gv_color(x11,grey20)).
+assert(gv_color(x11,grey21)).
+assert(gv_color(x11,grey22)).
+assert(gv_color(x11,grey23)).
+assert(gv_color(x11,grey24)).
+assert(gv_color(x11,grey25)).
+assert(gv_color(x11,grey26)).
+assert(gv_color(x11,grey27)).
+assert(gv_color(x11,grey28)).
+assert(gv_color(x11,grey29)).
+assert(gv_color(x11,grey3)).
+assert(gv_color(x11,grey30)).
+assert(gv_color(x11,grey31)).
+assert(gv_color(x11,grey32)).
+assert(gv_color(x11,grey33)).
+assert(gv_color(x11,grey34)).
+assert(gv_color(x11,grey35)).
+assert(gv_color(x11,grey36)).
+assert(gv_color(x11,grey37)).
+assert(gv_color(x11,grey38)).
+assert(gv_color(x11,grey39)).
+assert(gv_color(x11,grey4)).
+assert(gv_color(x11,grey40)).
+assert(gv_color(x11,grey41)).
+assert(gv_color(x11,grey42)).
+assert(gv_color(x11,grey43)).
+assert(gv_color(x11,grey44)).
+assert(gv_color(x11,grey45)).
+assert(gv_color(x11,grey46)).
+assert(gv_color(x11,grey47)).
+assert(gv_color(x11,grey48)).
+assert(gv_color(x11,grey49)).
+assert(gv_color(x11,grey5)).
+assert(gv_color(x11,grey50)).
+assert(gv_color(x11,grey51)).
+assert(gv_color(x11,grey52)).
+assert(gv_color(x11,grey53)).
+assert(gv_color(x11,grey54)).
+assert(gv_color(x11,grey55)).
+assert(gv_color(x11,grey56)).
+assert(gv_color(x11,grey57)).
+assert(gv_color(x11,grey58)).
+assert(gv_color(x11,grey59)).
+assert(gv_color(x11,grey6)).
+assert(gv_color(x11,grey60)).
+assert(gv_color(x11,grey61)).
+assert(gv_color(x11,grey62)).
+assert(gv_color(x11,grey63)).
+assert(gv_color(x11,grey64)).
+assert(gv_color(x11,grey65)).
+assert(gv_color(x11,grey66)).
+assert(gv_color(x11,grey67)).
+assert(gv_color(x11,grey68)).
+assert(gv_color(x11,grey69)).
+assert(gv_color(x11,grey7)).
+assert(gv_color(x11,grey70)).
+assert(gv_color(x11,grey71)).
+assert(gv_color(x11,grey72)).
+assert(gv_color(x11,grey73)).
+assert(gv_color(x11,grey74)).
+assert(gv_color(x11,grey75)).
+assert(gv_color(x11,grey76)).
+assert(gv_color(x11,grey77)).
+assert(gv_color(x11,grey78)).
+assert(gv_color(x11,grey79)).
+assert(gv_color(x11,grey8)).
+assert(gv_color(x11,grey80)).
+assert(gv_color(x11,grey81)).
+assert(gv_color(x11,grey82)).
+assert(gv_color(x11,grey83)).
+assert(gv_color(x11,grey84)).
+assert(gv_color(x11,grey85)).
+assert(gv_color(x11,grey86)).
+assert(gv_color(x11,grey87)).
+assert(gv_color(x11,grey88)).
+assert(gv_color(x11,grey89)).
+assert(gv_color(x11,grey9)).
+assert(gv_color(x11,grey90)).
+assert(gv_color(x11,grey91)).
+assert(gv_color(x11,grey92)).
+assert(gv_color(x11,grey93)).
+assert(gv_color(x11,grey94)).
+assert(gv_color(x11,grey95)).
+assert(gv_color(x11,grey96)).
+assert(gv_color(x11,grey97)).
+assert(gv_color(x11,grey98)).
+assert(gv_color(x11,grey99)).
+assert(gv_color(x11,honeydew)).
+assert(gv_color(x11,honeydew1)).
+assert(gv_color(x11,honeydew2)).
+assert(gv_color(x11,honeydew3)).
+assert(gv_color(x11,honeydew4)).
+assert(gv_color(x11,hotpink)).
+assert(gv_color(x11,hotpink1)).
+assert(gv_color(x11,hotpink2)).
+assert(gv_color(x11,hotpink3)).
+assert(gv_color(x11,hotpink4)).
+assert(gv_color(x11,indianred)).
+assert(gv_color(x11,indianred1)).
+assert(gv_color(x11,indianred2)).
+assert(gv_color(x11,indianred3)).
+assert(gv_color(x11,indianred4)).
+assert(gv_color(x11,indigo)).
+assert(gv_color(x11,invis)).
+assert(gv_color(x11,ivory)).
+assert(gv_color(x11,ivory1)).
+assert(gv_color(x11,ivory2)).
+assert(gv_color(x11,ivory3)).
+assert(gv_color(x11,ivory4)).
+assert(gv_color(x11,khaki)).
+assert(gv_color(x11,khaki1)).
+assert(gv_color(x11,khaki2)).
+assert(gv_color(x11,khaki3)).
+assert(gv_color(x11,khaki4)).
+assert(gv_color(x11,lavender)).
+assert(gv_color(x11,lavenderblush)).
+assert(gv_color(x11,lavenderblush1)).
+assert(gv_color(x11,lavenderblush2)).
+assert(gv_color(x11,lavenderblush3)).
+assert(gv_color(x11,lavenderblush4)).
+assert(gv_color(x11,lawngreen)).
+assert(gv_color(x11,lemonchiffon)).
+assert(gv_color(x11,lemonchiffon1)).
+assert(gv_color(x11,lemonchiffon2)).
+assert(gv_color(x11,lemonchiffon3)).
+assert(gv_color(x11,lemonchiffon4)).
+assert(gv_color(x11,lightblue)).
+assert(gv_color(x11,lightblue1)).
+assert(gv_color(x11,lightblue2)).
+assert(gv_color(x11,lightblue3)).
+assert(gv_color(x11,lightblue4)).
+assert(gv_color(x11,lightcoral)).
+assert(gv_color(x11,lightcyan)).
+assert(gv_color(x11,lightcyan1)).
+assert(gv_color(x11,lightcyan2)).
+assert(gv_color(x11,lightcyan3)).
+assert(gv_color(x11,lightcyan4)).
+assert(gv_color(x11,lightgoldenrod)).
+assert(gv_color(x11,lightgoldenrod1)).
+assert(gv_color(x11,lightgoldenrod2)).
+assert(gv_color(x11,lightgoldenrod3)).
+assert(gv_color(x11,lightgoldenrod4)).
+assert(gv_color(x11,lightgoldenrodyellow)).
+assert(gv_color(x11,lightgray)).
+assert(gv_color(x11,lightgrey)).
+assert(gv_color(x11,lightpink)).
+assert(gv_color(x11,lightpink1)).
+assert(gv_color(x11,lightpink2)).
+assert(gv_color(x11,lightpink3)).
+assert(gv_color(x11,lightpink4)).
+assert(gv_color(x11,lightsalmon)).
+assert(gv_color(x11,lightsalmon1)).
+assert(gv_color(x11,lightsalmon2)).
+assert(gv_color(x11,lightsalmon3)).
+assert(gv_color(x11,lightsalmon4)).
+assert(gv_color(x11,lightseagreen)).
+assert(gv_color(x11,lightskyblue)).
+assert(gv_color(x11,lightskyblue1)).
+assert(gv_color(x11,lightskyblue2)).
+assert(gv_color(x11,lightskyblue3)).
+assert(gv_color(x11,lightskyblue4)).
+assert(gv_color(x11,lightslateblue)).
+assert(gv_color(x11,lightslategray)).
+assert(gv_color(x11,lightslategrey)).
+assert(gv_color(x11,lightsteelblue)).
+assert(gv_color(x11,lightsteelblue1)).
+assert(gv_color(x11,lightsteelblue2)).
+assert(gv_color(x11,lightsteelblue3)).
+assert(gv_color(x11,lightsteelblue4)).
+assert(gv_color(x11,lightyellow)).
+assert(gv_color(x11,lightyellow1)).
+assert(gv_color(x11,lightyellow2)).
+assert(gv_color(x11,lightyellow3)).
+assert(gv_color(x11,lightyellow4)).
+assert(gv_color(x11,limegreen)).
+assert(gv_color(x11,linen)).
+assert(gv_color(x11,magenta)).
+assert(gv_color(x11,magenta1)).
+assert(gv_color(x11,magenta2)).
+assert(gv_color(x11,magenta3)).
+assert(gv_color(x11,magenta4)).
+assert(gv_color(x11,maroon)).
+assert(gv_color(x11,maroon1)).
+assert(gv_color(x11,maroon2)).
+assert(gv_color(x11,maroon3)).
+assert(gv_color(x11,maroon4)).
+assert(gv_color(x11,mediumaquamarine)).
+assert(gv_color(x11,mediumblue)).
+assert(gv_color(x11,mediumorchid)).
+assert(gv_color(x11,mediumorchid1)).
+assert(gv_color(x11,mediumorchid2)).
+assert(gv_color(x11,mediumorchid3)).
+assert(gv_color(x11,mediumorchid4)).
+assert(gv_color(x11,mediumpurple)).
+assert(gv_color(x11,mediumpurple1)).
+assert(gv_color(x11,mediumpurple2)).
+assert(gv_color(x11,mediumpurple3)).
+assert(gv_color(x11,mediumpurple4)).
+assert(gv_color(x11,mediumseagreen)).
+assert(gv_color(x11,mediumslateblue)).
+assert(gv_color(x11,mediumspringgreen)).
+assert(gv_color(x11,mediumturquoise)).
+assert(gv_color(x11,mediumvioletred)).
+assert(gv_color(x11,midnightblue)).
+assert(gv_color(x11,mintcream)).
+assert(gv_color(x11,mistyrose)).
+assert(gv_color(x11,mistyrose1)).
+assert(gv_color(x11,mistyrose2)).
+assert(gv_color(x11,mistyrose3)).
+assert(gv_color(x11,mistyrose4)).
+assert(gv_color(x11,moccasin)).
+assert(gv_color(x11,navajowhite)).
+assert(gv_color(x11,navajowhite1)).
+assert(gv_color(x11,navajowhite2)).
+assert(gv_color(x11,navajowhite3)).
+assert(gv_color(x11,navajowhite4)).
+assert(gv_color(x11,navy)).
+assert(gv_color(x11,navyblue)).
+assert(gv_color(x11,none)).
+assert(gv_color(x11,oldlace)).
+assert(gv_color(x11,olivedrab)).
+assert(gv_color(x11,olivedrab1)).
+assert(gv_color(x11,olivedrab2)).
+assert(gv_color(x11,olivedrab3)).
+assert(gv_color(x11,olivedrab4)).
+assert(gv_color(x11,orange)).
+assert(gv_color(x11,orange1)).
+assert(gv_color(x11,orange2)).
+assert(gv_color(x11,orange3)).
+assert(gv_color(x11,orange4)).
+assert(gv_color(x11,orangered)).
+assert(gv_color(x11,orangered1)).
+assert(gv_color(x11,orangered2)).
+assert(gv_color(x11,orangered3)).
+assert(gv_color(x11,orangered4)).
+assert(gv_color(x11,orchid)).
+assert(gv_color(x11,orchid1)).
+assert(gv_color(x11,orchid2)).
+assert(gv_color(x11,orchid3)).
+assert(gv_color(x11,orchid4)).
+assert(gv_color(x11,palegoldenrod)).
+assert(gv_color(x11,palegreen)).
+assert(gv_color(x11,palegreen1)).
+assert(gv_color(x11,palegreen2)).
+assert(gv_color(x11,palegreen3)).
+assert(gv_color(x11,palegreen4)).
+assert(gv_color(x11,paleturquoise)).
+assert(gv_color(x11,paleturquoise1)).
+assert(gv_color(x11,paleturquoise2)).
+assert(gv_color(x11,paleturquoise3)).
+assert(gv_color(x11,paleturquoise4)).
+assert(gv_color(x11,palevioletred)).
+assert(gv_color(x11,palevioletred1)).
+assert(gv_color(x11,palevioletred2)).
+assert(gv_color(x11,palevioletred3)).
+assert(gv_color(x11,palevioletred4)).
+assert(gv_color(x11,papayawhip)).
+assert(gv_color(x11,peachpuff)).
+assert(gv_color(x11,peachpuff1)).
+assert(gv_color(x11,peachpuff2)).
+assert(gv_color(x11,peachpuff3)).
+assert(gv_color(x11,peachpuff4)).
+assert(gv_color(x11,peru)).
+assert(gv_color(x11,pink)).
+assert(gv_color(x11,pink1)).
+assert(gv_color(x11,pink2)).
+assert(gv_color(x11,pink3)).
+assert(gv_color(x11,pink4)).
+assert(gv_color(x11,plum)).
+assert(gv_color(x11,plum1)).
+assert(gv_color(x11,plum2)).
+assert(gv_color(x11,plum3)).
+assert(gv_color(x11,plum4)).
+assert(gv_color(x11,powderblue)).
+assert(gv_color(x11,purple)).
+assert(gv_color(x11,purple1)).
+assert(gv_color(x11,purple2)).
+assert(gv_color(x11,purple3)).
+assert(gv_color(x11,purple4)).
+assert(gv_color(x11,red)).
+assert(gv_color(x11,red1)).
+assert(gv_color(x11,red2)).
+assert(gv_color(x11,red3)).
+assert(gv_color(x11,red4)).
+assert(gv_color(x11,rosybrown)).
+assert(gv_color(x11,rosybrown1)).
+assert(gv_color(x11,rosybrown2)).
+assert(gv_color(x11,rosybrown3)).
+assert(gv_color(x11,rosybrown4)).
+assert(gv_color(x11,royalblue)).
+assert(gv_color(x11,royalblue1)).
+assert(gv_color(x11,royalblue2)).
+assert(gv_color(x11,royalblue3)).
+assert(gv_color(x11,royalblue4)).
+assert(gv_color(x11,saddlebrown)).
+assert(gv_color(x11,salmon)).
+assert(gv_color(x11,salmon1)).
+assert(gv_color(x11,salmon2)).
+assert(gv_color(x11,salmon3)).
+assert(gv_color(x11,salmon4)).
+assert(gv_color(x11,sandybrown)).
+assert(gv_color(x11,seagreen)).
+assert(gv_color(x11,seagreen1)).
+assert(gv_color(x11,seagreen2)).
+assert(gv_color(x11,seagreen3)).
+assert(gv_color(x11,seagreen4)).
+assert(gv_color(x11,seashell)).
+assert(gv_color(x11,seashell1)).
+assert(gv_color(x11,seashell2)).
+assert(gv_color(x11,seashell3)).
+assert(gv_color(x11,seashell4)).
+assert(gv_color(x11,sienna)).
+assert(gv_color(x11,sienna1)).
+assert(gv_color(x11,sienna2)).
+assert(gv_color(x11,sienna3)).
+assert(gv_color(x11,sienna4)).
+assert(gv_color(x11,skyblue)).
+assert(gv_color(x11,skyblue1)).
+assert(gv_color(x11,skyblue2)).
+assert(gv_color(x11,skyblue3)).
+assert(gv_color(x11,skyblue4)).
+assert(gv_color(x11,slateblue)).
+assert(gv_color(x11,slateblue1)).
+assert(gv_color(x11,slateblue2)).
+assert(gv_color(x11,slateblue3)).
+assert(gv_color(x11,slateblue4)).
+assert(gv_color(x11,slategray)).
+assert(gv_color(x11,slategray1)).
+assert(gv_color(x11,slategray2)).
+assert(gv_color(x11,slategray3)).
+assert(gv_color(x11,slategray4)).
+assert(gv_color(x11,slategrey)).
+assert(gv_color(x11,snow)).
+assert(gv_color(x11,snow1)).
+assert(gv_color(x11,snow2)).
+assert(gv_color(x11,snow3)).
+assert(gv_color(x11,snow4)).
+assert(gv_color(x11,springgreen)).
+assert(gv_color(x11,springgreen1)).
+assert(gv_color(x11,springgreen2)).
+assert(gv_color(x11,springgreen3)).
+assert(gv_color(x11,springgreen4)).
+assert(gv_color(x11,steelblue)).
+assert(gv_color(x11,steelblue1)).
+assert(gv_color(x11,steelblue2)).
+assert(gv_color(x11,steelblue3)).
+assert(gv_color(x11,steelblue4)).
+assert(gv_color(x11,tan)).
+assert(gv_color(x11,tan1)).
+assert(gv_color(x11,tan2)).
+assert(gv_color(x11,tan3)).
+assert(gv_color(x11,tan4)).
+assert(gv_color(x11,thistle)).
+assert(gv_color(x11,thistle1)).
+assert(gv_color(x11,thistle2)).
+assert(gv_color(x11,thistle3)).
+assert(gv_color(x11,thistle4)).
+assert(gv_color(x11,tomato)).
+assert(gv_color(x11,tomato1)).
+assert(gv_color(x11,tomato2)).
+assert(gv_color(x11,tomato3)).
+assert(gv_color(x11,tomato4)).
+assert(gv_color(x11,transparent)).
+assert(gv_color(x11,turquoise)).
+assert(gv_color(x11,turquoise1)).
+assert(gv_color(x11,turquoise2)).
+assert(gv_color(x11,turquoise3)).
+assert(gv_color(x11,turquoise4)).
+assert(gv_color(x11,violet)).
+assert(gv_color(x11,violetred)).
+assert(gv_color(x11,violetred1)).
+assert(gv_color(x11,violetred2)).
+assert(gv_color(x11,violetred3)).
+assert(gv_color(x11,violetred4)).
+assert(gv_color(x11,wheat)).
+assert(gv_color(x11,wheat1)).
+assert(gv_color(x11,wheat2)).
+assert(gv_color(x11,wheat3)).
+assert(gv_color(x11,wheat4)).
+assert(gv_color(x11,white)).
+assert(gv_color(x11,whitesmoke)).
+assert(gv_color(x11,yellow)).
+assert(gv_color(x11,yellow1)).
+assert(gv_color(x11,yellow2)).
+assert(gv_color(x11,yellow3)).
+assert(gv_color(x11,yellow4)).
+assert(gv_color(x11,yellowgreen)).
+assert(gv_color(svg,aliceblue)).
+assert(gv_color(svg,antiquewhite)).
+assert(gv_color(svg,aqua)).
+assert(gv_color(svg,aquamarine)).
+assert(gv_color(svg,azure)).
+assert(gv_color(svg,beige)).
+assert(gv_color(svg,bisque)).
+assert(gv_color(svg,black)).
+assert(gv_color(svg,blanchedalmond)).
+assert(gv_color(svg,blue)).
+assert(gv_color(svg,blueviolet)).
+assert(gv_color(svg,brown)).
+assert(gv_color(svg,burlywood)).
+assert(gv_color(svg,cadetblue)).
+assert(gv_color(svg,chartreuse)).
+assert(gv_color(svg,chocolate)).
+assert(gv_color(svg,coral)).
+assert(gv_color(svg,cornflowerblue)).
+assert(gv_color(svg,cornsilk)).
+assert(gv_color(svg,crimson)).
+assert(gv_color(svg,cyan)).
+assert(gv_color(svg,darkblue)).
+assert(gv_color(svg,darkcyan)).
+assert(gv_color(svg,darkgoldenrod)).
+assert(gv_color(svg,darkgray)).
+assert(gv_color(svg,darkgreen)).
+assert(gv_color(svg,darkgrey)).
+assert(gv_color(svg,darkkhaki)).
+assert(gv_color(svg,darkmagenta)).
+assert(gv_color(svg,darkolivegreen)).
+assert(gv_color(svg,darkorange)).
+assert(gv_color(svg,darkorchid)).
+assert(gv_color(svg,darkred)).
+assert(gv_color(svg,darksalmon)).
+assert(gv_color(svg,darkseagreen)).
+assert(gv_color(svg,darkslateblue)).
+assert(gv_color(svg,darkslategray)).
+assert(gv_color(svg,darkslategrey)).
+assert(gv_color(svg,darkturquoise)).
+assert(gv_color(svg,darkviolet)).
+assert(gv_color(svg,deeppink)).
+assert(gv_color(svg,deepskyblue)).
+assert(gv_color(svg,dimgray)).
+assert(gv_color(svg,dimgrey)).
+assert(gv_color(svg,dodgerblue)).
+assert(gv_color(svg,firebrick)).
+assert(gv_color(svg,floralwhite)).
+assert(gv_color(svg,forestgreen)).
+assert(gv_color(svg,fuchsia)).
+assert(gv_color(svg,gainsboro)).
+assert(gv_color(svg,ghostwhite)).
+assert(gv_color(svg,gold)).
+assert(gv_color(svg,goldenrod)).
+assert(gv_color(svg,gray)).
+assert(gv_color(svg,grey)).
+assert(gv_color(svg,green)).
+assert(gv_color(svg,greenyellow)).
+assert(gv_color(svg,honeydew)).
+assert(gv_color(svg,hotpink)).
+assert(gv_color(svg,indianred)).
+assert(gv_color(svg,indigo)).
+assert(gv_color(svg,ivory)).
+assert(gv_color(svg,khaki)).
+assert(gv_color(svg,lavender)).
+assert(gv_color(svg,lavenderblush)).
+assert(gv_color(svg,lawngreen)).
+assert(gv_color(svg,lemonchiffon)).
+assert(gv_color(svg,lightblue)).
+assert(gv_color(svg,lightcoral)).
+assert(gv_color(svg,lightcyan)).
+assert(gv_color(svg,lightgoldenrodyellow)).
+assert(gv_color(svg,lightgray)).
+assert(gv_color(svg,lightgreen)).
+assert(gv_color(svg,lightgrey)).
+assert(gv_color(svg,lightpink)).
+assert(gv_color(svg,lightsalmon)).
+assert(gv_color(svg,lightseagreen)).
+assert(gv_color(svg,lightskyblue)).
+assert(gv_color(svg,lightslategray)).
+assert(gv_color(svg,lightslategrey)).
+assert(gv_color(svg,lightsteelblue)).
+assert(gv_color(svg,lightyellow)).
+assert(gv_color(svg,lime)).
+assert(gv_color(svg,limegreen)).
+assert(gv_color(svg,linen)).
+assert(gv_color(svg,magenta)).
+assert(gv_color(svg,maroon)).
+assert(gv_color(svg,mediumaquamarine)).
+assert(gv_color(svg,mediumblue)).
+assert(gv_color(svg,mediumorchid)).
+assert(gv_color(svg,mediumpurple)).
+assert(gv_color(svg,mediumseagreen)).
+assert(gv_color(svg,mediumslateblue)).
+assert(gv_color(svg,mediumspringgreen)).
+assert(gv_color(svg,mediumturquoise)).
+assert(gv_color(svg,mediumvioletred)).
+assert(gv_color(svg,midnightblue)).
+assert(gv_color(svg,mintcream)).
+assert(gv_color(svg,mistyrose)).
+assert(gv_color(svg,moccasin)).
+assert(gv_color(svg,navajowhite)).
+assert(gv_color(svg,navy)).
+assert(gv_color(svg,oldlace)).
+assert(gv_color(svg,olive)).
+assert(gv_color(svg,olivedrab)).
+assert(gv_color(svg,orange)).
+assert(gv_color(svg,orangered)).
+assert(gv_color(svg,orchid)).
+assert(gv_color(svg,palegoldenrod)).
+assert(gv_color(svg,palegreen)).
+assert(gv_color(svg,paleturquoise)).
+assert(gv_color(svg,palevioletred)).
+assert(gv_color(svg,papayawhip)).
+assert(gv_color(svg,peachpuff)).
+assert(gv_color(svg,peru)).
+assert(gv_color(svg,pink)).
+assert(gv_color(svg,plum)).
+assert(gv_color(svg,powderblue)).
+assert(gv_color(svg,purple)).
+assert(gv_color(svg,red)).
+assert(gv_color(svg,rosybrown)).
+assert(gv_color(svg,royalblue)).
+assert(gv_color(svg,saddlebrown)).
+assert(gv_color(svg,salmon)).
+assert(gv_color(svg,sandybrown)).
+assert(gv_color(svg,seagreen)).
+assert(gv_color(svg,seashell)).
+assert(gv_color(svg,sienna)).
+assert(gv_color(svg,silver)).
+assert(gv_color(svg,skyblue)).
+assert(gv_color(svg,slateblue)).
+assert(gv_color(svg,slategray)).
+assert(gv_color(svg,slategrey)).
+assert(gv_color(svg,snow)).
+assert(gv_color(svg,springgreen)).
+assert(gv_color(svg,steelblue)).
+assert(gv_color(svg,tan)).
+assert(gv_color(svg,teal)).
+assert(gv_color(svg,thistle)).
+assert(gv_color(svg,tomato)).
+assert(gv_color(svg,turquoise)).
+assert(gv_color(svg,violet)).
+assert(gv_color(svg,wheat)).
+assert(gv_color(svg,white)).
+assert(gv_color(svg,whitesmoke)).
+assert(gv_color(svg,yellow)).
+assert(gv_color(svg,yellowgreen)).
 
```
 
<h2 id="116"> 116: 正在比较变动前 65f43b8 和变动后 c6de3d1 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitignore b/.gitignore
index 7193a38..bd24270 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,4 +1,3 @@
 *~
 *#
 *.db
-data/*
diff --git a/pack.pl b/pack.pl
index dfee09c..edfd45f 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.14').
+version('0.0.15').
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 5d97cb1..fa00670 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -9,7 +9,7 @@
 /** <module> GraphViz attributes
 
 @author Wouter Beek
-@version 2015/07
+@version 2015/07-2015/08
 */
 
 :- use_module(library(apply)).
@@ -17,10 +17,10 @@
 :- use_module(library(dcg/basics)).
 :- use_module(library(dcg/dcg_call)).
 :- use_module(library(dcg/dcg_phrase)).
-:- use_module(library(file_ext)).
 :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
-:- use_module(library(html/html_download)).
+:- use_module(library(http/http_download)).
 :- use_module(library(lists)).
+:- use_module(library(os/file_ext)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
diff --git a/gv_color.log b/prolog/gv/gv_color.log
similarity index 100%
rename from gv_color.log
rename to prolog/gv/gv_color.log
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index d6eb478..57c7f90 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -21,9 +21,9 @@
 :- use_module(library(dcg/basics)).
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_content)).
-:- use_module(library(file_ext)).
-:- use_module(library(html/html_download)).
+:- use_module(library(http/http_download)).
 :- use_module(library(lists)).
+:- use_module(library(os/file_ext)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 930fb32..18cdf7a 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -11,7 +11,7 @@
     gv_node_statement//2, % +Indent:nonneg
                           % +Vertex:compound
     gv_ranked_node_collection//2 % +Indent:nonneg
-				 % +Rank:???    
+                                 % +Rank
   ]
 ).
 
@@ -26,7 +26,7 @@ a_list = ID "=" ID [","] [a_list]
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2015/07
+@version 2015/07-2015/08
 */
 
 :- use_module(library(apply)).
@@ -68,7 +68,7 @@ gv_edge_statement(I, Dir, edge(From,To,Attrs)) -->
   gv_node_id(From), " ",
   gv_edge_operator(Dir), " ",
   gv_node_id(To), " ",
-  
+
   % We want `colorscheme/1` from the edges and
   % `directionality/1` from the graph.
   gv_attrs(edge, Attrs),
@@ -130,7 +130,7 @@ gv_node_statement(I, vertex(Id,Attrs)) -->
 
 
 
-%! gv_ranked_node_collection(+Indent:nonneg, Rank:???)// is det.
+%! gv_ranked_node_collection(+Indent:nonneg, Rank)// is det.
 
 gv_ranked_node_collection(I, Rank) -->
   indent(I),
@@ -138,20 +138,20 @@ gv_ranked_node_collection(I, Rank) -->
 
 gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
   "\n",
-  
+
   % The rank attribute.
   {NewI is I + 1},
   indent(NewI),
   gv_attr(subgraph, rank=same),
   ";\n",
-  
+
   % Vertice statements.
   '*'(
     gv_node_statement(NewI),
     [Rank_V_Term|Content_V_Terms],
     []
   ),
-  
+
   % We want to indent the closing curly brace.
   indent(I),
   "\n".
diff --git a/gv_attrs.log b/test/gv_attrs.log
similarity index 100%
rename from gv_attrs.log
rename to test/gv_attrs.log
 
```
 
<h2 id="117"> 117: 正在比较变动前 c6de3d1 和变动后 cab2231 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/gv_attrs.log b/gv_attrs.log
new file mode 100644
index 0000000..a9c6010
--- /dev/null
+++ b/gv_attrs.log
@@ -0,0 +1,169 @@
+assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')).
+assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')).
+assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')).
+assert(gv_attr('_background',[graph],[string],_,'','')).
+assert(gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only')).
+assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')).
+assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')).
+assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')).
+assert(gv_attr(bb,[graph],[rect],'','','write only')).
+assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')).
+assert(gv_attr(center,[graph],[bool],false,'','')).
+assert(gv_attr(charset,[graph],[string],'"UTF-8"','','')).
+assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')).
+assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')).
+assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')).
+assert(gv_attr(comment,[edge,graph,node],[string],'','','')).
+assert(gv_attr(compound,[graph],[bool],false,'','dot only')).
+assert(gv_attr(concentrate,[graph],[bool],false,'','')).
+assert(gv_attr(constraint,[edge],[bool],true,'','dot only')).
+assert(gv_attr(decorate,[edge],[bool],false,'','')).
+assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')).
+assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')).
+assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')).
+assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')).
+assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')).
+assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')).
+assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')).
+assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')).
+assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')).
+assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')).
+assert(gv_attr(fixedsize,[node],[bool,string],false,'','')).
+assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')).
+assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','')).
+assert(gv_attr(fontnames,[graph],[string],'','','svg only')).
+assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')).
+assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')).
+assert(gv_attr(forcelabels,[graph],[bool],true,'','')).
+assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')).
+assert(gv_attr(group,[node],[string],'','','dot only')).
+assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(head_lp,[edge],[point],'','','write only')).
+assert(gv_attr(headclip,[edge],[bool],true,'','')).
+assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(headlabel,[edge],[lblString],'','','')).
+assert(gv_attr(headport,[edge],[portPos],center,'','')).
+assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(height,[node],[double],'0.5','0.02','')).
+assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
+assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
+assert(gv_attr(image,[node],[string],'','','')).
+assert(gv_attr(imagepath,[graph],[string],'','','')).
+assert(gv_attr(imagescale,[node],[bool,string],false,'','')).
+assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')).
+assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','')).
+assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')).
+assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')).
+assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')).
+assert(gv_attr(labelfloat,[edge],[bool],false,'','')).
+assert(gv_attr(labelfontcolor,[edge],[color],black,'','')).
+assert(gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','')).
+assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')).
+assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(labeljust,[cluster,graph],[string],'"c"','','')).
+assert(gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','')).
+assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(landscape,[graph],[bool],false,'','')).
+assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')).
+assert(gv_attr(layerlistsep,[graph],[string],'","','','')).
+assert(gv_attr(layers,[graph],[layerList],'','','')).
+assert(gv_attr(layerselect,[graph],[layerRange],'','','')).
+assert(gv_attr(layersep,[graph],[string],'" :\\t"','','')).
+assert(gv_attr(layout,[graph],[string],'','','')).
+assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')).
+assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')).
+assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')).
+assert(gv_attr(lhead,[edge],[string],'','','dot only')).
+assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')).
+assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')).
+assert(gv_attr(ltail,[edge],[string],'','','dot only')).
+assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')).
+assert(gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','')).
+assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')).
+assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')).
+assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')).
+assert(gv_attr(minlen,[edge],[int],'1','0','dot only')).
+assert(gv_attr(mode,[graph],[string],major,'','neato only')).
+assert(gv_attr(model,[graph],[string],shortpath,'','neato only')).
+assert(gv_attr(mosek,[graph],[bool],false,'','neato only')).
+assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')).
+assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')).
+assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')).
+assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')).
+assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')).
+assert(gv_attr(ordering,[graph,node],[string],'','','dot only')).
+assert(gv_attr(orientation,[node],[double],'0.0','360.0','')).
+assert(gv_attr(orientation,[graph],[string],'','','')).
+assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')).
+assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')).
+assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')).
+assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')).
+assert(gv_attr(pack,[graph],[bool,int],false,'','')).
+assert(gv_attr(packmode,[graph],[packMode],node,'','')).
+assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')).
+assert(gv_attr(page,[graph],[double,point],'','','')).
+assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')).
+assert(gv_attr(pencolor,[cluster],[color],black,'','')).
+assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')).
+assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')).
+assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')).
+assert(gv_attr(pos,[edge,node],[point,splineType],'','','')).
+assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')).
+assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')).
+assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')).
+assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')).
+assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')).
+assert(gv_attr(ratio,[graph],[double,string],'','','')).
+assert(gv_attr(rects,[node],[rect],'','','write only')).
+assert(gv_attr(regular,[node],[bool],false,'','')).
+assert(gv_attr(remincross,[graph],[bool],true,'','dot only')).
+assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')).
+assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')).
+assert(gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only')).
+assert(gv_attr(rotate,[graph],[int],'0','','')).
+assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')).
+assert(gv_attr(samehead,[edge],[string],'','','dot only')).
+assert(gv_attr(sametail,[edge],[string],'','','dot only')).
+assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')).
+assert(gv_attr(scale,[graph],[double,point],'','','not dot')).
+assert(gv_attr(searchsize,[graph],[int],'30','','dot only')).
+assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')).
+assert(gv_attr(shape,[node],[shape],ellipse,'','')).
+assert(gv_attr(shapefile,[node],[string],'','','')).
+assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')).
+assert(gv_attr(sides,[node],[int],'4','0','')).
+assert(gv_attr(size,[graph],[double,point],'','','')).
+assert(gv_attr(skew,[node],[double],'0.0','-100.0','')).
+assert(gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only')).
+assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')).
+assert(gv_attr(splines,[graph],[bool,string],'','','')).
+assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')).
+assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')).
+assert(gv_attr(stylesheet,[graph],[string],'','','svg only')).
+assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(tail_lp,[edge],[point],'','','write only')).
+assert(gv_attr(tailclip,[edge],[bool],true,'','')).
+assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(taillabel,[edge],[lblString],'','','')).
+assert(gv_attr(tailport,[edge],[portPos],center,'','')).
+assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')).
+assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')).
+assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')).
+assert(gv_attr(vertices,[node],[pointList],'','','write only')).
+assert(gv_attr(viewport,[graph],[viewPort],'','','')).
+assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')).
+assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')).
+assert(gv_attr(width,[node],[double],'0.75','0.01','')).
+assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')).
+assert(gv_attr(xlabel,[edge,node],[lblString],'','','')).
+assert(gv_attr(xlp,[edge,node],[point],'','','write only')).
+assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')).
diff --git a/gv_color.log b/gv_color.log
new file mode 100644
index 0000000..23d6cdf
--- /dev/null
+++ b/gv_color.log
@@ -0,0 +1,802 @@
+assert(gv_color(x11,aliceblue)).
+assert(gv_color(x11,antiquewhite)).
+assert(gv_color(x11,antiquewhite1)).
+assert(gv_color(x11,antiquewhite2)).
+assert(gv_color(x11,antiquewhite3)).
+assert(gv_color(x11,antiquewhite4)).
+assert(gv_color(x11,aquamarine)).
+assert(gv_color(x11,aquamarine1)).
+assert(gv_color(x11,aquamarine2)).
+assert(gv_color(x11,aquamarine3)).
+assert(gv_color(x11,aquamarine4)).
+assert(gv_color(x11,azure)).
+assert(gv_color(x11,azure1)).
+assert(gv_color(x11,azure2)).
+assert(gv_color(x11,azure3)).
+assert(gv_color(x11,azure4)).
+assert(gv_color(x11,beige)).
+assert(gv_color(x11,bisque)).
+assert(gv_color(x11,bisque1)).
+assert(gv_color(x11,bisque2)).
+assert(gv_color(x11,bisque3)).
+assert(gv_color(x11,bisque4)).
+assert(gv_color(x11,black)).
+assert(gv_color(x11,blanchedalmond)).
+assert(gv_color(x11,blue)).
+assert(gv_color(x11,blue1)).
+assert(gv_color(x11,blue2)).
+assert(gv_color(x11,blue3)).
+assert(gv_color(x11,blue4)).
+assert(gv_color(x11,blueviolet)).
+assert(gv_color(x11,brown)).
+assert(gv_color(x11,brown1)).
+assert(gv_color(x11,brown2)).
+assert(gv_color(x11,brown3)).
+assert(gv_color(x11,brown4)).
+assert(gv_color(x11,burlywood)).
+assert(gv_color(x11,burlywood1)).
+assert(gv_color(x11,burlywood2)).
+assert(gv_color(x11,burlywood3)).
+assert(gv_color(x11,burlywood4)).
+assert(gv_color(x11,cadetblue)).
+assert(gv_color(x11,cadetblue1)).
+assert(gv_color(x11,cadetblue2)).
+assert(gv_color(x11,cadetblue3)).
+assert(gv_color(x11,cadetblue4)).
+assert(gv_color(x11,chartreuse)).
+assert(gv_color(x11,chartreuse1)).
+assert(gv_color(x11,chartreuse2)).
+assert(gv_color(x11,chartreuse3)).
+assert(gv_color(x11,chartreuse4)).
+assert(gv_color(x11,chocolate)).
+assert(gv_color(x11,chocolate1)).
+assert(gv_color(x11,chocolate2)).
+assert(gv_color(x11,chocolate3)).
+assert(gv_color(x11,chocolate4)).
+assert(gv_color(x11,coral)).
+assert(gv_color(x11,coral1)).
+assert(gv_color(x11,coral2)).
+assert(gv_color(x11,coral3)).
+assert(gv_color(x11,coral4)).
+assert(gv_color(x11,cornflowerblue)).
+assert(gv_color(x11,cornsilk)).
+assert(gv_color(x11,cornsilk1)).
+assert(gv_color(x11,cornsilk2)).
+assert(gv_color(x11,cornsilk3)).
+assert(gv_color(x11,cornsilk4)).
+assert(gv_color(x11,crimson)).
+assert(gv_color(x11,cyan)).
+assert(gv_color(x11,cyan1)).
+assert(gv_color(x11,cyan2)).
+assert(gv_color(x11,cyan3)).
+assert(gv_color(x11,cyan4)).
+assert(gv_color(x11,darkgoldenrod)).
+assert(gv_color(x11,darkgoldenrod1)).
+assert(gv_color(x11,darkgoldenrod2)).
+assert(gv_color(x11,darkgoldenrod3)).
+assert(gv_color(x11,darkgoldenrod4)).
+assert(gv_color(x11,darkgreen)).
+assert(gv_color(x11,darkkhaki)).
+assert(gv_color(x11,darkolivegreen)).
+assert(gv_color(x11,darkolivegreen1)).
+assert(gv_color(x11,darkolivegreen2)).
+assert(gv_color(x11,darkolivegreen3)).
+assert(gv_color(x11,darkolivegreen4)).
+assert(gv_color(x11,darkorange)).
+assert(gv_color(x11,darkorange1)).
+assert(gv_color(x11,darkorange2)).
+assert(gv_color(x11,darkorange3)).
+assert(gv_color(x11,darkorange4)).
+assert(gv_color(x11,darkorchid)).
+assert(gv_color(x11,darkorchid1)).
+assert(gv_color(x11,darkorchid2)).
+assert(gv_color(x11,darkorchid3)).
+assert(gv_color(x11,darkorchid4)).
+assert(gv_color(x11,darksalmon)).
+assert(gv_color(x11,darkseagreen)).
+assert(gv_color(x11,darkseagreen1)).
+assert(gv_color(x11,darkseagreen2)).
+assert(gv_color(x11,darkseagreen3)).
+assert(gv_color(x11,darkseagreen4)).
+assert(gv_color(x11,darkslateblue)).
+assert(gv_color(x11,darkslategray)).
+assert(gv_color(x11,darkslategray1)).
+assert(gv_color(x11,darkslategray2)).
+assert(gv_color(x11,darkslategray3)).
+assert(gv_color(x11,darkslategray4)).
+assert(gv_color(x11,darkslategrey)).
+assert(gv_color(x11,darkturquoise)).
+assert(gv_color(x11,darkviolet)).
+assert(gv_color(x11,deeppink)).
+assert(gv_color(x11,deeppink1)).
+assert(gv_color(x11,deeppink2)).
+assert(gv_color(x11,deeppink3)).
+assert(gv_color(x11,deeppink4)).
+assert(gv_color(x11,deepskyblue)).
+assert(gv_color(x11,deepskyblue1)).
+assert(gv_color(x11,deepskyblue2)).
+assert(gv_color(x11,deepskyblue3)).
+assert(gv_color(x11,deepskyblue4)).
+assert(gv_color(x11,dimgray)).
+assert(gv_color(x11,dimgrey)).
+assert(gv_color(x11,dodgerblue)).
+assert(gv_color(x11,dodgerblue1)).
+assert(gv_color(x11,dodgerblue2)).
+assert(gv_color(x11,dodgerblue3)).
+assert(gv_color(x11,dodgerblue4)).
+assert(gv_color(x11,firebrick)).
+assert(gv_color(x11,firebrick1)).
+assert(gv_color(x11,firebrick2)).
+assert(gv_color(x11,firebrick3)).
+assert(gv_color(x11,firebrick4)).
+assert(gv_color(x11,floralwhite)).
+assert(gv_color(x11,forestgreen)).
+assert(gv_color(x11,gainsboro)).
+assert(gv_color(x11,ghostwhite)).
+assert(gv_color(x11,gold)).
+assert(gv_color(x11,gold1)).
+assert(gv_color(x11,gold2)).
+assert(gv_color(x11,gold3)).
+assert(gv_color(x11,gold4)).
+assert(gv_color(x11,goldenrod)).
+assert(gv_color(x11,goldenrod1)).
+assert(gv_color(x11,goldenrod2)).
+assert(gv_color(x11,goldenrod3)).
+assert(gv_color(x11,goldenrod4)).
+assert(gv_color(x11,gray)).
+assert(gv_color(x11,gray0)).
+assert(gv_color(x11,gray1)).
+assert(gv_color(x11,gray10)).
+assert(gv_color(x11,gray100)).
+assert(gv_color(x11,gray11)).
+assert(gv_color(x11,gray12)).
+assert(gv_color(x11,gray13)).
+assert(gv_color(x11,gray14)).
+assert(gv_color(x11,gray15)).
+assert(gv_color(x11,gray16)).
+assert(gv_color(x11,gray17)).
+assert(gv_color(x11,gray18)).
+assert(gv_color(x11,gray19)).
+assert(gv_color(x11,gray2)).
+assert(gv_color(x11,gray20)).
+assert(gv_color(x11,gray21)).
+assert(gv_color(x11,gray22)).
+assert(gv_color(x11,gray23)).
+assert(gv_color(x11,gray24)).
+assert(gv_color(x11,gray25)).
+assert(gv_color(x11,gray26)).
+assert(gv_color(x11,gray27)).
+assert(gv_color(x11,gray28)).
+assert(gv_color(x11,gray29)).
+assert(gv_color(x11,gray3)).
+assert(gv_color(x11,gray30)).
+assert(gv_color(x11,gray31)).
+assert(gv_color(x11,gray32)).
+assert(gv_color(x11,gray33)).
+assert(gv_color(x11,gray34)).
+assert(gv_color(x11,gray35)).
+assert(gv_color(x11,gray36)).
+assert(gv_color(x11,gray37)).
+assert(gv_color(x11,gray38)).
+assert(gv_color(x11,gray39)).
+assert(gv_color(x11,gray4)).
+assert(gv_color(x11,gray40)).
+assert(gv_color(x11,gray41)).
+assert(gv_color(x11,gray42)).
+assert(gv_color(x11,gray43)).
+assert(gv_color(x11,gray44)).
+assert(gv_color(x11,gray45)).
+assert(gv_color(x11,gray46)).
+assert(gv_color(x11,gray47)).
+assert(gv_color(x11,gray48)).
+assert(gv_color(x11,gray49)).
+assert(gv_color(x11,gray5)).
+assert(gv_color(x11,gray50)).
+assert(gv_color(x11,gray51)).
+assert(gv_color(x11,gray52)).
+assert(gv_color(x11,gray53)).
+assert(gv_color(x11,gray54)).
+assert(gv_color(x11,gray55)).
+assert(gv_color(x11,gray56)).
+assert(gv_color(x11,gray57)).
+assert(gv_color(x11,gray58)).
+assert(gv_color(x11,gray59)).
+assert(gv_color(x11,gray6)).
+assert(gv_color(x11,gray60)).
+assert(gv_color(x11,gray61)).
+assert(gv_color(x11,gray62)).
+assert(gv_color(x11,gray63)).
+assert(gv_color(x11,gray64)).
+assert(gv_color(x11,gray65)).
+assert(gv_color(x11,gray66)).
+assert(gv_color(x11,gray67)).
+assert(gv_color(x11,gray68)).
+assert(gv_color(x11,gray69)).
+assert(gv_color(x11,gray7)).
+assert(gv_color(x11,gray70)).
+assert(gv_color(x11,gray71)).
+assert(gv_color(x11,gray72)).
+assert(gv_color(x11,gray73)).
+assert(gv_color(x11,gray74)).
+assert(gv_color(x11,gray75)).
+assert(gv_color(x11,gray76)).
+assert(gv_color(x11,gray77)).
+assert(gv_color(x11,gray78)).
+assert(gv_color(x11,gray79)).
+assert(gv_color(x11,gray8)).
+assert(gv_color(x11,gray80)).
+assert(gv_color(x11,gray81)).
+assert(gv_color(x11,gray82)).
+assert(gv_color(x11,gray83)).
+assert(gv_color(x11,gray84)).
+assert(gv_color(x11,gray85)).
+assert(gv_color(x11,gray86)).
+assert(gv_color(x11,gray87)).
+assert(gv_color(x11,gray88)).
+assert(gv_color(x11,gray89)).
+assert(gv_color(x11,gray9)).
+assert(gv_color(x11,gray90)).
+assert(gv_color(x11,gray91)).
+assert(gv_color(x11,gray92)).
+assert(gv_color(x11,gray93)).
+assert(gv_color(x11,gray94)).
+assert(gv_color(x11,gray95)).
+assert(gv_color(x11,gray96)).
+assert(gv_color(x11,gray97)).
+assert(gv_color(x11,gray98)).
+assert(gv_color(x11,gray99)).
+assert(gv_color(x11,green)).
+assert(gv_color(x11,green1)).
+assert(gv_color(x11,green2)).
+assert(gv_color(x11,green3)).
+assert(gv_color(x11,green4)).
+assert(gv_color(x11,greenyellow)).
+assert(gv_color(x11,grey)).
+assert(gv_color(x11,grey0)).
+assert(gv_color(x11,grey1)).
+assert(gv_color(x11,grey10)).
+assert(gv_color(x11,grey100)).
+assert(gv_color(x11,grey11)).
+assert(gv_color(x11,grey12)).
+assert(gv_color(x11,grey13)).
+assert(gv_color(x11,grey14)).
+assert(gv_color(x11,grey15)).
+assert(gv_color(x11,grey16)).
+assert(gv_color(x11,grey17)).
+assert(gv_color(x11,grey18)).
+assert(gv_color(x11,grey19)).
+assert(gv_color(x11,grey2)).
+assert(gv_color(x11,grey20)).
+assert(gv_color(x11,grey21)).
+assert(gv_color(x11,grey22)).
+assert(gv_color(x11,grey23)).
+assert(gv_color(x11,grey24)).
+assert(gv_color(x11,grey25)).
+assert(gv_color(x11,grey26)).
+assert(gv_color(x11,grey27)).
+assert(gv_color(x11,grey28)).
+assert(gv_color(x11,grey29)).
+assert(gv_color(x11,grey3)).
+assert(gv_color(x11,grey30)).
+assert(gv_color(x11,grey31)).
+assert(gv_color(x11,grey32)).
+assert(gv_color(x11,grey33)).
+assert(gv_color(x11,grey34)).
+assert(gv_color(x11,grey35)).
+assert(gv_color(x11,grey36)).
+assert(gv_color(x11,grey37)).
+assert(gv_color(x11,grey38)).
+assert(gv_color(x11,grey39)).
+assert(gv_color(x11,grey4)).
+assert(gv_color(x11,grey40)).
+assert(gv_color(x11,grey41)).
+assert(gv_color(x11,grey42)).
+assert(gv_color(x11,grey43)).
+assert(gv_color(x11,grey44)).
+assert(gv_color(x11,grey45)).
+assert(gv_color(x11,grey46)).
+assert(gv_color(x11,grey47)).
+assert(gv_color(x11,grey48)).
+assert(gv_color(x11,grey49)).
+assert(gv_color(x11,grey5)).
+assert(gv_color(x11,grey50)).
+assert(gv_color(x11,grey51)).
+assert(gv_color(x11,grey52)).
+assert(gv_color(x11,grey53)).
+assert(gv_color(x11,grey54)).
+assert(gv_color(x11,grey55)).
+assert(gv_color(x11,grey56)).
+assert(gv_color(x11,grey57)).
+assert(gv_color(x11,grey58)).
+assert(gv_color(x11,grey59)).
+assert(gv_color(x11,grey6)).
+assert(gv_color(x11,grey60)).
+assert(gv_color(x11,grey61)).
+assert(gv_color(x11,grey62)).
+assert(gv_color(x11,grey63)).
+assert(gv_color(x11,grey64)).
+assert(gv_color(x11,grey65)).
+assert(gv_color(x11,grey66)).
+assert(gv_color(x11,grey67)).
+assert(gv_color(x11,grey68)).
+assert(gv_color(x11,grey69)).
+assert(gv_color(x11,grey7)).
+assert(gv_color(x11,grey70)).
+assert(gv_color(x11,grey71)).
+assert(gv_color(x11,grey72)).
+assert(gv_color(x11,grey73)).
+assert(gv_color(x11,grey74)).
+assert(gv_color(x11,grey75)).
+assert(gv_color(x11,grey76)).
+assert(gv_color(x11,grey77)).
+assert(gv_color(x11,grey78)).
+assert(gv_color(x11,grey79)).
+assert(gv_color(x11,grey8)).
+assert(gv_color(x11,grey80)).
+assert(gv_color(x11,grey81)).
+assert(gv_color(x11,grey82)).
+assert(gv_color(x11,grey83)).
+assert(gv_color(x11,grey84)).
+assert(gv_color(x11,grey85)).
+assert(gv_color(x11,grey86)).
+assert(gv_color(x11,grey87)).
+assert(gv_color(x11,grey88)).
+assert(gv_color(x11,grey89)).
+assert(gv_color(x11,grey9)).
+assert(gv_color(x11,grey90)).
+assert(gv_color(x11,grey91)).
+assert(gv_color(x11,grey92)).
+assert(gv_color(x11,grey93)).
+assert(gv_color(x11,grey94)).
+assert(gv_color(x11,grey95)).
+assert(gv_color(x11,grey96)).
+assert(gv_color(x11,grey97)).
+assert(gv_color(x11,grey98)).
+assert(gv_color(x11,grey99)).
+assert(gv_color(x11,honeydew)).
+assert(gv_color(x11,honeydew1)).
+assert(gv_color(x11,honeydew2)).
+assert(gv_color(x11,honeydew3)).
+assert(gv_color(x11,honeydew4)).
+assert(gv_color(x11,hotpink)).
+assert(gv_color(x11,hotpink1)).
+assert(gv_color(x11,hotpink2)).
+assert(gv_color(x11,hotpink3)).
+assert(gv_color(x11,hotpink4)).
+assert(gv_color(x11,indianred)).
+assert(gv_color(x11,indianred1)).
+assert(gv_color(x11,indianred2)).
+assert(gv_color(x11,indianred3)).
+assert(gv_color(x11,indianred4)).
+assert(gv_color(x11,indigo)).
+assert(gv_color(x11,invis)).
+assert(gv_color(x11,ivory)).
+assert(gv_color(x11,ivory1)).
+assert(gv_color(x11,ivory2)).
+assert(gv_color(x11,ivory3)).
+assert(gv_color(x11,ivory4)).
+assert(gv_color(x11,khaki)).
+assert(gv_color(x11,khaki1)).
+assert(gv_color(x11,khaki2)).
+assert(gv_color(x11,khaki3)).
+assert(gv_color(x11,khaki4)).
+assert(gv_color(x11,lavender)).
+assert(gv_color(x11,lavenderblush)).
+assert(gv_color(x11,lavenderblush1)).
+assert(gv_color(x11,lavenderblush2)).
+assert(gv_color(x11,lavenderblush3)).
+assert(gv_color(x11,lavenderblush4)).
+assert(gv_color(x11,lawngreen)).
+assert(gv_color(x11,lemonchiffon)).
+assert(gv_color(x11,lemonchiffon1)).
+assert(gv_color(x11,lemonchiffon2)).
+assert(gv_color(x11,lemonchiffon3)).
+assert(gv_color(x11,lemonchiffon4)).
+assert(gv_color(x11,lightblue)).
+assert(gv_color(x11,lightblue1)).
+assert(gv_color(x11,lightblue2)).
+assert(gv_color(x11,lightblue3)).
+assert(gv_color(x11,lightblue4)).
+assert(gv_color(x11,lightcoral)).
+assert(gv_color(x11,lightcyan)).
+assert(gv_color(x11,lightcyan1)).
+assert(gv_color(x11,lightcyan2)).
+assert(gv_color(x11,lightcyan3)).
+assert(gv_color(x11,lightcyan4)).
+assert(gv_color(x11,lightgoldenrod)).
+assert(gv_color(x11,lightgoldenrod1)).
+assert(gv_color(x11,lightgoldenrod2)).
+assert(gv_color(x11,lightgoldenrod3)).
+assert(gv_color(x11,lightgoldenrod4)).
+assert(gv_color(x11,lightgoldenrodyellow)).
+assert(gv_color(x11,lightgray)).
+assert(gv_color(x11,lightgrey)).
+assert(gv_color(x11,lightpink)).
+assert(gv_color(x11,lightpink1)).
+assert(gv_color(x11,lightpink2)).
+assert(gv_color(x11,lightpink3)).
+assert(gv_color(x11,lightpink4)).
+assert(gv_color(x11,lightsalmon)).
+assert(gv_color(x11,lightsalmon1)).
+assert(gv_color(x11,lightsalmon2)).
+assert(gv_color(x11,lightsalmon3)).
+assert(gv_color(x11,lightsalmon4)).
+assert(gv_color(x11,lightseagreen)).
+assert(gv_color(x11,lightskyblue)).
+assert(gv_color(x11,lightskyblue1)).
+assert(gv_color(x11,lightskyblue2)).
+assert(gv_color(x11,lightskyblue3)).
+assert(gv_color(x11,lightskyblue4)).
+assert(gv_color(x11,lightslateblue)).
+assert(gv_color(x11,lightslategray)).
+assert(gv_color(x11,lightslategrey)).
+assert(gv_color(x11,lightsteelblue)).
+assert(gv_color(x11,lightsteelblue1)).
+assert(gv_color(x11,lightsteelblue2)).
+assert(gv_color(x11,lightsteelblue3)).
+assert(gv_color(x11,lightsteelblue4)).
+assert(gv_color(x11,lightyellow)).
+assert(gv_color(x11,lightyellow1)).
+assert(gv_color(x11,lightyellow2)).
+assert(gv_color(x11,lightyellow3)).
+assert(gv_color(x11,lightyellow4)).
+assert(gv_color(x11,limegreen)).
+assert(gv_color(x11,linen)).
+assert(gv_color(x11,magenta)).
+assert(gv_color(x11,magenta1)).
+assert(gv_color(x11,magenta2)).
+assert(gv_color(x11,magenta3)).
+assert(gv_color(x11,magenta4)).
+assert(gv_color(x11,maroon)).
+assert(gv_color(x11,maroon1)).
+assert(gv_color(x11,maroon2)).
+assert(gv_color(x11,maroon3)).
+assert(gv_color(x11,maroon4)).
+assert(gv_color(x11,mediumaquamarine)).
+assert(gv_color(x11,mediumblue)).
+assert(gv_color(x11,mediumorchid)).
+assert(gv_color(x11,mediumorchid1)).
+assert(gv_color(x11,mediumorchid2)).
+assert(gv_color(x11,mediumorchid3)).
+assert(gv_color(x11,mediumorchid4)).
+assert(gv_color(x11,mediumpurple)).
+assert(gv_color(x11,mediumpurple1)).
+assert(gv_color(x11,mediumpurple2)).
+assert(gv_color(x11,mediumpurple3)).
+assert(gv_color(x11,mediumpurple4)).
+assert(gv_color(x11,mediumseagreen)).
+assert(gv_color(x11,mediumslateblue)).
+assert(gv_color(x11,mediumspringgreen)).
+assert(gv_color(x11,mediumturquoise)).
+assert(gv_color(x11,mediumvioletred)).
+assert(gv_color(x11,midnightblue)).
+assert(gv_color(x11,mintcream)).
+assert(gv_color(x11,mistyrose)).
+assert(gv_color(x11,mistyrose1)).
+assert(gv_color(x11,mistyrose2)).
+assert(gv_color(x11,mistyrose3)).
+assert(gv_color(x11,mistyrose4)).
+assert(gv_color(x11,moccasin)).
+assert(gv_color(x11,navajowhite)).
+assert(gv_color(x11,navajowhite1)).
+assert(gv_color(x11,navajowhite2)).
+assert(gv_color(x11,navajowhite3)).
+assert(gv_color(x11,navajowhite4)).
+assert(gv_color(x11,navy)).
+assert(gv_color(x11,navyblue)).
+assert(gv_color(x11,none)).
+assert(gv_color(x11,oldlace)).
+assert(gv_color(x11,olivedrab)).
+assert(gv_color(x11,olivedrab1)).
+assert(gv_color(x11,olivedrab2)).
+assert(gv_color(x11,olivedrab3)).
+assert(gv_color(x11,olivedrab4)).
+assert(gv_color(x11,orange)).
+assert(gv_color(x11,orange1)).
+assert(gv_color(x11,orange2)).
+assert(gv_color(x11,orange3)).
+assert(gv_color(x11,orange4)).
+assert(gv_color(x11,orangered)).
+assert(gv_color(x11,orangered1)).
+assert(gv_color(x11,orangered2)).
+assert(gv_color(x11,orangered3)).
+assert(gv_color(x11,orangered4)).
+assert(gv_color(x11,orchid)).
+assert(gv_color(x11,orchid1)).
+assert(gv_color(x11,orchid2)).
+assert(gv_color(x11,orchid3)).
+assert(gv_color(x11,orchid4)).
+assert(gv_color(x11,palegoldenrod)).
+assert(gv_color(x11,palegreen)).
+assert(gv_color(x11,palegreen1)).
+assert(gv_color(x11,palegreen2)).
+assert(gv_color(x11,palegreen3)).
+assert(gv_color(x11,palegreen4)).
+assert(gv_color(x11,paleturquoise)).
+assert(gv_color(x11,paleturquoise1)).
+assert(gv_color(x11,paleturquoise2)).
+assert(gv_color(x11,paleturquoise3)).
+assert(gv_color(x11,paleturquoise4)).
+assert(gv_color(x11,palevioletred)).
+assert(gv_color(x11,palevioletred1)).
+assert(gv_color(x11,palevioletred2)).
+assert(gv_color(x11,palevioletred3)).
+assert(gv_color(x11,palevioletred4)).
+assert(gv_color(x11,papayawhip)).
+assert(gv_color(x11,peachpuff)).
+assert(gv_color(x11,peachpuff1)).
+assert(gv_color(x11,peachpuff2)).
+assert(gv_color(x11,peachpuff3)).
+assert(gv_color(x11,peachpuff4)).
+assert(gv_color(x11,peru)).
+assert(gv_color(x11,pink)).
+assert(gv_color(x11,pink1)).
+assert(gv_color(x11,pink2)).
+assert(gv_color(x11,pink3)).
+assert(gv_color(x11,pink4)).
+assert(gv_color(x11,plum)).
+assert(gv_color(x11,plum1)).
+assert(gv_color(x11,plum2)).
+assert(gv_color(x11,plum3)).
+assert(gv_color(x11,plum4)).
+assert(gv_color(x11,powderblue)).
+assert(gv_color(x11,purple)).
+assert(gv_color(x11,purple1)).
+assert(gv_color(x11,purple2)).
+assert(gv_color(x11,purple3)).
+assert(gv_color(x11,purple4)).
+assert(gv_color(x11,red)).
+assert(gv_color(x11,red1)).
+assert(gv_color(x11,red2)).
+assert(gv_color(x11,red3)).
+assert(gv_color(x11,red4)).
+assert(gv_color(x11,rosybrown)).
+assert(gv_color(x11,rosybrown1)).
+assert(gv_color(x11,rosybrown2)).
+assert(gv_color(x11,rosybrown3)).
+assert(gv_color(x11,rosybrown4)).
+assert(gv_color(x11,royalblue)).
+assert(gv_color(x11,royalblue1)).
+assert(gv_color(x11,royalblue2)).
+assert(gv_color(x11,royalblue3)).
+assert(gv_color(x11,royalblue4)).
+assert(gv_color(x11,saddlebrown)).
+assert(gv_color(x11,salmon)).
+assert(gv_color(x11,salmon1)).
+assert(gv_color(x11,salmon2)).
+assert(gv_color(x11,salmon3)).
+assert(gv_color(x11,salmon4)).
+assert(gv_color(x11,sandybrown)).
+assert(gv_color(x11,seagreen)).
+assert(gv_color(x11,seagreen1)).
+assert(gv_color(x11,seagreen2)).
+assert(gv_color(x11,seagreen3)).
+assert(gv_color(x11,seagreen4)).
+assert(gv_color(x11,seashell)).
+assert(gv_color(x11,seashell1)).
+assert(gv_color(x11,seashell2)).
+assert(gv_color(x11,seashell3)).
+assert(gv_color(x11,seashell4)).
+assert(gv_color(x11,sienna)).
+assert(gv_color(x11,sienna1)).
+assert(gv_color(x11,sienna2)).
+assert(gv_color(x11,sienna3)).
+assert(gv_color(x11,sienna4)).
+assert(gv_color(x11,skyblue)).
+assert(gv_color(x11,skyblue1)).
+assert(gv_color(x11,skyblue2)).
+assert(gv_color(x11,skyblue3)).
+assert(gv_color(x11,skyblue4)).
+assert(gv_color(x11,slateblue)).
+assert(gv_color(x11,slateblue1)).
+assert(gv_color(x11,slateblue2)).
+assert(gv_color(x11,slateblue3)).
+assert(gv_color(x11,slateblue4)).
+assert(gv_color(x11,slategray)).
+assert(gv_color(x11,slategray1)).
+assert(gv_color(x11,slategray2)).
+assert(gv_color(x11,slategray3)).
+assert(gv_color(x11,slategray4)).
+assert(gv_color(x11,slategrey)).
+assert(gv_color(x11,snow)).
+assert(gv_color(x11,snow1)).
+assert(gv_color(x11,snow2)).
+assert(gv_color(x11,snow3)).
+assert(gv_color(x11,snow4)).
+assert(gv_color(x11,springgreen)).
+assert(gv_color(x11,springgreen1)).
+assert(gv_color(x11,springgreen2)).
+assert(gv_color(x11,springgreen3)).
+assert(gv_color(x11,springgreen4)).
+assert(gv_color(x11,steelblue)).
+assert(gv_color(x11,steelblue1)).
+assert(gv_color(x11,steelblue2)).
+assert(gv_color(x11,steelblue3)).
+assert(gv_color(x11,steelblue4)).
+assert(gv_color(x11,tan)).
+assert(gv_color(x11,tan1)).
+assert(gv_color(x11,tan2)).
+assert(gv_color(x11,tan3)).
+assert(gv_color(x11,tan4)).
+assert(gv_color(x11,thistle)).
+assert(gv_color(x11,thistle1)).
+assert(gv_color(x11,thistle2)).
+assert(gv_color(x11,thistle3)).
+assert(gv_color(x11,thistle4)).
+assert(gv_color(x11,tomato)).
+assert(gv_color(x11,tomato1)).
+assert(gv_color(x11,tomato2)).
+assert(gv_color(x11,tomato3)).
+assert(gv_color(x11,tomato4)).
+assert(gv_color(x11,transparent)).
+assert(gv_color(x11,turquoise)).
+assert(gv_color(x11,turquoise1)).
+assert(gv_color(x11,turquoise2)).
+assert(gv_color(x11,turquoise3)).
+assert(gv_color(x11,turquoise4)).
+assert(gv_color(x11,violet)).
+assert(gv_color(x11,violetred)).
+assert(gv_color(x11,violetred1)).
+assert(gv_color(x11,violetred2)).
+assert(gv_color(x11,violetred3)).
+assert(gv_color(x11,violetred4)).
+assert(gv_color(x11,wheat)).
+assert(gv_color(x11,wheat1)).
+assert(gv_color(x11,wheat2)).
+assert(gv_color(x11,wheat3)).
+assert(gv_color(x11,wheat4)).
+assert(gv_color(x11,white)).
+assert(gv_color(x11,whitesmoke)).
+assert(gv_color(x11,yellow)).
+assert(gv_color(x11,yellow1)).
+assert(gv_color(x11,yellow2)).
+assert(gv_color(x11,yellow3)).
+assert(gv_color(x11,yellow4)).
+assert(gv_color(x11,yellowgreen)).
+assert(gv_color(svg,aliceblue)).
+assert(gv_color(svg,antiquewhite)).
+assert(gv_color(svg,aqua)).
+assert(gv_color(svg,aquamarine)).
+assert(gv_color(svg,azure)).
+assert(gv_color(svg,beige)).
+assert(gv_color(svg,bisque)).
+assert(gv_color(svg,black)).
+assert(gv_color(svg,blanchedalmond)).
+assert(gv_color(svg,blue)).
+assert(gv_color(svg,blueviolet)).
+assert(gv_color(svg,brown)).
+assert(gv_color(svg,burlywood)).
+assert(gv_color(svg,cadetblue)).
+assert(gv_color(svg,chartreuse)).
+assert(gv_color(svg,chocolate)).
+assert(gv_color(svg,coral)).
+assert(gv_color(svg,cornflowerblue)).
+assert(gv_color(svg,cornsilk)).
+assert(gv_color(svg,crimson)).
+assert(gv_color(svg,cyan)).
+assert(gv_color(svg,darkblue)).
+assert(gv_color(svg,darkcyan)).
+assert(gv_color(svg,darkgoldenrod)).
+assert(gv_color(svg,darkgray)).
+assert(gv_color(svg,darkgreen)).
+assert(gv_color(svg,darkgrey)).
+assert(gv_color(svg,darkkhaki)).
+assert(gv_color(svg,darkmagenta)).
+assert(gv_color(svg,darkolivegreen)).
+assert(gv_color(svg,darkorange)).
+assert(gv_color(svg,darkorchid)).
+assert(gv_color(svg,darkred)).
+assert(gv_color(svg,darksalmon)).
+assert(gv_color(svg,darkseagreen)).
+assert(gv_color(svg,darkslateblue)).
+assert(gv_color(svg,darkslategray)).
+assert(gv_color(svg,darkslategrey)).
+assert(gv_color(svg,darkturquoise)).
+assert(gv_color(svg,darkviolet)).
+assert(gv_color(svg,deeppink)).
+assert(gv_color(svg,deepskyblue)).
+assert(gv_color(svg,dimgray)).
+assert(gv_color(svg,dimgrey)).
+assert(gv_color(svg,dodgerblue)).
+assert(gv_color(svg,firebrick)).
+assert(gv_color(svg,floralwhite)).
+assert(gv_color(svg,forestgreen)).
+assert(gv_color(svg,fuchsia)).
+assert(gv_color(svg,gainsboro)).
+assert(gv_color(svg,ghostwhite)).
+assert(gv_color(svg,gold)).
+assert(gv_color(svg,goldenrod)).
+assert(gv_color(svg,gray)).
+assert(gv_color(svg,grey)).
+assert(gv_color(svg,green)).
+assert(gv_color(svg,greenyellow)).
+assert(gv_color(svg,honeydew)).
+assert(gv_color(svg,hotpink)).
+assert(gv_color(svg,indianred)).
+assert(gv_color(svg,indigo)).
+assert(gv_color(svg,ivory)).
+assert(gv_color(svg,khaki)).
+assert(gv_color(svg,lavender)).
+assert(gv_color(svg,lavenderblush)).
+assert(gv_color(svg,lawngreen)).
+assert(gv_color(svg,lemonchiffon)).
+assert(gv_color(svg,lightblue)).
+assert(gv_color(svg,lightcoral)).
+assert(gv_color(svg,lightcyan)).
+assert(gv_color(svg,lightgoldenrodyellow)).
+assert(gv_color(svg,lightgray)).
+assert(gv_color(svg,lightgreen)).
+assert(gv_color(svg,lightgrey)).
+assert(gv_color(svg,lightpink)).
+assert(gv_color(svg,lightsalmon)).
+assert(gv_color(svg,lightseagreen)).
+assert(gv_color(svg,lightskyblue)).
+assert(gv_color(svg,lightslategray)).
+assert(gv_color(svg,lightslategrey)).
+assert(gv_color(svg,lightsteelblue)).
+assert(gv_color(svg,lightyellow)).
+assert(gv_color(svg,lime)).
+assert(gv_color(svg,limegreen)).
+assert(gv_color(svg,linen)).
+assert(gv_color(svg,magenta)).
+assert(gv_color(svg,maroon)).
+assert(gv_color(svg,mediumaquamarine)).
+assert(gv_color(svg,mediumblue)).
+assert(gv_color(svg,mediumorchid)).
+assert(gv_color(svg,mediumpurple)).
+assert(gv_color(svg,mediumseagreen)).
+assert(gv_color(svg,mediumslateblue)).
+assert(gv_color(svg,mediumspringgreen)).
+assert(gv_color(svg,mediumturquoise)).
+assert(gv_color(svg,mediumvioletred)).
+assert(gv_color(svg,midnightblue)).
+assert(gv_color(svg,mintcream)).
+assert(gv_color(svg,mistyrose)).
+assert(gv_color(svg,moccasin)).
+assert(gv_color(svg,navajowhite)).
+assert(gv_color(svg,navy)).
+assert(gv_color(svg,oldlace)).
+assert(gv_color(svg,olive)).
+assert(gv_color(svg,olivedrab)).
+assert(gv_color(svg,orange)).
+assert(gv_color(svg,orangered)).
+assert(gv_color(svg,orchid)).
+assert(gv_color(svg,palegoldenrod)).
+assert(gv_color(svg,palegreen)).
+assert(gv_color(svg,paleturquoise)).
+assert(gv_color(svg,palevioletred)).
+assert(gv_color(svg,papayawhip)).
+assert(gv_color(svg,peachpuff)).
+assert(gv_color(svg,peru)).
+assert(gv_color(svg,pink)).
+assert(gv_color(svg,plum)).
+assert(gv_color(svg,powderblue)).
+assert(gv_color(svg,purple)).
+assert(gv_color(svg,red)).
+assert(gv_color(svg,rosybrown)).
+assert(gv_color(svg,royalblue)).
+assert(gv_color(svg,saddlebrown)).
+assert(gv_color(svg,salmon)).
+assert(gv_color(svg,sandybrown)).
+assert(gv_color(svg,seagreen)).
+assert(gv_color(svg,seashell)).
+assert(gv_color(svg,sienna)).
+assert(gv_color(svg,silver)).
+assert(gv_color(svg,skyblue)).
+assert(gv_color(svg,slateblue)).
+assert(gv_color(svg,slategray)).
+assert(gv_color(svg,slategrey)).
+assert(gv_color(svg,snow)).
+assert(gv_color(svg,springgreen)).
+assert(gv_color(svg,steelblue)).
+assert(gv_color(svg,tan)).
+assert(gv_color(svg,teal)).
+assert(gv_color(svg,thistle)).
+assert(gv_color(svg,tomato)).
+assert(gv_color(svg,turquoise)).
+assert(gv_color(svg,violet)).
+assert(gv_color(svg,wheat)).
+assert(gv_color(svg,white)).
+assert(gv_color(svg,whitesmoke)).
+assert(gv_color(svg,yellow)).
+assert(gv_color(svg,yellowgreen)).
 
```
 
<h2 id="118"> 118: 正在比较变动前 cab2231 和变动后 008c5e6 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_attrs.log b/prolog/gv/gv_attrs.log
new file mode 100644
index 0000000..a9c6010
--- /dev/null
+++ b/prolog/gv/gv_attrs.log
@@ -0,0 +1,169 @@
+assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')).
+assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')).
+assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')).
+assert(gv_attr('_background',[graph],[string],_,'','')).
+assert(gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only')).
+assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')).
+assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')).
+assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')).
+assert(gv_attr(bb,[graph],[rect],'','','write only')).
+assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')).
+assert(gv_attr(center,[graph],[bool],false,'','')).
+assert(gv_attr(charset,[graph],[string],'"UTF-8"','','')).
+assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')).
+assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')).
+assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')).
+assert(gv_attr(comment,[edge,graph,node],[string],'','','')).
+assert(gv_attr(compound,[graph],[bool],false,'','dot only')).
+assert(gv_attr(concentrate,[graph],[bool],false,'','')).
+assert(gv_attr(constraint,[edge],[bool],true,'','dot only')).
+assert(gv_attr(decorate,[edge],[bool],false,'','')).
+assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')).
+assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')).
+assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')).
+assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')).
+assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')).
+assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')).
+assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')).
+assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')).
+assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')).
+assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')).
+assert(gv_attr(fixedsize,[node],[bool,string],false,'','')).
+assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')).
+assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','')).
+assert(gv_attr(fontnames,[graph],[string],'','','svg only')).
+assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')).
+assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')).
+assert(gv_attr(forcelabels,[graph],[bool],true,'','')).
+assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')).
+assert(gv_attr(group,[node],[string],'','','dot only')).
+assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(head_lp,[edge],[point],'','','write only')).
+assert(gv_attr(headclip,[edge],[bool],true,'','')).
+assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(headlabel,[edge],[lblString],'','','')).
+assert(gv_attr(headport,[edge],[portPos],center,'','')).
+assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(height,[node],[double],'0.5','0.02','')).
+assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
+assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
+assert(gv_attr(image,[node],[string],'','','')).
+assert(gv_attr(imagepath,[graph],[string],'','','')).
+assert(gv_attr(imagescale,[node],[bool,string],false,'','')).
+assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')).
+assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','')).
+assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')).
+assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')).
+assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')).
+assert(gv_attr(labelfloat,[edge],[bool],false,'','')).
+assert(gv_attr(labelfontcolor,[edge],[color],black,'','')).
+assert(gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','')).
+assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')).
+assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(labeljust,[cluster,graph],[string],'"c"','','')).
+assert(gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','')).
+assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(landscape,[graph],[bool],false,'','')).
+assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')).
+assert(gv_attr(layerlistsep,[graph],[string],'","','','')).
+assert(gv_attr(layers,[graph],[layerList],'','','')).
+assert(gv_attr(layerselect,[graph],[layerRange],'','','')).
+assert(gv_attr(layersep,[graph],[string],'" :\\t"','','')).
+assert(gv_attr(layout,[graph],[string],'','','')).
+assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')).
+assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')).
+assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')).
+assert(gv_attr(lhead,[edge],[string],'','','dot only')).
+assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')).
+assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')).
+assert(gv_attr(ltail,[edge],[string],'','','dot only')).
+assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')).
+assert(gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','')).
+assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')).
+assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')).
+assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')).
+assert(gv_attr(minlen,[edge],[int],'1','0','dot only')).
+assert(gv_attr(mode,[graph],[string],major,'','neato only')).
+assert(gv_attr(model,[graph],[string],shortpath,'','neato only')).
+assert(gv_attr(mosek,[graph],[bool],false,'','neato only')).
+assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')).
+assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')).
+assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')).
+assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')).
+assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')).
+assert(gv_attr(ordering,[graph,node],[string],'','','dot only')).
+assert(gv_attr(orientation,[node],[double],'0.0','360.0','')).
+assert(gv_attr(orientation,[graph],[string],'','','')).
+assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')).
+assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')).
+assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')).
+assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')).
+assert(gv_attr(pack,[graph],[bool,int],false,'','')).
+assert(gv_attr(packmode,[graph],[packMode],node,'','')).
+assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')).
+assert(gv_attr(page,[graph],[double,point],'','','')).
+assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')).
+assert(gv_attr(pencolor,[cluster],[color],black,'','')).
+assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')).
+assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')).
+assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')).
+assert(gv_attr(pos,[edge,node],[point,splineType],'','','')).
+assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')).
+assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')).
+assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')).
+assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')).
+assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')).
+assert(gv_attr(ratio,[graph],[double,string],'','','')).
+assert(gv_attr(rects,[node],[rect],'','','write only')).
+assert(gv_attr(regular,[node],[bool],false,'','')).
+assert(gv_attr(remincross,[graph],[bool],true,'','dot only')).
+assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')).
+assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')).
+assert(gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only')).
+assert(gv_attr(rotate,[graph],[int],'0','','')).
+assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')).
+assert(gv_attr(samehead,[edge],[string],'','','dot only')).
+assert(gv_attr(sametail,[edge],[string],'','','dot only')).
+assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')).
+assert(gv_attr(scale,[graph],[double,point],'','','not dot')).
+assert(gv_attr(searchsize,[graph],[int],'30','','dot only')).
+assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')).
+assert(gv_attr(shape,[node],[shape],ellipse,'','')).
+assert(gv_attr(shapefile,[node],[string],'','','')).
+assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')).
+assert(gv_attr(sides,[node],[int],'4','0','')).
+assert(gv_attr(size,[graph],[double,point],'','','')).
+assert(gv_attr(skew,[node],[double],'0.0','-100.0','')).
+assert(gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only')).
+assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')).
+assert(gv_attr(splines,[graph],[bool,string],'','','')).
+assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')).
+assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')).
+assert(gv_attr(stylesheet,[graph],[string],'','','svg only')).
+assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(tail_lp,[edge],[point],'','','write only')).
+assert(gv_attr(tailclip,[edge],[bool],true,'','')).
+assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')).
+assert(gv_attr(taillabel,[edge],[lblString],'','','')).
+assert(gv_attr(tailport,[edge],[portPos],center,'','')).
+assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')).
+assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')).
+assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')).
+assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')).
+assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')).
+assert(gv_attr(vertices,[node],[pointList],'','','write only')).
+assert(gv_attr(viewport,[graph],[viewPort],'','','')).
+assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')).
+assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')).
+assert(gv_attr(width,[node],[double],'0.75','0.01','')).
+assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')).
+assert(gv_attr(xlabel,[edge,node],[lblString],'','','')).
+assert(gv_attr(xlp,[edge,node],[point],'','','write only')).
+assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')).
 
```
 
<h2 id="119"> 119: 正在比较变动前 008c5e6 和变动后 dba5c72 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index edfd45f..ed03c94 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.15').
+version('0.0.16').
 
```
 
<h2 id="120"> 120: 正在比较变动前 dba5c72 和变动后 eff64ee </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index ed03c94..203cbfc 100644
--- a/pack.pl
+++ b/pack.pl
@@ -6,4 +6,4 @@ name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
 requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.16').
+version('0.0.17').
 
```
 
<h2 id="121"> 121: 正在比较变动前 eff64ee 和变动后 89eb423 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/test/debug.pl b/test/debug.pl
deleted file mode 100644
index b0f85ea..0000000
--- a/test/debug.pl
+++ /dev/null
@@ -1,15 +0,0 @@
-:- use_module(library(ansi_term)).
-:- use_module(library(prolog_pack)).
-
-pack_ensure_removed(Pack):-
-  pack_property(Pack, _), !,
-  pack_remove(Pack).
-pack_ensure_removed(_).
-
-test:-
-  pack_ensure_removed(plGraphViz),
-  source_file(test, ThisFile),
-  file_directory_name(ThisFile, ThisDirectory),
-  assert(user:file_search_path(gvTest, ThisDirectory)),
-  assert(user:file_search_path(library, gvTest('../prolog'))).
-:- test.
 
```
 
<h2 id="122"> 122: 正在比较变动前 89eb423 和变动后 2346997 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
index c6508a3..b0dbd69 100644
--- a/prolog/gv/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -198,7 +198,7 @@ double(N) -->
 %! doubleList(+Doubles:list(float))// .
 
 doubleList(L) -->
-  '*'(double, L, [separator(colon)]).
+  *(double, L, [separator(colon)]).
 
 
 
@@ -292,7 +292,7 @@ input_changeable(true) --> "!".
 %! pointList(+Points:list(compound))// .
 
 pointList(Points) -->
-  '*'(point, Points, []).
+  *(point, Points, []).
 
 
 
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index bff4257..5de2ff1 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -160,13 +160,13 @@ gv_graph(G1, I) -->
   "}\n".
 
 gv_edge_statements(I, Dir, L) -->
-  '*'(gv_edge_statement(I, Dir), L, []), !.
+  *(gv_edge_statement(I, Dir), L, []), !.
 
 gv_node_statements(I, L) -->
-  '*'(gv_node_statement(I), L, []), !.
+  *(gv_node_statement(I), L, []), !.
 
 gv_ranked_node_collections(I, L) -->
-  '*'(gv_ranked_node_collection(I), L, []), !.
+  *(gv_ranked_node_collection(I), L, []), !.
 
 
 
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 18cdf7a..033d0b9 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -146,7 +146,7 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
   ";\n",
 
   % Vertice statements.
-  '*'(
+  *(
     gv_node_statement(NewI),
     [Rank_V_Term|Content_V_Terms],
     []
@@ -168,7 +168,7 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
 %! )// is det.
 
 gv_attrs(Kind, L) -->
-  bracketed(square, '*'(gv_attr(Kind), L, [])).
+  bracketed(square, *(gv_attr(Kind), L, [])).
 
 %! gv_attr(
 %!   +Context:oneof([edge,graph,node]),
diff --git a/test/test.pl b/test/test.pl
index 898c04e..ee92ae6 100644
--- a/test/test.pl
+++ b/test/test.pl
@@ -1,5 +1,3 @@
-:- ensure_loaded(debug).
-
 %/graph
   :- use_module(library(graph/build_export_graph)).
 %/gv
 
```
 
<h2 id="123"> 123: 正在比较变动前 2346997 和变动后 d22d50e </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/.gitmodules b/.gitmodules
deleted file mode 100644
index 26ddd86..0000000
--- a/.gitmodules
+++ /dev/null
@@ -1,9 +0,0 @@
-[submodule "Prolog-Library-Collection"]
-	path = Prolog-Library-Collection
-	url = https://github.com/wouterbeek/Prolog-Library-Collection.git
-[submodule "plHtml"]
-	path = plHtml
-	url = https://github.com/wouterbeek/plHtml.git
-[submodule "plUri"]
-	path = plUri
-	url = https://github.com/wouterbeek/plUri.git
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index b031d16..507e8ad 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -1,6 +1,8 @@
 :- module(
   build_export_graph,
   [
+    build_export_graph/2, % +Graph:compound
+                          % -ExportGraph:compound
     build_export_graph/3 % +Graph:compound
                          % -ExportGraph:compound
                          % +Options:list(compound)
@@ -49,7 +51,7 @@ Vertex coordinates:
 ---
 
 @author Wouter Beek
-@version 2015/07
+@version 2015/07, 2015/09
 */
 
 :- use_module(library(apply)).
@@ -110,6 +112,11 @@ is_meta(vertex_uri).
 
 
 
+%! build_export_graph(+Graph:compound, -ExportGraph:compound) is det.
+
+build_export_graph(G, ExportG):-
+  build_export_graph(G, ExportG, []).
+
 %! build_export_graph(
 %!   +Graph:compound,
 %!   -ExportGraph:compound,
 
```
 
<h2 id="124"> 124: 正在比较变动前 d22d50e 和变动后 e64cc35 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/install b/install
new file mode 100755
index 0000000..849699b
--- /dev/null
+++ b/install
@@ -0,0 +1,218 @@
+#!/usr/bin/env swipl
+
+:- module(install, []).
+
+/** <module> Install
+
+Let's do this!
+
+@author Wouter Beek
+@version 2015/09/23
+*/
+
+:- use_module(library(filesex)).
+:- use_module(library(lists)).
+:- use_module(library(option)).
+:- use_module(library(optparse)).
+:- use_module(library(prolog_pack)).
+:- use_module(library(uri)).
+
+:- dynamic(author/2).
+:- dynamic(download/1).
+:- dynamic(home/1).
+:- dynamic(maintainer/2).
+:- dynamic(name/1).
+:- dynamic(packager/2).
+:- dynamic(requires/1).
+:- dynamic(title/1).
+:- dynamic(version/1).
+
+:- initialization(install).
+
+
+
+
+
+%! install is det.
+
+install:-
+  OptSpec = [
+    [ % Github
+      default(true),
+      help('Whether Github should be used to install requirements.'),
+      longflags([git,github]),
+      opt(github),
+      type(boolean)
+    ],
+    [ % Help
+      default(false),
+      help('Display help about the install command.'),
+      longflags([help]),
+      opt(help),
+      shortflags([h]),
+      type(boolean)
+    ],
+    [ % Pack
+      default(true),
+      help('Whether the Prolog Pack system is used for installing requirements.'),
+      longflags([pack]),
+      opt(pack),
+      type(boolean)
+    ],
+    [ % Parent
+      default(false),
+      help('Whether existing installations in the parent directory should be taken into account.'),
+      longflags([parent]),
+      opt(parent),
+      type(boolean)
+    ]
+  ],
+  opt_arguments(OptSpec, Opts, _),
+
+  % Process help
+  (option(help(true), Opts) -> show_help(OptSpec) ; install(Opts)).
+
+
+%! install(+Options:list(compound)) is det.
+
+install(Opts):-
+  source_file(install, File),
+  file_directory_name(File, AppDir),
+  install(AppDir, AppDir, Opts),
+  clean_meta,
+  halt.
+
+
+%! install(
+%!   +ApplicationDirectory:atom,
+%!   +LibraryDirectory:atom,
+%!   +Options:list(compound)
+%! ) is det.
+
+install(AppDir, LibDir, Opts):-
+  % The pack information is taken from the library directory.
+  % This allows application requirements to be installed recursively.
+  directory_file_path(LibDir, 'pack.pl', Info),
+  access_file(Info, read),
+  load_meta(Info),
+
+  % Set this library's search path.
+  name(Name),
+  assert(user:file_search_path(Name, LibDir)),
+
+  % Pull in the required libraries.
+  forall(requires(LibName), install_required(AppDir, LibName, Opts)), !.
+install(_, _, _):-
+  msg_warning('Installation failed.').
+
+
+%! install_required(
+%!   +ApplicationDirectory:atom,
+%!   +LibName:atom,
+%!   +Options:list(compound)
+%! ) is det.
+
+% Developer's delight: library already available from parent directory.
+install_required(AppDir, LibName, Opts):-
+  option(parent(true), Opts),
+
+  file_directory_name(AppDir, ParentDir),
+  append_directories(ParentDir, LibName, LibDir),
+  exists_directory(LibDir), !,
+
+  % Print message.
+  atomic_list_concat(['Library ',LibName,' already installed.'], Msg),
+  msg_success(Msg).
+% Install through the Prolog Pack system.
+install_required(_, LibName, Opts):-
+  option(pack(true), Opts),
+
+  prolog_pack:query_pack_server(search(LibName), Result,[]),
+  Result = true([pack(LibName,_,_,_,_)]), !,
+  pack_install(LibName).
+% Install through Github.
+install_required(AppDir, LibName, Opts):-
+  option(github(true), Opts),
+
+  % Remove the old version of the library.
+  append_directories(AppDir, LibName, LibDir),
+  (exists_directory(LibDir) -> delete_directory_and_contents(LibDir) ; true),
+
+  % Git clone the new version of the library.
+  atomic_list_concat(['',wouterbeek,LibName], /, Path),
+  uri_components(Iri, uri_components(https,'github.com',Path,_,_)),
+  prolog_pack:run_process(path(git), [clone,Iri,LibDir], []),
+
+  % Print message.
+  atomic_list_concat(['Library ',LibName,' was installed.'], Msg),
+  msg_success(Msg),
+  
+  % Recurse
+  install(AppDir, LibDir, Opts), !.
+% Oops!
+install_required(_, LibName, _):-
+  atomic_list_concat(
+    ['Installation of library ',LibName,' failed.'],
+    Msg
+  ),
+  msg_warning(Msg).
+
+
+
+
+
+% HELPERS %
+
+%! append_directories(+Dir1:atom, +Dir2:atom, -Dir3:atom) is det.
+
+append_directories(Dir1, Dir2, Dir3):-
+  atomic_list_concat(Subdirs1, /, Dir1),
+  atomic_list_concat(Subdirs2, /, Dir2),
+  append(Subdirs1, Subdirs2, Subdirs3),
+  atomic_list_concat(Subdirs3, /, Dir3).
+
+
+
+%! clean_meta is det.
+
+clean_meta:-
+  retractall(author/2),
+  retractall(download/1),
+  retractall(home/1),
+  retractall(maintainer/2),
+  retractall(name/1),
+  retractall(packager/2),
+  retractall(requires/1),
+  retractall(title/1),
+  retractall(version/1).
+
+
+
+%! show_help(+OptionSpecification:list(compound)) is det.
+
+show_help(OptSpec):-
+  opt_help(OptSpec, Help),
+  format(user_output, '~a\n', [Help]),
+  halt.
+
+
+
+%! load_meta(+File:atom) is det.
+
+load_meta(File):-
+  clean_meta,
+  ensure_loaded(File).
+
+
+
+%! msg_success(+Message:atom) is det.
+
+msg_success(X):-
+    ansi_format([bold,fg(green)], '~a~n', [X]).
+
+
+
+%! msg_warning(+Message:atom) is det.
+
+msg_warning(X):-
+    ansi_format([bold,fg(red)], '~a~n', [X]).
 
```
 
<h2 id="125"> 125: 正在比较变动前 e64cc35 和变动后 763a529 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/install b/install
deleted file mode 100755
index 849699b..0000000
--- a/install
+++ /dev/null
@@ -1,218 +0,0 @@
-#!/usr/bin/env swipl
-
-:- module(install, []).
-
-/** <module> Install
-
-Let's do this!
-
-@author Wouter Beek
-@version 2015/09/23
-*/
-
-:- use_module(library(filesex)).
-:- use_module(library(lists)).
-:- use_module(library(option)).
-:- use_module(library(optparse)).
-:- use_module(library(prolog_pack)).
-:- use_module(library(uri)).
-
-:- dynamic(author/2).
-:- dynamic(download/1).
-:- dynamic(home/1).
-:- dynamic(maintainer/2).
-:- dynamic(name/1).
-:- dynamic(packager/2).
-:- dynamic(requires/1).
-:- dynamic(title/1).
-:- dynamic(version/1).
-
-:- initialization(install).
-
-
-
-
-
-%! install is det.
-
-install:-
-  OptSpec = [
-    [ % Github
-      default(true),
-      help('Whether Github should be used to install requirements.'),
-      longflags([git,github]),
-      opt(github),
-      type(boolean)
-    ],
-    [ % Help
-      default(false),
-      help('Display help about the install command.'),
-      longflags([help]),
-      opt(help),
-      shortflags([h]),
-      type(boolean)
-    ],
-    [ % Pack
-      default(true),
-      help('Whether the Prolog Pack system is used for installing requirements.'),
-      longflags([pack]),
-      opt(pack),
-      type(boolean)
-    ],
-    [ % Parent
-      default(false),
-      help('Whether existing installations in the parent directory should be taken into account.'),
-      longflags([parent]),
-      opt(parent),
-      type(boolean)
-    ]
-  ],
-  opt_arguments(OptSpec, Opts, _),
-
-  % Process help
-  (option(help(true), Opts) -> show_help(OptSpec) ; install(Opts)).
-
-
-%! install(+Options:list(compound)) is det.
-
-install(Opts):-
-  source_file(install, File),
-  file_directory_name(File, AppDir),
-  install(AppDir, AppDir, Opts),
-  clean_meta,
-  halt.
-
-
-%! install(
-%!   +ApplicationDirectory:atom,
-%!   +LibraryDirectory:atom,
-%!   +Options:list(compound)
-%! ) is det.
-
-install(AppDir, LibDir, Opts):-
-  % The pack information is taken from the library directory.
-  % This allows application requirements to be installed recursively.
-  directory_file_path(LibDir, 'pack.pl', Info),
-  access_file(Info, read),
-  load_meta(Info),
-
-  % Set this library's search path.
-  name(Name),
-  assert(user:file_search_path(Name, LibDir)),
-
-  % Pull in the required libraries.
-  forall(requires(LibName), install_required(AppDir, LibName, Opts)), !.
-install(_, _, _):-
-  msg_warning('Installation failed.').
-
-
-%! install_required(
-%!   +ApplicationDirectory:atom,
-%!   +LibName:atom,
-%!   +Options:list(compound)
-%! ) is det.
-
-% Developer's delight: library already available from parent directory.
-install_required(AppDir, LibName, Opts):-
-  option(parent(true), Opts),
-
-  file_directory_name(AppDir, ParentDir),
-  append_directories(ParentDir, LibName, LibDir),
-  exists_directory(LibDir), !,
-
-  % Print message.
-  atomic_list_concat(['Library ',LibName,' already installed.'], Msg),
-  msg_success(Msg).
-% Install through the Prolog Pack system.
-install_required(_, LibName, Opts):-
-  option(pack(true), Opts),
-
-  prolog_pack:query_pack_server(search(LibName), Result,[]),
-  Result = true([pack(LibName,_,_,_,_)]), !,
-  pack_install(LibName).
-% Install through Github.
-install_required(AppDir, LibName, Opts):-
-  option(github(true), Opts),
-
-  % Remove the old version of the library.
-  append_directories(AppDir, LibName, LibDir),
-  (exists_directory(LibDir) -> delete_directory_and_contents(LibDir) ; true),
-
-  % Git clone the new version of the library.
-  atomic_list_concat(['',wouterbeek,LibName], /, Path),
-  uri_components(Iri, uri_components(https,'github.com',Path,_,_)),
-  prolog_pack:run_process(path(git), [clone,Iri,LibDir], []),
-
-  % Print message.
-  atomic_list_concat(['Library ',LibName,' was installed.'], Msg),
-  msg_success(Msg),
-  
-  % Recurse
-  install(AppDir, LibDir, Opts), !.
-% Oops!
-install_required(_, LibName, _):-
-  atomic_list_concat(
-    ['Installation of library ',LibName,' failed.'],
-    Msg
-  ),
-  msg_warning(Msg).
-
-
-
-
-
-% HELPERS %
-
-%! append_directories(+Dir1:atom, +Dir2:atom, -Dir3:atom) is det.
-
-append_directories(Dir1, Dir2, Dir3):-
-  atomic_list_concat(Subdirs1, /, Dir1),
-  atomic_list_concat(Subdirs2, /, Dir2),
-  append(Subdirs1, Subdirs2, Subdirs3),
-  atomic_list_concat(Subdirs3, /, Dir3).
-
-
-
-%! clean_meta is det.
-
-clean_meta:-
-  retractall(author/2),
-  retractall(download/1),
-  retractall(home/1),
-  retractall(maintainer/2),
-  retractall(name/1),
-  retractall(packager/2),
-  retractall(requires/1),
-  retractall(title/1),
-  retractall(version/1).
-
-
-
-%! show_help(+OptionSpecification:list(compound)) is det.
-
-show_help(OptSpec):-
-  opt_help(OptSpec, Help),
-  format(user_output, '~a\n', [Help]),
-  halt.
-
-
-
-%! load_meta(+File:atom) is det.
-
-load_meta(File):-
-  clean_meta,
-  ensure_loaded(File).
-
-
-
-%! msg_success(+Message:atom) is det.
-
-msg_success(X):-
-    ansi_format([bold,fg(green)], '~a~n', [X]).
-
-
-
-%! msg_warning(+Message:atom) is det.
-
-msg_warning(X):-
-    ansi_format([bold,fg(red)], '~a~n', [X]).
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index fa00670..99d6059 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -121,9 +121,9 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
 % Downloads the table describing GraphViz attributes from `graphviz.org`.
 
 gv_attrs_download:-
-  verbose_call(
-    'updating GraphViz attributes table',
+  verbose(
     gv_attrs_download0
+    "updating GraphViz attributes table",
   ).
 
 gv_attrs_download0:-
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index 57c7f90..2c56713 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -88,9 +88,9 @@ wc_weight(Float) -->
 %! gv_color_download is det.
 
 gv_color_download:-
-  verbose_call(
-    'updating the GraphViz color table',
-    gv_color_download0
+  verbose(
+    gv_color_download0,
+    'updating the GraphViz color table'
   ).
 
 gv_color_download0:-
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
index 577a33a..7fd5a58 100644
--- a/prolog/gv/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -10,7 +10,7 @@
 /** <module> GraphViz file
 
 @author Wouter Beek
-@version 2015/07
+@version 2015/07, 2015/10
 */
 
 :- use_module(library(code_ext)).
@@ -18,18 +18,13 @@
 :- use_module(library(gv/gv_graph)).
 :- use_module(library(option)).
 :- use_module(library(process)).
-
-:- dynamic(user:prolog_file_type/2).
-:- multifile(user:prolog_file_type/2).
-
-user:prolog_file_type(dot, dot).
-user:prolog_file_type(pdf, pdf).
+:- use_module(library(string_ext)).
 
 :- predicate_options(gv_export/3, 3, [
      pass_to(file_to_gv/3, 3)
    ]).
 :- predicate_options(file_to_gv/3, 3, [
-     method(+atom),
+     method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])),
      output(+atom)
    ]).
 
@@ -37,39 +32,38 @@ user:prolog_file_type(pdf, pdf).
 
 
 
-%! gv_export(
-%!   +ExportGraph:compound,
-%!   +OutputFile:atom,
-%!   +Options:list(nvpair)
-%! ) is det.
+%! gv_export(+ExportGraph:compound, +File:atom, +Options:list(compound)) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
-%   - `method(+Method:atom)`
+%   * method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])
 %     The algorithm used by GraphViz for positioning the tree nodes.
-%     Either =dot= (default) or =sfdp=.
-%   - `output(+FileType:atom)`
+%     Default is `dot'.
+%     For possible values see gv_method/1.
+%   * output(+atom)`
 %     The file type of the generated GraphViz file.
-%     Default: `pdf`.
+%     Default is `pdf`.
+%     For possible values see gv_output_type/1.
 
-gv_export(ExportGraph, OutputFile, Options):-
-  once(phrase(gv_graph(ExportGraph), Codes)),
+gv_export(ExportG, File, Opts):-
+  once(phrase(gv_graph(ExportG), Cs)),
 
   % Be thread-safe.
   thread_self(Id),
-  atomic_list_concat([gv_file,Id], '_', ThreadName),
-  absolute_file_name(ThreadName, TmpFile, [access(write),file_type(dot)]),
+  string_list_concat(["gv_file",Id], "_", ThreadName),
+  absolute_file_name(ThreadName, TmpFile, [access(write),extensions([dot])]),
   setup_call_cleanup(
     open(TmpFile, write, Write, [encoding(utf8)]),
-    with_output_to(Write, put_codes(Codes)),
+    with_output_to(Write, put_codes(Cs)),
     close(Write)
   ),
-  file_to_gv(TmpFile, OutputFile, Options).
+  file_to_gv(TmpFile, File, Opts).
+
 
 %! file_to_gv(
 %!   +InputFile:atom,
 %!   +OutputFile:atom,
-%!   +Options:list(nvpair)
+%!   +Options:list(compound)
 %! ) is det.
 % Converts a GraphViz DOT file to an image file, using a specific
 % visualization method.
@@ -98,8 +92,8 @@ file_to_gv(InputFile, OutputFile, Opts):-
   must_be(oneof(OutputTypes), OutputType),
 
   % Run the GraphViz conversion command in the shell.
-  format(atom(OutputTypeFlag), '-T~a', [OutputType]),
-  format(atom(OutputFileFlag), '-o~a', [OutputFile]),
+  format(atom(OutputTypeFlag), "-T~a", [OutputType]),
+  format(atom(OutputFileFlag), "-o~a", [OutputFile]),
   process_create(
     path(Method),
     [OutputTypeFlag,file(InputFile),OutputFileFlag],
@@ -108,6 +102,8 @@ file_to_gv(InputFile, OutputFile, Opts):-
 
 
 
+
+
 % HELPERS %
 
 gv_method(circo).
 
```
 
<h2 id="126"> 126: 正在比较变动前 763a529 和变动后 d962f81 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/install b/install
new file mode 100755
index 0000000..849699b
--- /dev/null
+++ b/install
@@ -0,0 +1,218 @@
+#!/usr/bin/env swipl
+
+:- module(install, []).
+
+/** <module> Install
+
+Let's do this!
+
+@author Wouter Beek
+@version 2015/09/23
+*/
+
+:- use_module(library(filesex)).
+:- use_module(library(lists)).
+:- use_module(library(option)).
+:- use_module(library(optparse)).
+:- use_module(library(prolog_pack)).
+:- use_module(library(uri)).
+
+:- dynamic(author/2).
+:- dynamic(download/1).
+:- dynamic(home/1).
+:- dynamic(maintainer/2).
+:- dynamic(name/1).
+:- dynamic(packager/2).
+:- dynamic(requires/1).
+:- dynamic(title/1).
+:- dynamic(version/1).
+
+:- initialization(install).
+
+
+
+
+
+%! install is det.
+
+install:-
+  OptSpec = [
+    [ % Github
+      default(true),
+      help('Whether Github should be used to install requirements.'),
+      longflags([git,github]),
+      opt(github),
+      type(boolean)
+    ],
+    [ % Help
+      default(false),
+      help('Display help about the install command.'),
+      longflags([help]),
+      opt(help),
+      shortflags([h]),
+      type(boolean)
+    ],
+    [ % Pack
+      default(true),
+      help('Whether the Prolog Pack system is used for installing requirements.'),
+      longflags([pack]),
+      opt(pack),
+      type(boolean)
+    ],
+    [ % Parent
+      default(false),
+      help('Whether existing installations in the parent directory should be taken into account.'),
+      longflags([parent]),
+      opt(parent),
+      type(boolean)
+    ]
+  ],
+  opt_arguments(OptSpec, Opts, _),
+
+  % Process help
+  (option(help(true), Opts) -> show_help(OptSpec) ; install(Opts)).
+
+
+%! install(+Options:list(compound)) is det.
+
+install(Opts):-
+  source_file(install, File),
+  file_directory_name(File, AppDir),
+  install(AppDir, AppDir, Opts),
+  clean_meta,
+  halt.
+
+
+%! install(
+%!   +ApplicationDirectory:atom,
+%!   +LibraryDirectory:atom,
+%!   +Options:list(compound)
+%! ) is det.
+
+install(AppDir, LibDir, Opts):-
+  % The pack information is taken from the library directory.
+  % This allows application requirements to be installed recursively.
+  directory_file_path(LibDir, 'pack.pl', Info),
+  access_file(Info, read),
+  load_meta(Info),
+
+  % Set this library's search path.
+  name(Name),
+  assert(user:file_search_path(Name, LibDir)),
+
+  % Pull in the required libraries.
+  forall(requires(LibName), install_required(AppDir, LibName, Opts)), !.
+install(_, _, _):-
+  msg_warning('Installation failed.').
+
+
+%! install_required(
+%!   +ApplicationDirectory:atom,
+%!   +LibName:atom,
+%!   +Options:list(compound)
+%! ) is det.
+
+% Developer's delight: library already available from parent directory.
+install_required(AppDir, LibName, Opts):-
+  option(parent(true), Opts),
+
+  file_directory_name(AppDir, ParentDir),
+  append_directories(ParentDir, LibName, LibDir),
+  exists_directory(LibDir), !,
+
+  % Print message.
+  atomic_list_concat(['Library ',LibName,' already installed.'], Msg),
+  msg_success(Msg).
+% Install through the Prolog Pack system.
+install_required(_, LibName, Opts):-
+  option(pack(true), Opts),
+
+  prolog_pack:query_pack_server(search(LibName), Result,[]),
+  Result = true([pack(LibName,_,_,_,_)]), !,
+  pack_install(LibName).
+% Install through Github.
+install_required(AppDir, LibName, Opts):-
+  option(github(true), Opts),
+
+  % Remove the old version of the library.
+  append_directories(AppDir, LibName, LibDir),
+  (exists_directory(LibDir) -> delete_directory_and_contents(LibDir) ; true),
+
+  % Git clone the new version of the library.
+  atomic_list_concat(['',wouterbeek,LibName], /, Path),
+  uri_components(Iri, uri_components(https,'github.com',Path,_,_)),
+  prolog_pack:run_process(path(git), [clone,Iri,LibDir], []),
+
+  % Print message.
+  atomic_list_concat(['Library ',LibName,' was installed.'], Msg),
+  msg_success(Msg),
+  
+  % Recurse
+  install(AppDir, LibDir, Opts), !.
+% Oops!
+install_required(_, LibName, _):-
+  atomic_list_concat(
+    ['Installation of library ',LibName,' failed.'],
+    Msg
+  ),
+  msg_warning(Msg).
+
+
+
+
+
+% HELPERS %
+
+%! append_directories(+Dir1:atom, +Dir2:atom, -Dir3:atom) is det.
+
+append_directories(Dir1, Dir2, Dir3):-
+  atomic_list_concat(Subdirs1, /, Dir1),
+  atomic_list_concat(Subdirs2, /, Dir2),
+  append(Subdirs1, Subdirs2, Subdirs3),
+  atomic_list_concat(Subdirs3, /, Dir3).
+
+
+
+%! clean_meta is det.
+
+clean_meta:-
+  retractall(author/2),
+  retractall(download/1),
+  retractall(home/1),
+  retractall(maintainer/2),
+  retractall(name/1),
+  retractall(packager/2),
+  retractall(requires/1),
+  retractall(title/1),
+  retractall(version/1).
+
+
+
+%! show_help(+OptionSpecification:list(compound)) is det.
+
+show_help(OptSpec):-
+  opt_help(OptSpec, Help),
+  format(user_output, '~a\n', [Help]),
+  halt.
+
+
+
+%! load_meta(+File:atom) is det.
+
+load_meta(File):-
+  clean_meta,
+  ensure_loaded(File).
+
+
+
+%! msg_success(+Message:atom) is det.
+
+msg_success(X):-
+    ansi_format([bold,fg(green)], '~a~n', [X]).
+
+
+
+%! msg_warning(+Message:atom) is det.
+
+msg_warning(X):-
+    ansi_format([bold,fg(red)], '~a~n', [X]).
 
```
 
<h2 id="127"> 127: 正在比较变动前 d962f81 和变动后 63a5cd7 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/install b/install
deleted file mode 100755
index 849699b..0000000
--- a/install
+++ /dev/null
@@ -1,218 +0,0 @@
-#!/usr/bin/env swipl
-
-:- module(install, []).
-
-/** <module> Install
-
-Let's do this!
-
-@author Wouter Beek
-@version 2015/09/23
-*/
-
-:- use_module(library(filesex)).
-:- use_module(library(lists)).
-:- use_module(library(option)).
-:- use_module(library(optparse)).
-:- use_module(library(prolog_pack)).
-:- use_module(library(uri)).
-
-:- dynamic(author/2).
-:- dynamic(download/1).
-:- dynamic(home/1).
-:- dynamic(maintainer/2).
-:- dynamic(name/1).
-:- dynamic(packager/2).
-:- dynamic(requires/1).
-:- dynamic(title/1).
-:- dynamic(version/1).
-
-:- initialization(install).
-
-
-
-
-
-%! install is det.
-
-install:-
-  OptSpec = [
-    [ % Github
-      default(true),
-      help('Whether Github should be used to install requirements.'),
-      longflags([git,github]),
-      opt(github),
-      type(boolean)
-    ],
-    [ % Help
-      default(false),
-      help('Display help about the install command.'),
-      longflags([help]),
-      opt(help),
-      shortflags([h]),
-      type(boolean)
-    ],
-    [ % Pack
-      default(true),
-      help('Whether the Prolog Pack system is used for installing requirements.'),
-      longflags([pack]),
-      opt(pack),
-      type(boolean)
-    ],
-    [ % Parent
-      default(false),
-      help('Whether existing installations in the parent directory should be taken into account.'),
-      longflags([parent]),
-      opt(parent),
-      type(boolean)
-    ]
-  ],
-  opt_arguments(OptSpec, Opts, _),
-
-  % Process help
-  (option(help(true), Opts) -> show_help(OptSpec) ; install(Opts)).
-
-
-%! install(+Options:list(compound)) is det.
-
-install(Opts):-
-  source_file(install, File),
-  file_directory_name(File, AppDir),
-  install(AppDir, AppDir, Opts),
-  clean_meta,
-  halt.
-
-
-%! install(
-%!   +ApplicationDirectory:atom,
-%!   +LibraryDirectory:atom,
-%!   +Options:list(compound)
-%! ) is det.
-
-install(AppDir, LibDir, Opts):-
-  % The pack information is taken from the library directory.
-  % This allows application requirements to be installed recursively.
-  directory_file_path(LibDir, 'pack.pl', Info),
-  access_file(Info, read),
-  load_meta(Info),
-
-  % Set this library's search path.
-  name(Name),
-  assert(user:file_search_path(Name, LibDir)),
-
-  % Pull in the required libraries.
-  forall(requires(LibName), install_required(AppDir, LibName, Opts)), !.
-install(_, _, _):-
-  msg_warning('Installation failed.').
-
-
-%! install_required(
-%!   +ApplicationDirectory:atom,
-%!   +LibName:atom,
-%!   +Options:list(compound)
-%! ) is det.
-
-% Developer's delight: library already available from parent directory.
-install_required(AppDir, LibName, Opts):-
-  option(parent(true), Opts),
-
-  file_directory_name(AppDir, ParentDir),
-  append_directories(ParentDir, LibName, LibDir),
-  exists_directory(LibDir), !,
-
-  % Print message.
-  atomic_list_concat(['Library ',LibName,' already installed.'], Msg),
-  msg_success(Msg).
-% Install through the Prolog Pack system.
-install_required(_, LibName, Opts):-
-  option(pack(true), Opts),
-
-  prolog_pack:query_pack_server(search(LibName), Result,[]),
-  Result = true([pack(LibName,_,_,_,_)]), !,
-  pack_install(LibName).
-% Install through Github.
-install_required(AppDir, LibName, Opts):-
-  option(github(true), Opts),
-
-  % Remove the old version of the library.
-  append_directories(AppDir, LibName, LibDir),
-  (exists_directory(LibDir) -> delete_directory_and_contents(LibDir) ; true),
-
-  % Git clone the new version of the library.
-  atomic_list_concat(['',wouterbeek,LibName], /, Path),
-  uri_components(Iri, uri_components(https,'github.com',Path,_,_)),
-  prolog_pack:run_process(path(git), [clone,Iri,LibDir], []),
-
-  % Print message.
-  atomic_list_concat(['Library ',LibName,' was installed.'], Msg),
-  msg_success(Msg),
-  
-  % Recurse
-  install(AppDir, LibDir, Opts), !.
-% Oops!
-install_required(_, LibName, _):-
-  atomic_list_concat(
-    ['Installation of library ',LibName,' failed.'],
-    Msg
-  ),
-  msg_warning(Msg).
-
-
-
-
-
-% HELPERS %
-
-%! append_directories(+Dir1:atom, +Dir2:atom, -Dir3:atom) is det.
-
-append_directories(Dir1, Dir2, Dir3):-
-  atomic_list_concat(Subdirs1, /, Dir1),
-  atomic_list_concat(Subdirs2, /, Dir2),
-  append(Subdirs1, Subdirs2, Subdirs3),
-  atomic_list_concat(Subdirs3, /, Dir3).
-
-
-
-%! clean_meta is det.
-
-clean_meta:-
-  retractall(author/2),
-  retractall(download/1),
-  retractall(home/1),
-  retractall(maintainer/2),
-  retractall(name/1),
-  retractall(packager/2),
-  retractall(requires/1),
-  retractall(title/1),
-  retractall(version/1).
-
-
-
-%! show_help(+OptionSpecification:list(compound)) is det.
-
-show_help(OptSpec):-
-  opt_help(OptSpec, Help),
-  format(user_output, '~a\n', [Help]),
-  halt.
-
-
-
-%! load_meta(+File:atom) is det.
-
-load_meta(File):-
-  clean_meta,
-  ensure_loaded(File).
-
-
-
-%! msg_success(+Message:atom) is det.
-
-msg_success(X):-
-    ansi_format([bold,fg(green)], '~a~n', [X]).
-
-
-
-%! msg_warning(+Message:atom) is det.
-
-msg_warning(X):-
-    ansi_format([bold,fg(red)], '~a~n', [X]).
 
```
 
<h2 id="128"> 128: 正在比较变动前 63a5cd7 和变动后 ce95c3c </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 99d6059..1fd4a18 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -9,17 +9,18 @@
 /** <module> GraphViz attributes
 
 @author Wouter Beek
-@version 2015/07-2015/08
+@version 2015/07-2015/08, 2015/10
 */
 
 :- use_module(library(apply)).
-:- use_module(library(deb_ext)).
+:- use_module(library(debug_ext)).
 :- use_module(library(dcg/basics)).
 :- use_module(library(dcg/dcg_call)).
 :- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
 :- use_module(library(http/http_download)).
 :- use_module(library(lists)).
+:- use_module(library(msg_ext)).
 :- use_module(library(os/file_ext)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
@@ -35,15 +36,15 @@
 %! ) is nondet.
 
 :- persistent(
-  gv_attr(
-    name:atom,
-    used_by:list(oneof([cluster,edge,graph,node,subgraph])),
-    types:list(atom),
-    default,
-    minimum,
-    notes:atom
-  )
-).
+     gv_attr(
+       name:atom,
+       used_by:list(oneof([cluster,edge,graph,node,subgraph])),
+       types:list(atom),
+       default,
+       minimum,
+       notes:atom
+     )
+   ).
 
 :- initialization(gv_attrs_init).
 
@@ -122,8 +123,8 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
 
 gv_attrs_download:-
   verbose(
-    gv_attrs_download0
-    "updating GraphViz attributes table",
+    gv_attrs_download0,
+    "updating GraphViz attributes table"
   ).
 
 gv_attrs_download0:-
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index 2c56713..fa79bea 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -13,16 +13,17 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2015/08
+@version 2015/08, 2015/10
 */
 
 :- use_module(library(apply)).
-:- use_module(library(deb_ext)).
+:- use_module(library(debug_ext)).
 :- use_module(library(dcg/basics)).
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(http/http_download)).
 :- use_module(library(lists)).
+:- use_module(library(msg_ext)).
 :- use_module(library(os/file_ext)).
 :- use_module(library(persistency)).
 :- use_module(library(xpath)).
 
```
 
<h2 id="129"> 129: 正在比较变动前 ce95c3c 和变动后 44cd5a6 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
index b0dbd69..5ab08a6 100644
--- a/prolog/gv/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -202,11 +202,14 @@ doubleList(L) -->
 
 
 
-%! escString(+String:atom)// .
+%! escString(+String:or([atom,string]))// .
 % @tbd Support for context-dependent replacements.
 
 escString(S1) -->
-  {atom_phrase(escape_double_quotes, S1, S2)},
+  {(  string(S1)
+  ->  string_phrase(escape_double_quotes, S1, S2)
+  ;   atom_phrase(escape_double_quotes, S1, S2)
+  )},
   quoted(atom(S2)).
 
 escape_double_quotes, [92,34] -->
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 033d0b9..3aec4e6 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -26,7 +26,7 @@ a_list = ID "=" ID [","] [a_list]
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2015/07-2015/08
+@version 2015/07-2015/08, 2015/10
 */
 
 :- use_module(library(apply)).
@@ -38,6 +38,7 @@ a_list = ID "=" ID [","] [a_list]
 :- use_module(library(dcg/dcg_quoted)).
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_html)).
+:- use_module(library(error)).
 :- use_module(library(lists)).
 :- use_module(library(ordsets)).
 
@@ -82,8 +83,9 @@ gv_edge_statement(I, Dir, edge(From,To,Attrs)) -->
 % @arg Directed Whether an edge is directed (operator `->`) or
 %      undirected (operator `--`).
 
-gv_edge_operator(false) --> !, "--".
-gv_edge_operator(true) --> "->".
+gv_edge_operator(Dir) -->
+  {must_be(boolean, Dir)},
+  ({Dir == false} -> "--" ; {Dir == true} -> "->").
 
 
 
@@ -113,9 +115,9 @@ gv_generic_attributes_statement(Kind, I, Attrs) -->
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(edge) --> "edge".
-gv_kind(graph) --> "graph".
-gv_kind(node) --> "node".
+gv_kind(Kind) -->
+  {must_be(oneof([edge,graph,node]), Kind)},
+  atom(Kind).
 
 
 
@@ -142,8 +144,8 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
   % The rank attribute.
   {NewI is I + 1},
   indent(NewI),
-  gv_attr(subgraph, rank=same),
-  ";\n",
+  gv_attr(subgraph, rank(same)),
+  "\n",
 
   % Vertice statements.
   *(
@@ -170,10 +172,8 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
 gv_attrs(Kind, L) -->
   bracketed(square, *(gv_attr(Kind), L, [])).
 
-%! gv_attr(
-%!   +Context:oneof([edge,graph,node]),
-%!   +Attribute:nvpair
-%! )// is det.
+
+%! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det.
 % A single GraphViz attribute.
 % We assume that the attribute has already been validated.
 
@@ -276,10 +276,12 @@ gv_keyword --> "subgraph".
 %      inside GraphViz node identifiers.
 
 gv_node_id(Id) -->
-  gv_id(Id).
+  gv_id(Id), !.
 %gv_node_id(_) -->
 %  gv_id(_),
 %  gv_port.
+gv_node_id(Id) -->
+  {type_error(gv_node_id, Id)}.
 
 
 
 
```
 
<h2 id="130"> 130: 正在比较变动前 44cd5a6 和变动后 c0c5e18 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index 507e8ad..b6d367b 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -1,9 +1,9 @@
 :- module(
   build_export_graph,
   [
-    build_export_graph/2, % +Graph:compound
+    build_export_graph/2, % +Graph
                           % -ExportGraph:compound
-    build_export_graph/3 % +Graph:compound
+    build_export_graph/3 % +Graph
                          % -ExportGraph:compound
                          % +Options:list(compound)
   ]
@@ -18,13 +18,13 @@ Support for building GIF representations.
 ## Graph
 
 ```prolog
-graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(nvpair))
+graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(compound))
 ```
 
 ### Edge
 
 ```prolog
-edge(FromVertexId,ToVertexId,Attributes:list(nvpair))
+edge(FromVertexId,ToVertexId,Attributes:list(compound))
 ```
 
 ### Rank
@@ -36,7 +36,7 @@ rank(RankVertex:compound,ContentVertices:ordset(compound))
 ### Vertex
 
 ```prolog
-vertex(Id,Attributes:list(nvpair))
+vertex(Id,Attributes:list(compound))
 ```
 
 # Property functions
@@ -51,10 +51,12 @@ Vertex coordinates:
 ---
 
 @author Wouter Beek
-@version 2015/07, 2015/09
+@version 2015/07, 2015/09-2015/10
 */
 
 :- use_module(library(apply)).
+:- use_module(library(graph/s/s_graph)).
+:- use_module(library(lambda)).
 :- use_module(library(list_ext)).
 :- use_module(library(option_ext)).
 :- use_module(library(ordsets)).
@@ -112,34 +114,32 @@ is_meta(vertex_uri).
 
 
 
-%! build_export_graph(+Graph:compound, -ExportGraph:compound) is det.
+%! build_export_graph(+Graph, -ExportGraph:compound) is det.
+% Wrapper around build_export_graph/3.
 
 build_export_graph(G, ExportG):-
   build_export_graph(G, ExportG, []).
 
+
 %! build_export_graph(
-%!   +Graph:compound,
+%!   +Graph,
 %!   -ExportGraph:compound,
 %!   +Options:list(compound)
 %! ) is det.
+% Graph is either:
+%   * a coumpound term `graph(Vs,Es)`, or
+%   * an unlabeled graph as defined by `library(ugraph)`.
 
-build_export_graph(graph(Vs,Es), graph(VTerms,ETerms,GAttrs), Opts1):-
+build_export_graph(G, graph(VTerms,ETerms,GAttrs), Opts1):-
+  graph_components(G, Vs, Es),
   meta_options(is_meta, Opts1, Opts2),
-
-  % V terms.
-  maplist(vertex_term0(Vs, Opts2), Vs, VTerms),
-
-  % Edge terms.
-  maplist(edge_term0(Vs, Opts2), Es, ETerms),
-
-  % Graph attributes.
+  maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms),
+  maplist(\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms),
   graph_attributes(GAttrs, Opts2).
 
-vertex_term0(Vs, Opts, V, VTerm):-
-  vertex_term(Vs, V, VTerm, Opts).
-
-edge_term0(Vs, Opts, E, ETerm):-
-  edge_term(Vs, E, ETerm, Opts).
+graph_components(graph(Vs,Es), Vs, Es):- !.
+graph_components(G, Vs, Es):-
+  s_graph_components(G, Vs, Es).
 
 
 
@@ -178,12 +178,9 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
   % Id.
   (   option(edge_id(IdFunction), Opts)
   ->  call(IdFunction, E, FromId, ToId)
-  ;     (   E = edge(FromV,_,ToV)
-        ->  true
-        ;   E = edge(FromV,ToV)
-        ),
-        nth0chk(FromId, Vs, FromV),
-        nth0chk(ToId, Vs, ToV)
+  ;   edge_components(E, FromV, ToV),
+      nth0chk(FromId, Vs, FromV),
+      nth0chk(ToId, Vs, ToV)
   ),
   
   % Label.
@@ -215,7 +212,7 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
 
 
 %! graph_attributes(
-%!   -GraphAttributes:list(nvpair),
+%!   -GraphAttributes:list(compound),
 %!   +Options:list(compound)
 %! ) is det.
 % The following options are supported:
@@ -358,7 +355,15 @@ vertex_term(Vs, V, vertex(VId,VAttrs), Opts):-
 
 % HELPERS %
 
-%! merge_options(+FromOptions:list(nvpair), -ToOptions:list(nvpair)) is det.
+%! edge_components(+Edge:compound, -FromV, -ToV) is det.
+
+edge_components(edge(FromV,_,ToV), FromV, ToV):- !.
+edge_components(edge(FromV,ToV), FromV, ToV):- !.
+edge_components(FromV-ToV, FromV, ToV):- !.
+
+
+
+%! merge_options(+FromOptions:list(compound), -ToOptions:list(compound)) is det.
 
 merge_options([], []).
 % Skip uninstantiated values.
 
```
 
<h2 id="131"> 131: 正在比较变动前 c0c5e18 和变动后 603344f </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
new file mode 100644
index 0000000..190b988
--- /dev/null
+++ b/data/gv_attrs_scrape.pl
@@ -0,0 +1,124 @@
+:- module(
+  gv_attrs_scrape,
+  [
+    gv_attrs_scrape/1 % +File:atom
+  ]
+).
+
+/** <module> GraphViz: Scrape attributes
+
+Writes compound terms of the following form to file:
+
+```prolog
+gv_attr(
+  ?Name:atom,
+  ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
+  ?Types:list(atom),
+  ?Default,
+  ?Minimum,
+  ?Notes:atom
+) is nondet.
+```
+
+@author Wouter Beek
+@version 2015/10
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(dcg/basics), except([string//1])).
+:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(gv/gv_attr_type)).
+:- use_module(library(http/http_download)).
+:- use_module(library(iostream)).
+:- use_module(library(lists)).
+:- use_module(library(msg_ext)).
+:- use_module(library(pl/pl_term)).
+:- use_module(library(xpath)).
+:- use_module(library(xpath/xpath_table)).
+
+
+
+
+
+%! gv_attrs_scrape(+File:atom) is det.
+
+gv_attrs_scrape(File):-
+  setup_call_cleanup(
+    open_any(File, write, Write, Close, []),
+    verbose(
+      gv_attrs_download(Write),
+      "Updating the GraphViz attributes table."
+    ),
+    close_any(Close)
+  ).
+
+
+gv_attrs_download(Write):-
+  gv_attrs_iri(Iri),
+  html_download(Iri, Dom),
+  xpath_chk(Dom, //table(@align=lower_case(center)), TableDom),
+  xpath_table(TableDom, _, Rows),
+  maplist(write_attr_row(Write), Rows).
+
+
+write_attr_row(Write, [Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
+  atom_phrase(translate_usedby(UsedBy2), UsedBy1),
+  once(atom_phrase(translate_type(Types2), Types1)),
+  sort(UsedBy2, UsedBy3),
+  translate_default(Default1, Default2),
+  with_output_to(
+    Write,
+    write_fact(gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes))
+  ).
+
+gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html').
+
+
+
+
+
+% HELPERS %
+
+%! translate_default(+Default1:atom, -Default2:atom) is det.
+
+% The empty string is represented by the empty atom.
+translate_default('""', ''):- !.
+% The absence of a default value is represented by an uninstantiated variable.
+translate_default('<none>', _):- !.
+translate_default(Default, Default).
+
+
+
+%! translate_type(-Types:list(atom))// is det.
+
+translate_type([H|T]) -->
+  gv_attr_type(H),
+  whites,
+  translate_type(T).
+translate_type([H]) -->
+  gv_attr_type(H).
+translate_type([]) --> "".
+
+
+
+%! translated_usedby(
+%!   -UsedBy:list(oneof([cluster,edge,graph,node,subgraph]))
+%! )// is det.
+
+translate_usedby([cluster|T]) -->
+  "C", !,
+  translate_usedby(T).
+translate_usedby([edge|T]) -->
+  "E", !,
+  translate_usedby(T).
+translate_usedby([graph|T]) -->
+  "G", !,
+  translate_usedby(T).
+translate_usedby([node|T]) -->
+  "N", !,
+  translate_usedby(T).
+translate_usedby([subgraph|T]) -->
+  "S", !,
+  translate_usedby(T).
+translate_usedby([]) -->
+  "".
diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl
new file mode 100644
index 0000000..3ac5d44
--- /dev/null
+++ b/data/gv_color_scrape.pl
@@ -0,0 +1,56 @@
+:- module(
+  gv_color_scrape,
+  [
+    gv_color_scrape/1 % +File:atom
+  ]
+).
+
+/** <module> GraphViz: Scrape colors
+
+@author Wouter Beek
+@version 2015/10
+*/
+
+:- use_module(library(apply)).
+:- use_module(library(http/http_download)).
+:- use_module(library(iostream)).
+:- use_module(library(lists)).
+:- use_module(library(msg_ext)).
+:- use_module(library(pl/pl_term)).
+:- use_module(library(xpath)).
+:- use_module(library(xpath/xpath_table)).
+
+
+
+
+
+%! gv_color_scrape(+File:atom) is det.
+
+gv_color_scrape(File):-
+  setup_call_cleanup(
+    open_any(File, write, Write, Close, []),
+    verbose(
+      gv_color_download(Write),
+      "Updating the GraphViz color table."
+    ),
+    close_any(Close)
+  ).
+
+
+gv_color_download(Write):-
+  gv_color_iri(Iri),
+  html_download(Iri, Dom),
+  xpath_chk(Dom, //table(1), TableDom1),
+  xpath_chk(Dom, //table(2), TableDom2),
+  maplist(write_color_table(Write), [x11,svg], [TableDom1,TableDom2]).
+
+
+write_color_table(Write, Colorscheme, TableDom):-
+  xpath_table(TableDom, _, Rows),
+  append(Rows, Cells),
+  forall(
+    member(Cell, Cells),
+    with_output_to(Write, write_fact(gv_color(Colorscheme, Cell)))
+  ).
+
+gv_color_iri('http://www.graphviz.org/doc/info/colors.html').
diff --git a/gv_attrs.log b/gv_attrs.log
deleted file mode 100644
index a9c6010..0000000
--- a/gv_attrs.log
+++ /dev/null
@@ -1,169 +0,0 @@
-assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')).
-assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')).
-assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')).
-assert(gv_attr('_background',[graph],[string],_,'','')).
-assert(gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only')).
-assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')).
-assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')).
-assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')).
-assert(gv_attr(bb,[graph],[rect],'','','write only')).
-assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')).
-assert(gv_attr(center,[graph],[bool],false,'','')).
-assert(gv_attr(charset,[graph],[string],'"UTF-8"','','')).
-assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')).
-assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')).
-assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')).
-assert(gv_attr(comment,[edge,graph,node],[string],'','','')).
-assert(gv_attr(compound,[graph],[bool],false,'','dot only')).
-assert(gv_attr(concentrate,[graph],[bool],false,'','')).
-assert(gv_attr(constraint,[edge],[bool],true,'','dot only')).
-assert(gv_attr(decorate,[edge],[bool],false,'','')).
-assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')).
-assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')).
-assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')).
-assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')).
-assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')).
-assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')).
-assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')).
-assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')).
-assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')).
-assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')).
-assert(gv_attr(fixedsize,[node],[bool,string],false,'','')).
-assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')).
-assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','')).
-assert(gv_attr(fontnames,[graph],[string],'','','svg only')).
-assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')).
-assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')).
-assert(gv_attr(forcelabels,[graph],[bool],true,'','')).
-assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')).
-assert(gv_attr(group,[node],[string],'','','dot only')).
-assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(head_lp,[edge],[point],'','','write only')).
-assert(gv_attr(headclip,[edge],[bool],true,'','')).
-assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(headlabel,[edge],[lblString],'','','')).
-assert(gv_attr(headport,[edge],[portPos],center,'','')).
-assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(height,[node],[double],'0.5','0.02','')).
-assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
-assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
-assert(gv_attr(image,[node],[string],'','','')).
-assert(gv_attr(imagepath,[graph],[string],'','','')).
-assert(gv_attr(imagescale,[node],[bool,string],false,'','')).
-assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')).
-assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','')).
-assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')).
-assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')).
-assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')).
-assert(gv_attr(labelfloat,[edge],[bool],false,'','')).
-assert(gv_attr(labelfontcolor,[edge],[color],black,'','')).
-assert(gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','')).
-assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')).
-assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(labeljust,[cluster,graph],[string],'"c"','','')).
-assert(gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','')).
-assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(landscape,[graph],[bool],false,'','')).
-assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')).
-assert(gv_attr(layerlistsep,[graph],[string],'","','','')).
-assert(gv_attr(layers,[graph],[layerList],'','','')).
-assert(gv_attr(layerselect,[graph],[layerRange],'','','')).
-assert(gv_attr(layersep,[graph],[string],'" :\\t"','','')).
-assert(gv_attr(layout,[graph],[string],'','','')).
-assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')).
-assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')).
-assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')).
-assert(gv_attr(lhead,[edge],[string],'','','dot only')).
-assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')).
-assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')).
-assert(gv_attr(ltail,[edge],[string],'','','dot only')).
-assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')).
-assert(gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','')).
-assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')).
-assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')).
-assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')).
-assert(gv_attr(minlen,[edge],[int],'1','0','dot only')).
-assert(gv_attr(mode,[graph],[string],major,'','neato only')).
-assert(gv_attr(model,[graph],[string],shortpath,'','neato only')).
-assert(gv_attr(mosek,[graph],[bool],false,'','neato only')).
-assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')).
-assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')).
-assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')).
-assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')).
-assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')).
-assert(gv_attr(ordering,[graph,node],[string],'','','dot only')).
-assert(gv_attr(orientation,[node],[double],'0.0','360.0','')).
-assert(gv_attr(orientation,[graph],[string],'','','')).
-assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')).
-assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')).
-assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')).
-assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')).
-assert(gv_attr(pack,[graph],[bool,int],false,'','')).
-assert(gv_attr(packmode,[graph],[packMode],node,'','')).
-assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')).
-assert(gv_attr(page,[graph],[double,point],'','','')).
-assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')).
-assert(gv_attr(pencolor,[cluster],[color],black,'','')).
-assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')).
-assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')).
-assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')).
-assert(gv_attr(pos,[edge,node],[point,splineType],'','','')).
-assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')).
-assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')).
-assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')).
-assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')).
-assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')).
-assert(gv_attr(ratio,[graph],[double,string],'','','')).
-assert(gv_attr(rects,[node],[rect],'','','write only')).
-assert(gv_attr(regular,[node],[bool],false,'','')).
-assert(gv_attr(remincross,[graph],[bool],true,'','dot only')).
-assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')).
-assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')).
-assert(gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only')).
-assert(gv_attr(rotate,[graph],[int],'0','','')).
-assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')).
-assert(gv_attr(samehead,[edge],[string],'','','dot only')).
-assert(gv_attr(sametail,[edge],[string],'','','dot only')).
-assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')).
-assert(gv_attr(scale,[graph],[double,point],'','','not dot')).
-assert(gv_attr(searchsize,[graph],[int],'30','','dot only')).
-assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')).
-assert(gv_attr(shape,[node],[shape],ellipse,'','')).
-assert(gv_attr(shapefile,[node],[string],'','','')).
-assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')).
-assert(gv_attr(sides,[node],[int],'4','0','')).
-assert(gv_attr(size,[graph],[double,point],'','','')).
-assert(gv_attr(skew,[node],[double],'0.0','-100.0','')).
-assert(gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only')).
-assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')).
-assert(gv_attr(splines,[graph],[bool,string],'','','')).
-assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')).
-assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')).
-assert(gv_attr(stylesheet,[graph],[string],'','','svg only')).
-assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(tail_lp,[edge],[point],'','','write only')).
-assert(gv_attr(tailclip,[edge],[bool],true,'','')).
-assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(taillabel,[edge],[lblString],'','','')).
-assert(gv_attr(tailport,[edge],[portPos],center,'','')).
-assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')).
-assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')).
-assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')).
-assert(gv_attr(vertices,[node],[pointList],'','','write only')).
-assert(gv_attr(viewport,[graph],[viewPort],'','','')).
-assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')).
-assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')).
-assert(gv_attr(width,[node],[double],'0.75','0.01','')).
-assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')).
-assert(gv_attr(xlabel,[edge,node],[lblString],'','','')).
-assert(gv_attr(xlp,[edge,node],[point],'','','write only')).
-assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')).
diff --git a/gv_color.log b/gv_color.log
deleted file mode 100644
index 23d6cdf..0000000
--- a/gv_color.log
+++ /dev/null
@@ -1,802 +0,0 @@
-assert(gv_color(x11,aliceblue)).
-assert(gv_color(x11,antiquewhite)).
-assert(gv_color(x11,antiquewhite1)).
-assert(gv_color(x11,antiquewhite2)).
-assert(gv_color(x11,antiquewhite3)).
-assert(gv_color(x11,antiquewhite4)).
-assert(gv_color(x11,aquamarine)).
-assert(gv_color(x11,aquamarine1)).
-assert(gv_color(x11,aquamarine2)).
-assert(gv_color(x11,aquamarine3)).
-assert(gv_color(x11,aquamarine4)).
-assert(gv_color(x11,azure)).
-assert(gv_color(x11,azure1)).
-assert(gv_color(x11,azure2)).
-assert(gv_color(x11,azure3)).
-assert(gv_color(x11,azure4)).
-assert(gv_color(x11,beige)).
-assert(gv_color(x11,bisque)).
-assert(gv_color(x11,bisque1)).
-assert(gv_color(x11,bisque2)).
-assert(gv_color(x11,bisque3)).
-assert(gv_color(x11,bisque4)).
-assert(gv_color(x11,black)).
-assert(gv_color(x11,blanchedalmond)).
-assert(gv_color(x11,blue)).
-assert(gv_color(x11,blue1)).
-assert(gv_color(x11,blue2)).
-assert(gv_color(x11,blue3)).
-assert(gv_color(x11,blue4)).
-assert(gv_color(x11,blueviolet)).
-assert(gv_color(x11,brown)).
-assert(gv_color(x11,brown1)).
-assert(gv_color(x11,brown2)).
-assert(gv_color(x11,brown3)).
-assert(gv_color(x11,brown4)).
-assert(gv_color(x11,burlywood)).
-assert(gv_color(x11,burlywood1)).
-assert(gv_color(x11,burlywood2)).
-assert(gv_color(x11,burlywood3)).
-assert(gv_color(x11,burlywood4)).
-assert(gv_color(x11,cadetblue)).
-assert(gv_color(x11,cadetblue1)).
-assert(gv_color(x11,cadetblue2)).
-assert(gv_color(x11,cadetblue3)).
-assert(gv_color(x11,cadetblue4)).
-assert(gv_color(x11,chartreuse)).
-assert(gv_color(x11,chartreuse1)).
-assert(gv_color(x11,chartreuse2)).
-assert(gv_color(x11,chartreuse3)).
-assert(gv_color(x11,chartreuse4)).
-assert(gv_color(x11,chocolate)).
-assert(gv_color(x11,chocolate1)).
-assert(gv_color(x11,chocolate2)).
-assert(gv_color(x11,chocolate3)).
-assert(gv_color(x11,chocolate4)).
-assert(gv_color(x11,coral)).
-assert(gv_color(x11,coral1)).
-assert(gv_color(x11,coral2)).
-assert(gv_color(x11,coral3)).
-assert(gv_color(x11,coral4)).
-assert(gv_color(x11,cornflowerblue)).
-assert(gv_color(x11,cornsilk)).
-assert(gv_color(x11,cornsilk1)).
-assert(gv_color(x11,cornsilk2)).
-assert(gv_color(x11,cornsilk3)).
-assert(gv_color(x11,cornsilk4)).
-assert(gv_color(x11,crimson)).
-assert(gv_color(x11,cyan)).
-assert(gv_color(x11,cyan1)).
-assert(gv_color(x11,cyan2)).
-assert(gv_color(x11,cyan3)).
-assert(gv_color(x11,cyan4)).
-assert(gv_color(x11,darkgoldenrod)).
-assert(gv_color(x11,darkgoldenrod1)).
-assert(gv_color(x11,darkgoldenrod2)).
-assert(gv_color(x11,darkgoldenrod3)).
-assert(gv_color(x11,darkgoldenrod4)).
-assert(gv_color(x11,darkgreen)).
-assert(gv_color(x11,darkkhaki)).
-assert(gv_color(x11,darkolivegreen)).
-assert(gv_color(x11,darkolivegreen1)).
-assert(gv_color(x11,darkolivegreen2)).
-assert(gv_color(x11,darkolivegreen3)).
-assert(gv_color(x11,darkolivegreen4)).
-assert(gv_color(x11,darkorange)).
-assert(gv_color(x11,darkorange1)).
-assert(gv_color(x11,darkorange2)).
-assert(gv_color(x11,darkorange3)).
-assert(gv_color(x11,darkorange4)).
-assert(gv_color(x11,darkorchid)).
-assert(gv_color(x11,darkorchid1)).
-assert(gv_color(x11,darkorchid2)).
-assert(gv_color(x11,darkorchid3)).
-assert(gv_color(x11,darkorchid4)).
-assert(gv_color(x11,darksalmon)).
-assert(gv_color(x11,darkseagreen)).
-assert(gv_color(x11,darkseagreen1)).
-assert(gv_color(x11,darkseagreen2)).
-assert(gv_color(x11,darkseagreen3)).
-assert(gv_color(x11,darkseagreen4)).
-assert(gv_color(x11,darkslateblue)).
-assert(gv_color(x11,darkslategray)).
-assert(gv_color(x11,darkslategray1)).
-assert(gv_color(x11,darkslategray2)).
-assert(gv_color(x11,darkslategray3)).
-assert(gv_color(x11,darkslategray4)).
-assert(gv_color(x11,darkslategrey)).
-assert(gv_color(x11,darkturquoise)).
-assert(gv_color(x11,darkviolet)).
-assert(gv_color(x11,deeppink)).
-assert(gv_color(x11,deeppink1)).
-assert(gv_color(x11,deeppink2)).
-assert(gv_color(x11,deeppink3)).
-assert(gv_color(x11,deeppink4)).
-assert(gv_color(x11,deepskyblue)).
-assert(gv_color(x11,deepskyblue1)).
-assert(gv_color(x11,deepskyblue2)).
-assert(gv_color(x11,deepskyblue3)).
-assert(gv_color(x11,deepskyblue4)).
-assert(gv_color(x11,dimgray)).
-assert(gv_color(x11,dimgrey)).
-assert(gv_color(x11,dodgerblue)).
-assert(gv_color(x11,dodgerblue1)).
-assert(gv_color(x11,dodgerblue2)).
-assert(gv_color(x11,dodgerblue3)).
-assert(gv_color(x11,dodgerblue4)).
-assert(gv_color(x11,firebrick)).
-assert(gv_color(x11,firebrick1)).
-assert(gv_color(x11,firebrick2)).
-assert(gv_color(x11,firebrick3)).
-assert(gv_color(x11,firebrick4)).
-assert(gv_color(x11,floralwhite)).
-assert(gv_color(x11,forestgreen)).
-assert(gv_color(x11,gainsboro)).
-assert(gv_color(x11,ghostwhite)).
-assert(gv_color(x11,gold)).
-assert(gv_color(x11,gold1)).
-assert(gv_color(x11,gold2)).
-assert(gv_color(x11,gold3)).
-assert(gv_color(x11,gold4)).
-assert(gv_color(x11,goldenrod)).
-assert(gv_color(x11,goldenrod1)).
-assert(gv_color(x11,goldenrod2)).
-assert(gv_color(x11,goldenrod3)).
-assert(gv_color(x11,goldenrod4)).
-assert(gv_color(x11,gray)).
-assert(gv_color(x11,gray0)).
-assert(gv_color(x11,gray1)).
-assert(gv_color(x11,gray10)).
-assert(gv_color(x11,gray100)).
-assert(gv_color(x11,gray11)).
-assert(gv_color(x11,gray12)).
-assert(gv_color(x11,gray13)).
-assert(gv_color(x11,gray14)).
-assert(gv_color(x11,gray15)).
-assert(gv_color(x11,gray16)).
-assert(gv_color(x11,gray17)).
-assert(gv_color(x11,gray18)).
-assert(gv_color(x11,gray19)).
-assert(gv_color(x11,gray2)).
-assert(gv_color(x11,gray20)).
-assert(gv_color(x11,gray21)).
-assert(gv_color(x11,gray22)).
-assert(gv_color(x11,gray23)).
-assert(gv_color(x11,gray24)).
-assert(gv_color(x11,gray25)).
-assert(gv_color(x11,gray26)).
-assert(gv_color(x11,gray27)).
-assert(gv_color(x11,gray28)).
-assert(gv_color(x11,gray29)).
-assert(gv_color(x11,gray3)).
-assert(gv_color(x11,gray30)).
-assert(gv_color(x11,gray31)).
-assert(gv_color(x11,gray32)).
-assert(gv_color(x11,gray33)).
-assert(gv_color(x11,gray34)).
-assert(gv_color(x11,gray35)).
-assert(gv_color(x11,gray36)).
-assert(gv_color(x11,gray37)).
-assert(gv_color(x11,gray38)).
-assert(gv_color(x11,gray39)).
-assert(gv_color(x11,gray4)).
-assert(gv_color(x11,gray40)).
-assert(gv_color(x11,gray41)).
-assert(gv_color(x11,gray42)).
-assert(gv_color(x11,gray43)).
-assert(gv_color(x11,gray44)).
-assert(gv_color(x11,gray45)).
-assert(gv_color(x11,gray46)).
-assert(gv_color(x11,gray47)).
-assert(gv_color(x11,gray48)).
-assert(gv_color(x11,gray49)).
-assert(gv_color(x11,gray5)).
-assert(gv_color(x11,gray50)).
-assert(gv_color(x11,gray51)).
-assert(gv_color(x11,gray52)).
-assert(gv_color(x11,gray53)).
-assert(gv_color(x11,gray54)).
-assert(gv_color(x11,gray55)).
-assert(gv_color(x11,gray56)).
-assert(gv_color(x11,gray57)).
-assert(gv_color(x11,gray58)).
-assert(gv_color(x11,gray59)).
-assert(gv_color(x11,gray6)).
-assert(gv_color(x11,gray60)).
-assert(gv_color(x11,gray61)).
-assert(gv_color(x11,gray62)).
-assert(gv_color(x11,gray63)).
-assert(gv_color(x11,gray64)).
-assert(gv_color(x11,gray65)).
-assert(gv_color(x11,gray66)).
-assert(gv_color(x11,gray67)).
-assert(gv_color(x11,gray68)).
-assert(gv_color(x11,gray69)).
-assert(gv_color(x11,gray7)).
-assert(gv_color(x11,gray70)).
-assert(gv_color(x11,gray71)).
-assert(gv_color(x11,gray72)).
-assert(gv_color(x11,gray73)).
-assert(gv_color(x11,gray74)).
-assert(gv_color(x11,gray75)).
-assert(gv_color(x11,gray76)).
-assert(gv_color(x11,gray77)).
-assert(gv_color(x11,gray78)).
-assert(gv_color(x11,gray79)).
-assert(gv_color(x11,gray8)).
-assert(gv_color(x11,gray80)).
-assert(gv_color(x11,gray81)).
-assert(gv_color(x11,gray82)).
-assert(gv_color(x11,gray83)).
-assert(gv_color(x11,gray84)).
-assert(gv_color(x11,gray85)).
-assert(gv_color(x11,gray86)).
-assert(gv_color(x11,gray87)).
-assert(gv_color(x11,gray88)).
-assert(gv_color(x11,gray89)).
-assert(gv_color(x11,gray9)).
-assert(gv_color(x11,gray90)).
-assert(gv_color(x11,gray91)).
-assert(gv_color(x11,gray92)).
-assert(gv_color(x11,gray93)).
-assert(gv_color(x11,gray94)).
-assert(gv_color(x11,gray95)).
-assert(gv_color(x11,gray96)).
-assert(gv_color(x11,gray97)).
-assert(gv_color(x11,gray98)).
-assert(gv_color(x11,gray99)).
-assert(gv_color(x11,green)).
-assert(gv_color(x11,green1)).
-assert(gv_color(x11,green2)).
-assert(gv_color(x11,green3)).
-assert(gv_color(x11,green4)).
-assert(gv_color(x11,greenyellow)).
-assert(gv_color(x11,grey)).
-assert(gv_color(x11,grey0)).
-assert(gv_color(x11,grey1)).
-assert(gv_color(x11,grey10)).
-assert(gv_color(x11,grey100)).
-assert(gv_color(x11,grey11)).
-assert(gv_color(x11,grey12)).
-assert(gv_color(x11,grey13)).
-assert(gv_color(x11,grey14)).
-assert(gv_color(x11,grey15)).
-assert(gv_color(x11,grey16)).
-assert(gv_color(x11,grey17)).
-assert(gv_color(x11,grey18)).
-assert(gv_color(x11,grey19)).
-assert(gv_color(x11,grey2)).
-assert(gv_color(x11,grey20)).
-assert(gv_color(x11,grey21)).
-assert(gv_color(x11,grey22)).
-assert(gv_color(x11,grey23)).
-assert(gv_color(x11,grey24)).
-assert(gv_color(x11,grey25)).
-assert(gv_color(x11,grey26)).
-assert(gv_color(x11,grey27)).
-assert(gv_color(x11,grey28)).
-assert(gv_color(x11,grey29)).
-assert(gv_color(x11,grey3)).
-assert(gv_color(x11,grey30)).
-assert(gv_color(x11,grey31)).
-assert(gv_color(x11,grey32)).
-assert(gv_color(x11,grey33)).
-assert(gv_color(x11,grey34)).
-assert(gv_color(x11,grey35)).
-assert(gv_color(x11,grey36)).
-assert(gv_color(x11,grey37)).
-assert(gv_color(x11,grey38)).
-assert(gv_color(x11,grey39)).
-assert(gv_color(x11,grey4)).
-assert(gv_color(x11,grey40)).
-assert(gv_color(x11,grey41)).
-assert(gv_color(x11,grey42)).
-assert(gv_color(x11,grey43)).
-assert(gv_color(x11,grey44)).
-assert(gv_color(x11,grey45)).
-assert(gv_color(x11,grey46)).
-assert(gv_color(x11,grey47)).
-assert(gv_color(x11,grey48)).
-assert(gv_color(x11,grey49)).
-assert(gv_color(x11,grey5)).
-assert(gv_color(x11,grey50)).
-assert(gv_color(x11,grey51)).
-assert(gv_color(x11,grey52)).
-assert(gv_color(x11,grey53)).
-assert(gv_color(x11,grey54)).
-assert(gv_color(x11,grey55)).
-assert(gv_color(x11,grey56)).
-assert(gv_color(x11,grey57)).
-assert(gv_color(x11,grey58)).
-assert(gv_color(x11,grey59)).
-assert(gv_color(x11,grey6)).
-assert(gv_color(x11,grey60)).
-assert(gv_color(x11,grey61)).
-assert(gv_color(x11,grey62)).
-assert(gv_color(x11,grey63)).
-assert(gv_color(x11,grey64)).
-assert(gv_color(x11,grey65)).
-assert(gv_color(x11,grey66)).
-assert(gv_color(x11,grey67)).
-assert(gv_color(x11,grey68)).
-assert(gv_color(x11,grey69)).
-assert(gv_color(x11,grey7)).
-assert(gv_color(x11,grey70)).
-assert(gv_color(x11,grey71)).
-assert(gv_color(x11,grey72)).
-assert(gv_color(x11,grey73)).
-assert(gv_color(x11,grey74)).
-assert(gv_color(x11,grey75)).
-assert(gv_color(x11,grey76)).
-assert(gv_color(x11,grey77)).
-assert(gv_color(x11,grey78)).
-assert(gv_color(x11,grey79)).
-assert(gv_color(x11,grey8)).
-assert(gv_color(x11,grey80)).
-assert(gv_color(x11,grey81)).
-assert(gv_color(x11,grey82)).
-assert(gv_color(x11,grey83)).
-assert(gv_color(x11,grey84)).
-assert(gv_color(x11,grey85)).
-assert(gv_color(x11,grey86)).
-assert(gv_color(x11,grey87)).
-assert(gv_color(x11,grey88)).
-assert(gv_color(x11,grey89)).
-assert(gv_color(x11,grey9)).
-assert(gv_color(x11,grey90)).
-assert(gv_color(x11,grey91)).
-assert(gv_color(x11,grey92)).
-assert(gv_color(x11,grey93)).
-assert(gv_color(x11,grey94)).
-assert(gv_color(x11,grey95)).
-assert(gv_color(x11,grey96)).
-assert(gv_color(x11,grey97)).
-assert(gv_color(x11,grey98)).
-assert(gv_color(x11,grey99)).
-assert(gv_color(x11,honeydew)).
-assert(gv_color(x11,honeydew1)).
-assert(gv_color(x11,honeydew2)).
-assert(gv_color(x11,honeydew3)).
-assert(gv_color(x11,honeydew4)).
-assert(gv_color(x11,hotpink)).
-assert(gv_color(x11,hotpink1)).
-assert(gv_color(x11,hotpink2)).
-assert(gv_color(x11,hotpink3)).
-assert(gv_color(x11,hotpink4)).
-assert(gv_color(x11,indianred)).
-assert(gv_color(x11,indianred1)).
-assert(gv_color(x11,indianred2)).
-assert(gv_color(x11,indianred3)).
-assert(gv_color(x11,indianred4)).
-assert(gv_color(x11,indigo)).
-assert(gv_color(x11,invis)).
-assert(gv_color(x11,ivory)).
-assert(gv_color(x11,ivory1)).
-assert(gv_color(x11,ivory2)).
-assert(gv_color(x11,ivory3)).
-assert(gv_color(x11,ivory4)).
-assert(gv_color(x11,khaki)).
-assert(gv_color(x11,khaki1)).
-assert(gv_color(x11,khaki2)).
-assert(gv_color(x11,khaki3)).
-assert(gv_color(x11,khaki4)).
-assert(gv_color(x11,lavender)).
-assert(gv_color(x11,lavenderblush)).
-assert(gv_color(x11,lavenderblush1)).
-assert(gv_color(x11,lavenderblush2)).
-assert(gv_color(x11,lavenderblush3)).
-assert(gv_color(x11,lavenderblush4)).
-assert(gv_color(x11,lawngreen)).
-assert(gv_color(x11,lemonchiffon)).
-assert(gv_color(x11,lemonchiffon1)).
-assert(gv_color(x11,lemonchiffon2)).
-assert(gv_color(x11,lemonchiffon3)).
-assert(gv_color(x11,lemonchiffon4)).
-assert(gv_color(x11,lightblue)).
-assert(gv_color(x11,lightblue1)).
-assert(gv_color(x11,lightblue2)).
-assert(gv_color(x11,lightblue3)).
-assert(gv_color(x11,lightblue4)).
-assert(gv_color(x11,lightcoral)).
-assert(gv_color(x11,lightcyan)).
-assert(gv_color(x11,lightcyan1)).
-assert(gv_color(x11,lightcyan2)).
-assert(gv_color(x11,lightcyan3)).
-assert(gv_color(x11,lightcyan4)).
-assert(gv_color(x11,lightgoldenrod)).
-assert(gv_color(x11,lightgoldenrod1)).
-assert(gv_color(x11,lightgoldenrod2)).
-assert(gv_color(x11,lightgoldenrod3)).
-assert(gv_color(x11,lightgoldenrod4)).
-assert(gv_color(x11,lightgoldenrodyellow)).
-assert(gv_color(x11,lightgray)).
-assert(gv_color(x11,lightgrey)).
-assert(gv_color(x11,lightpink)).
-assert(gv_color(x11,lightpink1)).
-assert(gv_color(x11,lightpink2)).
-assert(gv_color(x11,lightpink3)).
-assert(gv_color(x11,lightpink4)).
-assert(gv_color(x11,lightsalmon)).
-assert(gv_color(x11,lightsalmon1)).
-assert(gv_color(x11,lightsalmon2)).
-assert(gv_color(x11,lightsalmon3)).
-assert(gv_color(x11,lightsalmon4)).
-assert(gv_color(x11,lightseagreen)).
-assert(gv_color(x11,lightskyblue)).
-assert(gv_color(x11,lightskyblue1)).
-assert(gv_color(x11,lightskyblue2)).
-assert(gv_color(x11,lightskyblue3)).
-assert(gv_color(x11,lightskyblue4)).
-assert(gv_color(x11,lightslateblue)).
-assert(gv_color(x11,lightslategray)).
-assert(gv_color(x11,lightslategrey)).
-assert(gv_color(x11,lightsteelblue)).
-assert(gv_color(x11,lightsteelblue1)).
-assert(gv_color(x11,lightsteelblue2)).
-assert(gv_color(x11,lightsteelblue3)).
-assert(gv_color(x11,lightsteelblue4)).
-assert(gv_color(x11,lightyellow)).
-assert(gv_color(x11,lightyellow1)).
-assert(gv_color(x11,lightyellow2)).
-assert(gv_color(x11,lightyellow3)).
-assert(gv_color(x11,lightyellow4)).
-assert(gv_color(x11,limegreen)).
-assert(gv_color(x11,linen)).
-assert(gv_color(x11,magenta)).
-assert(gv_color(x11,magenta1)).
-assert(gv_color(x11,magenta2)).
-assert(gv_color(x11,magenta3)).
-assert(gv_color(x11,magenta4)).
-assert(gv_color(x11,maroon)).
-assert(gv_color(x11,maroon1)).
-assert(gv_color(x11,maroon2)).
-assert(gv_color(x11,maroon3)).
-assert(gv_color(x11,maroon4)).
-assert(gv_color(x11,mediumaquamarine)).
-assert(gv_color(x11,mediumblue)).
-assert(gv_color(x11,mediumorchid)).
-assert(gv_color(x11,mediumorchid1)).
-assert(gv_color(x11,mediumorchid2)).
-assert(gv_color(x11,mediumorchid3)).
-assert(gv_color(x11,mediumorchid4)).
-assert(gv_color(x11,mediumpurple)).
-assert(gv_color(x11,mediumpurple1)).
-assert(gv_color(x11,mediumpurple2)).
-assert(gv_color(x11,mediumpurple3)).
-assert(gv_color(x11,mediumpurple4)).
-assert(gv_color(x11,mediumseagreen)).
-assert(gv_color(x11,mediumslateblue)).
-assert(gv_color(x11,mediumspringgreen)).
-assert(gv_color(x11,mediumturquoise)).
-assert(gv_color(x11,mediumvioletred)).
-assert(gv_color(x11,midnightblue)).
-assert(gv_color(x11,mintcream)).
-assert(gv_color(x11,mistyrose)).
-assert(gv_color(x11,mistyrose1)).
-assert(gv_color(x11,mistyrose2)).
-assert(gv_color(x11,mistyrose3)).
-assert(gv_color(x11,mistyrose4)).
-assert(gv_color(x11,moccasin)).
-assert(gv_color(x11,navajowhite)).
-assert(gv_color(x11,navajowhite1)).
-assert(gv_color(x11,navajowhite2)).
-assert(gv_color(x11,navajowhite3)).
-assert(gv_color(x11,navajowhite4)).
-assert(gv_color(x11,navy)).
-assert(gv_color(x11,navyblue)).
-assert(gv_color(x11,none)).
-assert(gv_color(x11,oldlace)).
-assert(gv_color(x11,olivedrab)).
-assert(gv_color(x11,olivedrab1)).
-assert(gv_color(x11,olivedrab2)).
-assert(gv_color(x11,olivedrab3)).
-assert(gv_color(x11,olivedrab4)).
-assert(gv_color(x11,orange)).
-assert(gv_color(x11,orange1)).
-assert(gv_color(x11,orange2)).
-assert(gv_color(x11,orange3)).
-assert(gv_color(x11,orange4)).
-assert(gv_color(x11,orangered)).
-assert(gv_color(x11,orangered1)).
-assert(gv_color(x11,orangered2)).
-assert(gv_color(x11,orangered3)).
-assert(gv_color(x11,orangered4)).
-assert(gv_color(x11,orchid)).
-assert(gv_color(x11,orchid1)).
-assert(gv_color(x11,orchid2)).
-assert(gv_color(x11,orchid3)).
-assert(gv_color(x11,orchid4)).
-assert(gv_color(x11,palegoldenrod)).
-assert(gv_color(x11,palegreen)).
-assert(gv_color(x11,palegreen1)).
-assert(gv_color(x11,palegreen2)).
-assert(gv_color(x11,palegreen3)).
-assert(gv_color(x11,palegreen4)).
-assert(gv_color(x11,paleturquoise)).
-assert(gv_color(x11,paleturquoise1)).
-assert(gv_color(x11,paleturquoise2)).
-assert(gv_color(x11,paleturquoise3)).
-assert(gv_color(x11,paleturquoise4)).
-assert(gv_color(x11,palevioletred)).
-assert(gv_color(x11,palevioletred1)).
-assert(gv_color(x11,palevioletred2)).
-assert(gv_color(x11,palevioletred3)).
-assert(gv_color(x11,palevioletred4)).
-assert(gv_color(x11,papayawhip)).
-assert(gv_color(x11,peachpuff)).
-assert(gv_color(x11,peachpuff1)).
-assert(gv_color(x11,peachpuff2)).
-assert(gv_color(x11,peachpuff3)).
-assert(gv_color(x11,peachpuff4)).
-assert(gv_color(x11,peru)).
-assert(gv_color(x11,pink)).
-assert(gv_color(x11,pink1)).
-assert(gv_color(x11,pink2)).
-assert(gv_color(x11,pink3)).
-assert(gv_color(x11,pink4)).
-assert(gv_color(x11,plum)).
-assert(gv_color(x11,plum1)).
-assert(gv_color(x11,plum2)).
-assert(gv_color(x11,plum3)).
-assert(gv_color(x11,plum4)).
-assert(gv_color(x11,powderblue)).
-assert(gv_color(x11,purple)).
-assert(gv_color(x11,purple1)).
-assert(gv_color(x11,purple2)).
-assert(gv_color(x11,purple3)).
-assert(gv_color(x11,purple4)).
-assert(gv_color(x11,red)).
-assert(gv_color(x11,red1)).
-assert(gv_color(x11,red2)).
-assert(gv_color(x11,red3)).
-assert(gv_color(x11,red4)).
-assert(gv_color(x11,rosybrown)).
-assert(gv_color(x11,rosybrown1)).
-assert(gv_color(x11,rosybrown2)).
-assert(gv_color(x11,rosybrown3)).
-assert(gv_color(x11,rosybrown4)).
-assert(gv_color(x11,royalblue)).
-assert(gv_color(x11,royalblue1)).
-assert(gv_color(x11,royalblue2)).
-assert(gv_color(x11,royalblue3)).
-assert(gv_color(x11,royalblue4)).
-assert(gv_color(x11,saddlebrown)).
-assert(gv_color(x11,salmon)).
-assert(gv_color(x11,salmon1)).
-assert(gv_color(x11,salmon2)).
-assert(gv_color(x11,salmon3)).
-assert(gv_color(x11,salmon4)).
-assert(gv_color(x11,sandybrown)).
-assert(gv_color(x11,seagreen)).
-assert(gv_color(x11,seagreen1)).
-assert(gv_color(x11,seagreen2)).
-assert(gv_color(x11,seagreen3)).
-assert(gv_color(x11,seagreen4)).
-assert(gv_color(x11,seashell)).
-assert(gv_color(x11,seashell1)).
-assert(gv_color(x11,seashell2)).
-assert(gv_color(x11,seashell3)).
-assert(gv_color(x11,seashell4)).
-assert(gv_color(x11,sienna)).
-assert(gv_color(x11,sienna1)).
-assert(gv_color(x11,sienna2)).
-assert(gv_color(x11,sienna3)).
-assert(gv_color(x11,sienna4)).
-assert(gv_color(x11,skyblue)).
-assert(gv_color(x11,skyblue1)).
-assert(gv_color(x11,skyblue2)).
-assert(gv_color(x11,skyblue3)).
-assert(gv_color(x11,skyblue4)).
-assert(gv_color(x11,slateblue)).
-assert(gv_color(x11,slateblue1)).
-assert(gv_color(x11,slateblue2)).
-assert(gv_color(x11,slateblue3)).
-assert(gv_color(x11,slateblue4)).
-assert(gv_color(x11,slategray)).
-assert(gv_color(x11,slategray1)).
-assert(gv_color(x11,slategray2)).
-assert(gv_color(x11,slategray3)).
-assert(gv_color(x11,slategray4)).
-assert(gv_color(x11,slategrey)).
-assert(gv_color(x11,snow)).
-assert(gv_color(x11,snow1)).
-assert(gv_color(x11,snow2)).
-assert(gv_color(x11,snow3)).
-assert(gv_color(x11,snow4)).
-assert(gv_color(x11,springgreen)).
-assert(gv_color(x11,springgreen1)).
-assert(gv_color(x11,springgreen2)).
-assert(gv_color(x11,springgreen3)).
-assert(gv_color(x11,springgreen4)).
-assert(gv_color(x11,steelblue)).
-assert(gv_color(x11,steelblue1)).
-assert(gv_color(x11,steelblue2)).
-assert(gv_color(x11,steelblue3)).
-assert(gv_color(x11,steelblue4)).
-assert(gv_color(x11,tan)).
-assert(gv_color(x11,tan1)).
-assert(gv_color(x11,tan2)).
-assert(gv_color(x11,tan3)).
-assert(gv_color(x11,tan4)).
-assert(gv_color(x11,thistle)).
-assert(gv_color(x11,thistle1)).
-assert(gv_color(x11,thistle2)).
-assert(gv_color(x11,thistle3)).
-assert(gv_color(x11,thistle4)).
-assert(gv_color(x11,tomato)).
-assert(gv_color(x11,tomato1)).
-assert(gv_color(x11,tomato2)).
-assert(gv_color(x11,tomato3)).
-assert(gv_color(x11,tomato4)).
-assert(gv_color(x11,transparent)).
-assert(gv_color(x11,turquoise)).
-assert(gv_color(x11,turquoise1)).
-assert(gv_color(x11,turquoise2)).
-assert(gv_color(x11,turquoise3)).
-assert(gv_color(x11,turquoise4)).
-assert(gv_color(x11,violet)).
-assert(gv_color(x11,violetred)).
-assert(gv_color(x11,violetred1)).
-assert(gv_color(x11,violetred2)).
-assert(gv_color(x11,violetred3)).
-assert(gv_color(x11,violetred4)).
-assert(gv_color(x11,wheat)).
-assert(gv_color(x11,wheat1)).
-assert(gv_color(x11,wheat2)).
-assert(gv_color(x11,wheat3)).
-assert(gv_color(x11,wheat4)).
-assert(gv_color(x11,white)).
-assert(gv_color(x11,whitesmoke)).
-assert(gv_color(x11,yellow)).
-assert(gv_color(x11,yellow1)).
-assert(gv_color(x11,yellow2)).
-assert(gv_color(x11,yellow3)).
-assert(gv_color(x11,yellow4)).
-assert(gv_color(x11,yellowgreen)).
-assert(gv_color(svg,aliceblue)).
-assert(gv_color(svg,antiquewhite)).
-assert(gv_color(svg,aqua)).
-assert(gv_color(svg,aquamarine)).
-assert(gv_color(svg,azure)).
-assert(gv_color(svg,beige)).
-assert(gv_color(svg,bisque)).
-assert(gv_color(svg,black)).
-assert(gv_color(svg,blanchedalmond)).
-assert(gv_color(svg,blue)).
-assert(gv_color(svg,blueviolet)).
-assert(gv_color(svg,brown)).
-assert(gv_color(svg,burlywood)).
-assert(gv_color(svg,cadetblue)).
-assert(gv_color(svg,chartreuse)).
-assert(gv_color(svg,chocolate)).
-assert(gv_color(svg,coral)).
-assert(gv_color(svg,cornflowerblue)).
-assert(gv_color(svg,cornsilk)).
-assert(gv_color(svg,crimson)).
-assert(gv_color(svg,cyan)).
-assert(gv_color(svg,darkblue)).
-assert(gv_color(svg,darkcyan)).
-assert(gv_color(svg,darkgoldenrod)).
-assert(gv_color(svg,darkgray)).
-assert(gv_color(svg,darkgreen)).
-assert(gv_color(svg,darkgrey)).
-assert(gv_color(svg,darkkhaki)).
-assert(gv_color(svg,darkmagenta)).
-assert(gv_color(svg,darkolivegreen)).
-assert(gv_color(svg,darkorange)).
-assert(gv_color(svg,darkorchid)).
-assert(gv_color(svg,darkred)).
-assert(gv_color(svg,darksalmon)).
-assert(gv_color(svg,darkseagreen)).
-assert(gv_color(svg,darkslateblue)).
-assert(gv_color(svg,darkslategray)).
-assert(gv_color(svg,darkslategrey)).
-assert(gv_color(svg,darkturquoise)).
-assert(gv_color(svg,darkviolet)).
-assert(gv_color(svg,deeppink)).
-assert(gv_color(svg,deepskyblue)).
-assert(gv_color(svg,dimgray)).
-assert(gv_color(svg,dimgrey)).
-assert(gv_color(svg,dodgerblue)).
-assert(gv_color(svg,firebrick)).
-assert(gv_color(svg,floralwhite)).
-assert(gv_color(svg,forestgreen)).
-assert(gv_color(svg,fuchsia)).
-assert(gv_color(svg,gainsboro)).
-assert(gv_color(svg,ghostwhite)).
-assert(gv_color(svg,gold)).
-assert(gv_color(svg,goldenrod)).
-assert(gv_color(svg,gray)).
-assert(gv_color(svg,grey)).
-assert(gv_color(svg,green)).
-assert(gv_color(svg,greenyellow)).
-assert(gv_color(svg,honeydew)).
-assert(gv_color(svg,hotpink)).
-assert(gv_color(svg,indianred)).
-assert(gv_color(svg,indigo)).
-assert(gv_color(svg,ivory)).
-assert(gv_color(svg,khaki)).
-assert(gv_color(svg,lavender)).
-assert(gv_color(svg,lavenderblush)).
-assert(gv_color(svg,lawngreen)).
-assert(gv_color(svg,lemonchiffon)).
-assert(gv_color(svg,lightblue)).
-assert(gv_color(svg,lightcoral)).
-assert(gv_color(svg,lightcyan)).
-assert(gv_color(svg,lightgoldenrodyellow)).
-assert(gv_color(svg,lightgray)).
-assert(gv_color(svg,lightgreen)).
-assert(gv_color(svg,lightgrey)).
-assert(gv_color(svg,lightpink)).
-assert(gv_color(svg,lightsalmon)).
-assert(gv_color(svg,lightseagreen)).
-assert(gv_color(svg,lightskyblue)).
-assert(gv_color(svg,lightslategray)).
-assert(gv_color(svg,lightslategrey)).
-assert(gv_color(svg,lightsteelblue)).
-assert(gv_color(svg,lightyellow)).
-assert(gv_color(svg,lime)).
-assert(gv_color(svg,limegreen)).
-assert(gv_color(svg,linen)).
-assert(gv_color(svg,magenta)).
-assert(gv_color(svg,maroon)).
-assert(gv_color(svg,mediumaquamarine)).
-assert(gv_color(svg,mediumblue)).
-assert(gv_color(svg,mediumorchid)).
-assert(gv_color(svg,mediumpurple)).
-assert(gv_color(svg,mediumseagreen)).
-assert(gv_color(svg,mediumslateblue)).
-assert(gv_color(svg,mediumspringgreen)).
-assert(gv_color(svg,mediumturquoise)).
-assert(gv_color(svg,mediumvioletred)).
-assert(gv_color(svg,midnightblue)).
-assert(gv_color(svg,mintcream)).
-assert(gv_color(svg,mistyrose)).
-assert(gv_color(svg,moccasin)).
-assert(gv_color(svg,navajowhite)).
-assert(gv_color(svg,navy)).
-assert(gv_color(svg,oldlace)).
-assert(gv_color(svg,olive)).
-assert(gv_color(svg,olivedrab)).
-assert(gv_color(svg,orange)).
-assert(gv_color(svg,orangered)).
-assert(gv_color(svg,orchid)).
-assert(gv_color(svg,palegoldenrod)).
-assert(gv_color(svg,palegreen)).
-assert(gv_color(svg,paleturquoise)).
-assert(gv_color(svg,palevioletred)).
-assert(gv_color(svg,papayawhip)).
-assert(gv_color(svg,peachpuff)).
-assert(gv_color(svg,peru)).
-assert(gv_color(svg,pink)).
-assert(gv_color(svg,plum)).
-assert(gv_color(svg,powderblue)).
-assert(gv_color(svg,purple)).
-assert(gv_color(svg,red)).
-assert(gv_color(svg,rosybrown)).
-assert(gv_color(svg,royalblue)).
-assert(gv_color(svg,saddlebrown)).
-assert(gv_color(svg,salmon)).
-assert(gv_color(svg,sandybrown)).
-assert(gv_color(svg,seagreen)).
-assert(gv_color(svg,seashell)).
-assert(gv_color(svg,sienna)).
-assert(gv_color(svg,silver)).
-assert(gv_color(svg,skyblue)).
-assert(gv_color(svg,slateblue)).
-assert(gv_color(svg,slategray)).
-assert(gv_color(svg,slategrey)).
-assert(gv_color(svg,snow)).
-assert(gv_color(svg,springgreen)).
-assert(gv_color(svg,steelblue)).
-assert(gv_color(svg,tan)).
-assert(gv_color(svg,teal)).
-assert(gv_color(svg,thistle)).
-assert(gv_color(svg,tomato)).
-assert(gv_color(svg,turquoise)).
-assert(gv_color(svg,violet)).
-assert(gv_color(svg,wheat)).
-assert(gv_color(svg,white)).
-assert(gv_color(svg,whitesmoke)).
-assert(gv_color(svg,yellow)).
-assert(gv_color(svg,yellowgreen)).
diff --git a/prolog/gv/gv_attrs.data b/prolog/gv/gv_attrs.data
new file mode 100644
index 0000000..95fc680
--- /dev/null
+++ b/prolog/gv/gv_attrs.data
@@ -0,0 +1,169 @@
+gv_attr('Damping',[graph],[double],'0.99','0.0','neato only').
+gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only').
+gv_attr('URL',[cluster,edge,graph,node],[escString],_G59448,'','svg, postscript, map only').
+gv_attr('_background',[graph],[string],_G59644,'','').
+gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only').
+gv_attr(arrowhead,[edge],[arrowType],normal,'','').
+gv_attr(arrowsize,[edge],[double],'1.0','0.0','').
+gv_attr(arrowtail,[edge],[arrowType],normal,'','').
+gv_attr(bb,[graph],[rect],'','','write only').
+gv_attr(bgcolor,[cluster,graph],[color,colorList],_G60571,'','').
+gv_attr(center,[graph],[bool],false,'','').
+gv_attr(charset,[graph],[string],'"UTF-8"','','').
+gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only').
+gv_attr(color,[cluster,edge,node],[color,colorList],black,'','').
+gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','').
+gv_attr(comment,[edge,graph,node],[string],'','','').
+gv_attr(compound,[graph],[bool],false,'','dot only').
+gv_attr(concentrate,[graph],[bool],false,'','').
+gv_attr(constraint,[edge],[bool],true,'','dot only').
+gv_attr(decorate,[edge],[bool],false,'','').
+gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only').
+gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only').
+gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only').
+gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','').
+gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only').
+gv_attr(distortion,[node],[double],'0.0','-100.0','').
+gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only').
+gv_attr(edgeURL,[edge],[escString],'','','svg, map only').
+gv_attr(edgehref,[edge],[escString],'','','svg, map only').
+gv_attr(edgetarget,[edge],[escString],_G63711,'','svg, map only').
+gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only').
+gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only').
+gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot').
+gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','').
+gv_attr(fixedsize,[node],[bool,string],false,'','').
+gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','').
+gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','').
+gv_attr(fontnames,[graph],[string],'','','svg only').
+gv_attr(fontpath,[graph],[string],'system-dependent','','').
+gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','').
+gv_attr(forcelabels,[graph],[bool],true,'','').
+gv_attr(gradientangle,[cluster,graph,node],[int],'','','').
+gv_attr(group,[node],[string],'','','dot only').
+gv_attr(headURL,[edge],[escString],'','','svg, map only').
+gv_attr(head_lp,[edge],[point],'','','write only').
+gv_attr(headclip,[edge],[bool],true,'','').
+gv_attr(headhref,[edge],[escString],'','','svg, map only').
+gv_attr(headlabel,[edge],[lblString],'','','').
+gv_attr(headport,[edge],[portPos],center,'','').
+gv_attr(headtarget,[edge],[escString],_G4892,'','svg, map only').
+gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only').
+gv_attr(height,[node],[double],'0.5','0.02','').
+gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only').
+gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only').
+gv_attr(image,[node],[string],'','','').
+gv_attr(imagepath,[graph],[string],'','','').
+gv_attr(imagescale,[node],[bool,string],false,'','').
+gv_attr(inputscale,[graph],[double],_G6250,'','fdp, neato only').
+gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','').
+gv_attr(labelURL,[edge],[escString],'','','svg, map only').
+gv_attr(label_scheme,[graph],[int],'0','0','sfdp only').
+gv_attr(labelangle,[edge],[double],'-25.0','-180.0','').
+gv_attr(labeldistance,[edge],[double],'1.0','0.0','').
+gv_attr(labelfloat,[edge],[bool],false,'','').
+gv_attr(labelfontcolor,[edge],[color],black,'','').
+gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','').
+gv_attr(labelfontsize,[edge],[double],'14.0','1.0','').
+gv_attr(labelhref,[edge],[escString],'','','svg, map only').
+gv_attr(labeljust,[cluster,graph],[string],'"c"','','').
+gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','').
+gv_attr(labeltarget,[edge],[escString],_G8276,'','svg, map only').
+gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only').
+gv_attr(landscape,[graph],[bool],false,'','').
+gv_attr(layer,[cluster,edge,node],[layerRange],'','','').
+gv_attr(layerlistsep,[graph],[string],'","','','').
+gv_attr(layers,[graph],[layerList],'','','').
+gv_attr(layerselect,[graph],[layerRange],'','','').
+gv_attr(layersep,[graph],[string],'" :\\t"','','').
+gv_attr(layout,[graph],[string],'','','').
+gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only').
+gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only').
+gv_attr(levelsgap,[graph],[double],'0.0','','neato only').
+gv_attr(lhead,[edge],[string],'','','dot only').
+gv_attr(lheight,[cluster,graph],[double],'','','write only').
+gv_attr(lp,[cluster,edge,graph],[point],'','','write only').
+gv_attr(ltail,[edge],[string],'','','dot only').
+gv_attr(lwidth,[cluster,graph],[double],'','','write only').
+gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','').
+gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only').
+gv_attr(mclimit,[graph],[double],'1.0','','dot only').
+gv_attr(mindist,[graph],[double],'1.0','0.0','circo only').
+gv_attr(minlen,[edge],[int],'1','0','dot only').
+gv_attr(mode,[graph],[string],major,'','neato only').
+gv_attr(model,[graph],[string],shortpath,'','neato only').
+gv_attr(mosek,[graph],[bool],false,'','neato only').
+gv_attr(nodesep,[graph],[double],'0.25','0.02','').
+gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','').
+gv_attr(normalize,[graph],[double,bool],false,'','not dot').
+gv_attr(notranslate,[graph],[bool],false,'','neato only').
+gv_attr(nslimitnslimit1,[graph],[double],'','','dot only').
+gv_attr(ordering,[graph,node],[string],'','','dot only').
+gv_attr(orientation,[node],[double],'0.0','360.0','').
+gv_attr(orientation,[graph],[string],'','','').
+gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','').
+gv_attr(overlap,[graph],[string,bool],true,'','not dot').
+gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only').
+gv_attr(overlap_shrink,[graph],[bool],true,'','prism only').
+gv_attr(pack,[graph],[bool,int],false,'','').
+gv_attr(packmode,[graph],[packMode],node,'','').
+gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','').
+gv_attr(page,[graph],[double,point],'','','').
+gv_attr(pagedir,[graph],[pagedir],'BL','','').
+gv_attr(pencolor,[cluster],[color],black,'','').
+gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','').
+gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','').
+gv_attr(pin,[node],[bool],false,'','fdp, neato only').
+gv_attr(pos,[edge,node],[point,splineType],'','','').
+gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only').
+gv_attr(quantum,[graph],[double],'0.0','0.0','').
+gv_attr(rank,[subgraph],[rankType],'','','dot only').
+gv_attr(rankdir,[graph],[rankdir],'TB','','dot only').
+gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only').
+gv_attr(ratio,[graph],[double,string],'','','').
+gv_attr(rects,[node],[rect],'','','write only').
+gv_attr(regular,[node],[bool],false,'','').
+gv_attr(remincross,[graph],[bool],true,'','dot only').
+gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only').
+gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only').
+gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only').
+gv_attr(rotate,[graph],[int],'0','','').
+gv_attr(rotation,[graph],[double],'0','','sfdp only').
+gv_attr(samehead,[edge],[string],'','','dot only').
+gv_attr(sametail,[edge],[string],'','','dot only').
+gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','').
+gv_attr(scale,[graph],[double,point],'','','not dot').
+gv_attr(searchsize,[graph],[int],'30','','dot only').
+gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot').
+gv_attr(shape,[node],[shape],ellipse,'','').
+gv_attr(shapefile,[node],[string],'','','').
+gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only').
+gv_attr(sides,[node],[int],'4','0','').
+gv_attr(size,[graph],[double,point],'','','').
+gv_attr(skew,[node],[double],'0.0','-100.0','').
+gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only').
+gv_attr(sortv,[cluster,graph,node],[int],'0','0','').
+gv_attr(splines,[graph],[bool,string],'','','').
+gv_attr(start,[graph],[startType],'','','fdp, neato only').
+gv_attr(style,[cluster,edge,graph,node],[style],'','','').
+gv_attr(stylesheet,[graph],[string],'','','svg only').
+gv_attr(tailURL,[edge],[escString],'','','svg, map only').
+gv_attr(tail_lp,[edge],[point],'','','write only').
+gv_attr(tailclip,[edge],[bool],true,'','').
+gv_attr(tailhref,[edge],[escString],'','','svg, map only').
+gv_attr(taillabel,[edge],[lblString],'','','').
+gv_attr(tailport,[edge],[portPos],center,'','').
+gv_attr(tailtarget,[edge],[escString],_G21528,'','svg, map only').
+gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only').
+gv_attr(target,[cluster,edge,graph,node],[escString,string],_G21878,'','svg, map only').
+gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only').
+gv_attr(truecolor,[graph],[bool],'','','bitmap output only').
+gv_attr(vertices,[node],[pointList],'','','write only').
+gv_attr(viewport,[graph],[viewPort],'','','').
+gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot').
+gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','').
+gv_attr(width,[node],[double],'0.75','0.01','').
+gv_attr(xdotversion,[graph],[string],'','','xdot only').
+gv_attr(xlabel,[edge,node],[lblString],'','','').
+gv_attr(xlp,[edge,node],[point],'','','write only').
+gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','').
diff --git a/prolog/gv/gv_attrs.log b/prolog/gv/gv_attrs.log
deleted file mode 100644
index a9c6010..0000000
--- a/prolog/gv/gv_attrs.log
+++ /dev/null
@@ -1,169 +0,0 @@
-assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')).
-assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')).
-assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')).
-assert(gv_attr('_background',[graph],[string],_,'','')).
-assert(gv_attr(area,[cluster,node],[double],'1.0','>0','patchwork only')).
-assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')).
-assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')).
-assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')).
-assert(gv_attr(bb,[graph],[rect],'','','write only')).
-assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')).
-assert(gv_attr(center,[graph],[bool],false,'','')).
-assert(gv_attr(charset,[graph],[string],'"UTF-8"','','')).
-assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')).
-assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')).
-assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')).
-assert(gv_attr(comment,[edge,graph,node],[string],'','','')).
-assert(gv_attr(compound,[graph],[bool],false,'','dot only')).
-assert(gv_attr(concentrate,[graph],[bool],false,'','')).
-assert(gv_attr(constraint,[edge],[bool],true,'','dot only')).
-assert(gv_attr(decorate,[edge],[bool],false,'','')).
-assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')).
-assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')).
-assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')).
-assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')).
-assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')).
-assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')).
-assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')).
-assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')).
-assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')).
-assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')).
-assert(gv_attr(fixedsize,[node],[bool,string],false,'','')).
-assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')).
-assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'"Times-Roman"','','')).
-assert(gv_attr(fontnames,[graph],[string],'','','svg only')).
-assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')).
-assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')).
-assert(gv_attr(forcelabels,[graph],[bool],true,'','')).
-assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')).
-assert(gv_attr(group,[node],[string],'','','dot only')).
-assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(head_lp,[edge],[point],'','','write only')).
-assert(gv_attr(headclip,[edge],[bool],true,'','')).
-assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(headlabel,[edge],[lblString],'','','')).
-assert(gv_attr(headport,[edge],[portPos],center,'','')).
-assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(height,[node],[double],'0.5','0.02','')).
-assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
-assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')).
-assert(gv_attr(image,[node],[string],'','','')).
-assert(gv_attr(imagepath,[graph],[string],'','','')).
-assert(gv_attr(imagescale,[node],[bool,string],false,'','')).
-assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')).
-assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'"\\N" (nodes)"" (otherwise)','','')).
-assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')).
-assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')).
-assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')).
-assert(gv_attr(labelfloat,[edge],[bool],false,'','')).
-assert(gv_attr(labelfontcolor,[edge],[color],black,'','')).
-assert(gv_attr(labelfontname,[edge],[string],'"Times-Roman"','','')).
-assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')).
-assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(labeljust,[cluster,graph],[string],'"c"','','')).
-assert(gv_attr(labelloc,[cluster,graph,node],[string],'"t"(clusters)"b"(root graphs)"c"(nodes)','','')).
-assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(landscape,[graph],[bool],false,'','')).
-assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')).
-assert(gv_attr(layerlistsep,[graph],[string],'","','','')).
-assert(gv_attr(layers,[graph],[layerList],'','','')).
-assert(gv_attr(layerselect,[graph],[layerRange],'','','')).
-assert(gv_attr(layersep,[graph],[string],'" :\\t"','','')).
-assert(gv_attr(layout,[graph],[string],'','','')).
-assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')).
-assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')).
-assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')).
-assert(gv_attr(lhead,[edge],[string],'','','dot only')).
-assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')).
-assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')).
-assert(gv_attr(ltail,[edge],[string],'','','dot only')).
-assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')).
-assert(gv_attr(margin,[cluster,graph,node],[double,point],'<device-dependent>','','')).
-assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')).
-assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')).
-assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')).
-assert(gv_attr(minlen,[edge],[int],'1','0','dot only')).
-assert(gv_attr(mode,[graph],[string],major,'','neato only')).
-assert(gv_attr(model,[graph],[string],shortpath,'','neato only')).
-assert(gv_attr(mosek,[graph],[bool],false,'','neato only')).
-assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')).
-assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')).
-assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')).
-assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')).
-assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')).
-assert(gv_attr(ordering,[graph,node],[string],'','','dot only')).
-assert(gv_attr(orientation,[node],[double],'0.0','360.0','')).
-assert(gv_attr(orientation,[graph],[string],'','','')).
-assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')).
-assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')).
-assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')).
-assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')).
-assert(gv_attr(pack,[graph],[bool,int],false,'','')).
-assert(gv_attr(packmode,[graph],[packMode],node,'','')).
-assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')).
-assert(gv_attr(page,[graph],[double,point],'','','')).
-assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')).
-assert(gv_attr(pencolor,[cluster],[color],black,'','')).
-assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')).
-assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')).
-assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')).
-assert(gv_attr(pos,[edge,node],[point,splineType],'','','')).
-assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')).
-assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')).
-assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')).
-assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')).
-assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')).
-assert(gv_attr(ratio,[graph],[double,string],'','','')).
-assert(gv_attr(rects,[node],[rect],'','','write only')).
-assert(gv_attr(regular,[node],[bool],false,'','')).
-assert(gv_attr(remincross,[graph],[bool],true,'','dot only')).
-assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')).
-assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')).
-assert(gv_attr(root,[graph,node],[string,bool],'<none>(graphs)false(nodes)','','circo, twopi only')).
-assert(gv_attr(rotate,[graph],[int],'0','','')).
-assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')).
-assert(gv_attr(samehead,[edge],[string],'','','dot only')).
-assert(gv_attr(sametail,[edge],[string],'','','dot only')).
-assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')).
-assert(gv_attr(scale,[graph],[double,point],'','','not dot')).
-assert(gv_attr(searchsize,[graph],[int],'30','','dot only')).
-assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')).
-assert(gv_attr(shape,[node],[shape],ellipse,'','')).
-assert(gv_attr(shapefile,[node],[string],'','','')).
-assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')).
-assert(gv_attr(sides,[node],[int],'4','0','')).
-assert(gv_attr(size,[graph],[double,point],'','','')).
-assert(gv_attr(skew,[node],[double],'0.0','-100.0','')).
-assert(gv_attr(smoothing,[graph],[smoothType],'"none"','','sfdp only')).
-assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')).
-assert(gv_attr(splines,[graph],[bool,string],'','','')).
-assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')).
-assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')).
-assert(gv_attr(stylesheet,[graph],[string],'','','svg only')).
-assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(tail_lp,[edge],[point],'','','write only')).
-assert(gv_attr(tailclip,[edge],[bool],true,'','')).
-assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')).
-assert(gv_attr(taillabel,[edge],[lblString],'','','')).
-assert(gv_attr(tailport,[edge],[portPos],center,'','')).
-assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')).
-assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')).
-assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')).
-assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')).
-assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')).
-assert(gv_attr(vertices,[node],[pointList],'','','write only')).
-assert(gv_attr(viewport,[graph],[viewPort],'','','')).
-assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')).
-assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')).
-assert(gv_attr(width,[node],[double],'0.75','0.01','')).
-assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')).
-assert(gv_attr(xlabel,[edge,node],[lblString],'','','')).
-assert(gv_attr(xlp,[edge,node],[point],'','','write only')).
-assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')).
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 1fd4a18..b26af73 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -5,6 +5,7 @@
                      % +Attribute:nvpair
   ]
 ).
+:- ensure_loaded(library('gv/gv_attrs.data')).
 
 /** <module> GraphViz attributes
 
@@ -13,40 +14,10 @@
 */
 
 :- use_module(library(apply)).
-:- use_module(library(debug_ext)).
-:- use_module(library(dcg/basics)).
 :- use_module(library(dcg/dcg_call)).
-:- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
-:- use_module(library(http/http_download)).
 :- use_module(library(lists)).
-:- use_module(library(msg_ext)).
 :- use_module(library(os/file_ext)).
-:- use_module(library(persistency)).
-:- use_module(library(xpath)).
-:- use_module(library(xpath/xpath_table)).
-
-%! gv_attr(
-%!   ?Name:atom,
-%!   ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
-%!   ?Types:list(atom),
-%!   ?Default,
-%!   ?Minimum,
-%!   ?Notes:atom
-%! ) is nondet.
-
-:- persistent(
-     gv_attr(
-       name:atom,
-       used_by:list(oneof([cluster,edge,graph,node,subgraph])),
-       types:list(atom),
-       default,
-       minimum,
-       notes:atom
-     )
-   ).
-
-:- initialization(gv_attrs_init).
 
 
 
@@ -54,7 +25,7 @@
 
 %! gv_attr_value(
 %!   +Context:oneof([cluster,edge,graph,node,subgraph]),
-%!   +Attribute:nvpair
+%!   +Attribute:compound
 %! )// is det.
 % Uses the default value in case Value is uninstantiated.
 % Otherwise, performs a typecheck and converts the given value.
@@ -101,118 +72,3 @@ check_minimum(_, ''):- !.
 check_minimum(V, Min1):-
   atom_number(Min1, Min2),
   Min2 =< V.
-
-
-
-
-
-% INITIALIZATION %
-
-%! assert_gv_attr_row(+Row:list(atom)) is det.
-
-assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):-
-  atom_phrase(translate_usedby(UsedBy2), UsedBy1),
-  once(atom_phrase(translate_type(Types2), Types1)),
-  sort(UsedBy2, UsedBy3),
-  translate_default(Default1, Default2),
-  assert_gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes).
-
-
-%! gv_attrs_downloads is det.
-% Downloads the table describing GraphViz attributes from `graphviz.org`.
-
-gv_attrs_download:-
-  verbose(
-    gv_attrs_download0,
-    "updating GraphViz attributes table"
-  ).
-
-gv_attrs_download0:-
-  gv_attrs_uri(Uri),
-  html_download(Uri, Dom),
-  xpath_chk(Dom, //table(@align=lower_case(center)), TableDom),
-  xpath_table(TableDom, _, Rows),
-  maplist(assert_gv_attr_row, Rows).
-
-
-%! gv_attrs_file(-File:atom) is det.
-
-gv_attrs_file(File):-
-  absolute_file_name('gv_attrs.log', File, [access(write)]).
-
-
-%! gv_attrs_init is det.
-
-gv_attrs_init:-
-  gv_attrs_file(File),
-  (   exists_file(File)
-  ->  true
-  ;   touch(File)
-  ),
-  db_attach(File, []),
-  file_age(File, Age),
-  gv_attrs_update(Age).
-
-
-%! gv_attrs_update(+Age:float) is det.
-
-% The persistent store is still fresh.
-gv_attrs_update(Age):-
-  once(gv_attr(_, _, _, _, _, _)),
-  Age < 8640000, !.
-% The persistent store has become stale, so refresh it.
-gv_attrs_update(_):-
-  retractall_gv_attr(_, _, _, _, _, _),
-  gv_attrs_download.
-
-
-
-%! gv_attrs_uri(-Url:url) is det.
-
-gv_attrs_uri('http://www.graphviz.org/doc/info/attrs.html').
-
-
-
-%! translate_default(+Default1:atom, -Default2:atom) is det.
-
-% The empty string is represented by the empty atom.
-translate_default('""', ''):- !.
-% The absence of a default value is represented by an uninstantiated variable.
-translate_default('<none>', _):- !.
-translate_default(Default, Default).
-
-
-
-%! translate_type(-Types:list(atom))// is det.
-
-translate_type([H|T]) -->
-  gv_attr_type(H),
-  whites,
-  translate_type(T).
-translate_type([H]) -->
-  gv_attr_type(H).
-translate_type([]) --> "".
-
-
-
-%! translated_usedby(
-%!   -UsedBy:list(oneof([cluster,edge,graph,node,subgraph]))
-%! )// is det.
-
-translate_usedby([cluster|T]) -->
-  "C", !,
-  translate_usedby(T).
-translate_usedby([edge|T]) -->
-  "E", !,
-  translate_usedby(T).
-translate_usedby([graph|T]) -->
-  "G", !,
-  translate_usedby(T).
-translate_usedby([node|T]) -->
-  "N", !,
-  translate_usedby(T).
-translate_usedby([subgraph|T]) -->
-  "S", !,
-  translate_usedby(T).
-translate_usedby([]) -->
-  "".
diff --git a/prolog/gv/gv_color.data b/prolog/gv/gv_color.data
new file mode 100644
index 0000000..166b13c
--- /dev/null
+++ b/prolog/gv/gv_color.data
@@ -0,0 +1,802 @@
+gv_color(x11,aliceblue).
+gv_color(x11,antiquewhite).
+gv_color(x11,antiquewhite1).
+gv_color(x11,antiquewhite2).
+gv_color(x11,antiquewhite3).
+gv_color(x11,antiquewhite4).
+gv_color(x11,aquamarine).
+gv_color(x11,aquamarine1).
+gv_color(x11,aquamarine2).
+gv_color(x11,aquamarine3).
+gv_color(x11,aquamarine4).
+gv_color(x11,azure).
+gv_color(x11,azure1).
+gv_color(x11,azure2).
+gv_color(x11,azure3).
+gv_color(x11,azure4).
+gv_color(x11,beige).
+gv_color(x11,bisque).
+gv_color(x11,bisque1).
+gv_color(x11,bisque2).
+gv_color(x11,bisque3).
+gv_color(x11,bisque4).
+gv_color(x11,black).
+gv_color(x11,blanchedalmond).
+gv_color(x11,blue).
+gv_color(x11,blue1).
+gv_color(x11,blue2).
+gv_color(x11,blue3).
+gv_color(x11,blue4).
+gv_color(x11,blueviolet).
+gv_color(x11,brown).
+gv_color(x11,brown1).
+gv_color(x11,brown2).
+gv_color(x11,brown3).
+gv_color(x11,brown4).
+gv_color(x11,burlywood).
+gv_color(x11,burlywood1).
+gv_color(x11,burlywood2).
+gv_color(x11,burlywood3).
+gv_color(x11,burlywood4).
+gv_color(x11,cadetblue).
+gv_color(x11,cadetblue1).
+gv_color(x11,cadetblue2).
+gv_color(x11,cadetblue3).
+gv_color(x11,cadetblue4).
+gv_color(x11,chartreuse).
+gv_color(x11,chartreuse1).
+gv_color(x11,chartreuse2).
+gv_color(x11,chartreuse3).
+gv_color(x11,chartreuse4).
+gv_color(x11,chocolate).
+gv_color(x11,chocolate1).
+gv_color(x11,chocolate2).
+gv_color(x11,chocolate3).
+gv_color(x11,chocolate4).
+gv_color(x11,coral).
+gv_color(x11,coral1).
+gv_color(x11,coral2).
+gv_color(x11,coral3).
+gv_color(x11,coral4).
+gv_color(x11,cornflowerblue).
+gv_color(x11,cornsilk).
+gv_color(x11,cornsilk1).
+gv_color(x11,cornsilk2).
+gv_color(x11,cornsilk3).
+gv_color(x11,cornsilk4).
+gv_color(x11,crimson).
+gv_color(x11,cyan).
+gv_color(x11,cyan1).
+gv_color(x11,cyan2).
+gv_color(x11,cyan3).
+gv_color(x11,cyan4).
+gv_color(x11,darkgoldenrod).
+gv_color(x11,darkgoldenrod1).
+gv_color(x11,darkgoldenrod2).
+gv_color(x11,darkgoldenrod3).
+gv_color(x11,darkgoldenrod4).
+gv_color(x11,darkgreen).
+gv_color(x11,darkkhaki).
+gv_color(x11,darkolivegreen).
+gv_color(x11,darkolivegreen1).
+gv_color(x11,darkolivegreen2).
+gv_color(x11,darkolivegreen3).
+gv_color(x11,darkolivegreen4).
+gv_color(x11,darkorange).
+gv_color(x11,darkorange1).
+gv_color(x11,darkorange2).
+gv_color(x11,darkorange3).
+gv_color(x11,darkorange4).
+gv_color(x11,darkorchid).
+gv_color(x11,darkorchid1).
+gv_color(x11,darkorchid2).
+gv_color(x11,darkorchid3).
+gv_color(x11,darkorchid4).
+gv_color(x11,darksalmon).
+gv_color(x11,darkseagreen).
+gv_color(x11,darkseagreen1).
+gv_color(x11,darkseagreen2).
+gv_color(x11,darkseagreen3).
+gv_color(x11,darkseagreen4).
+gv_color(x11,darkslateblue).
+gv_color(x11,darkslategray).
+gv_color(x11,darkslategray1).
+gv_color(x11,darkslategray2).
+gv_color(x11,darkslategray3).
+gv_color(x11,darkslategray4).
+gv_color(x11,darkslategrey).
+gv_color(x11,darkturquoise).
+gv_color(x11,darkviolet).
+gv_color(x11,deeppink).
+gv_color(x11,deeppink1).
+gv_color(x11,deeppink2).
+gv_color(x11,deeppink3).
+gv_color(x11,deeppink4).
+gv_color(x11,deepskyblue).
+gv_color(x11,deepskyblue1).
+gv_color(x11,deepskyblue2).
+gv_color(x11,deepskyblue3).
+gv_color(x11,deepskyblue4).
+gv_color(x11,dimgray).
+gv_color(x11,dimgrey).
+gv_color(x11,dodgerblue).
+gv_color(x11,dodgerblue1).
+gv_color(x11,dodgerblue2).
+gv_color(x11,dodgerblue3).
+gv_color(x11,dodgerblue4).
+gv_color(x11,firebrick).
+gv_color(x11,firebrick1).
+gv_color(x11,firebrick2).
+gv_color(x11,firebrick3).
+gv_color(x11,firebrick4).
+gv_color(x11,floralwhite).
+gv_color(x11,forestgreen).
+gv_color(x11,gainsboro).
+gv_color(x11,ghostwhite).
+gv_color(x11,gold).
+gv_color(x11,gold1).
+gv_color(x11,gold2).
+gv_color(x11,gold3).
+gv_color(x11,gold4).
+gv_color(x11,goldenrod).
+gv_color(x11,goldenrod1).
+gv_color(x11,goldenrod2).
+gv_color(x11,goldenrod3).
+gv_color(x11,goldenrod4).
+gv_color(x11,gray).
+gv_color(x11,gray0).
+gv_color(x11,gray1).
+gv_color(x11,gray10).
+gv_color(x11,gray100).
+gv_color(x11,gray11).
+gv_color(x11,gray12).
+gv_color(x11,gray13).
+gv_color(x11,gray14).
+gv_color(x11,gray15).
+gv_color(x11,gray16).
+gv_color(x11,gray17).
+gv_color(x11,gray18).
+gv_color(x11,gray19).
+gv_color(x11,gray2).
+gv_color(x11,gray20).
+gv_color(x11,gray21).
+gv_color(x11,gray22).
+gv_color(x11,gray23).
+gv_color(x11,gray24).
+gv_color(x11,gray25).
+gv_color(x11,gray26).
+gv_color(x11,gray27).
+gv_color(x11,gray28).
+gv_color(x11,gray29).
+gv_color(x11,gray3).
+gv_color(x11,gray30).
+gv_color(x11,gray31).
+gv_color(x11,gray32).
+gv_color(x11,gray33).
+gv_color(x11,gray34).
+gv_color(x11,gray35).
+gv_color(x11,gray36).
+gv_color(x11,gray37).
+gv_color(x11,gray38).
+gv_color(x11,gray39).
+gv_color(x11,gray4).
+gv_color(x11,gray40).
+gv_color(x11,gray41).
+gv_color(x11,gray42).
+gv_color(x11,gray43).
+gv_color(x11,gray44).
+gv_color(x11,gray45).
+gv_color(x11,gray46).
+gv_color(x11,gray47).
+gv_color(x11,gray48).
+gv_color(x11,gray49).
+gv_color(x11,gray5).
+gv_color(x11,gray50).
+gv_color(x11,gray51).
+gv_color(x11,gray52).
+gv_color(x11,gray53).
+gv_color(x11,gray54).
+gv_color(x11,gray55).
+gv_color(x11,gray56).
+gv_color(x11,gray57).
+gv_color(x11,gray58).
+gv_color(x11,gray59).
+gv_color(x11,gray6).
+gv_color(x11,gray60).
+gv_color(x11,gray61).
+gv_color(x11,gray62).
+gv_color(x11,gray63).
+gv_color(x11,gray64).
+gv_color(x11,gray65).
+gv_color(x11,gray66).
+gv_color(x11,gray67).
+gv_color(x11,gray68).
+gv_color(x11,gray69).
+gv_color(x11,gray7).
+gv_color(x11,gray70).
+gv_color(x11,gray71).
+gv_color(x11,gray72).
+gv_color(x11,gray73).
+gv_color(x11,gray74).
+gv_color(x11,gray75).
+gv_color(x11,gray76).
+gv_color(x11,gray77).
+gv_color(x11,gray78).
+gv_color(x11,gray79).
+gv_color(x11,gray8).
+gv_color(x11,gray80).
+gv_color(x11,gray81).
+gv_color(x11,gray82).
+gv_color(x11,gray83).
+gv_color(x11,gray84).
+gv_color(x11,gray85).
+gv_color(x11,gray86).
+gv_color(x11,gray87).
+gv_color(x11,gray88).
+gv_color(x11,gray89).
+gv_color(x11,gray9).
+gv_color(x11,gray90).
+gv_color(x11,gray91).
+gv_color(x11,gray92).
+gv_color(x11,gray93).
+gv_color(x11,gray94).
+gv_color(x11,gray95).
+gv_color(x11,gray96).
+gv_color(x11,gray97).
+gv_color(x11,gray98).
+gv_color(x11,gray99).
+gv_color(x11,green).
+gv_color(x11,green1).
+gv_color(x11,green2).
+gv_color(x11,green3).
+gv_color(x11,green4).
+gv_color(x11,greenyellow).
+gv_color(x11,grey).
+gv_color(x11,grey0).
+gv_color(x11,grey1).
+gv_color(x11,grey10).
+gv_color(x11,grey100).
+gv_color(x11,grey11).
+gv_color(x11,grey12).
+gv_color(x11,grey13).
+gv_color(x11,grey14).
+gv_color(x11,grey15).
+gv_color(x11,grey16).
+gv_color(x11,grey17).
+gv_color(x11,grey18).
+gv_color(x11,grey19).
+gv_color(x11,grey2).
+gv_color(x11,grey20).
+gv_color(x11,grey21).
+gv_color(x11,grey22).
+gv_color(x11,grey23).
+gv_color(x11,grey24).
+gv_color(x11,grey25).
+gv_color(x11,grey26).
+gv_color(x11,grey27).
+gv_color(x11,grey28).
+gv_color(x11,grey29).
+gv_color(x11,grey3).
+gv_color(x11,grey30).
+gv_color(x11,grey31).
+gv_color(x11,grey32).
+gv_color(x11,grey33).
+gv_color(x11,grey34).
+gv_color(x11,grey35).
+gv_color(x11,grey36).
+gv_color(x11,grey37).
+gv_color(x11,grey38).
+gv_color(x11,grey39).
+gv_color(x11,grey4).
+gv_color(x11,grey40).
+gv_color(x11,grey41).
+gv_color(x11,grey42).
+gv_color(x11,grey43).
+gv_color(x11,grey44).
+gv_color(x11,grey45).
+gv_color(x11,grey46).
+gv_color(x11,grey47).
+gv_color(x11,grey48).
+gv_color(x11,grey49).
+gv_color(x11,grey5).
+gv_color(x11,grey50).
+gv_color(x11,grey51).
+gv_color(x11,grey52).
+gv_color(x11,grey53).
+gv_color(x11,grey54).
+gv_color(x11,grey55).
+gv_color(x11,grey56).
+gv_color(x11,grey57).
+gv_color(x11,grey58).
+gv_color(x11,grey59).
+gv_color(x11,grey6).
+gv_color(x11,grey60).
+gv_color(x11,grey61).
+gv_color(x11,grey62).
+gv_color(x11,grey63).
+gv_color(x11,grey64).
+gv_color(x11,grey65).
+gv_color(x11,grey66).
+gv_color(x11,grey67).
+gv_color(x11,grey68).
+gv_color(x11,grey69).
+gv_color(x11,grey7).
+gv_color(x11,grey70).
+gv_color(x11,grey71).
+gv_color(x11,grey72).
+gv_color(x11,grey73).
+gv_color(x11,grey74).
+gv_color(x11,grey75).
+gv_color(x11,grey76).
+gv_color(x11,grey77).
+gv_color(x11,grey78).
+gv_color(x11,grey79).
+gv_color(x11,grey8).
+gv_color(x11,grey80).
+gv_color(x11,grey81).
+gv_color(x11,grey82).
+gv_color(x11,grey83).
+gv_color(x11,grey84).
+gv_color(x11,grey85).
+gv_color(x11,grey86).
+gv_color(x11,grey87).
+gv_color(x11,grey88).
+gv_color(x11,grey89).
+gv_color(x11,grey9).
+gv_color(x11,grey90).
+gv_color(x11,grey91).
+gv_color(x11,grey92).
+gv_color(x11,grey93).
+gv_color(x11,grey94).
+gv_color(x11,grey95).
+gv_color(x11,grey96).
+gv_color(x11,grey97).
+gv_color(x11,grey98).
+gv_color(x11,grey99).
+gv_color(x11,honeydew).
+gv_color(x11,honeydew1).
+gv_color(x11,honeydew2).
+gv_color(x11,honeydew3).
+gv_color(x11,honeydew4).
+gv_color(x11,hotpink).
+gv_color(x11,hotpink1).
+gv_color(x11,hotpink2).
+gv_color(x11,hotpink3).
+gv_color(x11,hotpink4).
+gv_color(x11,indianred).
+gv_color(x11,indianred1).
+gv_color(x11,indianred2).
+gv_color(x11,indianred3).
+gv_color(x11,indianred4).
+gv_color(x11,indigo).
+gv_color(x11,invis).
+gv_color(x11,ivory).
+gv_color(x11,ivory1).
+gv_color(x11,ivory2).
+gv_color(x11,ivory3).
+gv_color(x11,ivory4).
+gv_color(x11,khaki).
+gv_color(x11,khaki1).
+gv_color(x11,khaki2).
+gv_color(x11,khaki3).
+gv_color(x11,khaki4).
+gv_color(x11,lavender).
+gv_color(x11,lavenderblush).
+gv_color(x11,lavenderblush1).
+gv_color(x11,lavenderblush2).
+gv_color(x11,lavenderblush3).
+gv_color(x11,lavenderblush4).
+gv_color(x11,lawngreen).
+gv_color(x11,lemonchiffon).
+gv_color(x11,lemonchiffon1).
+gv_color(x11,lemonchiffon2).
+gv_color(x11,lemonchiffon3).
+gv_color(x11,lemonchiffon4).
+gv_color(x11,lightblue).
+gv_color(x11,lightblue1).
+gv_color(x11,lightblue2).
+gv_color(x11,lightblue3).
+gv_color(x11,lightblue4).
+gv_color(x11,lightcoral).
+gv_color(x11,lightcyan).
+gv_color(x11,lightcyan1).
+gv_color(x11,lightcyan2).
+gv_color(x11,lightcyan3).
+gv_color(x11,lightcyan4).
+gv_color(x11,lightgoldenrod).
+gv_color(x11,lightgoldenrod1).
+gv_color(x11,lightgoldenrod2).
+gv_color(x11,lightgoldenrod3).
+gv_color(x11,lightgoldenrod4).
+gv_color(x11,lightgoldenrodyellow).
+gv_color(x11,lightgray).
+gv_color(x11,lightgrey).
+gv_color(x11,lightpink).
+gv_color(x11,lightpink1).
+gv_color(x11,lightpink2).
+gv_color(x11,lightpink3).
+gv_color(x11,lightpink4).
+gv_color(x11,lightsalmon).
+gv_color(x11,lightsalmon1).
+gv_color(x11,lightsalmon2).
+gv_color(x11,lightsalmon3).
+gv_color(x11,lightsalmon4).
+gv_color(x11,lightseagreen).
+gv_color(x11,lightskyblue).
+gv_color(x11,lightskyblue1).
+gv_color(x11,lightskyblue2).
+gv_color(x11,lightskyblue3).
+gv_color(x11,lightskyblue4).
+gv_color(x11,lightslateblue).
+gv_color(x11,lightslategray).
+gv_color(x11,lightslategrey).
+gv_color(x11,lightsteelblue).
+gv_color(x11,lightsteelblue1).
+gv_color(x11,lightsteelblue2).
+gv_color(x11,lightsteelblue3).
+gv_color(x11,lightsteelblue4).
+gv_color(x11,lightyellow).
+gv_color(x11,lightyellow1).
+gv_color(x11,lightyellow2).
+gv_color(x11,lightyellow3).
+gv_color(x11,lightyellow4).
+gv_color(x11,limegreen).
+gv_color(x11,linen).
+gv_color(x11,magenta).
+gv_color(x11,magenta1).
+gv_color(x11,magenta2).
+gv_color(x11,magenta3).
+gv_color(x11,magenta4).
+gv_color(x11,maroon).
+gv_color(x11,maroon1).
+gv_color(x11,maroon2).
+gv_color(x11,maroon3).
+gv_color(x11,maroon4).
+gv_color(x11,mediumaquamarine).
+gv_color(x11,mediumblue).
+gv_color(x11,mediumorchid).
+gv_color(x11,mediumorchid1).
+gv_color(x11,mediumorchid2).
+gv_color(x11,mediumorchid3).
+gv_color(x11,mediumorchid4).
+gv_color(x11,mediumpurple).
+gv_color(x11,mediumpurple1).
+gv_color(x11,mediumpurple2).
+gv_color(x11,mediumpurple3).
+gv_color(x11,mediumpurple4).
+gv_color(x11,mediumseagreen).
+gv_color(x11,mediumslateblue).
+gv_color(x11,mediumspringgreen).
+gv_color(x11,mediumturquoise).
+gv_color(x11,mediumvioletred).
+gv_color(x11,midnightblue).
+gv_color(x11,mintcream).
+gv_color(x11,mistyrose).
+gv_color(x11,mistyrose1).
+gv_color(x11,mistyrose2).
+gv_color(x11,mistyrose3).
+gv_color(x11,mistyrose4).
+gv_color(x11,moccasin).
+gv_color(x11,navajowhite).
+gv_color(x11,navajowhite1).
+gv_color(x11,navajowhite2).
+gv_color(x11,navajowhite3).
+gv_color(x11,navajowhite4).
+gv_color(x11,navy).
+gv_color(x11,navyblue).
+gv_color(x11,none).
+gv_color(x11,oldlace).
+gv_color(x11,olivedrab).
+gv_color(x11,olivedrab1).
+gv_color(x11,olivedrab2).
+gv_color(x11,olivedrab3).
+gv_color(x11,olivedrab4).
+gv_color(x11,orange).
+gv_color(x11,orange1).
+gv_color(x11,orange2).
+gv_color(x11,orange3).
+gv_color(x11,orange4).
+gv_color(x11,orangered).
+gv_color(x11,orangered1).
+gv_color(x11,orangered2).
+gv_color(x11,orangered3).
+gv_color(x11,orangered4).
+gv_color(x11,orchid).
+gv_color(x11,orchid1).
+gv_color(x11,orchid2).
+gv_color(x11,orchid3).
+gv_color(x11,orchid4).
+gv_color(x11,palegoldenrod).
+gv_color(x11,palegreen).
+gv_color(x11,palegreen1).
+gv_color(x11,palegreen2).
+gv_color(x11,palegreen3).
+gv_color(x11,palegreen4).
+gv_color(x11,paleturquoise).
+gv_color(x11,paleturquoise1).
+gv_color(x11,paleturquoise2).
+gv_color(x11,paleturquoise3).
+gv_color(x11,paleturquoise4).
+gv_color(x11,palevioletred).
+gv_color(x11,palevioletred1).
+gv_color(x11,palevioletred2).
+gv_color(x11,palevioletred3).
+gv_color(x11,palevioletred4).
+gv_color(x11,papayawhip).
+gv_color(x11,peachpuff).
+gv_color(x11,peachpuff1).
+gv_color(x11,peachpuff2).
+gv_color(x11,peachpuff3).
+gv_color(x11,peachpuff4).
+gv_color(x11,peru).
+gv_color(x11,pink).
+gv_color(x11,pink1).
+gv_color(x11,pink2).
+gv_color(x11,pink3).
+gv_color(x11,pink4).
+gv_color(x11,plum).
+gv_color(x11,plum1).
+gv_color(x11,plum2).
+gv_color(x11,plum3).
+gv_color(x11,plum4).
+gv_color(x11,powderblue).
+gv_color(x11,purple).
+gv_color(x11,purple1).
+gv_color(x11,purple2).
+gv_color(x11,purple3).
+gv_color(x11,purple4).
+gv_color(x11,red).
+gv_color(x11,red1).
+gv_color(x11,red2).
+gv_color(x11,red3).
+gv_color(x11,red4).
+gv_color(x11,rosybrown).
+gv_color(x11,rosybrown1).
+gv_color(x11,rosybrown2).
+gv_color(x11,rosybrown3).
+gv_color(x11,rosybrown4).
+gv_color(x11,royalblue).
+gv_color(x11,royalblue1).
+gv_color(x11,royalblue2).
+gv_color(x11,royalblue3).
+gv_color(x11,royalblue4).
+gv_color(x11,saddlebrown).
+gv_color(x11,salmon).
+gv_color(x11,salmon1).
+gv_color(x11,salmon2).
+gv_color(x11,salmon3).
+gv_color(x11,salmon4).
+gv_color(x11,sandybrown).
+gv_color(x11,seagreen).
+gv_color(x11,seagreen1).
+gv_color(x11,seagreen2).
+gv_color(x11,seagreen3).
+gv_color(x11,seagreen4).
+gv_color(x11,seashell).
+gv_color(x11,seashell1).
+gv_color(x11,seashell2).
+gv_color(x11,seashell3).
+gv_color(x11,seashell4).
+gv_color(x11,sienna).
+gv_color(x11,sienna1).
+gv_color(x11,sienna2).
+gv_color(x11,sienna3).
+gv_color(x11,sienna4).
+gv_color(x11,skyblue).
+gv_color(x11,skyblue1).
+gv_color(x11,skyblue2).
+gv_color(x11,skyblue3).
+gv_color(x11,skyblue4).
+gv_color(x11,slateblue).
+gv_color(x11,slateblue1).
+gv_color(x11,slateblue2).
+gv_color(x11,slateblue3).
+gv_color(x11,slateblue4).
+gv_color(x11,slategray).
+gv_color(x11,slategray1).
+gv_color(x11,slategray2).
+gv_color(x11,slategray3).
+gv_color(x11,slategray4).
+gv_color(x11,slategrey).
+gv_color(x11,snow).
+gv_color(x11,snow1).
+gv_color(x11,snow2).
+gv_color(x11,snow3).
+gv_color(x11,snow4).
+gv_color(x11,springgreen).
+gv_color(x11,springgreen1).
+gv_color(x11,springgreen2).
+gv_color(x11,springgreen3).
+gv_color(x11,springgreen4).
+gv_color(x11,steelblue).
+gv_color(x11,steelblue1).
+gv_color(x11,steelblue2).
+gv_color(x11,steelblue3).
+gv_color(x11,steelblue4).
+gv_color(x11,tan).
+gv_color(x11,tan1).
+gv_color(x11,tan2).
+gv_color(x11,tan3).
+gv_color(x11,tan4).
+gv_color(x11,thistle).
+gv_color(x11,thistle1).
+gv_color(x11,thistle2).
+gv_color(x11,thistle3).
+gv_color(x11,thistle4).
+gv_color(x11,tomato).
+gv_color(x11,tomato1).
+gv_color(x11,tomato2).
+gv_color(x11,tomato3).
+gv_color(x11,tomato4).
+gv_color(x11,transparent).
+gv_color(x11,turquoise).
+gv_color(x11,turquoise1).
+gv_color(x11,turquoise2).
+gv_color(x11,turquoise3).
+gv_color(x11,turquoise4).
+gv_color(x11,violet).
+gv_color(x11,violetred).
+gv_color(x11,violetred1).
+gv_color(x11,violetred2).
+gv_color(x11,violetred3).
+gv_color(x11,violetred4).
+gv_color(x11,wheat).
+gv_color(x11,wheat1).
+gv_color(x11,wheat2).
+gv_color(x11,wheat3).
+gv_color(x11,wheat4).
+gv_color(x11,white).
+gv_color(x11,whitesmoke).
+gv_color(x11,yellow).
+gv_color(x11,yellow1).
+gv_color(x11,yellow2).
+gv_color(x11,yellow3).
+gv_color(x11,yellow4).
+gv_color(x11,yellowgreen).
+gv_color(svg,aliceblue).
+gv_color(svg,antiquewhite).
+gv_color(svg,aqua).
+gv_color(svg,aquamarine).
+gv_color(svg,azure).
+gv_color(svg,beige).
+gv_color(svg,bisque).
+gv_color(svg,black).
+gv_color(svg,blanchedalmond).
+gv_color(svg,blue).
+gv_color(svg,blueviolet).
+gv_color(svg,brown).
+gv_color(svg,burlywood).
+gv_color(svg,cadetblue).
+gv_color(svg,chartreuse).
+gv_color(svg,chocolate).
+gv_color(svg,coral).
+gv_color(svg,cornflowerblue).
+gv_color(svg,cornsilk).
+gv_color(svg,crimson).
+gv_color(svg,cyan).
+gv_color(svg,darkblue).
+gv_color(svg,darkcyan).
+gv_color(svg,darkgoldenrod).
+gv_color(svg,darkgray).
+gv_color(svg,darkgreen).
+gv_color(svg,darkgrey).
+gv_color(svg,darkkhaki).
+gv_color(svg,darkmagenta).
+gv_color(svg,darkolivegreen).
+gv_color(svg,darkorange).
+gv_color(svg,darkorchid).
+gv_color(svg,darkred).
+gv_color(svg,darksalmon).
+gv_color(svg,darkseagreen).
+gv_color(svg,darkslateblue).
+gv_color(svg,darkslategray).
+gv_color(svg,darkslategrey).
+gv_color(svg,darkturquoise).
+gv_color(svg,darkviolet).
+gv_color(svg,deeppink).
+gv_color(svg,deepskyblue).
+gv_color(svg,dimgray).
+gv_color(svg,dimgrey).
+gv_color(svg,dodgerblue).
+gv_color(svg,firebrick).
+gv_color(svg,floralwhite).
+gv_color(svg,forestgreen).
+gv_color(svg,fuchsia).
+gv_color(svg,gainsboro).
+gv_color(svg,ghostwhite).
+gv_color(svg,gold).
+gv_color(svg,goldenrod).
+gv_color(svg,gray).
+gv_color(svg,grey).
+gv_color(svg,green).
+gv_color(svg,greenyellow).
+gv_color(svg,honeydew).
+gv_color(svg,hotpink).
+gv_color(svg,indianred).
+gv_color(svg,indigo).
+gv_color(svg,ivory).
+gv_color(svg,khaki).
+gv_color(svg,lavender).
+gv_color(svg,lavenderblush).
+gv_color(svg,lawngreen).
+gv_color(svg,lemonchiffon).
+gv_color(svg,lightblue).
+gv_color(svg,lightcoral).
+gv_color(svg,lightcyan).
+gv_color(svg,lightgoldenrodyellow).
+gv_color(svg,lightgray).
+gv_color(svg,lightgreen).
+gv_color(svg,lightgrey).
+gv_color(svg,lightpink).
+gv_color(svg,lightsalmon).
+gv_color(svg,lightseagreen).
+gv_color(svg,lightskyblue).
+gv_color(svg,lightslategray).
+gv_color(svg,lightslategrey).
+gv_color(svg,lightsteelblue).
+gv_color(svg,lightyellow).
+gv_color(svg,lime).
+gv_color(svg,limegreen).
+gv_color(svg,linen).
+gv_color(svg,magenta).
+gv_color(svg,maroon).
+gv_color(svg,mediumaquamarine).
+gv_color(svg,mediumblue).
+gv_color(svg,mediumorchid).
+gv_color(svg,mediumpurple).
+gv_color(svg,mediumseagreen).
+gv_color(svg,mediumslateblue).
+gv_color(svg,mediumspringgreen).
+gv_color(svg,mediumturquoise).
+gv_color(svg,mediumvioletred).
+gv_color(svg,midnightblue).
+gv_color(svg,mintcream).
+gv_color(svg,mistyrose).
+gv_color(svg,moccasin).
+gv_color(svg,navajowhite).
+gv_color(svg,navy).
+gv_color(svg,oldlace).
+gv_color(svg,olive).
+gv_color(svg,olivedrab).
+gv_color(svg,orange).
+gv_color(svg,orangered).
+gv_color(svg,orchid).
+gv_color(svg,palegoldenrod).
+gv_color(svg,palegreen).
+gv_color(svg,paleturquoise).
+gv_color(svg,palevioletred).
+gv_color(svg,papayawhip).
+gv_color(svg,peachpuff).
+gv_color(svg,peru).
+gv_color(svg,pink).
+gv_color(svg,plum).
+gv_color(svg,powderblue).
+gv_color(svg,purple).
+gv_color(svg,red).
+gv_color(svg,rosybrown).
+gv_color(svg,royalblue).
+gv_color(svg,saddlebrown).
+gv_color(svg,salmon).
+gv_color(svg,sandybrown).
+gv_color(svg,seagreen).
+gv_color(svg,seashell).
+gv_color(svg,sienna).
+gv_color(svg,silver).
+gv_color(svg,skyblue).
+gv_color(svg,slateblue).
+gv_color(svg,slategray).
+gv_color(svg,slategrey).
+gv_color(svg,snow).
+gv_color(svg,springgreen).
+gv_color(svg,steelblue).
+gv_color(svg,tan).
+gv_color(svg,teal).
+gv_color(svg,thistle).
+gv_color(svg,tomato).
+gv_color(svg,turquoise).
+gv_color(svg,violet).
+gv_color(svg,wheat).
+gv_color(svg,white).
+gv_color(svg,whitesmoke).
+gv_color(svg,yellow).
+gv_color(svg,yellowgreen).
diff --git a/prolog/gv/gv_color.log b/prolog/gv/gv_color.log
deleted file mode 100644
index 23d6cdf..0000000
--- a/prolog/gv/gv_color.log
+++ /dev/null
@@ -1,802 +0,0 @@
-assert(gv_color(x11,aliceblue)).
-assert(gv_color(x11,antiquewhite)).
-assert(gv_color(x11,antiquewhite1)).
-assert(gv_color(x11,antiquewhite2)).
-assert(gv_color(x11,antiquewhite3)).
-assert(gv_color(x11,antiquewhite4)).
-assert(gv_color(x11,aquamarine)).
-assert(gv_color(x11,aquamarine1)).
-assert(gv_color(x11,aquamarine2)).
-assert(gv_color(x11,aquamarine3)).
-assert(gv_color(x11,aquamarine4)).
-assert(gv_color(x11,azure)).
-assert(gv_color(x11,azure1)).
-assert(gv_color(x11,azure2)).
-assert(gv_color(x11,azure3)).
-assert(gv_color(x11,azure4)).
-assert(gv_color(x11,beige)).
-assert(gv_color(x11,bisque)).
-assert(gv_color(x11,bisque1)).
-assert(gv_color(x11,bisque2)).
-assert(gv_color(x11,bisque3)).
-assert(gv_color(x11,bisque4)).
-assert(gv_color(x11,black)).
-assert(gv_color(x11,blanchedalmond)).
-assert(gv_color(x11,blue)).
-assert(gv_color(x11,blue1)).
-assert(gv_color(x11,blue2)).
-assert(gv_color(x11,blue3)).
-assert(gv_color(x11,blue4)).
-assert(gv_color(x11,blueviolet)).
-assert(gv_color(x11,brown)).
-assert(gv_color(x11,brown1)).
-assert(gv_color(x11,brown2)).
-assert(gv_color(x11,brown3)).
-assert(gv_color(x11,brown4)).
-assert(gv_color(x11,burlywood)).
-assert(gv_color(x11,burlywood1)).
-assert(gv_color(x11,burlywood2)).
-assert(gv_color(x11,burlywood3)).
-assert(gv_color(x11,burlywood4)).
-assert(gv_color(x11,cadetblue)).
-assert(gv_color(x11,cadetblue1)).
-assert(gv_color(x11,cadetblue2)).
-assert(gv_color(x11,cadetblue3)).
-assert(gv_color(x11,cadetblue4)).
-assert(gv_color(x11,chartreuse)).
-assert(gv_color(x11,chartreuse1)).
-assert(gv_color(x11,chartreuse2)).
-assert(gv_color(x11,chartreuse3)).
-assert(gv_color(x11,chartreuse4)).
-assert(gv_color(x11,chocolate)).
-assert(gv_color(x11,chocolate1)).
-assert(gv_color(x11,chocolate2)).
-assert(gv_color(x11,chocolate3)).
-assert(gv_color(x11,chocolate4)).
-assert(gv_color(x11,coral)).
-assert(gv_color(x11,coral1)).
-assert(gv_color(x11,coral2)).
-assert(gv_color(x11,coral3)).
-assert(gv_color(x11,coral4)).
-assert(gv_color(x11,cornflowerblue)).
-assert(gv_color(x11,cornsilk)).
-assert(gv_color(x11,cornsilk1)).
-assert(gv_color(x11,cornsilk2)).
-assert(gv_color(x11,cornsilk3)).
-assert(gv_color(x11,cornsilk4)).
-assert(gv_color(x11,crimson)).
-assert(gv_color(x11,cyan)).
-assert(gv_color(x11,cyan1)).
-assert(gv_color(x11,cyan2)).
-assert(gv_color(x11,cyan3)).
-assert(gv_color(x11,cyan4)).
-assert(gv_color(x11,darkgoldenrod)).
-assert(gv_color(x11,darkgoldenrod1)).
-assert(gv_color(x11,darkgoldenrod2)).
-assert(gv_color(x11,darkgoldenrod3)).
-assert(gv_color(x11,darkgoldenrod4)).
-assert(gv_color(x11,darkgreen)).
-assert(gv_color(x11,darkkhaki)).
-assert(gv_color(x11,darkolivegreen)).
-assert(gv_color(x11,darkolivegreen1)).
-assert(gv_color(x11,darkolivegreen2)).
-assert(gv_color(x11,darkolivegreen3)).
-assert(gv_color(x11,darkolivegreen4)).
-assert(gv_color(x11,darkorange)).
-assert(gv_color(x11,darkorange1)).
-assert(gv_color(x11,darkorange2)).
-assert(gv_color(x11,darkorange3)).
-assert(gv_color(x11,darkorange4)).
-assert(gv_color(x11,darkorchid)).
-assert(gv_color(x11,darkorchid1)).
-assert(gv_color(x11,darkorchid2)).
-assert(gv_color(x11,darkorchid3)).
-assert(gv_color(x11,darkorchid4)).
-assert(gv_color(x11,darksalmon)).
-assert(gv_color(x11,darkseagreen)).
-assert(gv_color(x11,darkseagreen1)).
-assert(gv_color(x11,darkseagreen2)).
-assert(gv_color(x11,darkseagreen3)).
-assert(gv_color(x11,darkseagreen4)).
-assert(gv_color(x11,darkslateblue)).
-assert(gv_color(x11,darkslategray)).
-assert(gv_color(x11,darkslategray1)).
-assert(gv_color(x11,darkslategray2)).
-assert(gv_color(x11,darkslategray3)).
-assert(gv_color(x11,darkslategray4)).
-assert(gv_color(x11,darkslategrey)).
-assert(gv_color(x11,darkturquoise)).
-assert(gv_color(x11,darkviolet)).
-assert(gv_color(x11,deeppink)).
-assert(gv_color(x11,deeppink1)).
-assert(gv_color(x11,deeppink2)).
-assert(gv_color(x11,deeppink3)).
-assert(gv_color(x11,deeppink4)).
-assert(gv_color(x11,deepskyblue)).
-assert(gv_color(x11,deepskyblue1)).
-assert(gv_color(x11,deepskyblue2)).
-assert(gv_color(x11,deepskyblue3)).
-assert(gv_color(x11,deepskyblue4)).
-assert(gv_color(x11,dimgray)).
-assert(gv_color(x11,dimgrey)).
-assert(gv_color(x11,dodgerblue)).
-assert(gv_color(x11,dodgerblue1)).
-assert(gv_color(x11,dodgerblue2)).
-assert(gv_color(x11,dodgerblue3)).
-assert(gv_color(x11,dodgerblue4)).
-assert(gv_color(x11,firebrick)).
-assert(gv_color(x11,firebrick1)).
-assert(gv_color(x11,firebrick2)).
-assert(gv_color(x11,firebrick3)).
-assert(gv_color(x11,firebrick4)).
-assert(gv_color(x11,floralwhite)).
-assert(gv_color(x11,forestgreen)).
-assert(gv_color(x11,gainsboro)).
-assert(gv_color(x11,ghostwhite)).
-assert(gv_color(x11,gold)).
-assert(gv_color(x11,gold1)).
-assert(gv_color(x11,gold2)).
-assert(gv_color(x11,gold3)).
-assert(gv_color(x11,gold4)).
-assert(gv_color(x11,goldenrod)).
-assert(gv_color(x11,goldenrod1)).
-assert(gv_color(x11,goldenrod2)).
-assert(gv_color(x11,goldenrod3)).
-assert(gv_color(x11,goldenrod4)).
-assert(gv_color(x11,gray)).
-assert(gv_color(x11,gray0)).
-assert(gv_color(x11,gray1)).
-assert(gv_color(x11,gray10)).
-assert(gv_color(x11,gray100)).
-assert(gv_color(x11,gray11)).
-assert(gv_color(x11,gray12)).
-assert(gv_color(x11,gray13)).
-assert(gv_color(x11,gray14)).
-assert(gv_color(x11,gray15)).
-assert(gv_color(x11,gray16)).
-assert(gv_color(x11,gray17)).
-assert(gv_color(x11,gray18)).
-assert(gv_color(x11,gray19)).
-assert(gv_color(x11,gray2)).
-assert(gv_color(x11,gray20)).
-assert(gv_color(x11,gray21)).
-assert(gv_color(x11,gray22)).
-assert(gv_color(x11,gray23)).
-assert(gv_color(x11,gray24)).
-assert(gv_color(x11,gray25)).
-assert(gv_color(x11,gray26)).
-assert(gv_color(x11,gray27)).
-assert(gv_color(x11,gray28)).
-assert(gv_color(x11,gray29)).
-assert(gv_color(x11,gray3)).
-assert(gv_color(x11,gray30)).
-assert(gv_color(x11,gray31)).
-assert(gv_color(x11,gray32)).
-assert(gv_color(x11,gray33)).
-assert(gv_color(x11,gray34)).
-assert(gv_color(x11,gray35)).
-assert(gv_color(x11,gray36)).
-assert(gv_color(x11,gray37)).
-assert(gv_color(x11,gray38)).
-assert(gv_color(x11,gray39)).
-assert(gv_color(x11,gray4)).
-assert(gv_color(x11,gray40)).
-assert(gv_color(x11,gray41)).
-assert(gv_color(x11,gray42)).
-assert(gv_color(x11,gray43)).
-assert(gv_color(x11,gray44)).
-assert(gv_color(x11,gray45)).
-assert(gv_color(x11,gray46)).
-assert(gv_color(x11,gray47)).
-assert(gv_color(x11,gray48)).
-assert(gv_color(x11,gray49)).
-assert(gv_color(x11,gray5)).
-assert(gv_color(x11,gray50)).
-assert(gv_color(x11,gray51)).
-assert(gv_color(x11,gray52)).
-assert(gv_color(x11,gray53)).
-assert(gv_color(x11,gray54)).
-assert(gv_color(x11,gray55)).
-assert(gv_color(x11,gray56)).
-assert(gv_color(x11,gray57)).
-assert(gv_color(x11,gray58)).
-assert(gv_color(x11,gray59)).
-assert(gv_color(x11,gray6)).
-assert(gv_color(x11,gray60)).
-assert(gv_color(x11,gray61)).
-assert(gv_color(x11,gray62)).
-assert(gv_color(x11,gray63)).
-assert(gv_color(x11,gray64)).
-assert(gv_color(x11,gray65)).
-assert(gv_color(x11,gray66)).
-assert(gv_color(x11,gray67)).
-assert(gv_color(x11,gray68)).
-assert(gv_color(x11,gray69)).
-assert(gv_color(x11,gray7)).
-assert(gv_color(x11,gray70)).
-assert(gv_color(x11,gray71)).
-assert(gv_color(x11,gray72)).
-assert(gv_color(x11,gray73)).
-assert(gv_color(x11,gray74)).
-assert(gv_color(x11,gray75)).
-assert(gv_color(x11,gray76)).
-assert(gv_color(x11,gray77)).
-assert(gv_color(x11,gray78)).
-assert(gv_color(x11,gray79)).
-assert(gv_color(x11,gray8)).
-assert(gv_color(x11,gray80)).
-assert(gv_color(x11,gray81)).
-assert(gv_color(x11,gray82)).
-assert(gv_color(x11,gray83)).
-assert(gv_color(x11,gray84)).
-assert(gv_color(x11,gray85)).
-assert(gv_color(x11,gray86)).
-assert(gv_color(x11,gray87)).
-assert(gv_color(x11,gray88)).
-assert(gv_color(x11,gray89)).
-assert(gv_color(x11,gray9)).
-assert(gv_color(x11,gray90)).
-assert(gv_color(x11,gray91)).
-assert(gv_color(x11,gray92)).
-assert(gv_color(x11,gray93)).
-assert(gv_color(x11,gray94)).
-assert(gv_color(x11,gray95)).
-assert(gv_color(x11,gray96)).
-assert(gv_color(x11,gray97)).
-assert(gv_color(x11,gray98)).
-assert(gv_color(x11,gray99)).
-assert(gv_color(x11,green)).
-assert(gv_color(x11,green1)).
-assert(gv_color(x11,green2)).
-assert(gv_color(x11,green3)).
-assert(gv_color(x11,green4)).
-assert(gv_color(x11,greenyellow)).
-assert(gv_color(x11,grey)).
-assert(gv_color(x11,grey0)).
-assert(gv_color(x11,grey1)).
-assert(gv_color(x11,grey10)).
-assert(gv_color(x11,grey100)).
-assert(gv_color(x11,grey11)).
-assert(gv_color(x11,grey12)).
-assert(gv_color(x11,grey13)).
-assert(gv_color(x11,grey14)).
-assert(gv_color(x11,grey15)).
-assert(gv_color(x11,grey16)).
-assert(gv_color(x11,grey17)).
-assert(gv_color(x11,grey18)).
-assert(gv_color(x11,grey19)).
-assert(gv_color(x11,grey2)).
-assert(gv_color(x11,grey20)).
-assert(gv_color(x11,grey21)).
-assert(gv_color(x11,grey22)).
-assert(gv_color(x11,grey23)).
-assert(gv_color(x11,grey24)).
-assert(gv_color(x11,grey25)).
-assert(gv_color(x11,grey26)).
-assert(gv_color(x11,grey27)).
-assert(gv_color(x11,grey28)).
-assert(gv_color(x11,grey29)).
-assert(gv_color(x11,grey3)).
-assert(gv_color(x11,grey30)).
-assert(gv_color(x11,grey31)).
-assert(gv_color(x11,grey32)).
-assert(gv_color(x11,grey33)).
-assert(gv_color(x11,grey34)).
-assert(gv_color(x11,grey35)).
-assert(gv_color(x11,grey36)).
-assert(gv_color(x11,grey37)).
-assert(gv_color(x11,grey38)).
-assert(gv_color(x11,grey39)).
-assert(gv_color(x11,grey4)).
-assert(gv_color(x11,grey40)).
-assert(gv_color(x11,grey41)).
-assert(gv_color(x11,grey42)).
-assert(gv_color(x11,grey43)).
-assert(gv_color(x11,grey44)).
-assert(gv_color(x11,grey45)).
-assert(gv_color(x11,grey46)).
-assert(gv_color(x11,grey47)).
-assert(gv_color(x11,grey48)).
-assert(gv_color(x11,grey49)).
-assert(gv_color(x11,grey5)).
-assert(gv_color(x11,grey50)).
-assert(gv_color(x11,grey51)).
-assert(gv_color(x11,grey52)).
-assert(gv_color(x11,grey53)).
-assert(gv_color(x11,grey54)).
-assert(gv_color(x11,grey55)).
-assert(gv_color(x11,grey56)).
-assert(gv_color(x11,grey57)).
-assert(gv_color(x11,grey58)).
-assert(gv_color(x11,grey59)).
-assert(gv_color(x11,grey6)).
-assert(gv_color(x11,grey60)).
-assert(gv_color(x11,grey61)).
-assert(gv_color(x11,grey62)).
-assert(gv_color(x11,grey63)).
-assert(gv_color(x11,grey64)).
-assert(gv_color(x11,grey65)).
-assert(gv_color(x11,grey66)).
-assert(gv_color(x11,grey67)).
-assert(gv_color(x11,grey68)).
-assert(gv_color(x11,grey69)).
-assert(gv_color(x11,grey7)).
-assert(gv_color(x11,grey70)).
-assert(gv_color(x11,grey71)).
-assert(gv_color(x11,grey72)).
-assert(gv_color(x11,grey73)).
-assert(gv_color(x11,grey74)).
-assert(gv_color(x11,grey75)).
-assert(gv_color(x11,grey76)).
-assert(gv_color(x11,grey77)).
-assert(gv_color(x11,grey78)).
-assert(gv_color(x11,grey79)).
-assert(gv_color(x11,grey8)).
-assert(gv_color(x11,grey80)).
-assert(gv_color(x11,grey81)).
-assert(gv_color(x11,grey82)).
-assert(gv_color(x11,grey83)).
-assert(gv_color(x11,grey84)).
-assert(gv_color(x11,grey85)).
-assert(gv_color(x11,grey86)).
-assert(gv_color(x11,grey87)).
-assert(gv_color(x11,grey88)).
-assert(gv_color(x11,grey89)).
-assert(gv_color(x11,grey9)).
-assert(gv_color(x11,grey90)).
-assert(gv_color(x11,grey91)).
-assert(gv_color(x11,grey92)).
-assert(gv_color(x11,grey93)).
-assert(gv_color(x11,grey94)).
-assert(gv_color(x11,grey95)).
-assert(gv_color(x11,grey96)).
-assert(gv_color(x11,grey97)).
-assert(gv_color(x11,grey98)).
-assert(gv_color(x11,grey99)).
-assert(gv_color(x11,honeydew)).
-assert(gv_color(x11,honeydew1)).
-assert(gv_color(x11,honeydew2)).
-assert(gv_color(x11,honeydew3)).
-assert(gv_color(x11,honeydew4)).
-assert(gv_color(x11,hotpink)).
-assert(gv_color(x11,hotpink1)).
-assert(gv_color(x11,hotpink2)).
-assert(gv_color(x11,hotpink3)).
-assert(gv_color(x11,hotpink4)).
-assert(gv_color(x11,indianred)).
-assert(gv_color(x11,indianred1)).
-assert(gv_color(x11,indianred2)).
-assert(gv_color(x11,indianred3)).
-assert(gv_color(x11,indianred4)).
-assert(gv_color(x11,indigo)).
-assert(gv_color(x11,invis)).
-assert(gv_color(x11,ivory)).
-assert(gv_color(x11,ivory1)).
-assert(gv_color(x11,ivory2)).
-assert(gv_color(x11,ivory3)).
-assert(gv_color(x11,ivory4)).
-assert(gv_color(x11,khaki)).
-assert(gv_color(x11,khaki1)).
-assert(gv_color(x11,khaki2)).
-assert(gv_color(x11,khaki3)).
-assert(gv_color(x11,khaki4)).
-assert(gv_color(x11,lavender)).
-assert(gv_color(x11,lavenderblush)).
-assert(gv_color(x11,lavenderblush1)).
-assert(gv_color(x11,lavenderblush2)).
-assert(gv_color(x11,lavenderblush3)).
-assert(gv_color(x11,lavenderblush4)).
-assert(gv_color(x11,lawngreen)).
-assert(gv_color(x11,lemonchiffon)).
-assert(gv_color(x11,lemonchiffon1)).
-assert(gv_color(x11,lemonchiffon2)).
-assert(gv_color(x11,lemonchiffon3)).
-assert(gv_color(x11,lemonchiffon4)).
-assert(gv_color(x11,lightblue)).
-assert(gv_color(x11,lightblue1)).
-assert(gv_color(x11,lightblue2)).
-assert(gv_color(x11,lightblue3)).
-assert(gv_color(x11,lightblue4)).
-assert(gv_color(x11,lightcoral)).
-assert(gv_color(x11,lightcyan)).
-assert(gv_color(x11,lightcyan1)).
-assert(gv_color(x11,lightcyan2)).
-assert(gv_color(x11,lightcyan3)).
-assert(gv_color(x11,lightcyan4)).
-assert(gv_color(x11,lightgoldenrod)).
-assert(gv_color(x11,lightgoldenrod1)).
-assert(gv_color(x11,lightgoldenrod2)).
-assert(gv_color(x11,lightgoldenrod3)).
-assert(gv_color(x11,lightgoldenrod4)).
-assert(gv_color(x11,lightgoldenrodyellow)).
-assert(gv_color(x11,lightgray)).
-assert(gv_color(x11,lightgrey)).
-assert(gv_color(x11,lightpink)).
-assert(gv_color(x11,lightpink1)).
-assert(gv_color(x11,lightpink2)).
-assert(gv_color(x11,lightpink3)).
-assert(gv_color(x11,lightpink4)).
-assert(gv_color(x11,lightsalmon)).
-assert(gv_color(x11,lightsalmon1)).
-assert(gv_color(x11,lightsalmon2)).
-assert(gv_color(x11,lightsalmon3)).
-assert(gv_color(x11,lightsalmon4)).
-assert(gv_color(x11,lightseagreen)).
-assert(gv_color(x11,lightskyblue)).
-assert(gv_color(x11,lightskyblue1)).
-assert(gv_color(x11,lightskyblue2)).
-assert(gv_color(x11,lightskyblue3)).
-assert(gv_color(x11,lightskyblue4)).
-assert(gv_color(x11,lightslateblue)).
-assert(gv_color(x11,lightslategray)).
-assert(gv_color(x11,lightslategrey)).
-assert(gv_color(x11,lightsteelblue)).
-assert(gv_color(x11,lightsteelblue1)).
-assert(gv_color(x11,lightsteelblue2)).
-assert(gv_color(x11,lightsteelblue3)).
-assert(gv_color(x11,lightsteelblue4)).
-assert(gv_color(x11,lightyellow)).
-assert(gv_color(x11,lightyellow1)).
-assert(gv_color(x11,lightyellow2)).
-assert(gv_color(x11,lightyellow3)).
-assert(gv_color(x11,lightyellow4)).
-assert(gv_color(x11,limegreen)).
-assert(gv_color(x11,linen)).
-assert(gv_color(x11,magenta)).
-assert(gv_color(x11,magenta1)).
-assert(gv_color(x11,magenta2)).
-assert(gv_color(x11,magenta3)).
-assert(gv_color(x11,magenta4)).
-assert(gv_color(x11,maroon)).
-assert(gv_color(x11,maroon1)).
-assert(gv_color(x11,maroon2)).
-assert(gv_color(x11,maroon3)).
-assert(gv_color(x11,maroon4)).
-assert(gv_color(x11,mediumaquamarine)).
-assert(gv_color(x11,mediumblue)).
-assert(gv_color(x11,mediumorchid)).
-assert(gv_color(x11,mediumorchid1)).
-assert(gv_color(x11,mediumorchid2)).
-assert(gv_color(x11,mediumorchid3)).
-assert(gv_color(x11,mediumorchid4)).
-assert(gv_color(x11,mediumpurple)).
-assert(gv_color(x11,mediumpurple1)).
-assert(gv_color(x11,mediumpurple2)).
-assert(gv_color(x11,mediumpurple3)).
-assert(gv_color(x11,mediumpurple4)).
-assert(gv_color(x11,mediumseagreen)).
-assert(gv_color(x11,mediumslateblue)).
-assert(gv_color(x11,mediumspringgreen)).
-assert(gv_color(x11,mediumturquoise)).
-assert(gv_color(x11,mediumvioletred)).
-assert(gv_color(x11,midnightblue)).
-assert(gv_color(x11,mintcream)).
-assert(gv_color(x11,mistyrose)).
-assert(gv_color(x11,mistyrose1)).
-assert(gv_color(x11,mistyrose2)).
-assert(gv_color(x11,mistyrose3)).
-assert(gv_color(x11,mistyrose4)).
-assert(gv_color(x11,moccasin)).
-assert(gv_color(x11,navajowhite)).
-assert(gv_color(x11,navajowhite1)).
-assert(gv_color(x11,navajowhite2)).
-assert(gv_color(x11,navajowhite3)).
-assert(gv_color(x11,navajowhite4)).
-assert(gv_color(x11,navy)).
-assert(gv_color(x11,navyblue)).
-assert(gv_color(x11,none)).
-assert(gv_color(x11,oldlace)).
-assert(gv_color(x11,olivedrab)).
-assert(gv_color(x11,olivedrab1)).
-assert(gv_color(x11,olivedrab2)).
-assert(gv_color(x11,olivedrab3)).
-assert(gv_color(x11,olivedrab4)).
-assert(gv_color(x11,orange)).
-assert(gv_color(x11,orange1)).
-assert(gv_color(x11,orange2)).
-assert(gv_color(x11,orange3)).
-assert(gv_color(x11,orange4)).
-assert(gv_color(x11,orangered)).
-assert(gv_color(x11,orangered1)).
-assert(gv_color(x11,orangered2)).
-assert(gv_color(x11,orangered3)).
-assert(gv_color(x11,orangered4)).
-assert(gv_color(x11,orchid)).
-assert(gv_color(x11,orchid1)).
-assert(gv_color(x11,orchid2)).
-assert(gv_color(x11,orchid3)).
-assert(gv_color(x11,orchid4)).
-assert(gv_color(x11,palegoldenrod)).
-assert(gv_color(x11,palegreen)).
-assert(gv_color(x11,palegreen1)).
-assert(gv_color(x11,palegreen2)).
-assert(gv_color(x11,palegreen3)).
-assert(gv_color(x11,palegreen4)).
-assert(gv_color(x11,paleturquoise)).
-assert(gv_color(x11,paleturquoise1)).
-assert(gv_color(x11,paleturquoise2)).
-assert(gv_color(x11,paleturquoise3)).
-assert(gv_color(x11,paleturquoise4)).
-assert(gv_color(x11,palevioletred)).
-assert(gv_color(x11,palevioletred1)).
-assert(gv_color(x11,palevioletred2)).
-assert(gv_color(x11,palevioletred3)).
-assert(gv_color(x11,palevioletred4)).
-assert(gv_color(x11,papayawhip)).
-assert(gv_color(x11,peachpuff)).
-assert(gv_color(x11,peachpuff1)).
-assert(gv_color(x11,peachpuff2)).
-assert(gv_color(x11,peachpuff3)).
-assert(gv_color(x11,peachpuff4)).
-assert(gv_color(x11,peru)).
-assert(gv_color(x11,pink)).
-assert(gv_color(x11,pink1)).
-assert(gv_color(x11,pink2)).
-assert(gv_color(x11,pink3)).
-assert(gv_color(x11,pink4)).
-assert(gv_color(x11,plum)).
-assert(gv_color(x11,plum1)).
-assert(gv_color(x11,plum2)).
-assert(gv_color(x11,plum3)).
-assert(gv_color(x11,plum4)).
-assert(gv_color(x11,powderblue)).
-assert(gv_color(x11,purple)).
-assert(gv_color(x11,purple1)).
-assert(gv_color(x11,purple2)).
-assert(gv_color(x11,purple3)).
-assert(gv_color(x11,purple4)).
-assert(gv_color(x11,red)).
-assert(gv_color(x11,red1)).
-assert(gv_color(x11,red2)).
-assert(gv_color(x11,red3)).
-assert(gv_color(x11,red4)).
-assert(gv_color(x11,rosybrown)).
-assert(gv_color(x11,rosybrown1)).
-assert(gv_color(x11,rosybrown2)).
-assert(gv_color(x11,rosybrown3)).
-assert(gv_color(x11,rosybrown4)).
-assert(gv_color(x11,royalblue)).
-assert(gv_color(x11,royalblue1)).
-assert(gv_color(x11,royalblue2)).
-assert(gv_color(x11,royalblue3)).
-assert(gv_color(x11,royalblue4)).
-assert(gv_color(x11,saddlebrown)).
-assert(gv_color(x11,salmon)).
-assert(gv_color(x11,salmon1)).
-assert(gv_color(x11,salmon2)).
-assert(gv_color(x11,salmon3)).
-assert(gv_color(x11,salmon4)).
-assert(gv_color(x11,sandybrown)).
-assert(gv_color(x11,seagreen)).
-assert(gv_color(x11,seagreen1)).
-assert(gv_color(x11,seagreen2)).
-assert(gv_color(x11,seagreen3)).
-assert(gv_color(x11,seagreen4)).
-assert(gv_color(x11,seashell)).
-assert(gv_color(x11,seashell1)).
-assert(gv_color(x11,seashell2)).
-assert(gv_color(x11,seashell3)).
-assert(gv_color(x11,seashell4)).
-assert(gv_color(x11,sienna)).
-assert(gv_color(x11,sienna1)).
-assert(gv_color(x11,sienna2)).
-assert(gv_color(x11,sienna3)).
-assert(gv_color(x11,sienna4)).
-assert(gv_color(x11,skyblue)).
-assert(gv_color(x11,skyblue1)).
-assert(gv_color(x11,skyblue2)).
-assert(gv_color(x11,skyblue3)).
-assert(gv_color(x11,skyblue4)).
-assert(gv_color(x11,slateblue)).
-assert(gv_color(x11,slateblue1)).
-assert(gv_color(x11,slateblue2)).
-assert(gv_color(x11,slateblue3)).
-assert(gv_color(x11,slateblue4)).
-assert(gv_color(x11,slategray)).
-assert(gv_color(x11,slategray1)).
-assert(gv_color(x11,slategray2)).
-assert(gv_color(x11,slategray3)).
-assert(gv_color(x11,slategray4)).
-assert(gv_color(x11,slategrey)).
-assert(gv_color(x11,snow)).
-assert(gv_color(x11,snow1)).
-assert(gv_color(x11,snow2)).
-assert(gv_color(x11,snow3)).
-assert(gv_color(x11,snow4)).
-assert(gv_color(x11,springgreen)).
-assert(gv_color(x11,springgreen1)).
-assert(gv_color(x11,springgreen2)).
-assert(gv_color(x11,springgreen3)).
-assert(gv_color(x11,springgreen4)).
-assert(gv_color(x11,steelblue)).
-assert(gv_color(x11,steelblue1)).
-assert(gv_color(x11,steelblue2)).
-assert(gv_color(x11,steelblue3)).
-assert(gv_color(x11,steelblue4)).
-assert(gv_color(x11,tan)).
-assert(gv_color(x11,tan1)).
-assert(gv_color(x11,tan2)).
-assert(gv_color(x11,tan3)).
-assert(gv_color(x11,tan4)).
-assert(gv_color(x11,thistle)).
-assert(gv_color(x11,thistle1)).
-assert(gv_color(x11,thistle2)).
-assert(gv_color(x11,thistle3)).
-assert(gv_color(x11,thistle4)).
-assert(gv_color(x11,tomato)).
-assert(gv_color(x11,tomato1)).
-assert(gv_color(x11,tomato2)).
-assert(gv_color(x11,tomato3)).
-assert(gv_color(x11,tomato4)).
-assert(gv_color(x11,transparent)).
-assert(gv_color(x11,turquoise)).
-assert(gv_color(x11,turquoise1)).
-assert(gv_color(x11,turquoise2)).
-assert(gv_color(x11,turquoise3)).
-assert(gv_color(x11,turquoise4)).
-assert(gv_color(x11,violet)).
-assert(gv_color(x11,violetred)).
-assert(gv_color(x11,violetred1)).
-assert(gv_color(x11,violetred2)).
-assert(gv_color(x11,violetred3)).
-assert(gv_color(x11,violetred4)).
-assert(gv_color(x11,wheat)).
-assert(gv_color(x11,wheat1)).
-assert(gv_color(x11,wheat2)).
-assert(gv_color(x11,wheat3)).
-assert(gv_color(x11,wheat4)).
-assert(gv_color(x11,white)).
-assert(gv_color(x11,whitesmoke)).
-assert(gv_color(x11,yellow)).
-assert(gv_color(x11,yellow1)).
-assert(gv_color(x11,yellow2)).
-assert(gv_color(x11,yellow3)).
-assert(gv_color(x11,yellow4)).
-assert(gv_color(x11,yellowgreen)).
-assert(gv_color(svg,aliceblue)).
-assert(gv_color(svg,antiquewhite)).
-assert(gv_color(svg,aqua)).
-assert(gv_color(svg,aquamarine)).
-assert(gv_color(svg,azure)).
-assert(gv_color(svg,beige)).
-assert(gv_color(svg,bisque)).
-assert(gv_color(svg,black)).
-assert(gv_color(svg,blanchedalmond)).
-assert(gv_color(svg,blue)).
-assert(gv_color(svg,blueviolet)).
-assert(gv_color(svg,brown)).
-assert(gv_color(svg,burlywood)).
-assert(gv_color(svg,cadetblue)).
-assert(gv_color(svg,chartreuse)).
-assert(gv_color(svg,chocolate)).
-assert(gv_color(svg,coral)).
-assert(gv_color(svg,cornflowerblue)).
-assert(gv_color(svg,cornsilk)).
-assert(gv_color(svg,crimson)).
-assert(gv_color(svg,cyan)).
-assert(gv_color(svg,darkblue)).
-assert(gv_color(svg,darkcyan)).
-assert(gv_color(svg,darkgoldenrod)).
-assert(gv_color(svg,darkgray)).
-assert(gv_color(svg,darkgreen)).
-assert(gv_color(svg,darkgrey)).
-assert(gv_color(svg,darkkhaki)).
-assert(gv_color(svg,darkmagenta)).
-assert(gv_color(svg,darkolivegreen)).
-assert(gv_color(svg,darkorange)).
-assert(gv_color(svg,darkorchid)).
-assert(gv_color(svg,darkred)).
-assert(gv_color(svg,darksalmon)).
-assert(gv_color(svg,darkseagreen)).
-assert(gv_color(svg,darkslateblue)).
-assert(gv_color(svg,darkslategray)).
-assert(gv_color(svg,darkslategrey)).
-assert(gv_color(svg,darkturquoise)).
-assert(gv_color(svg,darkviolet)).
-assert(gv_color(svg,deeppink)).
-assert(gv_color(svg,deepskyblue)).
-assert(gv_color(svg,dimgray)).
-assert(gv_color(svg,dimgrey)).
-assert(gv_color(svg,dodgerblue)).
-assert(gv_color(svg,firebrick)).
-assert(gv_color(svg,floralwhite)).
-assert(gv_color(svg,forestgreen)).
-assert(gv_color(svg,fuchsia)).
-assert(gv_color(svg,gainsboro)).
-assert(gv_color(svg,ghostwhite)).
-assert(gv_color(svg,gold)).
-assert(gv_color(svg,goldenrod)).
-assert(gv_color(svg,gray)).
-assert(gv_color(svg,grey)).
-assert(gv_color(svg,green)).
-assert(gv_color(svg,greenyellow)).
-assert(gv_color(svg,honeydew)).
-assert(gv_color(svg,hotpink)).
-assert(gv_color(svg,indianred)).
-assert(gv_color(svg,indigo)).
-assert(gv_color(svg,ivory)).
-assert(gv_color(svg,khaki)).
-assert(gv_color(svg,lavender)).
-assert(gv_color(svg,lavenderblush)).
-assert(gv_color(svg,lawngreen)).
-assert(gv_color(svg,lemonchiffon)).
-assert(gv_color(svg,lightblue)).
-assert(gv_color(svg,lightcoral)).
-assert(gv_color(svg,lightcyan)).
-assert(gv_color(svg,lightgoldenrodyellow)).
-assert(gv_color(svg,lightgray)).
-assert(gv_color(svg,lightgreen)).
-assert(gv_color(svg,lightgrey)).
-assert(gv_color(svg,lightpink)).
-assert(gv_color(svg,lightsalmon)).
-assert(gv_color(svg,lightseagreen)).
-assert(gv_color(svg,lightskyblue)).
-assert(gv_color(svg,lightslategray)).
-assert(gv_color(svg,lightslategrey)).
-assert(gv_color(svg,lightsteelblue)).
-assert(gv_color(svg,lightyellow)).
-assert(gv_color(svg,lime)).
-assert(gv_color(svg,limegreen)).
-assert(gv_color(svg,linen)).
-assert(gv_color(svg,magenta)).
-assert(gv_color(svg,maroon)).
-assert(gv_color(svg,mediumaquamarine)).
-assert(gv_color(svg,mediumblue)).
-assert(gv_color(svg,mediumorchid)).
-assert(gv_color(svg,mediumpurple)).
-assert(gv_color(svg,mediumseagreen)).
-assert(gv_color(svg,mediumslateblue)).
-assert(gv_color(svg,mediumspringgreen)).
-assert(gv_color(svg,mediumturquoise)).
-assert(gv_color(svg,mediumvioletred)).
-assert(gv_color(svg,midnightblue)).
-assert(gv_color(svg,mintcream)).
-assert(gv_color(svg,mistyrose)).
-assert(gv_color(svg,moccasin)).
-assert(gv_color(svg,navajowhite)).
-assert(gv_color(svg,navy)).
-assert(gv_color(svg,oldlace)).
-assert(gv_color(svg,olive)).
-assert(gv_color(svg,olivedrab)).
-assert(gv_color(svg,orange)).
-assert(gv_color(svg,orangered)).
-assert(gv_color(svg,orchid)).
-assert(gv_color(svg,palegoldenrod)).
-assert(gv_color(svg,palegreen)).
-assert(gv_color(svg,paleturquoise)).
-assert(gv_color(svg,palevioletred)).
-assert(gv_color(svg,papayawhip)).
-assert(gv_color(svg,peachpuff)).
-assert(gv_color(svg,peru)).
-assert(gv_color(svg,pink)).
-assert(gv_color(svg,plum)).
-assert(gv_color(svg,powderblue)).
-assert(gv_color(svg,purple)).
-assert(gv_color(svg,red)).
-assert(gv_color(svg,rosybrown)).
-assert(gv_color(svg,royalblue)).
-assert(gv_color(svg,saddlebrown)).
-assert(gv_color(svg,salmon)).
-assert(gv_color(svg,sandybrown)).
-assert(gv_color(svg,seagreen)).
-assert(gv_color(svg,seashell)).
-assert(gv_color(svg,sienna)).
-assert(gv_color(svg,silver)).
-assert(gv_color(svg,skyblue)).
-assert(gv_color(svg,slateblue)).
-assert(gv_color(svg,slategray)).
-assert(gv_color(svg,slategrey)).
-assert(gv_color(svg,snow)).
-assert(gv_color(svg,springgreen)).
-assert(gv_color(svg,steelblue)).
-assert(gv_color(svg,tan)).
-assert(gv_color(svg,teal)).
-assert(gv_color(svg,thistle)).
-assert(gv_color(svg,tomato)).
-assert(gv_color(svg,turquoise)).
-assert(gv_color(svg,violet)).
-assert(gv_color(svg,wheat)).
-assert(gv_color(svg,white)).
-assert(gv_color(svg,whitesmoke)).
-assert(gv_color(svg,yellow)).
-assert(gv_color(svg,yellowgreen)).
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index fa79bea..0c3755c 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -7,6 +7,7 @@
     colorList//1 % +Pairs:list(pair(compound,float))
   ]
 ).
+:- ensure_loaded(library('gv/gv_color.data')).
 
 /** <module> GraphViz color
 
@@ -17,23 +18,11 @@
 */
 
 :- use_module(library(apply)).
-:- use_module(library(debug_ext)).
 :- use_module(library(dcg/basics)).
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_content)).
-:- use_module(library(http/http_download)).
 :- use_module(library(lists)).
-:- use_module(library(msg_ext)).
 :- use_module(library(os/file_ext)).
-:- use_module(library(persistency)).
-:- use_module(library(xpath)).
-:- use_module(library(xpath/xpath_table)).
-
-%! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet.
-
-:- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)).
-
-:- initialization(gv_color_init).
 
 
 
@@ -79,69 +68,3 @@ wc(Color-Float) -->
 wc_weight(Float) -->
   ";",
   float(Float).
-
-
-
-
-
-% INITIALIZATION %
-
-%! gv_color_download is det.
-
-gv_color_download:-
-  verbose(
-    gv_color_download0,
-    'updating the GraphViz color table'
-  ).
-
-gv_color_download0:-
-  gv_color_uri(Uri),
-  html_download(Uri, Dom),
-  xpath_chk(Dom, //table(1), TableDom1),
-  xpath_chk(Dom, //table(2), TableDom2),
-  maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]).
-
-
-assert_color_table(Colorscheme, TableDom):-
-  xpath_table(TableDom, _, Rows),
-  append(Rows, Cells),
-  forall(
-    member(Cell, Cells),
-    assert_gv_color(Colorscheme, Cell)
-  ).
-
-
-%! gv_color_file(-File:atom) is det.
-
-gv_color_file(File):-
-  absolute_file_name('gv_color.log', File, [access(write)]).
-
-
-%! gv_color_init is det.
-
-gv_color_init:-
-  gv_color_file(File),
-  (   exists_file(File)
-  ->  true
-  ;   touch(File)
-  ),
-  db_attach(File, []),
-  file_age(File, Age),
-  gv_color_update(Age).
-
-
-%! gv_color_update(+Age:float) is det.
-
-% The persistent store is still fresh.
-gv_color_update(Age):-
-  once(gv_color(_, _)),
-  Age < 8640000, !.
-% The persistent store has become stale, so refresh it.
-gv_color_update(_):-
-  retractall_gv_color(_, _),
-  gv_color_download.
-
-
-%! gv_color_uri(-Url:url) is det.
-
-gv_color_uri('http://www.graphviz.org/doc/info/colors.html').
 
```
 
<h2 id="132"> 132: 正在比较变动前 603344f 和变动后 2679253 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
index 7fd5a58..43ff053 100644
--- a/prolog/gv/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -17,7 +17,8 @@
 :- use_module(library(error)).
 :- use_module(library(gv/gv_graph)).
 :- use_module(library(option)).
-:- use_module(library(process)).
+:- use_module(library(os/external_program)).
+:- use_module(library(os/process_ext)).
 :- use_module(library(string_ext)).
 
 :- predicate_options(gv_export/3, 3, [
@@ -28,6 +29,11 @@
      output(+atom)
    ]).
 
+:- dynamic(user:module_uses/2).
+:- multifile(user:module_uses/2).
+
+user:module_uses(gv_file, program(dot)).
+
 
 
 
@@ -94,10 +100,9 @@ file_to_gv(InputFile, OutputFile, Opts):-
   % Run the GraphViz conversion command in the shell.
   format(atom(OutputTypeFlag), "-T~a", [OutputType]),
   format(atom(OutputFileFlag), "-o~a", [OutputFile]),
-  process_create(
+  run_process(
     path(Method),
-    [OutputTypeFlag,file(InputFile),OutputFileFlag],
-    []
+    [OutputTypeFlag,file(InputFile),OutputFileFlag]
   ).
 
 
 
```
 
<h2 id="133"> 133: 正在比较变动前 2679253 和变动后 a5e20f8 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl
new file mode 100644
index 0000000..562a035
--- /dev/null
+++ b/prolog/fca/fca_export.pl
@@ -0,0 +1,87 @@
+:- module(
+  fca_export,
+  [
+    fca_export/2, % +Context:compound
+                  % ?File:atom
+    fca_export/3, % +Context:compound
+                  % ?File:atom
+                  % +Options:list(compound)
+    fca_label_attributes/2, % +Concept:compound
+                            % -Label:atom
+    fca_label_concept/2, % +Concept:compound
+                         % -Label:atom
+    fca_label_objects/2 % +Concept:compound
+                        % -Label:atom
+  ]
+).
+
+/** <module> FCA export
+
+@author Wouter Beek
+@version 2015/11
+*/
+
+:- use_module(library(dcg/dcg_collection)).
+:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(fca/fca)).
+:- use_module(library(graph/build_export_graph)).
+:- use_module(library(gv/gv_file)).
+:- use_module(library(option)).
+
+:- predicate_options(fca_export/3, 3, [
+     pass_to(build_export_graph/3, 3),
+     pass_to(gv_export/3, 3)
+   ]).
+
+
+
+
+
+%! fca_export(+Context:compound, ?File:atom) is det.
+% Wrapper around fca_export/3 with default options.
+
+fca_export(Context, File):-
+  fca_export(Context, File, []).
+
+
+%! fca_export(+Context:compound, ?File:atom, +Options:list(compound)) is det.
+
+fca_export(Context, File, Opts1):-
+  fca_lattice(Context, Lattice),
+  option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept),
+  merge_options([vertex_label(VLabel_2)], Opts1, Opts2),
+  build_export_graph(Lattice, ExportG, Opts2),
+  gv_export(ExportG, File, Opts1).
+
+
+
+%! fca_label_attributes(+Concept:compound, -Label:atom) is det.
+% Writes a concept label displaying its attributes.
+
+fca_label_attributes(Concept, Lbl):-
+  string_phrase(dcg_attributes(Concept), Lbl).
+
+dcg_attributes(concept(_,As)) -->
+  set(As).
+
+
+
+%! fca_label_attributes(+Concept:compound, -Label:atom) is det.
+% Writes a concept label display both its attributes and objects.
+
+fca_label_concept(Concept, Lbl):-
+  string_phrase(dcg_concept(Concept), Lbl).
+
+dcg_concept(Concept) -->
+  pair(dcg_objects(Concept), dcg_attributes(Concept)).
+
+
+
+%! fca_label_objects(+Concept:compound, -Label:atom) is det.
+% Writes a concept label displaying its object.
+
+fca_label_objects(Concept, Lbl):-
+  string_phrase(dcg_objects(Concept), Lbl).
+
+dcg_objects(concept(Os,_)) -->
+  set(Os).
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
index 43ff053..4cf12a8 100644
--- a/prolog/gv/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -1,8 +1,10 @@
 :- module(
   gv_file,
   [
+    gv_export/2, % +ExportGraph:compound
+                 % ?File:atom
     gv_export/3 % +ExportGraph:compound
-                % +OutputFile:atom
+                % ?File:atom
                 % +Options:list(nvpair)
   ]
 ).
@@ -10,7 +12,7 @@
 /** <module> GraphViz file
 
 @author Wouter Beek
-@version 2015/07, 2015/10
+@version 2015/07, 2015/10-2015/11
 */
 
 :- use_module(library(code_ext)).
@@ -38,7 +40,14 @@ user:module_uses(gv_file, program(dot)).
 
 
 
-%! gv_export(+ExportGraph:compound, +File:atom, +Options:list(compound)) is det.
+%! gv_export(+ExportGraph:compound, ?File:atom) is det.
+% Wrapper around gv_export/3 with default options.
+
+gv_export(ExportG, File):-
+  gv_export(ExportG, File, []).
+
+
+%! gv_export(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
@@ -68,7 +77,7 @@ gv_export(ExportG, File, Opts):-
 
 %! file_to_gv(
 %!   +InputFile:atom,
-%!   +OutputFile:atom,
+%!   ?OutputFile:atom,
 %!   +Options:list(compound)
 %! ) is det.
 % Converts a GraphViz DOT file to an image file, using a specific
@@ -101,7 +110,7 @@ file_to_gv(InputFile, OutputFile, Opts):-
   format(atom(OutputTypeFlag), "-T~a", [OutputType]),
   format(atom(OutputFileFlag), "-o~a", [OutputFile]),
   run_process(
-    path(Method),
+    Method,
     [OutputTypeFlag,file(InputFile),OutputFileFlag]
   ).
 
diff --git a/test/test.pl b/test/test.pl
index ee92ae6..5ce2db0 100644
--- a/test/test.pl
+++ b/test/test.pl
@@ -1,3 +1,5 @@
+%/fca
+  :- use_module(library(fca/fca_export)).
 %/graph
   :- use_module(library(graph/build_export_graph)).
 %/gv
 
```
 
<h2 id="134"> 134: 正在比较变动前 a5e20f8 和变动后 bc3c502 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl
index 562a035..249d104 100644
--- a/prolog/fca/fca_export.pl
+++ b/prolog/fca/fca_export.pl
@@ -27,6 +27,7 @@
 :- use_module(library(graph/build_export_graph)).
 :- use_module(library(gv/gv_file)).
 :- use_module(library(option)).
+:- use_module(library(ordsets)).
 
 :- predicate_options(fca_export/3, 3, [
      pass_to(build_export_graph/3, 3),
@@ -47,12 +48,16 @@ fca_export(Context, File):-
 %! fca_export(+Context:compound, ?File:atom, +Options:list(compound)) is det.
 
 fca_export(Context, File, Opts1):-
-  fca_lattice(Context, Lattice),
+  fca_lattice(Context, Lattice1),
+  maplist(remove_reflexive_edge, Lattice1, Lattice2),
   option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept),
   merge_options([vertex_label(VLabel_2)], Opts1, Opts2),
-  build_export_graph(Lattice, ExportG, Opts2),
+  build_export_graph(Lattice2, ExportG, Opts2),
   gv_export(ExportG, File, Opts1).
 
+remove_reflexive_edge(M-Ns1, M-Ns2):-
+  ord_del_element(Ns1, M, Ns2).
+
 
 
 %! fca_label_attributes(+Concept:compound, -Label:atom) is det.
 
```
 
<h2 id="135"> 135: 正在比较变动前 bc3c502 和变动后 7ec98aa </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl
index 249d104..0368834 100644
--- a/prolog/fca/fca_export.pl
+++ b/prolog/fca/fca_export.pl
@@ -25,6 +25,7 @@
 :- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(fca/fca)).
 :- use_module(library(graph/build_export_graph)).
+:- use_module(library(graph/s/s_graph)).
 :- use_module(library(gv/gv_file)).
 :- use_module(library(option)).
 :- use_module(library(ordsets)).
@@ -49,14 +50,29 @@ fca_export(Context, File):-
 
 fca_export(Context, File, Opts1):-
   fca_lattice(Context, Lattice1),
-  maplist(remove_reflexive_edge, Lattice1, Lattice2),
+  %minimize(Lattice1, Lattice2),
+  Lattice2 = Lattice1,
   option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept),
-  merge_options([vertex_label(VLabel_2)], Opts1, Opts2),
+  merge_options(
+    [vertex_label(VLabel_2),vertex_rank(fca:concept_cardinality)],
+    Opts1,
+    Opts2
+  ),
   build_export_graph(Lattice2, ExportG, Opts2),
   gv_export(ExportG, File, Opts1).
 
-remove_reflexive_edge(M-Ns1, M-Ns2):-
-  ord_del_element(Ns1, M, Ns2).
+minimize(G1, G2):-
+  s_vertices(G1, Vs),
+  aggregate_all(
+    set(X-Y),
+    (
+      s_edge(G1, X-Y),
+      maplist(concept_cardinality, [X,Y], [CX,CY]),
+      CX < CY
+    ),
+    Es
+  ),
+  s_graph_components(G2, Vs, Es).
 
 
 
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index b6d367b..f5dc122 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -30,7 +30,7 @@ edge(FromVertexId,ToVertexId,Attributes:list(compound))
 ### Rank
 
 ```prolog
-rank(RankVertex:compound,ContentVertices:ordset(compound))
+RankVertex:compound-ContentVertices:ordset(compound)
 ```
 
 ### Vertex
@@ -51,7 +51,7 @@ Vertex coordinates:
 ---
 
 @author Wouter Beek
-@version 2015/07, 2015/09-2015/10
+@version 2015/07, 2015/09-2015/11
 */
 
 :- use_module(library(apply)).
@@ -60,6 +60,7 @@ Vertex coordinates:
 :- use_module(library(list_ext)).
 :- use_module(library(option_ext)).
 :- use_module(library(ordsets)).
+:- use_module(library(pairs)).
 
 :- predicate_options(build_export_graph/4, 4, [
      pass_to(edge_term/3, 3),
@@ -89,6 +90,7 @@ Vertex coordinates:
      vertex_label(+callable),
      vertex_peripheries(+callable),
      vertex_position(+callable),
+     vertex_rank(+callable),
      vertex_shape(+callable),
      vertex_uri(+callable)
    ]).
@@ -107,6 +109,7 @@ is_meta(vertex_image).
 is_meta(vertex_label).
 is_meta(vertex_peripheries).
 is_meta(vertex_position).
+is_meta(vertex_rank).
 is_meta(vertex_shape).
 is_meta(vertex_uri).
 
@@ -129,11 +132,17 @@ build_export_graph(G, ExportG):-
 % Graph is either:
 %   * a coumpound term `graph(Vs,Es)`, or
 %   * an unlabeled graph as defined by `library(ugraph)`.
+%
+% The following options are supported:
+%   * `vertex_rank(:RankFunction)`
+%     Assigns a non-negative integer to each vertex.
+%     No default.
 
-build_export_graph(G, graph(VTerms,ETerms,GAttrs), Opts1):-
+build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):-
   graph_components(G, Vs, Es),
   meta_options(is_meta, Opts1, Opts2),
-  maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms),
+  maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1),
+  build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2),
   maplist(\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms),
   graph_attributes(GAttrs, Opts2).
 
@@ -141,6 +150,20 @@ graph_components(graph(Vs,Es), Vs, Es):- !.
 graph_components(G, Vs, Es):-
   s_graph_components(G, Vs, Es).
 
+build_export_ranks(Vs, VTerms, VRanks, [], Opts):-
+  option(vertex_rank(VRank_2), Opts), !,
+  maplist(VRank_2, Vs, Ranks),
+  pairs_keys_values(Pairs, Ranks, VTerms),
+  group_pairs_by_key(Pairs, GroupedPairs),
+  build_export_rank_terms(GroupedPairs, VRanks).
+build_export_ranks(_, VTerms, [], VTerms, _).
+
+build_export_rank_terms([N-VTerms|T1], [vertex(Id,[label(Lbl)])-VTerms|T2]):- !,
+  format(atom(Id), 'r~d', [N]),
+  atom_number(Lbl, N),
+  build_export_rank_terms(T1, T2).
+build_export_rank_terms([], []).
+
 
 
 %! edge_term(
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index 5de2ff1..79c1be0 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -52,7 +52,7 @@ In GraphViz vertices are called 'nodes'.
 %
 % `RankedVertexTerms` is a list of compound terms of the following form:
 % ```prolog
-% rank(RankNode,ContentNodes)
+% RankVertex-ContentVertices
 % ```
 %
 % @tbd Add support for subgraphs (arbitrary nesting).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 3aec4e6..8644e1c 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -22,18 +22,15 @@ attr_list = "[" [a_list] "]" [attr_list]
 a_list = ID "=" ID [","] [a_list]
 ```
 
----
-
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2015/07-2015/08, 2015/10
+@version 2015/07-2015/08, 2015/10-2015/11
 */
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/basics)).
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_ascii)).
-:- use_module(library(dcg/dcg_bracketed)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(dcg/dcg_quoted)).
 :- use_module(library(gv/gv_attrs)).
@@ -113,6 +110,8 @@ gv_generic_attributes_statement(Kind, I, Attrs) -->
   gv_attrs(Kind, Attrs),
   "\n", !.
 
+
+
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
 gv_kind(Kind) -->
@@ -132,14 +131,11 @@ gv_node_statement(I, vertex(Id,Attrs)) -->
 
 
 
-%! gv_ranked_node_collection(+Indent:nonneg, Rank)// is det.
+%! gv_ranked_node_collection(+Indent:nonneg, Rank:pair)// is det.
 
-gv_ranked_node_collection(I, Rank) -->
+gv_ranked_node_collection(I, RankVTerm-VTerms) -->
   indent(I),
-  bracketed(curly, gv_ranked_node_collection0(I, Rank)).
-
-gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
-  "\n",
+  "{\n",
 
   % The rank attribute.
   {NewI is I + 1},
@@ -148,15 +144,11 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
   "\n",
 
   % Vertice statements.
-  *(
-    gv_node_statement(NewI),
-    [Rank_V_Term|Content_V_Terms],
-    []
-  ),
+  *(gv_node_statement(NewI), [RankVTerm|VTerms], []),
 
   % We want to indent the closing curly brace.
   indent(I),
-  "\n".
+  "\n}".
 
 
 
@@ -170,7 +162,7 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -->
 %! )// is det.
 
 gv_attrs(Kind, L) -->
-  bracketed(square, *(gv_attr(Kind), L, [])).
+  "[", *(gv_attr(Kind), L, []), "]".
 
 
 %! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det.
@@ -179,10 +171,7 @@ gv_attrs(Kind, L) -->
 
 gv_attr(Context, Attr) -->
   {Attr =.. [N,V]},
-  gv_id(N),
-  "=",
-  gv_attr_value(Context, N=V),
-  ";".
+  gv_id(N), "=", gv_attr_value(Context, N=V), ";".
 
 
 
@@ -213,7 +202,7 @@ gv_id(html_like_label(Content)) --> !,
 % Double-quoted strings.
 % The quotes are already part of the given atom.
 gv_id(double_quoted_string(Atom)) --> !,
-  quoted(atom(Atom)).
+  "\"", atom(Atom), "\"".
 % Numerals.
 gv_id(N) -->
   {number(N)}, !,
@@ -228,6 +217,7 @@ gv_id(Atom) -->
   % GraphViz keyword.
   {\+ gv_keyword([H|T])}.
 
+
 %! gv_id_first(+First:code)// is det.
 % Generates the first character of a GraphViz identifier.
 
@@ -236,16 +226,17 @@ gv_id_first(X) -->
 gv_id_first(X) -->
   underscore(X).
 
+
 %! gv_id_rest(+NonFirst:code)// is det.
 % Generates a non-first character of a GraphViz identifier.
 
 gv_id_rest([]) --> !, "".
 gv_id_rest([H|T]) -->
-  (   ascii_alpha_numeric(H)
-  ;   underscore(H)
-  ),
+  (ascii_alpha_numeric(H) ; underscore(H)),
   gv_id_rest(T).
 
+
+
 %! gv_keyword(+Codes:list(code)) is semidet.
 % Succeeds if the given codes for a GraphViz reserved keyword.
 
@@ -254,6 +245,7 @@ gv_keyword(Cs):-
   % So we must use phrase/[2,3].
   phrase(gv_keyword, Cs).
 
+
 %! gv_keyword// .
 % GraphViz has reserved keywords that cannot be used as identifiers.
 % GraphViz keywords are case-insensitive.
@@ -289,32 +281,22 @@ gv_node_id(Id) -->
 
 gv_port -->
   gv_port_location,
-  (   gv_port_angle
-  ;   ""
-  ).
+  (gv_port_angle ; "").
 gv_port -->
   gv_port_angle,
-  (   gv_port_location
-  ;   ""
-  ).
+  (gv_port_location ; "").
 gv_port -->
-  ":",
-  gv_compass_pt(_).
+  ":", gv_compass_pt(_).
 
 gv_port_angle -->
-  "@",
-  gv_id(_).
+  "@", gv_id(_).
 
 gv_port_location -->
-  ":",
-  gv_id(_).
+  ":", gv_id(_).
 gv_port_location -->
-  ":",
-  bracketed((
-    gv_id(_),
-    ",",
-    gv_id(_)
-  )).
+  ":[", gv_id(_), ",", gv_id(_), "]".
+
+
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
 % ```
 
```
 
<h2 id="136"> 136: 正在比较变动前 7ec98aa 和变动后 984d3b9 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl
index 0368834..d14d24b 100644
--- a/prolog/fca/fca_export.pl
+++ b/prolog/fca/fca_export.pl
@@ -49,31 +49,16 @@ fca_export(Context, File):-
 %! fca_export(+Context:compound, ?File:atom, +Options:list(compound)) is det.
 
 fca_export(Context, File, Opts1):-
-  fca_lattice(Context, Lattice1),
-  %minimize(Lattice1, Lattice2),
-  Lattice2 = Lattice1,
+  fca_hasse(Context, Hasse),
   option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept),
   merge_options(
     [vertex_label(VLabel_2),vertex_rank(fca:concept_cardinality)],
     Opts1,
     Opts2
   ),
-  build_export_graph(Lattice2, ExportG, Opts2),
+  build_export_graph(Hasse, ExportG, Opts2),
   gv_export(ExportG, File, Opts1).
 
-minimize(G1, G2):-
-  s_vertices(G1, Vs),
-  aggregate_all(
-    set(X-Y),
-    (
-      s_edge(G1, X-Y),
-      maplist(concept_cardinality, [X,Y], [CX,CY]),
-      CX < CY
-    ),
-    Es
-  ),
-  s_graph_components(G2, Vs, Es).
-
 
 
 %! fca_label_attributes(+Concept:compound, -Label:atom) is det.
 
```
 
<h2 id="137"> 137: 正在比较变动前 984d3b9 和变动后 4401e20 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl
index d14d24b..c48fe40 100644
--- a/prolog/fca/fca_export.pl
+++ b/prolog/fca/fca_export.pl
@@ -3,15 +3,9 @@
   [
     fca_export/2, % +Context:compound
                   % ?File:atom
-    fca_export/3, % +Context:compound
-                  % ?File:atom
-                  % +Options:list(compound)
-    fca_label_attributes/2, % +Concept:compound
-                            % -Label:atom
-    fca_label_concept/2, % +Concept:compound
-                         % -Label:atom
-    fca_label_objects/2 % +Concept:compound
-                        % -Label:atom
+    fca_export/3 % +Context:compound
+                 % ?File:atom
+                 % :Options:list(compound)
   ]
 ).
 
@@ -30,11 +24,18 @@
 :- use_module(library(option)).
 :- use_module(library(ordsets)).
 
+:- meta_predicate(concept_label(+,1,+,-)).
+:- meta_predicate(concept_label(+,1,+,?,?)).
+:- meta_predicate(fca_export(+,?,:)).
+
 :- predicate_options(fca_export/3, 3, [
-     pass_to(build_export_graph/3, 3),
+     concept_label(+oneof([attributes,both,objects])),
+     object_label(+callable),
      pass_to(gv_export/3, 3)
    ]).
 
+is_meta(object_label).
+
 
 
 
@@ -46,48 +47,46 @@ fca_export(Context, File):-
   fca_export(Context, File, []).
 
 
-%! fca_export(+Context:compound, ?File:atom, +Options:list(compound)) is det.
+%! fca_export(+Context:compound, ?File:atom, :Options:list(compound)) is det.
+% The following optios are supported:
+%   * concept_label(+oneof([attributes,both,objects]))
 
 fca_export(Context, File, Opts1):-
   fca_hasse(Context, Hasse),
-  option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept),
+  
+  meta_options(is_meta, Opts1, Opts2),
+  option(concept_label(Mode), Opts2, both),
+  option(object_label(Object_1), Opts2, =),
   merge_options(
-    [vertex_label(VLabel_2),vertex_rank(fca:concept_cardinality)],
-    Opts1,
-    Opts2
+    [
+      vertex_label(fca_export:concept_label(Mode, Object_1)),
+      vertex_rank(fca:concept_cardinality)
+    ],
+    Opts2,
+    Opts3
   ),
-  build_export_graph(Hasse, ExportG, Opts2),
-  gv_export(ExportG, File, Opts1).
-
-
-
-%! fca_label_attributes(+Concept:compound, -Label:atom) is det.
-% Writes a concept label displaying its attributes.
-
-fca_label_attributes(Concept, Lbl):-
-  string_phrase(dcg_attributes(Concept), Lbl).
+  build_export_graph(Hasse, ExportG, Opts3),
 
-dcg_attributes(concept(_,As)) -->
-  set(As).
-
-
-
-%! fca_label_attributes(+Concept:compound, -Label:atom) is det.
-% Writes a concept label display both its attributes and objects.
+  gv_export(ExportG, File, Opts2).
 
-fca_label_concept(Concept, Lbl):-
-  string_phrase(dcg_concept(Concept), Lbl).
 
-dcg_concept(Concept) -->
-  pair(dcg_objects(Concept), dcg_attributes(Concept)).
 
+%! concept_label(
+%!   +Mode:oneof([attributes,both,objects]),
+%!   :Object_1,
+%!   +Concept:compound,
+%!   -Label:atom
+%! ) is det.
 
+concept_label(Mode, Object_1, Concept, Lbl):-
+  string_phrase(concept_label(Mode, Object_1, Concept), Lbl).
 
-%! fca_label_objects(+Concept:compound, -Label:atom) is det.
-% Writes a concept label displaying its object.
-
-fca_label_objects(Concept, Lbl):-
-  string_phrase(dcg_objects(Concept), Lbl).
-
-dcg_objects(concept(Os,_)) -->
-  set(Os).
+concept_label(attributes, _, concept(_,As)) -->
+  set(As).
+concept_label(both, Object_1, Concept) -->
+  pair(
+    concept_label(objects, Object_1, Concept),
+    concept_label(attributes, Object_1, Concept)
+  ).
+concept_label(objects, Object_1, concept(Os,_)) -->
+  set(Object_1, Os).
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index f5dc122..71f9dd4 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -158,12 +158,14 @@ build_export_ranks(Vs, VTerms, VRanks, [], Opts):-
   build_export_rank_terms(GroupedPairs, VRanks).
 build_export_ranks(_, VTerms, [], VTerms, _).
 
-build_export_rank_terms([N-VTerms|T1], [vertex(Id,[label(Lbl)])-VTerms|T2]):- !,
-  format(atom(Id), 'r~d', [N]),
-  atom_number(Lbl, N),
+build_export_rank_terms([N-VTerms|T1], [RankTerm-VTerms|T2]):- !,
+  build_export_rank_term(N, RankTerm),
   build_export_rank_terms(T1, T2).
 build_export_rank_terms([], []).
 
+build_export_rank_term(N, vertex(Id,[label(""),shape(none)])):-
+  format(atom(Id), "r~d", [N]).
+
 
 
 %! edge_term(
 
```
 
<h2 id="138"> 138: 正在比较变动前 4401e20 和变动后 2247466 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl
index c48fe40..03353e3 100644
--- a/prolog/fca/fca_export.pl
+++ b/prolog/fca/fca_export.pl
@@ -17,6 +17,7 @@
 
 :- use_module(library(dcg/dcg_collection)).
 :- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(dcg/dcg_pl)).
 :- use_module(library(fca/fca)).
 :- use_module(library(graph/build_export_graph)).
 :- use_module(library(graph/s/s_graph)).
@@ -24,8 +25,8 @@
 :- use_module(library(option)).
 :- use_module(library(ordsets)).
 
-:- meta_predicate(concept_label(+,1,+,-)).
-:- meta_predicate(concept_label(+,1,+,?,?)).
+:- meta_predicate(concept_label(+,1,1,+,-)).
+:- meta_predicate(concept_label(+,1,1,+,?,?)).
 :- meta_predicate(fca_export(+,?,:)).
 
 :- predicate_options(fca_export/3, 3, [
@@ -34,6 +35,7 @@
      pass_to(gv_export/3, 3)
    ]).
 
+is_meta(attribute_label).
 is_meta(object_label).
 
 
@@ -49,17 +51,27 @@ fca_export(Context, File):-
 
 %! fca_export(+Context:compound, ?File:atom, :Options:list(compound)) is det.
 % The following optios are supported:
+%   * attribute_label(+callable)
+%     DCG writing the labels for individual attributes.
+%     Default is pl_term//1.
 %   * concept_label(+oneof([attributes,both,objects]))
+%     Determines which components of the concepts are displayed
+%     in the export graph.
+%     Default is `both`.
+%   * object_label(+callable)
+%     DCG writing the labels for individual objects.
+%     Default is pl_term//1.
 
 fca_export(Context, File, Opts1):-
   fca_hasse(Context, Hasse),
   
   meta_options(is_meta, Opts1, Opts2),
+  option(attribute_label(ALbl_1), Opts2, pl_term),
   option(concept_label(Mode), Opts2, both),
-  option(object_label(Object_1), Opts2, =),
+  option(object_label(OLbl_1), Opts2, pl_term),
   merge_options(
     [
-      vertex_label(fca_export:concept_label(Mode, Object_1)),
+      vertex_label(fca_export:concept_label(Mode, OLbl_1, ALbl_1)),
       vertex_rank(fca:concept_cardinality)
     ],
     Opts2,
@@ -73,20 +85,29 @@ fca_export(Context, File, Opts1):-
 
 %! concept_label(
 %!   +Mode:oneof([attributes,both,objects]),
-%!   :Object_1,
+%!   :ObjectLabel_1,
+%!   :AttributeLabel_1,
 %!   +Concept:compound,
 %!   -Label:atom
 %! ) is det.
 
-concept_label(Mode, Object_1, Concept, Lbl):-
-  string_phrase(concept_label(Mode, Object_1, Concept), Lbl).
+concept_label(Mode, OLbl_1, ALbl_1, Concept, Lbl):-
+  string_phrase(concept_label(Mode, OLbl_1, ALbl_1, Concept), Lbl).
 
-concept_label(attributes, _, concept(_,As)) -->
-  set(As).
-concept_label(both, Object_1, Concept) -->
+
+%! concept_label(
+%!   +Mode:oneof([attributes,both,objects]),
+%!   :ObjectLabel_1,
+%!   :AttributeLabel_1,
+%!   +Concept:compound
+%! )// is det.
+
+concept_label(attributes, _, ALbl_1, concept(_,As)) -->
+  set(ALbl_1, As).
+concept_label(both, OLbl_1, ALbl_1, Concept) -->
   pair(
-    concept_label(objects, Object_1, Concept),
-    concept_label(attributes, Object_1, Concept)
+    concept_label(objects, OLbl_1, ALbl_1, Concept),
+    concept_label(attributes, OLbl_1, ALbl_1, Concept)
   ).
-concept_label(objects, Object_1, concept(Os,_)) -->
-  set(Object_1, Os).
+concept_label(objects, OLbl_1, _, concept(Os,_)) -->
+  set(OLbl_1, Os).
 
```
 
<h2 id="139"> 139: 正在比较变动前 2247466 和变动后 f4a9322 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index 79c1be0..a9e1a42 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -76,7 +76,7 @@ gv_graph(G1, I) -->
 
   % The first statement in the GraphViz output.
   % States that this file represents a graph according to the GraphViz format.
-  indent(I),
+  tab(I),
   
   % Strictness.
   {select_option(strict(Strict), GAttrs2, GAttrs3, false)},
@@ -156,7 +156,7 @@ gv_graph(G1, I) -->
   % Note that we do not include a line_feed here.
 
   % We want to indent the closing curly brace.
-  indent(I),
+  tab(I),
   "}\n".
 
 gv_edge_statements(I, Dir, L) -->
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 8644e1c..d86c1b4 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -61,7 +61,7 @@ a_list = ID "=" ID [","] [a_list]
 % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2.
 
 gv_edge_statement(I, Dir, edge(From,To,Attrs)) -->
-  indent(I),
+  tab(I),
 
   gv_node_id(From), " ",
   gv_edge_operator(Dir), " ",
@@ -105,7 +105,7 @@ gv_edge_operator(Dir) -->
 
 gv_generic_attributes_statement(_, _, []) --> !, "".
 gv_generic_attributes_statement(Kind, I, Attrs) -->
-  indent(I),
+  tab(I),
   gv_kind(Kind), " ",
   gv_attrs(Kind, Attrs),
   "\n", !.
@@ -124,7 +124,7 @@ gv_kind(Kind) -->
 % A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes').
 
 gv_node_statement(I, vertex(Id,Attrs)) -->
-  indent(I),
+  tab(I),
   gv_node_id(Id),
   gv_attrs(node, Attrs),
   "\n".
@@ -134,12 +134,12 @@ gv_node_statement(I, vertex(Id,Attrs)) -->
 %! gv_ranked_node_collection(+Indent:nonneg, Rank:pair)// is det.
 
 gv_ranked_node_collection(I, RankVTerm-VTerms) -->
-  indent(I),
+  tab(I),
   "{\n",
 
   % The rank attribute.
   {NewI is I + 1},
-  indent(NewI),
+  tab(NewI),
   gv_attr(subgraph, rank(same)),
   "\n",
 
@@ -147,7 +147,7 @@ gv_ranked_node_collection(I, RankVTerm-VTerms) -->
   *(gv_node_statement(NewI), [RankVTerm|VTerms], []),
 
   % We want to indent the closing curly brace.
-  indent(I),
+  tab(I),
   "\n}".
 
 
 
```
 
<h2 id="140"> 140: 正在比较变动前 f4a9322 和变动后 0d2712a </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
index 5ab08a6..8fa78af 100644
--- a/prolog/gv/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -46,14 +46,11 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2015/07
+@version 2015/07, 2015/11
 */
 
 :- use_module(library(dcg/basics), except([string//1])).
-:- use_module(library(dcg/dcg_abnf)).
-:- use_module(library(dcg/dcg_ascii)).
 :- use_module(library(dcg/dcg_phrase)).
-:- use_module(library(dcg/dcg_quoted)).
 :- use_module(library(gv/gv_html)).
 
 
@@ -62,47 +59,45 @@
 
 %! gv_attr_type(?Type:atom) is nondet.
 
-gv_attr_type(addDouble) --> "addDouble".
-gv_attr_type(addPoint) --> "addPoint".
-gv_attr_type(arrowType) --> "arrowType".
-gv_attr_type(bool) --> "bool".
-gv_attr_type(color) --> "color".
-gv_attr_type(colorList) --> "colorList".
+gv_attr_type(addDouble)   --> "addDouble".
+gv_attr_type(addPoint)    --> "addPoint".
+gv_attr_type(arrowType)   --> "arrowType".
+gv_attr_type(bool)        --> "bool".
+gv_attr_type(color)       --> "color".
+gv_attr_type(colorList)   --> "colorList".
 gv_attr_type(clusterMode) --> "clusterMode".
-gv_attr_type(dirType) --> "dirType".
-gv_attr_type(double) --> "double".
-gv_attr_type(doubleList) --> "doubleList".
-gv_attr_type(escString) --> "escString".
-gv_attr_type(layerList) --> "layerList".
-gv_attr_type(layerRange) --> "layerRange".
-gv_attr_type(lblString) --> "lblString".
-gv_attr_type(int) --> "int".
-gv_attr_type(outputMode) --> "outputMode".
-gv_attr_type(packMode) --> "packMode".
-gv_attr_type(pagedir) --> "pagedir".
-gv_attr_type(point) --> "point".
-gv_attr_type(pointList) --> "pointList".
-gv_attr_type(portPos) --> "portPos".
-gv_attr_type(quadType) --> "quadType".
-gv_attr_type(rankType) --> "rankType".
-gv_attr_type(rankdir) --> "rankdir".
-gv_attr_type(rect) --> "rect".
-gv_attr_type(shape) --> "shape".
-gv_attr_type(smoothType) --> "smoothType".
-gv_attr_type(splineType) --> "splineType".
-gv_attr_type(startType) --> "startType".
-gv_attr_type(string) --> "string".
-gv_attr_type(style) --> "style".
-gv_attr_type(viewPort) --> "viewPort".
+gv_attr_type(dirType)     --> "dirType".
+gv_attr_type(double)      --> "double".
+gv_attr_type(doubleList)  --> "doubleList".
+gv_attr_type(escString)   --> "escString".
+gv_attr_type(layerList)   --> "layerList".
+gv_attr_type(layerRange)  --> "layerRange".
+gv_attr_type(lblString)   --> "lblString".
+gv_attr_type(int)         --> "int".
+gv_attr_type(outputMode)  --> "outputMode".
+gv_attr_type(packMode)    --> "packMode".
+gv_attr_type(pagedir)     --> "pagedir".
+gv_attr_type(point)       --> "point".
+gv_attr_type(pointList)   --> "pointList".
+gv_attr_type(portPos)     --> "portPos".
+gv_attr_type(quadType)    --> "quadType".
+gv_attr_type(rankType)    --> "rankType".
+gv_attr_type(rankdir)     --> "rankdir".
+gv_attr_type(rect)        --> "rect".
+gv_attr_type(shape)       --> "shape".
+gv_attr_type(smoothType)  --> "smoothType".
+gv_attr_type(splineType)  --> "splineType".
+gv_attr_type(startType)   --> "startType".
+gv_attr_type(string)      --> "string".
+gv_attr_type(style)       --> "style".
+gv_attr_type(viewPort)    --> "viewPort".
 
 
 
 %! addDouble(+Float:float)// .
 % An *addDouble* is represented by a Prolog float.
 
-addDouble(N) -->
-  ("+" ; ""),
-  float(N).
+addDouble(N) --> ("+", ! ; ""), float(N).
 
 
 
@@ -110,47 +105,38 @@ addDouble(N) -->
 % An *addPoint* is represented by a compound of the following form:
 % `point(X:float,Y:float,InputOnly:boolean)`.
 
-addPoint(Point) -->
-  ("+" ; ""),
-  point(Point).
+addPoint(Point) --> ("+", ! ; ""), point(Point).
 
 
 
 %! arrowType(+ArrowType:atom)// .
 
-arrowType(V) -->
-  {arrowType(V)},
-  atom(V).
-
-arrowType(V):-
-  primitive_shape(V).
-arrowType(V):-
-  derived(V).
-arrowType(V):-
-  backwards_compatible(V).
-
-primitive_shape(box).
-primitive_shape(crow).
-primitive_shape(circle).
-primitive_shape(diamond).
-primitive_shape(dot).
-primitive_shape(inv).
-primitive_shape(none).
-primitive_shape(normal).
-primitive_shape(tee).
-primitive_shape(vee).
-
-derived(odot).
-derived(invdot).
-derived(invodot).
-derived(obox).
-derived(odiamond).
-
-backwards_compatible(ediamond).
-backwards_compatible(empty).
-backwards_compatible(halfopen).
-backwards_compatible(invempty).
-backwards_compatible(open).
+arrowType(V) --> primitive_shape(V).
+arrowType(V) --> derived(V).
+arrowType(V) --> backwards_compatible(V).
+
+primitive_shape(box)     --> "box".
+primitive_shape(crow)    --> "crow".
+primitive_shape(circle)  --> "circle".
+primitive_shape(diamond) --> "diamond".
+primitive_shape(dot)     --> "dot".
+primitive_shape(inv)     --> "inv".
+primitive_shape(none)    --> "none".
+primitive_shape(normal)  --> "normal".
+primitive_shape(tee)     --> "tee".
+primitive_shape(vee)     --> "vee".
+
+derived(odot)     --> "odot".
+derived(invdot)   --> "invdot".
+derived(invodot)  --> "invodot".
+derived(obox)     --> "obox".
+derived(odiamond) --> "odiamond".
+
+backwards_compatible(ediamond) --> "ediamond".
+backwards_compatible(empty)    --> "empty".
+backwards_compatible(halfopen) --> "halfopen".
+backwards_compatible(invempty) --> "invempty".
+backwards_compatible(open)     --> "open".
 
 
 
@@ -158,47 +144,37 @@ backwards_compatible(open).
 
 bool(false) --> "false".
 bool(false) --> "no".
-bool(true) --> "true".
-bool(true) --> "yes".
+bool(true)  --> "true".
+bool(true)  --> "yes".
 
 
 
 %! clusterMode(+ClusterMode:atom)// .
 
-clusterMode(V) -->
-  {clusterMode(V)},
-  atom(V).
-
-clusterMode(global).
-clusterMode(local).
-clusterMode(none).
+clusterMode(global) --> "global".
+clusterMode(local) --> "local".
+clusterMode(none) --> "none".
 
 
 
 %! dirType(+DirectionType:oneof([back,both,forward,none]))// .
 
-dirType(DirType) -->
-  {dirType(DirType)},
-  atom(DirType).
-
-dirType(back).
-dirType(both).
-dirType(forward).
-dirType(none).
+dirType(back) --> "back".
+dirType(both) --> "both".
+dirType(forward) --> "forward".
+dirType(none) --> "none".
 
 
 
 %! double(+Double:float)// .
 
-double(N) -->
-  float(N).
+double(N) --> float(N).
 
 
 
 %! doubleList(+Doubles:list(float))// .
 
-doubleList(L) -->
-  *(double, L, [separator(colon)]).
+doubleList([H|T]) --> double(H), (":", !, doubleList(T) ; {T = []}).
 
 
 
@@ -210,15 +186,11 @@ escString(S1) -->
   ->  string_phrase(escape_double_quotes, S1, S2)
   ;   atom_phrase(escape_double_quotes, S1, S2)
   )},
-  quoted(atom(S2)).
+  "\"", atom(S2), "\"".
 
-escape_double_quotes, [92,34] -->
-  [34], !,
-  escape_double_quotes.
-escape_double_quotes, [X] -->
-  [X], !,
-  escape_double_quotes.
-escape_double_quotes --> [].
+escape_double_quotes, [0'\\,0'"] --> [0'"], !, escape_double_quotes.
+escape_double_quotes, [X]        --> [X],   !, escape_double_quotes.
+escape_double_quotes             --> "".
 
 
 
@@ -232,29 +204,22 @@ escape_double_quotes --> [].
 
 %! lblString(+String:compound)// .
 
-lblString(html_like_label(V)) -->
-  gv_html_like_label(V).
-lblString(V) -->
-  escString(V).
+lblString(html_like_label(V)) --> gv_html_like_label(V).
+lblString(V) --> escString(V).
 
 
 
 %! int(+Integer:integer)// .
 
-int(V) -->
-  integer(V).
+int(V) --> integer(V).
 
 
 
 %! outputMode(+OutputMode:atom)// .
 
-outputMode(V) -->
-  {outputMode(V)},
-  atom(V).
-
-outputMode(breadthfirst).
-outputMode(edgesfirst).
-outputMode(nodesfirst).
+outputMode(breadthfirst) --> "breadthfirst".
+outputMode(edgesfirst)   --> "edgesfirst".
+outputMode(nodesfirst)   --> "nodesfirst".
 
 
 
@@ -264,18 +229,14 @@ outputMode(nodesfirst).
 
 %! pagedir(+PageDirection:atom)// .
 
-pagedir(V) -->
-  {pagedir(V)},
-  atom(V).
-
-pagedir('BL').
-pagedir('BR').
-pagedir('LB').
-pagedir('LT').
-pagedir('RB').
-pagedir('RT').
-pagedir('TL').
-pagedir('TR').
+pagedir('BL') --> "BL".
+pagedir('BR') --> "BR".
+pagedir('LB') --> "LB".
+pagedir('LT') --> "LT".
+pagedir('RB') --> "RB".
+pagedir('RT') --> "RT".
+pagedir('TL') --> "TL".
+pagedir('TR') --> "TR".
 
 
 
@@ -284,7 +245,7 @@ pagedir('TR').
 % `point(X:float,Y:float,Changeable:boolean)`.
 
 point(point(X,Y,Changeable)) -->
-  '#'(2, float, [X,Y], [separator(comma)]),
+  float(X), ",", float(Y),
   input_changeable(Changeable).
 
 input_changeable(false) --> "".
@@ -305,60 +266,44 @@ pointList(Points) -->
 
 %! quadType(+QuadType:atom)// .
 
-quadType(V) -->
-  {quadType(V)},
-  atom(V).
-
-quadType(fast).
-quadType(none).
-quadType(normal).
+quadType(fast) --> "fast".
+quadType(none) --> "none".
+quadType(normal) --> "normal".
 
 
 
 %! rankType(+RankType:atom)// .
 
-rankType(V) -->
-  {rankType(V)},
-  atom(V).
-
-rankType(max).
-rankType(min).
-rankType(same).
-rankType(sink).
-rankType(source).
-
+rankType(max) --> "max".
+rankType(min) --> "min".
+rankType(same) --> "same".
+rankType(sink) --> "sink".
+rankType(source) --> "source".
 
 
-%! rankdir(+RankDirection:atom)// .
 
-rankdir(V) -->
-  {rankdir(V)},
-  atom(V).
+%! rankdir(+RankDirection:oneof(['BT','LR','RL','TB']))// .
 
-rankdir('BT').
-rankdir('LR').
-rankdir('RL').
-rankdir('TB').
+rankdir('BT') --> "BT".
+rankdir('LR') --> "LR".
+rankdir('RL') --> "RL".
+rankdir('TB') --> "TB".
 
 
 
 %! rect(+Rectangle:compound)// .
 
 rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -->
-  '#'(
-    4,
-    float,
-    [LowerLeftX,LowerLeftY,UpperRightX,UpperRightY],
-    [separator(comma)]
-  ).
+  float(LowerLeftX), ",",
+  float(LowerLeftY), ",",
+  float(UpperRightX), ",",
+  float(UpperRightY).
 
 
 
 %! shape(+Shape:atom)// .
 
-shape(V) -->
-  {polygon_based_shape(V)},
-  atom(V).
+shape(V) --> {polygon_based_shape(V)}, atom(V).
 
 polygon_based_shape(assembly).
 polygon_based_shape(box).
@@ -420,9 +365,7 @@ polygon_based_shape(utr).
 
 %! smoothType(+SmoothType:atom)// .
 
-smoothType(V) -->
-  {smoothType(V)},
-  atom(V).
+smoothType(V) --> {smoothType(V)}, atom(V).
 
 smoothType(avg_dist).
 smoothType(graph_dist).
@@ -445,16 +388,13 @@ smoothType(triangle).
 %! string(?String:atom)// .
 % A GraphViz string.
 
-string(Content) -->
-  quoted(atom(Content)).
+string(Content) --> "\"", atom(Content), "\"".
 
 
 
 %! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet.
 
-style(Context, Style) -->
-  {style(Context, Style)},
-  atom(Style).
+style(Context, Style) --> {style(Context, Style)}, atom(Style).
 
 style(cluster, bold).
 style(cluster, dashed).
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index 0c3755c..3232c97 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -19,7 +19,6 @@
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/basics)).
-:- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
@@ -36,7 +35,7 @@
 
 color(rgb(Red,Green,Blue)) --> !,
   "#",
-  '#'(3, hex_color, [Red,Green,Blue], []).
+  '#'(3, hex_color, [Red,Green,Blue]).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
   color(rgb(Red,Green,Blue)),
   hex_color(Alpha).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index d86c1b4..6877107 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -32,7 +32,6 @@ a_list = ID "=" ID [","] [a_list]
 :- use_module(library(dcg/dcg_abnf)).
 :- use_module(library(dcg/dcg_ascii)).
 :- use_module(library(dcg/dcg_content)).
-:- use_module(library(dcg/dcg_quoted)).
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_html)).
 :- use_module(library(error)).
@@ -114,9 +113,7 @@ gv_generic_attributes_statement(Kind, I, Attrs) -->
 
 %! gv_kind(+Kind:oneof([edge,graph,node]))// .
 
-gv_kind(Kind) -->
-  {must_be(oneof([edge,graph,node]), Kind)},
-  atom(Kind).
+gv_kind(Kind) --> {must_be(oneof([edge,graph,node]), Kind)}, atom(Kind).
 
 
 
@@ -144,7 +141,7 @@ gv_ranked_node_collection(I, RankVTerm-VTerms) -->
   "\n",
 
   % Vertice statements.
-  *(gv_node_statement(NewI), [RankVTerm|VTerms], []),
+  *(gv_node_statement(NewI), [RankVTerm|VTerms]),
 
   % We want to indent the closing curly brace.
   tab(I),
@@ -161,8 +158,7 @@ gv_ranked_node_collection(I, RankVTerm-VTerms) -->
 %!   +Attributes:list(compound)
 %! )// is det.
 
-gv_attrs(Kind, L) -->
-  "[", *(gv_attr(Kind), L, []), "]".
+gv_attrs(Kind, L) --> "[", *(gv_attr(Kind), L), "]".
 
 
 %! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det.
@@ -221,19 +217,16 @@ gv_id(Atom) -->
 %! gv_id_first(+First:code)// is det.
 % Generates the first character of a GraphViz identifier.
 
-gv_id_first(X) -->
-  ascii_letter(X).
-gv_id_first(X) -->
-  underscore(X).
+gv_id_first(C)   --> ascii_alpha(C), !.
+gv_id_first(0'_) --> "_".
 
 
 %! gv_id_rest(+NonFirst:code)// is det.
 % Generates a non-first character of a GraphViz identifier.
 
-gv_id_rest([]) --> !, "".
-gv_id_rest([H|T]) -->
-  (ascii_alpha_numeric(H) ; underscore(H)),
-  gv_id_rest(T).
+gv_id_rest([H|T])   --> ascii_alpha_num(C), !, gv_id_rest(T).
+gv_id_rest([0'_|T]) --> "_",                !, gv_id_rest(T).
+gv_id_rest([])      --> "".
 
 
 
@@ -267,34 +260,22 @@ gv_keyword --> "subgraph".
 % @tbd Add support for GraphViz port indicators
 %      inside GraphViz node identifiers.
 
-gv_node_id(Id) -->
-  gv_id(Id), !.
-%gv_node_id(_) -->
-%  gv_id(_),
-%  gv_port.
-gv_node_id(Id) -->
-  {type_error(gv_node_id, Id)}.
+gv_node_id(Id) --> gv_id(Id), !.
+%gv_node_id(_) --> gv_id(_), gv_port.
+gv_node_id(Id) --> {type_error(gv_node_id, Id)}.
 
 
 
 %! gv_port// is det.
 
-gv_port -->
-  gv_port_location,
-  (gv_port_angle ; "").
-gv_port -->
-  gv_port_angle,
-  (gv_port_location ; "").
-gv_port -->
-  ":", gv_compass_pt(_).
+gv_port --> gv_port_location, (gv_port_angle ; "").
+gv_port --> gv_port_angle, (gv_port_location ; "").
+gv_port --> ":", gv_compass_pt(_).
 
-gv_port_angle -->
-  "@", gv_id(_).
+gv_port_angle --> "@", gv_id(_).
 
-gv_port_location -->
-  ":", gv_id(_).
-gv_port_location -->
-  ":[", gv_id(_), ",", gv_id(_), "]".
+gv_port_location --> ":", gv_id(_).
+gv_port_location --> ":[", gv_id(_), ",", gv_id(_), "]".
 
 
 
@@ -304,12 +285,12 @@ gv_port_location -->
 % ```
 
 gv_compass_pt('_') --> "_".
-gv_compass_pt(c) --> "c".
-gv_compass_pt(e) --> "e".
-gv_compass_pt(n) --> "n".
-gv_compass_pt(ne) --> "ne".
-gv_compass_pt(nw) --> "nw".
-gv_compass_pt(s) --> "s".
-gv_compass_pt(se) --> "se".
-gv_compass_pt(sw) --> "sw".
-gv_compass_pt(w) --> "w".
+gv_compass_pt(c)   --> "c".
+gv_compass_pt(e)   --> "e".
+gv_compass_pt(n)   --> "n".
+gv_compass_pt(ne)  --> "ne".
+gv_compass_pt(nw)  --> "nw".
+gv_compass_pt(s)   --> "s".
+gv_compass_pt(se)  --> "se".
+gv_compass_pt(sw)  --> "sw".
+gv_compass_pt(w)   --> "w".
 
```
 
<h2 id="141"> 141: 正在比较变动前 0d2712a 和变动后 3518985 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index 71f9dd4..2428483 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -51,7 +51,7 @@ Vertex coordinates:
 ---
 
 @author Wouter Beek
-@version 2015/07, 2015/09-2015/11
+@version 2015/07, 2015/09-2015/12
 */
 
 :- use_module(library(apply)).
@@ -222,8 +222,9 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
   if_option(edge_style(StyleFunction), Opts,
     call(StyleFunction, E, EStyle)
   ),
-
-  merge_options(
+  
+  exclude(
+    option_has_var_value,
     [
       arrowhead(EArrowhead),
       color(EColor),
@@ -275,7 +276,8 @@ graph_attributes(GAttrs, Opts):-
   % Overlap.
   option(graph_overlap(Overlap), Opts, false),
 
-  merge_options(
+  exclude(
+    option_has_var_value,
     [
       charset(Charset),
       colorscheme(Colorscheme),
@@ -361,7 +363,8 @@ vertex_term(Vs, V, vertex(VId,VAttrs), Opts):-
     call(UriFunction, V, VUri)
   ),
 
-  merge_options(
+  exclude(
+    option_has_var_value,
     [
       color(VColor),
       image(VImage),
@@ -385,17 +388,3 @@ vertex_term(Vs, V, vertex(VId,VAttrs), Opts):-
 edge_components(edge(FromV,_,ToV), FromV, ToV):- !.
 edge_components(edge(FromV,ToV), FromV, ToV):- !.
 edge_components(FromV-ToV, FromV, ToV):- !.
-
-
-
-%! merge_options(+FromOptions:list(compound), -ToOptions:list(compound)) is det.
-
-merge_options([], []).
-% Skip uninstantiated values.
-merge_options([H|T1], T2):-
-  merge_options(T1, T2),
-  H =.. [_,V],
-  var(V), !.
-% Include instantiated values.
-merge_options([H|T1], [H|T2]):-
-  merge_options(T1, T2).
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index a9e1a42..5c937ce 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -15,11 +15,11 @@ In GraphViz vertices are called 'nodes'.
 ---
 
 @author Wouter Beek
-@version 2015/07
+@version 2015/07, 2015/12
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/dcg_abnf)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(gv/gv_graph_comp)).
 :- use_module(library(lists)).
@@ -29,7 +29,13 @@ In GraphViz vertices are called 'nodes'.
 
 
 
-%! gv_graph(+Graph:compound)//
+%! gv_graph(+Graph:compound)// is det.
+% Wrapper around gv_graph//2 with no indentation.
+
+gv_graph(G) --> gv_graph(G, 0).
+
+
+%! gv_graph(+Graph:compound, +Indent:nonneg)// is det.
 % The follow graph attributes are supported,
 % beyond the GraphViz attributes for graphs:
 %   * `directed(+boolean)`
@@ -61,9 +67,6 @@ In GraphViz vertices are called 'nodes'.
 % @tbd Assert attributes that are generic with respect to a subgraph.
 % @tbd Not all vertex and edge properties can be shared it seems (e.g., label).
 
-gv_graph(G) -->
-  gv_graph(G, 0).
-
 gv_graph(G1, I) -->
   {
     include_ranks(G1, G2),
@@ -122,26 +125,20 @@ gv_graph(G1, I) -->
 
   % The list of GraphViz nodes.
   gv_node_statements(NewI, NewVTerms),
-  (   {NewVTerms == []}
-  ->  ""
-  ;   "\n"
-  ),
+  ({NewVTerms == []} -> "" ; "\n"),
 
   % The ranked GraphViz nodes (displayed at the same height).
   gv_ranked_node_collections(NewI, RankedVTerms),
-  (   {RankedVTerms == []}
-  ->  ""
-  ;   "\n"
-  ),
+  ({RankedVTerms == []} -> "" ; "\n"),
 
   {
     findall(
       edge(FromId,ToId,[]),
       (
-        nth0(Index1, RankedVTerms, rank(vertex(FromId,_),_)),
-        nth0(Index2, RankedVTerms, rank(vertex(ToId,_),_)),
+        nth0(J1, RankedVTerms, rank(vertex(FromId,_),_)),
+        nth0(J2, RankedVTerms, rank(vertex(ToId,_),_)),
         % We assume that the rank vertices are nicely ordered.
-        succ(Index1, Index2)
+        succ(J1, J2)
       ),
       RankEdges
     )
@@ -159,14 +156,27 @@ gv_graph(G1, I) -->
   tab(I),
   "}\n".
 
-gv_edge_statements(I, Dir, L) -->
-  *(gv_edge_statement(I, Dir), L, []), !.
 
-gv_node_statements(I, L) -->
-  *(gv_node_statement(I), L, []), !.
 
-gv_ranked_node_collections(I, L) -->
-  *(gv_ranked_node_collection(I), L, []), !.
+%! gv_edge_statements(
+%!   +Indent:nonneg,
+%!   +Directed:boolean,
+%!   +Statements:list(compound)
+%! )// is det.
+
+gv_edge_statements(I, Dir, L) --> *(gv_edge_statement(I, Dir), L).
+
+
+
+%! gv_edge_statements(+Indent:nonneg, +Statements:list(compound))// is det.
+
+gv_node_statements(I, L) --> *(gv_node_statement(I), L).
+
+
+
+%! gv_ranked_node_collections(+Indent:nonneg, +Collections:list)// is det.
+
+gv_ranked_node_collections(I, L) --> *(gv_ranked_node_collection(I), L).
 
 
 
@@ -189,11 +199,13 @@ add_default(L1, Opt, L2):-
   ).
 
 
+
 %! gv_graph_type(+Directed:boolean)// is det.
 % The type of graph that is represented.
 
-gv_graph_type(false) --> "graph".
-gv_graph_type(true) --> "digraph".
+gv_graph_type(false) --> !, "graph".
+gv_graph_type(true)  -->    "digraph".
+
 
 
 %! gv_strict(+Strict:boolean)// is det.
@@ -201,18 +213,20 @@ gv_graph_type(true) --> "digraph".
 % no multi-edges.
 % This only applies to directed graphs.
 
-gv_strict(false) --> "".
-gv_strict(true) --> "strict ".
+gv_strict(false) --> !, "".
+gv_strict(true)  -->    "strict ".
+
 
 
 %! invlude_ranges(+Graph:compound, -GraphWithRanks:compound) is det.
 % Ensures that there is a ranks components in
 % the graph-denoting compound term.
 
-include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)).
+include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)):- !.
 include_ranks(graph(Vs,Es,L), graph(Vs,[],Es,L)).
 
 
+
 %! shared_attributes(
 %!   +Terms:list(compound),
 %!   -SharedAttributes:list(compound),
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 6877107..8bfc9a2 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -24,13 +24,11 @@ a_list = ID "=" ID [","] [a_list]
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2015/07-2015/08, 2015/10-2015/11
+@version 2015/07-2015/08, 2015/10-2015/12
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/basics)).
-:- use_module(library(dcg/dcg_abnf)).
-:- use_module(library(dcg/dcg_ascii)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_html)).
@@ -166,7 +164,7 @@ gv_attrs(Kind, L) --> "[", *(gv_attr(Kind), L), "]".
 % We assume that the attribute has already been validated.
 
 gv_attr(Context, Attr) -->
-  {Attr =.. [N,V]},
+  {Attr =.. [N,V], (N == peripheries -> gtrace ; true)},
   gv_id(N), "=", gv_attr_value(Context, N=V), ";".
 
 
@@ -217,15 +215,15 @@ gv_id(Atom) -->
 %! gv_id_first(+First:code)// is det.
 % Generates the first character of a GraphViz identifier.
 
-gv_id_first(C)   --> ascii_alpha(C), !.
+gv_id_first(C)   --> alpha(C), !.
 gv_id_first(0'_) --> "_".
 
 
 %! gv_id_rest(+NonFirst:code)// is det.
 % Generates a non-first character of a GraphViz identifier.
 
-gv_id_rest([H|T])   --> ascii_alpha_num(C), !, gv_id_rest(T).
-gv_id_rest([0'_|T]) --> "_",                !, gv_id_rest(T).
+gv_id_rest([H|T])   --> alphadigit(H), !, gv_id_rest(T).
+gv_id_rest([0'_|T]) --> "_",           !, gv_id_rest(T).
 gv_id_rest([])      --> "".
 
 
diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl
index 5f2db03..3ee7de6 100644
--- a/prolog/gv/gv_html.pl
+++ b/prolog/gv/gv_html.pl
@@ -40,11 +40,10 @@ cell:   <TD> label </TD>
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/node-shapes#html
-@version 2015/07
+@version 2015/07, 2015/12
 */
 
-:- use_module(library(dcg/dcg_abnf)).
-:- use_module(library(dcg/dcg_bracketed)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(html/html_dcg)).
 
@@ -52,14 +51,13 @@ cell:   <TD> label </TD>
 
 
 
-%! gv_html_like_label(?Content:compound)// .
+%! gv_html_like_label(+Content:compound)// is det.
 
-gv_html_like_label(Content) -->
-  bracketed(angular, label(Content)).
+gv_html_like_label(Content) --> "<", label(Content), ">".
 
 
 
-%! cell(?Contents:compound)// .
+%! cell(+Contents:compound)// is det.
 % Supported attributes for `TD`:
 %   - `ALIGN="CENTER|LEFT|RIGHT|TEXT"`
 %   - `BALIGN="CENTER|LEFT|RIGHT"`
@@ -88,65 +86,47 @@ gv_html_like_label(Content) -->
 %   - `SCALE="FALSE|TRUE|WIDTH|HEIGHT|BOTH"`
 %   - `SRC="value"`
 
-cell(td(Contents)) -->
+cell(td(Contents)) --> !,
   cell(td([],Contents)).
 cell(td(Attrs1,Image)) -->
-  {(  Image =.. [img,Attrs2]
-  ->  true
-  ;   Image == img
-  ->  Attrs2 = []
-  )},
+  {(Image =.. [img,Attrs2] -> true ; Image == img -> Attrs2 = [])}, !,
   html_element(td, Attrs1, html_element(img,Attrs2)).
 cell(td(Attrs,Contents)) -->
   html_element(td, Attrs, label(Contents)).
 
 
 
-%! cells(?Contents:list(compound))// .
+%! cells(+Contents:list(compound))// is det.
 
-cells([H|T]) -->
-  cell(H),
-  cells(T).
-cells([H,vr|T]) -->
-  cell(H),
-  html_element(vr),
-  cells(T).
-cells([H]) -->
-  cell(H).
+cells([H,vr|T]) --> !, cell(H), html_element(vr), cells(T).
+cells([H|T])    --> !, cell(H), cells(T).
+cells([])       --> "".
 
 
 
-%! label(?Content:compound)// .
+%! label(+Content:compound)// is det.
 % GraphViz HTML-like label.
 
-label(Content) -->
-  table(Content).
-label(Content) -->
-  text(Content).
+label(Content) --> table(Content), !.
+label(Content) --> text(Content).
 
 
 
-%! row(?Contents:compound)// .
+%! row(+Contents:compound)// is det.
 
-row(tr(Contents)) -->
-  html_element(tr, [], cells(Contents)).
+row(tr(Contents)) --> html_element(tr, [], cells(Contents)).
 
 
 
-%! rows(?Contents:list)// .
+%! rows(+Contents:list)// is det.
 
-rows([H|T]) -->
-  row(H),
-  rows(T).
-rows([hr|T]) -->
-  html_element(hr),
-  rows(T).
-rows([H]) -->
-  row(H).
+rows([hr|T]) --> !, html_element(hr), rows(T).
+rows([H|T]) --> row(H), !, rows(T).
+rows([]) --> "".
 
 
 
-%! table(?Contents:compound)// .
+%! table(+Contents:compound)// is det.
 % ```
 % table : [ <FONT> ] <TABLE> rows </TABLE> [ </FONT> ]
 % ```
@@ -188,11 +168,11 @@ rows([H]) -->
 %   - `FACE="fontname"`
 %   - `POINT-SIZE="value"`
 
-table(table(Contents)) -->
+table(table(Contents)) --> !,
   table(table([],Contents)).
-table(table(Attrs,Contents)) -->
+table(table(Attrs,Contents)) --> !,
   html_element(table, Attrs, rows(Contents)).
-table(font(Table)) -->
+table(font(Table)) --> !,
   table(font([],Table)).
 table(font(Attrs1,Table)) -->
   {(  Table =.. [table,Attrs2,Contents]
@@ -204,21 +184,18 @@ table(font(Attrs1,Table)) -->
 
 
 
-%! text(?Contents:list)// .
+%! text(+Contents:list)// .
 % ```
 % text :   textitem
 %        | text textitem
 % ```
 
-text(Contents) -->
-  {is_list(Contents)}, !,
-  '+'(textitem, Contents, []).
-text(Content) -->
-  text([Content]).
+text(Contents) --> {is_list(Contents)}, !, '+'(textitem, Contents).
+text(Content)  --> text([Content]).
 
 
 
-%! textitem(?Content:compound)// .
+%! textitem(+Content:compound)// .
 % ```
 % textitem :   string
 %            | <BR/>
@@ -235,7 +212,7 @@ text(Content) -->
 % Supported attributes for BR:
 %   - `ALIGN="CENTER|LEFT|RIGHT"`
 
-textitem(br(Attrs)) -->
+textitem(br(Attrs)) --> !,
   html_element(br, Attrs).
 % Compound term: parser.
 textitem(Compound) -->
@@ -248,7 +225,7 @@ textitem(Compound) -->
 % Compound term: generator.
 textitem(Compound) -->
   {
-    Compound =.. [Name,Content],
+    Compound =.. [Name,Content], !,
     supported_html_element(Name)
   },
   html_element(Name, _, text(Content)).
 
```
 
<h2 id="142"> 142: 正在比较变动前 3518985 和变动后 322ca62 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_viz.pl
similarity index 59%
rename from prolog/fca/fca_export.pl
rename to prolog/fca/fca_viz.pl
index 03353e3..36393de 100644
--- a/prolog/fca/fca_export.pl
+++ b/prolog/fca/fca_viz.pl
@@ -1,18 +1,21 @@
 :- module(
-  fca_export,
+  fca_viz,
   [
-    fca_export/2, % +Context:compound
-                  % ?File:atom
-    fca_export/3 % +Context:compound
-                 % ?File:atom
-                 % :Options:list(compound)
+    fca_export_graph/2, % +Context, -ExportGraph
+    fca_export_graph/3, % +Context:compound
+                        % -ExportGraph:compound
+                        % :Options:list(compound)
+    fca_viz/2, % +Context, ?File
+    fca_viz/3 % +Context:compound
+              % ?File:atom
+              % :Options:list(compound)
   ]
 ).
 
-/** <module> FCA export
+/** <module> FCA visualization
 
 @author Wouter Beek
-@version 2015/11
+@version 2015/11-2015/12
 */
 
 :- use_module(library(dcg/dcg_collection)).
@@ -27,11 +30,16 @@
 
 :- meta_predicate(concept_label(+,1,1,+,-)).
 :- meta_predicate(concept_label(+,1,1,+,?,?)).
-:- meta_predicate(fca_export(+,?,:)).
+:- meta_predicate(fca_export_graph(+,?,:)).
+:- meta_predicate(fca_viz(+,?,:)).
 
-:- predicate_options(fca_export/3, 3, [
+:- predicate_options(fca_export_graph/3, 3, [
+     attribute_label(+callable),
      concept_label(+oneof([attributes,both,objects])),
-     object_label(+callable),
+     object_label(+callable)
+   ]).
+:- predicate_options(fca_viz/3, 3, [
+     pass_to(fca_export_graph/3, 3),
      pass_to(gv_export/3, 3)
    ]).
 
@@ -42,14 +50,18 @@ is_meta(object_label).
 
 
 
-%! fca_export(+Context:compound, ?File:atom) is det.
-% Wrapper around fca_export/3 with default options.
+%! fca_export_graph(+Context:compound, -ExportGraph:compound) is det.
+% Wrapper around fca_export_graph/3 with default options.
 
-fca_export(Context, File):-
-  fca_export(Context, File, []).
+fca_export_graph(Context, ExportG):-
+  fca_export_graph(Context, ExportG, []).
 
 
-%! fca_export(+Context:compound, ?File:atom, :Options:list(compound)) is det.
+%! fca_export_graph(
+%!   +Context:compound,
+%!   -ExportGraph:compound,
+%!   :Options:list(compound)
+%! ) is det.
 % The following optios are supported:
 %   * attribute_label(+callable)
 %     DCG writing the labels for individual attributes.
@@ -62,24 +74,36 @@ fca_export(Context, File):-
 %     DCG writing the labels for individual objects.
 %     Default is pl_term//1.
 
-fca_export(Context, File, Opts1):-
+fca_export_graph(Context, ExportG, Opts1):-
   fca_hasse(Context, Hasse),
-  
   meta_options(is_meta, Opts1, Opts2),
   option(attribute_label(ALbl_1), Opts2, pl_term),
   option(concept_label(Mode), Opts2, both),
   option(object_label(OLbl_1), Opts2, pl_term),
   merge_options(
     [
-      vertex_label(fca_export:concept_label(Mode, OLbl_1, ALbl_1)),
+      vertex_label(fca_viz:concept_label(Mode, OLbl_1, ALbl_1)),
       vertex_rank(fca:concept_cardinality)
     ],
     Opts2,
     Opts3
   ),
-  build_export_graph(Hasse, ExportG, Opts3),
+  build_export_graph(Hasse, ExportG, Opts3).
+
+
+
+%! fca_viz(+Context:compound, ?File:atom) is det.
+% Wrapper around fca_viz/3 with default options.
+
+fca_viz(Context, File):-
+  fca_viz(Context, File, []).
+
+
+%! fca_viz(+Context:compound, ?File:atom, :Options:list(compound)) is det.
 
-  gv_export(ExportG, File, Opts2).
+fca_viz(Context, File, Opts):-
+  fca_export_graph(Context, ExportG, Opts),
+  gv_export(ExportG, File, Opts).
 
 
 
diff --git a/test/test.pl b/test/test.pl
index 5ce2db0..470acce 100644
--- a/test/test.pl
+++ b/test/test.pl
@@ -1,5 +1,5 @@
 %/fca
-  :- use_module(library(fca/fca_export)).
+  :- use_module(library(fca/fca_viz)).
 %/graph
   :- use_module(library(graph/build_export_graph)).
 %/gv
 
```
 
<h2 id="143"> 143: 正在比较变动前 322ca62 和变动后 c4bf9ea </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
index 36393de..5ff8cf5 100644
--- a/prolog/fca/fca_viz.pl
+++ b/prolog/fca/fca_viz.pl
@@ -12,7 +12,7 @@
   ]
 ).
 
-/** <module> FCA visualization
+/** <module> FCA export
 
 @author Wouter Beek
 @version 2015/11-2015/12
@@ -30,7 +30,7 @@
 
 :- meta_predicate(concept_label(+,1,1,+,-)).
 :- meta_predicate(concept_label(+,1,1,+,?,?)).
-:- meta_predicate(fca_export_graph(+,?,:)).
+:- meta_predicate(fca_export_graph(+,-,:)).
 :- meta_predicate(fca_viz(+,?,:)).
 
 :- predicate_options(fca_export_graph/3, 3, [
@@ -49,7 +49,6 @@ is_meta(object_label).
 
 
 
-
 %! fca_export_graph(+Context:compound, -ExportGraph:compound) is det.
 % Wrapper around fca_export_graph/3 with default options.
 
@@ -60,7 +59,7 @@ fca_export_graph(Context, ExportG):-
 %! fca_export_graph(
 %!   +Context:compound,
 %!   -ExportGraph:compound,
-%!   :Options:list(compound)
+%!   +Options:list(compound)
 %! ) is det.
 % The following optios are supported:
 %   * attribute_label(+callable)
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index 2428483..6dbb4f7 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -1,8 +1,7 @@
 :- module(
   build_export_graph,
   [
-    build_export_graph/2, % +Graph
-                          % -ExportGraph:compound
+    build_export_graph/2, % +Graph, -ExportGraph
     build_export_graph/3 % +Graph
                          % -ExportGraph:compound
                          % +Options:list(compound)
@@ -118,7 +117,7 @@ is_meta(vertex_uri).
 
 
 %! build_export_graph(+Graph, -ExportGraph:compound) is det.
-% Wrapper around build_export_graph/3.
+% Wrapper around build_export_graph/3 with default options.
 
 build_export_graph(G, ExportG):-
   build_export_graph(G, ExportG, []).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 8bfc9a2..aecbe07 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -164,7 +164,7 @@ gv_attrs(Kind, L) --> "[", *(gv_attr(Kind), L), "]".
 % We assume that the attribute has already been validated.
 
 gv_attr(Context, Attr) -->
-  {Attr =.. [N,V], (N == peripheries -> gtrace ; true)},
+  {Attr =.. [N,V]},
   gv_id(N), "=", gv_attr_value(Context, N=V), ";".
 
 
diff --git a/test/test.pl b/test/test.pl
index 470acce..c1bdca0 100644
--- a/test/test.pl
+++ b/test/test.pl
@@ -1,13 +1,13 @@
 %/fca
-  :- use_module(library(fca/fca_viz)).
+:- use_module(library(fca/fca_viz)).
 %/graph
-  :- use_module(library(graph/build_export_graph)).
+:- use_module(library(graph/build_export_graph)).
 %/gv
-  :- use_module(library(gv/gv_attrs)).
-  :- use_module(library(gv/gv_attr_type)).
-  :- use_module(library(gv/gv_color)).
-  :- use_module(library(gv/gv_file)).
-  :- use_module(library(gv/gv_graph)).
-  :- use_module(library(gv/gv_graph_comp)).
-  :- use_module(library(gv/gv_html)).
-  :- use_module(library(gv/gv_numeral)).
+:- use_module(library(gv/gv_attrs)).
+:- use_module(library(gv/gv_attr_type)).
+:- use_module(library(gv/gv_color)).
+:- use_module(library(gv/gv_file)).
+:- use_module(library(gv/gv_graph)).
+:- use_module(library(gv/gv_graph_comp)).
+:- use_module(library(gv/gv_html)).
+:- use_module(library(gv/gv_numeral)).
 
```
 
<h2 id="144"> 144: 正在比较变动前 c4bf9ea 和变动后 2a6dafd </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
index 5ff8cf5..ef6a632 100644
--- a/prolog/fca/fca_viz.pl
+++ b/prolog/fca/fca_viz.pl
@@ -12,7 +12,7 @@
   ]
 ).
 
-/** <module> FCA export
+/** <module> FCA visualization
 
 @author Wouter Beek
 @version 2015/11-2015/12
@@ -30,7 +30,7 @@
 
 :- meta_predicate(concept_label(+,1,1,+,-)).
 :- meta_predicate(concept_label(+,1,1,+,?,?)).
-:- meta_predicate(fca_export_graph(+,-,:)).
+:- meta_predicate(fca_export_graph(+,?,:)).
 :- meta_predicate(fca_viz(+,?,:)).
 
 :- predicate_options(fca_export_graph/3, 3, [
@@ -59,7 +59,7 @@ fca_export_graph(Context, ExportG):-
 %! fca_export_graph(
 %!   +Context:compound,
 %!   -ExportGraph:compound,
-%!   +Options:list(compound)
+%!   :Options:list(compound)
 %! ) is det.
 % The following optios are supported:
 %   * attribute_label(+callable)
 
```
 
<h2 id="145"> 145: 正在比较变动前 2a6dafd 和变动后 145615e </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
index ef6a632..1a15ef5 100644
--- a/prolog/fca/fca_viz.pl
+++ b/prolog/fca/fca_viz.pl
@@ -100,9 +100,10 @@ fca_viz(Context, File):-
 
 %! fca_viz(+Context:compound, ?File:atom, :Options:list(compound)) is det.
 
-fca_viz(Context, File, Opts):-
-  fca_export_graph(Context, ExportG, Opts),
-  gv_export(ExportG, File, Opts).
+fca_viz(Context, File, Opts1):-
+  meta_options(is_meta, Opts1, Opts2),
+  fca_export_graph(Context, ExportG, Opts2),
+  gv_export(ExportG, File, Opts2).
 
 
 
 
```
 
<h2 id="146"> 146: 正在比较变动前 145615e 和变动后 f16acca </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
index 190b988..bcc7654 100644
--- a/data/gv_attrs_scrape.pl
+++ b/data/gv_attrs_scrape.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_attrs_scrape,
   [
-    gv_attrs_scrape/1 % +File:atom
+    gv_attrs_scrape/1 % +File
   ]
 ).
 
@@ -11,46 +11,41 @@ Writes compound terms of the following form to file:
 
 ```prolog
 gv_attr(
-  ?Name:atom,
+  ?Name,
   ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
   ?Types:list(atom),
   ?Default,
   ?Minimum,
-  ?Notes:atom
+  ?Notes
 ) is nondet.
 ```
 
 @author Wouter Beek
-@version 2015/10
+@version 2015/10, 2016/07
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/basics), except([string//1])).
-:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(debug)).
 :- use_module(library(gv/gv_attr_type)).
 :- use_module(library(http/http_download)).
-:- use_module(library(iostream)).
 :- use_module(library(lists)).
-:- use_module(library(msg_ext)).
-:- use_module(library(pl/pl_term)).
+:- use_module(library(os/io)).
+:- use_module(library(pl_term)).
+:- use_module(library(print_ext)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
+:- use_module(library(yall)).
 
 
 
 
 
-%! gv_attrs_scrape(+File:atom) is det.
+%! gv_attrs_scrape(+File) is det.
 
 gv_attrs_scrape(File):-
-  setup_call_cleanup(
-    open_any(File, write, Write, Close, []),
-    verbose(
-      gv_attrs_download(Write),
-      "Updating the GraphViz attributes table."
-    ),
-    close_any(Close)
-  ).
+  debug(gv, "Updating the GraphViz attributes table.", []),
+  call_to_stream(File, [In,Meta,Meta]>>gv_attrs_download(In)).
 
 
 gv_attrs_download(Write):-
@@ -79,7 +74,7 @@ gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html').
 
 % HELPERS %
 
-%! translate_default(+Default1:atom, -Default2:atom) is det.
+%! translate_default(+Default1, -Default2) is det.
 
 % The empty string is represented by the empty atom.
 translate_default('""', ''):- !.
diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl
index 3ac5d44..102a02a 100644
--- a/data/gv_color_scrape.pl
+++ b/data/gv_color_scrape.pl
@@ -1,40 +1,36 @@
 :- module(
   gv_color_scrape,
   [
-    gv_color_scrape/1 % +File:atom
+    gv_color_scrape/1 % +File
   ]
 ).
 
 /** <module> GraphViz: Scrape colors
 
 @author Wouter Beek
-@version 2015/10
+@version 2015/10, 2016/07
 */
 
 :- use_module(library(apply)).
+:- use_module(library(debug)).
 :- use_module(library(http/http_download)).
-:- use_module(library(iostream)).
 :- use_module(library(lists)).
-:- use_module(library(msg_ext)).
-:- use_module(library(pl/pl_term)).
+:- use_module(library(os/io)).
+:- use_module(library(pl_term)).
+:- use_module(library(print_ext)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
+:- use_module(library(yall)).
 
 
 
 
 
-%! gv_color_scrape(+File:atom) is det.
+%! gv_color_scrape(+File) is det.
 
 gv_color_scrape(File):-
-  setup_call_cleanup(
-    open_any(File, write, Write, Close, []),
-    verbose(
-      gv_color_download(Write),
-      "Updating the GraphViz color table."
-    ),
-    close_any(Close)
-  ).
+  debug(io, "Updating the GraphViz color table.", []),
+  call_to_stream(File, [In,Meta,Meta]>>gv_color_download(In)).
 
 
 gv_color_download(Write):-
diff --git a/pack.pl b/pack.pl
index 203cbfc..989108a 100644
--- a/pack.pl
+++ b/pack.pl
@@ -4,6 +4,6 @@ home('https://github.com/wouterbeek/plGraphViz').
 maintainer('Wouter Beek', 'me@wouterbeek.com').
 name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
-requires('Prolog_Library_Collection').
+requires('Prolog-Library-Collection').
 title(plGraphViz).
-version('0.0.17').
+version('0.0.1').
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
index 1a15ef5..083dbb2 100644
--- a/prolog/fca/fca_viz.pl
+++ b/prolog/fca/fca_viz.pl
@@ -2,24 +2,20 @@
   fca_viz,
   [
     fca_export_graph/2, % +Context, -ExportGraph
-    fca_export_graph/3, % +Context:compound
-                        % -ExportGraph:compound
-                        % :Options:list(compound)
-    fca_viz/2, % +Context, ?File
-    fca_viz/3 % +Context:compound
-              % ?File:atom
-              % :Options:list(compound)
+    fca_export_graph/3, % +Context, -ExportGraph, :Opts
+    fca_viz/2,          % +Context, ?File
+    fca_viz/3           % +Context, ?File, :Opts
   ]
 ).
 
 /** <module> FCA visualization
 
 @author Wouter Beek
-@version 2015/11-2015/12
+@version 2015/11-2016/01
 */
 
-:- use_module(library(dcg/dcg_collection)).
-:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(aggregate)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(dcg/dcg_pl)).
 :- use_module(library(fca/fca)).
 :- use_module(library(graph/build_export_graph)).
@@ -28,23 +24,19 @@
 :- use_module(library(option)).
 :- use_module(library(ordsets)).
 
-:- meta_predicate(concept_label(+,1,1,+,-)).
-:- meta_predicate(concept_label(+,1,1,+,?,?)).
 :- meta_predicate(fca_export_graph(+,?,:)).
 :- meta_predicate(fca_viz(+,?,:)).
 
 :- predicate_options(fca_export_graph/3, 3, [
-     attribute_label(+callable),
-     concept_label(+oneof([attributes,both,objects])),
-     object_label(+callable)
+     concept_label(+callable)
    ]).
 :- predicate_options(fca_viz/3, 3, [
      pass_to(fca_export_graph/3, 3),
-     pass_to(gv_export/3, 3)
+     pass_to(graph_viz/3, 3)
    ]).
 
-is_meta(attribute_label).
-is_meta(object_label).
+is_meta(concept_label).
+
 
 
 
@@ -62,26 +54,16 @@ fca_export_graph(Context, ExportG):-
 %!   :Options:list(compound)
 %! ) is det.
 % The following optios are supported:
-%   * attribute_label(+callable)
-%     DCG writing the labels for individual attributes.
-%     Default is pl_term//1.
-%   * concept_label(+oneof([attributes,both,objects]))
-%     Determines which components of the concepts are displayed
-%     in the export graph.
-%     Default is `both`.
-%   * object_label(+callable)
-%     DCG writing the labels for individual objects.
-%     Default is pl_term//1.
+%   * concept_label(+callable)
+%     DCG writing the labels for individual concepts.
 
 fca_export_graph(Context, ExportG, Opts1):-
   fca_hasse(Context, Hasse),
   meta_options(is_meta, Opts1, Opts2),
-  option(attribute_label(ALbl_1), Opts2, pl_term),
-  option(concept_label(Mode), Opts2, both),
-  option(object_label(OLbl_1), Opts2, pl_term),
+  option(concept_label(Label_3), Opts2, concept_label),
   merge_options(
     [
-      vertex_label(fca_viz:concept_label(Mode, OLbl_1, ALbl_1)),
+      vertex_label(Label_3),
       vertex_rank(fca:concept_cardinality)
     ],
     Opts2,
@@ -102,36 +84,18 @@ fca_viz(Context, File):-
 
 fca_viz(Context, File, Opts1):-
   meta_options(is_meta, Opts1, Opts2),
+  statistics(process_cputime, Time1),
   fca_export_graph(Context, ExportG, Opts2),
-  gv_export(ExportG, File, Opts2).
+  ExportG = graph(_,_,Es,_),
+  aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N),
+  ignore(option(number_of_vertices(N), Opts2)),
+  statistics(process_cputime, Time2),
+  Time is Time2 - Time1,
+  ignore(option(process_cputime(Time), Opts2)),
+  graph_viz(ExportG, File, Opts2).
 
 
 
-%! concept_label(
-%!   +Mode:oneof([attributes,both,objects]),
-%!   :ObjectLabel_1,
-%!   :AttributeLabel_1,
-%!   +Concept:compound,
-%!   -Label:atom
-%! ) is det.
+%! concept_label(+Concept:compound)// is det.
 
-concept_label(Mode, OLbl_1, ALbl_1, Concept, Lbl):-
-  string_phrase(concept_label(Mode, OLbl_1, ALbl_1, Concept), Lbl).
-
-
-%! concept_label(
-%!   +Mode:oneof([attributes,both,objects]),
-%!   :ObjectLabel_1,
-%!   :AttributeLabel_1,
-%!   +Concept:compound
-%! )// is det.
-
-concept_label(attributes, _, ALbl_1, concept(_,As)) -->
-  set(ALbl_1, As).
-concept_label(both, OLbl_1, ALbl_1, Concept) -->
-  pair(
-    concept_label(objects, OLbl_1, ALbl_1, Concept),
-    concept_label(attributes, OLbl_1, ALbl_1, Concept)
-  ).
-concept_label(objects, OLbl_1, _, concept(Os,_)) -->
-  set(OLbl_1, Os).
+concept_label(concept(Os,As)) --> set(Os), " / ", set(As).
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index 6dbb4f7..5134069 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -50,12 +50,12 @@ Vertex coordinates:
 ---
 
 @author Wouter Beek
-@version 2015/07, 2015/09-2015/12
+@version 2015/07, 2015/09-2016/01
 */
 
 :- use_module(library(apply)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(graph/s/s_graph)).
-:- use_module(library(lambda)).
 :- use_module(library(list_ext)).
 :- use_module(library(option_ext)).
 :- use_module(library(ordsets)).
@@ -140,11 +140,15 @@ build_export_graph(G, ExportG):-
 build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):-
   graph_components(G, Vs, Es),
   meta_options(is_meta, Opts1, Opts2),
-  maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1),
+  maplist(vertex_term0(Vs, Opts2), Vs, VTerms1),
   build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2),
-  maplist(\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms),
+  maplist(edge_term0(Vs, Opts2), Es, ETerms),
   graph_attributes(GAttrs, Opts2).
 
+vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts).
+
+edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts).
+
 graph_components(graph(Vs,Es), Vs, Es):- !.
 graph_components(G, Vs, Es):-
   s_graph_components(G, Vs, Es).
@@ -190,37 +194,29 @@ build_export_rank_term(N, vertex(Id,[label(""),shape(none)])):-
 
 edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):-
   % Arrowhead
-  if_option(edge_arrowhead(ArrowheadFunction), Opts,
-    call(ArrowheadFunction, E, EArrowhead)
+  if_option(edge_arrowhead(Arrowhead_2), Opts,
+    call(Arrowhead_2, E, EArrowhead)
   ),
   
   % Color.
-  if_option(edge_color(ColorFunction), Opts,
-    call(ColorFunction, E, EColor)
-  ),
+  if_option(edge_color(ColorFunction), Opts, call(ColorFunction, E, EColor)),
   
   % Id.
-  (   option(edge_id(IdFunction), Opts)
-  ->  call(IdFunction, E, FromId, ToId)
+  (   option(edge_id(Id_2), Opts)
+  ->  call(Id_2, E, FromId, ToId)
   ;   edge_components(E, FromV, ToV),
       nth0chk(FromId, Vs, FromV),
       nth0chk(ToId, Vs, ToV)
   ),
   
   % Label.
-  if_option(edge_label(LabelFunction), Opts,
-    call(LabelFunction, E, ELabel)
-  ),
+  if_option(edge_label(ELabel_3), Opts, string_phrase(dcg_call(ELabel_3, E), ELabel)),
   
   % Penwidth.
-  if_option(edge_penwidth(PenwidthFunction), Opts,
-    call(PenwidthFunction, E, EPenwidth)
-  ),
+  if_option(edge_penwidth(Penwidth_2), Opts, call(Penwidth_2, E, EPenwidth)),
   
   % Style.
-  if_option(edge_style(StyleFunction), Opts,
-    call(StyleFunction, E, EStyle)
-  ),
+  if_option(edge_style(Style_2), Opts, call(Style_2, E, EStyle)),
   
   exclude(
     option_has_var_value,
@@ -274,7 +270,6 @@ graph_attributes(GAttrs, Opts):-
   option(graph_label(GLabel), Opts, '""'),
   % Overlap.
   option(graph_overlap(Overlap), Opts, false),
-
   exclude(
     option_has_var_value,
     [
@@ -320,47 +315,32 @@ graph_attributes(GAttrs, Opts):-
 
 vertex_term(Vs, V, vertex(VId,VAttrs), Opts):-
   % Color.
-  if_option(vertex_color(ColorFunction), Opts,
-    call(ColorFunction, V, VColor)
-  ),
+  if_option(vertex_color(Color_2), Opts, call(Color_2, V, VColor)),
   
   % Id.
-  (   option(vertex_id(IdFunction), Opts)
-  ->  call(IdFunction, V, VId)
-  ;   nth0chk(VId, Vs, V)
-  ),
+  (option(vertex_id(Id_2), Opts) -> call(Id_2, V, VId) ; nth0chk(VId, Vs, V)),
   
   % Image.
-  ignore(
-    if_option(vertex_image(ImageFunction), Opts,
-      call(ImageFunction, V, VImage)
-    )
-  ),
+  ignore(if_option(vertex_image(Image_2), Opts, call(Image_2, V, VImage))),
 
   % Label.
-  if_option(vertex_label(LabelFunction), Opts,
-    call(LabelFunction, V, VLabel)
-  ),
+  if_option(vertex_label(VLabel_2), Opts, string_phrase(dcg_call(VLabel_2, V), VLabel)),
 
   % Peripheries.
-  if_option(vertex_peripheries(PeripheriesFunction), Opts,
-    call(PeripheriesFunction, V, VPeripheries)
+  if_option(vertex_peripheries(Peripheries_2), Opts,
+    call(Peripheries_2, V, VPeripheries)
   ),
 
   % Position.
-  if_option(vertex_position(PositionFunction), Opts,
-    call(PositionFunction, Vs, Opts, V, VPosition)
+  if_option(vertex_position(Position_4), Opts,
+    call(Position_4, Vs, Opts, V, VPosition)
   ),
 
   % Shape.
-  if_option(vertex_shape(ShapeFunction), Opts,
-    call(ShapeFunction, V, VShape)
-  ),
+  if_option(vertex_shape(Shape_2), Opts, call(Shape_2, V, VShape)),
   
   % URI
-  if_option(vertex_uri(UriFunction), Opts,
-    call(UriFunction, V, VUri)
-  ),
+  if_option(vertex_uri(Uri_2), Opts, call(Uri_2, V, VUri)),
 
   exclude(
     option_has_var_value,
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
index 8fa78af..f55fce5 100644
--- a/prolog/gv/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -46,11 +46,10 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2015/07, 2015/11
+@version 2015/07, 2015/11, 2016/02
 */
 
-:- use_module(library(dcg/basics), except([string//1])).
-:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(dcg/dcg_ext), except([string//1])).
 :- use_module(library(gv/gv_html)).
 
 
@@ -256,7 +255,7 @@ input_changeable(true) --> "!".
 %! pointList(+Points:list(compound))// .
 
 pointList(Points) -->
-  *(point, Points, []).
+  *(point, Points).
 
 
 
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index b26af73..4a92d5b 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -2,7 +2,7 @@
   gv_attrs,
   [
     gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph])
-                     % +Attribute:nvpair
+                     % +Attr
   ]
 ).
 :- ensure_loaded(library('gv/gv_attrs.data')).
@@ -10,11 +10,12 @@
 /** <module> GraphViz attributes
 
 @author Wouter Beek
-@version 2015/07-2015/08, 2015/10
+@version 2015/07-2015/08, 2015/10, 2016/03
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/dcg_call)).
+:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(error)).
 :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
@@ -23,21 +24,20 @@
 
 
 
-%! gv_attr_value(
-%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
-%!   +Attribute:compound
-%! )// is det.
+%! gv_attr_value(+Context, +Attr)// is det.
 % Uses the default value in case Value is uninstantiated.
 % Otherwise, performs a typecheck and converts the given value.
+%
+% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`.
 
 % Use the default if no value is given.
 gv_attr_value(Context, Name=Value) -->
   {
-    var(Value), !,
+    var(Value),
     gv_attr(Name, UsedBy, _, DefaultValue, _, _),
     % Check validity of context.
     memberchk(Context, UsedBy)
-  },
+  }, !,
   gv_attr_value(Context, Name=DefaultValue).
 gv_attr_value(Context, Name=Value) -->
   {
@@ -56,8 +56,10 @@ gv_attr_value(Context, Name=Value) -->
 
     % Check validity of Value w.r.t. minimum value -- if available.
     check_minimum(Value, Minimum)
-  },
+  }, !,
   dcg_call(gv_attr_type:Dcg, Value).
+gv_attr_value(_, Name=_) -->
+  {existence_error(gv_attr, Name)}.
 
 
 
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index 3232c97..ac319dc 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -14,12 +14,11 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2015/08, 2015/10
+@version 2015/08, 2015/10, 2016/02
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/basics)).
-:- use_module(library(dcg/dcg_content)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
 
@@ -35,12 +34,12 @@
 
 color(rgb(Red,Green,Blue)) --> !,
   "#",
-  '#'(3, hex_color, [Red,Green,Blue]).
+  #(3, hex_color, [Red,Green,Blue]).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
   color(rgb(Red,Green,Blue)),
   hex_color(Alpha).
 color(hsv(Hue,Saturation,Value)) --> !,
-  '#'(3, hsv_color, [Hue,Saturation,Value], []).
+  #(3, hsv_color, [Hue,Saturation,Value]).
 color(Name) -->
   {gv_color(_, Name)},
   atom(Name).
@@ -56,7 +55,7 @@ hsv_color(D, Head, Tail):-
 %! colorList(+Pairs:list(pair(compound,float)))// .
 
 colorList(L) -->
-  '+'(wc, L, []).
+  '+'(wc, L).
 
 wc(Color-Float) -->
   color(Color),
diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl
index e85849d..30c4263 100644
--- a/prolog/gv/gv_dom.pl
+++ b/prolog/gv/gv_dom.pl
@@ -1,35 +1,29 @@
 :- module(
   gv_dom,
   [
-    gv_dom/3 % +ExportGraph:compound
-             % -Dom:list(compound)
-             % +Options:list(compound)
+    gv_dom/3 % +ExportG, -Dom, +Opts
   ]
 ).
 
 /** <module> GraphViz DOM
 
 @author Wouter Beek
-@version 2015/07
+@version 2015/07, 2016/01
 */
 
 :- use_module(library(gv/gv_file)).
 :- use_module(library(option)).
-:- use_module(library(svg/svg_dom)).
+:- use_module(library(svg/svg_ext)).
 
 
 
 
 
-%! gv_dom(
-%!   +ExportGraph:compound,
-%!   -Dom:list(compound),
-%!   +Options:list(compound)
-%! ) is det.
+%! gv_dom(+ExportG, -Dom, +Opts) is det.
 
 gv_dom(ExportG, Dom, Opts1):-
   % Make sure the file type of the output file is SvgDom.
   merge_options([output(svg)], Opts1, Opts2),
-  gv_export(ExportG, ToFile, Opts2),
+  graph_viz(ExportG, ToFile, Opts2),
   svg_dom(ToFile, Dom),
   delete_file(ToFile).
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
index 4cf12a8..993fcee 100644
--- a/prolog/gv/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -1,18 +1,15 @@
 :- module(
   gv_file,
   [
-    gv_export/2, % +ExportGraph:compound
-                 % ?File:atom
-    gv_export/3 % +ExportGraph:compound
-                % ?File:atom
-                % +Options:list(nvpair)
+    graph_viz/2, % +ExportG, ?File
+    graph_viz/3  % +ExportG, ?File, +Opts
   ]
 ).
 
 /** <module> GraphViz file
 
 @author Wouter Beek
-@version 2015/07, 2015/10-2015/11
+@version 2015/07, 2015/10-2015/11, 2016/01
 */
 
 :- use_module(library(code_ext)).
@@ -23,7 +20,7 @@
 :- use_module(library(os/process_ext)).
 :- use_module(library(string_ext)).
 
-:- predicate_options(gv_export/3, 3, [
+:- predicate_options(graph_viz/3, 3, [
      pass_to(file_to_gv/3, 3)
    ]).
 :- predicate_options(file_to_gv/3, 3, [
@@ -40,14 +37,8 @@ user:module_uses(gv_file, program(dot)).
 
 
 
-%! gv_export(+ExportGraph:compound, ?File:atom) is det.
-% Wrapper around gv_export/3 with default options.
-
-gv_export(ExportG, File):-
-  gv_export(ExportG, File, []).
-
-
-%! gv_export(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
+%! graph_viz(+ExportGraph:compound, ?File:atom) is det.
+%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
@@ -60,7 +51,9 @@ gv_export(ExportG, File):-
 %     Default is `pdf`.
 %     For possible values see gv_output_type/1.
 
-gv_export(ExportG, File, Opts):-
+graph_viz(ExportG, File):-
+  graph_viz(ExportG, File, []).
+graph_viz(ExportG, File, Opts):-
   once(phrase(gv_graph(ExportG), Cs)),
 
   % Be thread-safe.
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index 5c937ce..c95c9cc 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -20,7 +20,6 @@ In GraphViz vertices are called 'nodes'.
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
-:- use_module(library(dcg/dcg_content)).
 :- use_module(library(gv/gv_graph_comp)).
 :- use_module(library(lists)).
 :- use_module(library(option)).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index aecbe07..30ea9c5 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -24,12 +24,11 @@ a_list = ID "=" ID [","] [a_list]
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2015/07-2015/08, 2015/10-2015/12
+@version 2015/07-2015/08, 2015/10-2016/01
 */
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
-:- use_module(library(dcg/dcg_content)).
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_html)).
 :- use_module(library(error)).
@@ -86,7 +85,7 @@ gv_edge_operator(Dir) -->
 %! gv_generic_attributes_statement(
 %!   +Kind:oneof([edge,graph,node]),
 %!   +Indent:nonneg,
-%!   +CategoryAttributes:list(nvpair)
+%!   +CategoryAttrs
 %! )//
 % A GraphViz statement describing generic attributes for a category of items.
 %
@@ -200,8 +199,8 @@ gv_id(double_quoted_string(Atom)) --> !,
 % Numerals.
 gv_id(N) -->
   {number(N)}, !,
-  % @tbd Use gv_numeral//1.
-  number(N).
+  {number_codes(N, Cs)},
+  Cs.
 % Alpha-numeric strings.
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -264,6 +263,22 @@ gv_node_id(Id) --> {type_error(gv_node_id, Id)}.
 
 
 
+%! gv_numeral(-Number)// is det.
+% ```bnf
+% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
+% ```
+
+gv_numeral(N) -->
+  ("-" -> {Sg = -1} ; {Sg = 1}),
+  (   "."
+  ->  {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)}
+  ;   +(digit, Ds1), {pos_sum(Ds1, I)},
+      ("." -> *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0})
+  ),
+  {N is Sg * (I + Frac)}.
+
+
+
 %! gv_port// is det.
 
 gv_port --> gv_port_location, (gv_port_angle ; "").
@@ -279,7 +294,7 @@ gv_port_location --> ":[", gv_id(_), ",", gv_id(_), "]".
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
 % ```
-% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
+% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ )
 % ```
 
 gv_compass_pt('_') --> "_".
diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl
index 3ee7de6..b5c1368 100644
--- a/prolog/gv/gv_html.pl
+++ b/prolog/gv/gv_html.pl
@@ -44,7 +44,6 @@ cell:   <TD> label </TD>
 */
 
 :- use_module(library(dcg/dcg_ext)).
-:- use_module(library(dcg/dcg_content)).
 :- use_module(library(html/html_dcg)).
 
 
@@ -210,7 +209,12 @@ text(Content)  --> text([Content]).
 % ```
 %
 % Supported attributes for BR:
-%   - `ALIGN="CENTER|LEFT|RIGHT"`
+%   * `ALIGN="CENTER|LEFT|RIGHT"`
+%
+% Supported attributes for FONT:
+%   * COLOR="color"
+%   * FACE="fontname"
+%   * POINT-SIZE="value"
 
 textitem(br(Attrs)) --> !,
   html_element(br, Attrs).
diff --git a/prolog/gv/gv_numeral.pl b/prolog/gv/gv_numeral.pl
deleted file mode 100644
index 4ba0d64..0000000
--- a/prolog/gv/gv_numeral.pl
+++ /dev/null
@@ -1,87 +0,0 @@
-:- module(
-  gv_numeral,
-  [
-    gv_numeral//1 % ?Value:number
-  ]
-).
-
-/** <module> GraphViz numeral
-
-@author Wouter Beek
-@version 2014/05-2014/06, 2015/01
-*/
-
-:- use_module(library(dcg/dcg_abnf)).
-:- use_module(library(dcg/dcg_abnf_common)).
-:- use_module(library(dcg/dcg_ascii)).
-:- use_module(library(math/math_ext)).
-:- use_module(library(math/positional)).
-:- use_module(library(math/radconv)).
-:- use_module(library(math/rational_ext)).
-
-
-
-
-
-%! gv_numeral(?Value:compound)// .
-%
-% # Syntax
-%
-% ```bnf
-% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
-% ```
-%
-% ## Generation
-%
-% In the generative case, three notations are allowed (also see below):
-%   1. (non-zero integer-part)
-%   2. (decimal-separator) (non-zero fractional)
-%   3. (non-zero integer-part) (decimal-separator) (non-zero fractional)
-%
-% The following notations are explicitly excluded due to verbosity:
-%   - (non-zero integer-part) (decimal-separator)
-%   - (non-zero integer-part) (decimal-separator) (zero fractional)
-%   - (zero integer-part) (decimal-separator) (non-zero fractional)
-%
-% The following notations are also excluded, but since they violate
-%  well-formedness:
-%   - (non-zero integer-part) (non-zero fractional)
-%   - (decimal-separator)
-
-gv_numeral(N) -->
-  (   {ground(N)}
-  ->  '[-]?'(N),
-      {N0 is abs(N)},
-      {rational_parts(N0, I, F)},
-      (   % [1] The fractional is zero, so only write the integer part
-          %     and do not write the decimal separator.
-          {F =:= 0}
-      ->  {positional(I, IW)},
-          '[0-9]+'(IW)
-      ;   % [2] The integer part is zero, so only write the fractional part,
-          %     preceded by the decimal separator.
-          {I =:= 0}
-      ->  ".",
-          {positional_fraction(FW, F)},
-          '[0-9]*'(FW)
-      ;   % [3] Both the integer part and the fractional are non-zero,
-          %     so write both of them, with the decimal separator in-between.
-          {positional(I, IW)},
-          '[0-9]+'(IW),
-          ".",
-          {positional_fraction(FW, F)},
-          '[0-9]*'(FW)
-      )
-  ;   '[-]?'(Sg),
-      (   ".",
-          '[0-9]+'(FW),
-          {IW = []}
-      ;   '[0-9]+'(IW),
-          (   ".",
-              '[0-9]*'(FW)
-          ;   {FW = []}
-          )
-      ),
-      {rational_parts_weights(N0, IW, FW)},
-      {N is copysign(N0, Sg)}
-  ).
diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl
new file mode 100644
index 0000000..4382aa6
--- /dev/null
+++ b/prolog/tree/tree_viz.pl
@@ -0,0 +1,65 @@
+:- module(
+  tree_viz,
+  [
+    tree_export_graph/2, % +Tree, ExportG
+    tree_export_graph/3, % +Tree, ExportG, +Opts
+    tree_viz/2,          % +Tree, ?File
+    tree_viz/3           % +Tree, ?File, +Opts
+  ]
+).
+
+/** <module> Tree visualization
+
+Export trees to GraphViz.
+
+@author Wouter Beek
+@version 2016/01-2016/02
+*/
+
+:- use_module(library(graph/build_export_graph)).
+:- use_module(library(gv/gv_file)).
+:- use_module(library(ordsets)).
+:- use_module(library(tree/l_tree)).
+:- use_module(library(tree/s_tree)).
+
+:- predicate_options(tree_export_graph/3, 3, [
+     pass_to(build_export_graph/4, 4)
+   ]).
+:- predicate_options(tree_viz/3, 3, [
+     pass_to(graph_viz/3, 3),
+     pass_to(tree_to_graph/3, 3)
+   ]).
+
+
+
+
+
+%! tree_export_graph(+Tree, -ExportG) is det.
+%! tree_export_graph(+Tree, -ExportG, +Opts) is det.
+% Opts are passed to build_export_graph/4.
+
+tree_export_graph(Tree, ExportG) :-
+  tree_export_graph(Tree, ExportG, []).
+
+tree_export_graph(Tree, ExportG, Opts) :-
+  (   is_s_tree(Tree)
+  ->  tree_to_graph(Tree, G)
+  ;   is_l_tree(Tree)
+  ->  l_tree_to_graph(Tree, G)
+  ),
+  build_export_graph(G, ExportG, Opts).
+
+
+
+%! tree_viz(+Tree, ?File) is det.
+%! tree_viz(+Tree, ?File, +Opts) is det.
+% Stores the given tree term into a GraphViz file.
+%
+% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3.
+
+tree_viz(Tree, File) :-
+  tree_viz(Tree, File, []).
+
+tree_viz(Tree, File, Opts) :-
+  tree_export_graph(Tree, ExportG, Opts),
+  graph_viz(ExportG, File, Opts).
diff --git a/test/test.pl b/test/test.pl
index c1bdca0..83dc023 100644
--- a/test/test.pl
+++ b/test/test.pl
@@ -6,8 +6,10 @@
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_attr_type)).
 :- use_module(library(gv/gv_color)).
+:- use_module(library(gv/gv_dom)).
 :- use_module(library(gv/gv_file)).
 :- use_module(library(gv/gv_graph)).
 :- use_module(library(gv/gv_graph_comp)).
 :- use_module(library(gv/gv_html)).
-:- use_module(library(gv/gv_numeral)).
+%/tree
+:- use_module(library(tree/tree_viz)).
 
```
 
<h2 id="147"> 147: 正在比较变动前 f16acca 和变动后 4e2d9f1 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
index bcc7654..190b988 100644
--- a/data/gv_attrs_scrape.pl
+++ b/data/gv_attrs_scrape.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_attrs_scrape,
   [
-    gv_attrs_scrape/1 % +File
+    gv_attrs_scrape/1 % +File:atom
   ]
 ).
 
@@ -11,41 +11,46 @@ Writes compound terms of the following form to file:
 
 ```prolog
 gv_attr(
-  ?Name,
+  ?Name:atom,
   ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
   ?Types:list(atom),
   ?Default,
   ?Minimum,
-  ?Notes
+  ?Notes:atom
 ) is nondet.
 ```
 
 @author Wouter Beek
-@version 2015/10, 2016/07
+@version 2015/10
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(debug)).
+:- use_module(library(dcg/basics), except([string//1])).
+:- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(gv/gv_attr_type)).
 :- use_module(library(http/http_download)).
+:- use_module(library(iostream)).
 :- use_module(library(lists)).
-:- use_module(library(os/io)).
-:- use_module(library(pl_term)).
-:- use_module(library(print_ext)).
+:- use_module(library(msg_ext)).
+:- use_module(library(pl/pl_term)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
-:- use_module(library(yall)).
 
 
 
 
 
-%! gv_attrs_scrape(+File) is det.
+%! gv_attrs_scrape(+File:atom) is det.
 
 gv_attrs_scrape(File):-
-  debug(gv, "Updating the GraphViz attributes table.", []),
-  call_to_stream(File, [In,Meta,Meta]>>gv_attrs_download(In)).
+  setup_call_cleanup(
+    open_any(File, write, Write, Close, []),
+    verbose(
+      gv_attrs_download(Write),
+      "Updating the GraphViz attributes table."
+    ),
+    close_any(Close)
+  ).
 
 
 gv_attrs_download(Write):-
@@ -74,7 +79,7 @@ gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html').
 
 % HELPERS %
 
-%! translate_default(+Default1, -Default2) is det.
+%! translate_default(+Default1:atom, -Default2:atom) is det.
 
 % The empty string is represented by the empty atom.
 translate_default('""', ''):- !.
diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl
index 102a02a..3ac5d44 100644
--- a/data/gv_color_scrape.pl
+++ b/data/gv_color_scrape.pl
@@ -1,36 +1,40 @@
 :- module(
   gv_color_scrape,
   [
-    gv_color_scrape/1 % +File
+    gv_color_scrape/1 % +File:atom
   ]
 ).
 
 /** <module> GraphViz: Scrape colors
 
 @author Wouter Beek
-@version 2015/10, 2016/07
+@version 2015/10
 */
 
 :- use_module(library(apply)).
-:- use_module(library(debug)).
 :- use_module(library(http/http_download)).
+:- use_module(library(iostream)).
 :- use_module(library(lists)).
-:- use_module(library(os/io)).
-:- use_module(library(pl_term)).
-:- use_module(library(print_ext)).
+:- use_module(library(msg_ext)).
+:- use_module(library(pl/pl_term)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
-:- use_module(library(yall)).
 
 
 
 
 
-%! gv_color_scrape(+File) is det.
+%! gv_color_scrape(+File:atom) is det.
 
 gv_color_scrape(File):-
-  debug(io, "Updating the GraphViz color table.", []),
-  call_to_stream(File, [In,Meta,Meta]>>gv_color_download(In)).
+  setup_call_cleanup(
+    open_any(File, write, Write, Close, []),
+    verbose(
+      gv_color_download(Write),
+      "Updating the GraphViz color table."
+    ),
+    close_any(Close)
+  ).
 
 
 gv_color_download(Write):-
diff --git a/pack.pl b/pack.pl
index 989108a..203cbfc 100644
--- a/pack.pl
+++ b/pack.pl
@@ -4,6 +4,6 @@ home('https://github.com/wouterbeek/plGraphViz').
 maintainer('Wouter Beek', 'me@wouterbeek.com').
 name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
-requires('Prolog-Library-Collection').
+requires('Prolog_Library_Collection').
 title(plGraphViz).
-version('0.0.1').
+version('0.0.17').
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
index 083dbb2..e6fb117 100644
--- a/prolog/fca/fca_viz.pl
+++ b/prolog/fca/fca_viz.pl
@@ -2,20 +2,24 @@
   fca_viz,
   [
     fca_export_graph/2, % +Context, -ExportGraph
-    fca_export_graph/3, % +Context, -ExportGraph, :Opts
-    fca_viz/2,          % +Context, ?File
-    fca_viz/3           % +Context, ?File, :Opts
+    fca_export_graph/3, % +Context:compound
+                        % -ExportGraph:compound
+                        % :Options:list(compound)
+    fca_viz/2, % +Context, ?File
+    fca_viz/3 % +Context:compound
+              % ?File:atom
+              % :Options:list(compound)
   ]
 ).
 
 /** <module> FCA visualization
 
 @author Wouter Beek
-@version 2015/11-2016/01
+@version 2015/11-2015/12
 */
 
-:- use_module(library(aggregate)).
-:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(dcg/dcg_collection)).
+:- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(dcg/dcg_pl)).
 :- use_module(library(fca/fca)).
 :- use_module(library(graph/build_export_graph)).
@@ -32,7 +36,7 @@
    ]).
 :- predicate_options(fca_viz/3, 3, [
      pass_to(fca_export_graph/3, 3),
-     pass_to(graph_viz/3, 3)
+     pass_to(gv_export/3, 3)
    ]).
 
 is_meta(concept_label).
@@ -84,15 +88,8 @@ fca_viz(Context, File):-
 
 fca_viz(Context, File, Opts1):-
   meta_options(is_meta, Opts1, Opts2),
-  statistics(process_cputime, Time1),
   fca_export_graph(Context, ExportG, Opts2),
-  ExportG = graph(_,_,Es,_),
-  aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N),
-  ignore(option(number_of_vertices(N), Opts2)),
-  statistics(process_cputime, Time2),
-  Time is Time2 - Time1,
-  ignore(option(process_cputime(Time), Opts2)),
-  graph_viz(ExportG, File, Opts2).
+  gv_export(ExportG, File, Opts2).
 
 
 
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index 5134069..caabaa0 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -50,12 +50,14 @@ Vertex coordinates:
 ---
 
 @author Wouter Beek
-@version 2015/07, 2015/09-2016/01
+@version 2015/07, 2015/09-2015/12
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(dcg/dcg_call)).
+:- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(graph/s/s_graph)).
+:- use_module(library(lambda)).
 :- use_module(library(list_ext)).
 :- use_module(library(option_ext)).
 :- use_module(library(ordsets)).
@@ -140,15 +142,11 @@ build_export_graph(G, ExportG):-
 build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):-
   graph_components(G, Vs, Es),
   meta_options(is_meta, Opts1, Opts2),
-  maplist(vertex_term0(Vs, Opts2), Vs, VTerms1),
+  maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1),
   build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2),
-  maplist(edge_term0(Vs, Opts2), Es, ETerms),
+  maplist(\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms),
   graph_attributes(GAttrs, Opts2).
 
-vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts).
-
-edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts).
-
 graph_components(graph(Vs,Es), Vs, Es):- !.
 graph_components(G, Vs, Es):-
   s_graph_components(G, Vs, Es).
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
index f55fce5..8fa78af 100644
--- a/prolog/gv/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -46,10 +46,11 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2015/07, 2015/11, 2016/02
+@version 2015/07, 2015/11
 */
 
-:- use_module(library(dcg/dcg_ext), except([string//1])).
+:- use_module(library(dcg/basics), except([string//1])).
+:- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(gv/gv_html)).
 
 
@@ -255,7 +256,7 @@ input_changeable(true) --> "!".
 %! pointList(+Points:list(compound))// .
 
 pointList(Points) -->
-  *(point, Points).
+  *(point, Points, []).
 
 
 
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 4a92d5b..b26af73 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -2,7 +2,7 @@
   gv_attrs,
   [
     gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph])
-                     % +Attr
+                     % +Attribute:nvpair
   ]
 ).
 :- ensure_loaded(library('gv/gv_attrs.data')).
@@ -10,12 +10,11 @@
 /** <module> GraphViz attributes
 
 @author Wouter Beek
-@version 2015/07-2015/08, 2015/10, 2016/03
+@version 2015/07-2015/08, 2015/10
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
-:- use_module(library(error)).
+:- use_module(library(dcg/dcg_call)).
 :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
@@ -24,20 +23,21 @@
 
 
 
-%! gv_attr_value(+Context, +Attr)// is det.
+%! gv_attr_value(
+%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
+%!   +Attribute:compound
+%! )// is det.
 % Uses the default value in case Value is uninstantiated.
 % Otherwise, performs a typecheck and converts the given value.
-%
-% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`.
 
 % Use the default if no value is given.
 gv_attr_value(Context, Name=Value) -->
   {
-    var(Value),
+    var(Value), !,
     gv_attr(Name, UsedBy, _, DefaultValue, _, _),
     % Check validity of context.
     memberchk(Context, UsedBy)
-  }, !,
+  },
   gv_attr_value(Context, Name=DefaultValue).
 gv_attr_value(Context, Name=Value) -->
   {
@@ -56,10 +56,8 @@ gv_attr_value(Context, Name=Value) -->
 
     % Check validity of Value w.r.t. minimum value -- if available.
     check_minimum(Value, Minimum)
-  }, !,
+  },
   dcg_call(gv_attr_type:Dcg, Value).
-gv_attr_value(_, Name=_) -->
-  {existence_error(gv_attr, Name)}.
 
 
 
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index ac319dc..3232c97 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -14,11 +14,12 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2015/08, 2015/10, 2016/02
+@version 2015/08, 2015/10
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/dcg_ext)).
+:- use_module(library(dcg/basics)).
+:- use_module(library(dcg/dcg_content)).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
 
@@ -34,12 +35,12 @@
 
 color(rgb(Red,Green,Blue)) --> !,
   "#",
-  #(3, hex_color, [Red,Green,Blue]).
+  '#'(3, hex_color, [Red,Green,Blue]).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
   color(rgb(Red,Green,Blue)),
   hex_color(Alpha).
 color(hsv(Hue,Saturation,Value)) --> !,
-  #(3, hsv_color, [Hue,Saturation,Value]).
+  '#'(3, hsv_color, [Hue,Saturation,Value], []).
 color(Name) -->
   {gv_color(_, Name)},
   atom(Name).
@@ -55,7 +56,7 @@ hsv_color(D, Head, Tail):-
 %! colorList(+Pairs:list(pair(compound,float)))// .
 
 colorList(L) -->
-  '+'(wc, L).
+  '+'(wc, L, []).
 
 wc(Color-Float) -->
   color(Color),
diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl
index 30c4263..e85849d 100644
--- a/prolog/gv/gv_dom.pl
+++ b/prolog/gv/gv_dom.pl
@@ -1,29 +1,35 @@
 :- module(
   gv_dom,
   [
-    gv_dom/3 % +ExportG, -Dom, +Opts
+    gv_dom/3 % +ExportGraph:compound
+             % -Dom:list(compound)
+             % +Options:list(compound)
   ]
 ).
 
 /** <module> GraphViz DOM
 
 @author Wouter Beek
-@version 2015/07, 2016/01
+@version 2015/07
 */
 
 :- use_module(library(gv/gv_file)).
 :- use_module(library(option)).
-:- use_module(library(svg/svg_ext)).
+:- use_module(library(svg/svg_dom)).
 
 
 
 
 
-%! gv_dom(+ExportG, -Dom, +Opts) is det.
+%! gv_dom(
+%!   +ExportGraph:compound,
+%!   -Dom:list(compound),
+%!   +Options:list(compound)
+%! ) is det.
 
 gv_dom(ExportG, Dom, Opts1):-
   % Make sure the file type of the output file is SvgDom.
   merge_options([output(svg)], Opts1, Opts2),
-  graph_viz(ExportG, ToFile, Opts2),
+  gv_export(ExportG, ToFile, Opts2),
   svg_dom(ToFile, Dom),
   delete_file(ToFile).
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
index 993fcee..4cf12a8 100644
--- a/prolog/gv/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -1,15 +1,18 @@
 :- module(
   gv_file,
   [
-    graph_viz/2, % +ExportG, ?File
-    graph_viz/3  % +ExportG, ?File, +Opts
+    gv_export/2, % +ExportGraph:compound
+                 % ?File:atom
+    gv_export/3 % +ExportGraph:compound
+                % ?File:atom
+                % +Options:list(nvpair)
   ]
 ).
 
 /** <module> GraphViz file
 
 @author Wouter Beek
-@version 2015/07, 2015/10-2015/11, 2016/01
+@version 2015/07, 2015/10-2015/11
 */
 
 :- use_module(library(code_ext)).
@@ -20,7 +23,7 @@
 :- use_module(library(os/process_ext)).
 :- use_module(library(string_ext)).
 
-:- predicate_options(graph_viz/3, 3, [
+:- predicate_options(gv_export/3, 3, [
      pass_to(file_to_gv/3, 3)
    ]).
 :- predicate_options(file_to_gv/3, 3, [
@@ -37,8 +40,14 @@ user:module_uses(gv_file, program(dot)).
 
 
 
-%! graph_viz(+ExportGraph:compound, ?File:atom) is det.
-%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
+%! gv_export(+ExportGraph:compound, ?File:atom) is det.
+% Wrapper around gv_export/3 with default options.
+
+gv_export(ExportG, File):-
+  gv_export(ExportG, File, []).
+
+
+%! gv_export(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
@@ -51,9 +60,7 @@ user:module_uses(gv_file, program(dot)).
 %     Default is `pdf`.
 %     For possible values see gv_output_type/1.
 
-graph_viz(ExportG, File):-
-  graph_viz(ExportG, File, []).
-graph_viz(ExportG, File, Opts):-
+gv_export(ExportG, File, Opts):-
   once(phrase(gv_graph(ExportG), Cs)),
 
   % Be thread-safe.
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index c95c9cc..5c937ce 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -20,6 +20,7 @@ In GraphViz vertices are called 'nodes'.
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
+:- use_module(library(dcg/dcg_content)).
 :- use_module(library(gv/gv_graph_comp)).
 :- use_module(library(lists)).
 :- use_module(library(option)).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 30ea9c5..aecbe07 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -24,11 +24,12 @@ a_list = ID "=" ID [","] [a_list]
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2015/07-2015/08, 2015/10-2016/01
+@version 2015/07-2015/08, 2015/10-2015/12
 */
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
+:- use_module(library(dcg/dcg_content)).
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_html)).
 :- use_module(library(error)).
@@ -85,7 +86,7 @@ gv_edge_operator(Dir) -->
 %! gv_generic_attributes_statement(
 %!   +Kind:oneof([edge,graph,node]),
 %!   +Indent:nonneg,
-%!   +CategoryAttrs
+%!   +CategoryAttributes:list(nvpair)
 %! )//
 % A GraphViz statement describing generic attributes for a category of items.
 %
@@ -199,8 +200,8 @@ gv_id(double_quoted_string(Atom)) --> !,
 % Numerals.
 gv_id(N) -->
   {number(N)}, !,
-  {number_codes(N, Cs)},
-  Cs.
+  % @tbd Use gv_numeral//1.
+  number(N).
 % Alpha-numeric strings.
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -263,22 +264,6 @@ gv_node_id(Id) --> {type_error(gv_node_id, Id)}.
 
 
 
-%! gv_numeral(-Number)// is det.
-% ```bnf
-% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
-% ```
-
-gv_numeral(N) -->
-  ("-" -> {Sg = -1} ; {Sg = 1}),
-  (   "."
-  ->  {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)}
-  ;   +(digit, Ds1), {pos_sum(Ds1, I)},
-      ("." -> *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0})
-  ),
-  {N is Sg * (I + Frac)}.
-
-
-
 %! gv_port// is det.
 
 gv_port --> gv_port_location, (gv_port_angle ; "").
@@ -294,7 +279,7 @@ gv_port_location --> ":[", gv_id(_), ",", gv_id(_), "]".
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
 % ```
-% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ )
+% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
 % ```
 
 gv_compass_pt('_') --> "_".
diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl
index b5c1368..3ee7de6 100644
--- a/prolog/gv/gv_html.pl
+++ b/prolog/gv/gv_html.pl
@@ -44,6 +44,7 @@ cell:   <TD> label </TD>
 */
 
 :- use_module(library(dcg/dcg_ext)).
+:- use_module(library(dcg/dcg_content)).
 :- use_module(library(html/html_dcg)).
 
 
@@ -209,12 +210,7 @@ text(Content)  --> text([Content]).
 % ```
 %
 % Supported attributes for BR:
-%   * `ALIGN="CENTER|LEFT|RIGHT"`
-%
-% Supported attributes for FONT:
-%   * COLOR="color"
-%   * FACE="fontname"
-%   * POINT-SIZE="value"
+%   - `ALIGN="CENTER|LEFT|RIGHT"`
 
 textitem(br(Attrs)) --> !,
   html_element(br, Attrs).
diff --git a/prolog/gv/gv_numeral.pl b/prolog/gv/gv_numeral.pl
new file mode 100644
index 0000000..4ba0d64
--- /dev/null
+++ b/prolog/gv/gv_numeral.pl
@@ -0,0 +1,87 @@
+:- module(
+  gv_numeral,
+  [
+    gv_numeral//1 % ?Value:number
+  ]
+).
+
+/** <module> GraphViz numeral
+
+@author Wouter Beek
+@version 2014/05-2014/06, 2015/01
+*/
+
+:- use_module(library(dcg/dcg_abnf)).
+:- use_module(library(dcg/dcg_abnf_common)).
+:- use_module(library(dcg/dcg_ascii)).
+:- use_module(library(math/math_ext)).
+:- use_module(library(math/positional)).
+:- use_module(library(math/radconv)).
+:- use_module(library(math/rational_ext)).
+
+
+
+
+
+%! gv_numeral(?Value:compound)// .
+%
+% # Syntax
+%
+% ```bnf
+% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
+% ```
+%
+% ## Generation
+%
+% In the generative case, three notations are allowed (also see below):
+%   1. (non-zero integer-part)
+%   2. (decimal-separator) (non-zero fractional)
+%   3. (non-zero integer-part) (decimal-separator) (non-zero fractional)
+%
+% The following notations are explicitly excluded due to verbosity:
+%   - (non-zero integer-part) (decimal-separator)
+%   - (non-zero integer-part) (decimal-separator) (zero fractional)
+%   - (zero integer-part) (decimal-separator) (non-zero fractional)
+%
+% The following notations are also excluded, but since they violate
+%  well-formedness:
+%   - (non-zero integer-part) (non-zero fractional)
+%   - (decimal-separator)
+
+gv_numeral(N) -->
+  (   {ground(N)}
+  ->  '[-]?'(N),
+      {N0 is abs(N)},
+      {rational_parts(N0, I, F)},
+      (   % [1] The fractional is zero, so only write the integer part
+          %     and do not write the decimal separator.
+          {F =:= 0}
+      ->  {positional(I, IW)},
+          '[0-9]+'(IW)
+      ;   % [2] The integer part is zero, so only write the fractional part,
+          %     preceded by the decimal separator.
+          {I =:= 0}
+      ->  ".",
+          {positional_fraction(FW, F)},
+          '[0-9]*'(FW)
+      ;   % [3] Both the integer part and the fractional are non-zero,
+          %     so write both of them, with the decimal separator in-between.
+          {positional(I, IW)},
+          '[0-9]+'(IW),
+          ".",
+          {positional_fraction(FW, F)},
+          '[0-9]*'(FW)
+      )
+  ;   '[-]?'(Sg),
+      (   ".",
+          '[0-9]+'(FW),
+          {IW = []}
+      ;   '[0-9]+'(IW),
+          (   ".",
+              '[0-9]*'(FW)
+          ;   {FW = []}
+          )
+      ),
+      {rational_parts_weights(N0, IW, FW)},
+      {N is copysign(N0, Sg)}
+  ).
diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl
deleted file mode 100644
index 4382aa6..0000000
--- a/prolog/tree/tree_viz.pl
+++ /dev/null
@@ -1,65 +0,0 @@
-:- module(
-  tree_viz,
-  [
-    tree_export_graph/2, % +Tree, ExportG
-    tree_export_graph/3, % +Tree, ExportG, +Opts
-    tree_viz/2,          % +Tree, ?File
-    tree_viz/3           % +Tree, ?File, +Opts
-  ]
-).
-
-/** <module> Tree visualization
-
-Export trees to GraphViz.
-
-@author Wouter Beek
-@version 2016/01-2016/02
-*/
-
-:- use_module(library(graph/build_export_graph)).
-:- use_module(library(gv/gv_file)).
-:- use_module(library(ordsets)).
-:- use_module(library(tree/l_tree)).
-:- use_module(library(tree/s_tree)).
-
-:- predicate_options(tree_export_graph/3, 3, [
-     pass_to(build_export_graph/4, 4)
-   ]).
-:- predicate_options(tree_viz/3, 3, [
-     pass_to(graph_viz/3, 3),
-     pass_to(tree_to_graph/3, 3)
-   ]).
-
-
-
-
-
-%! tree_export_graph(+Tree, -ExportG) is det.
-%! tree_export_graph(+Tree, -ExportG, +Opts) is det.
-% Opts are passed to build_export_graph/4.
-
-tree_export_graph(Tree, ExportG) :-
-  tree_export_graph(Tree, ExportG, []).
-
-tree_export_graph(Tree, ExportG, Opts) :-
-  (   is_s_tree(Tree)
-  ->  tree_to_graph(Tree, G)
-  ;   is_l_tree(Tree)
-  ->  l_tree_to_graph(Tree, G)
-  ),
-  build_export_graph(G, ExportG, Opts).
-
-
-
-%! tree_viz(+Tree, ?File) is det.
-%! tree_viz(+Tree, ?File, +Opts) is det.
-% Stores the given tree term into a GraphViz file.
-%
-% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3.
-
-tree_viz(Tree, File) :-
-  tree_viz(Tree, File, []).
-
-tree_viz(Tree, File, Opts) :-
-  tree_export_graph(Tree, ExportG, Opts),
-  graph_viz(ExportG, File, Opts).
diff --git a/test/test.pl b/test/test.pl
index 83dc023..c1bdca0 100644
--- a/test/test.pl
+++ b/test/test.pl
@@ -6,10 +6,8 @@
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_attr_type)).
 :- use_module(library(gv/gv_color)).
-:- use_module(library(gv/gv_dom)).
 :- use_module(library(gv/gv_file)).
 :- use_module(library(gv/gv_graph)).
 :- use_module(library(gv/gv_graph_comp)).
 :- use_module(library(gv/gv_html)).
-%/tree
-:- use_module(library(tree/tree_viz)).
+:- use_module(library(gv/gv_numeral)).
 
```
 
<h2 id="148"> 148: 正在比较变动前 4e2d9f1 和变动后 6359c9c </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl
index 3ee7de6..3e06db0 100644
--- a/prolog/gv/gv_html.pl
+++ b/prolog/gv/gv_html.pl
@@ -210,7 +210,12 @@ text(Content)  --> text([Content]).
 % ```
 %
 % Supported attributes for BR:
-%   - `ALIGN="CENTER|LEFT|RIGHT"`
+%   * `ALIGN="CENTER|LEFT|RIGHT"`
+%
+% Supported attributes for FONT:
+%   * COLOR="color"
+%   * FACE="fontname"
+%   * POINT-SIZE="value"
 
 textitem(br(Attrs)) --> !,
   html_element(br, Attrs).
 
```
 
<h2 id="149"> 149: 正在比较变动前 6359c9c 和变动后 00537d0 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
index e6fb117..4d0f7d1 100644
--- a/prolog/fca/fca_viz.pl
+++ b/prolog/fca/fca_viz.pl
@@ -2,22 +2,19 @@
   fca_viz,
   [
     fca_export_graph/2, % +Context, -ExportGraph
-    fca_export_graph/3, % +Context:compound
-                        % -ExportGraph:compound
-                        % :Options:list(compound)
-    fca_viz/2, % +Context, ?File
-    fca_viz/3 % +Context:compound
-              % ?File:atom
-              % :Options:list(compound)
+    fca_export_graph/3, % +Context, -ExportGraph, :Opts
+    fca_viz/2,          % +Context, ?File
+    fca_viz/3           % +Context, ?File, :Opts
   ]
 ).
 
 /** <module> FCA visualization
 
 @author Wouter Beek
-@version 2015/11-2015/12
+@version 2015/11-2016/01
 */
 
+:- use_module(library(aggregate)).
 :- use_module(library(dcg/dcg_collection)).
 :- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(dcg/dcg_pl)).
@@ -36,7 +33,7 @@
    ]).
 :- predicate_options(fca_viz/3, 3, [
      pass_to(fca_export_graph/3, 3),
-     pass_to(gv_export/3, 3)
+     pass_to(graph_viz/3, 3)
    ]).
 
 is_meta(concept_label).
@@ -88,8 +85,15 @@ fca_viz(Context, File):-
 
 fca_viz(Context, File, Opts1):-
   meta_options(is_meta, Opts1, Opts2),
+  statistics(process_cputime, Time1),
   fca_export_graph(Context, ExportG, Opts2),
-  gv_export(ExportG, File, Opts2).
+  ExportG = graph(_,_,Es,_),
+  aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N),
+  ignore(option(number_of_vertices(N), Opts2)),
+  statistics(process_cputime, Time2),
+  Time is Time2 - Time1,
+  ignore(option(process_cputime(Time), Opts2)),
+  graph_viz(ExportG, File, Opts2).
 
 
 
diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl
index e85849d..b0ece01 100644
--- a/prolog/gv/gv_dom.pl
+++ b/prolog/gv/gv_dom.pl
@@ -10,7 +10,7 @@
 /** <module> GraphViz DOM
 
 @author Wouter Beek
-@version 2015/07
+@version 2015/07, 2016/01
 */
 
 :- use_module(library(gv/gv_file)).
@@ -30,6 +30,6 @@
 gv_dom(ExportG, Dom, Opts1):-
   % Make sure the file type of the output file is SvgDom.
   merge_options([output(svg)], Opts1, Opts2),
-  gv_export(ExportG, ToFile, Opts2),
+  graph_viz(ExportG, ToFile, Opts2),
   svg_dom(ToFile, Dom),
   delete_file(ToFile).
diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl
index 4cf12a8..993fcee 100644
--- a/prolog/gv/gv_file.pl
+++ b/prolog/gv/gv_file.pl
@@ -1,18 +1,15 @@
 :- module(
   gv_file,
   [
-    gv_export/2, % +ExportGraph:compound
-                 % ?File:atom
-    gv_export/3 % +ExportGraph:compound
-                % ?File:atom
-                % +Options:list(nvpair)
+    graph_viz/2, % +ExportG, ?File
+    graph_viz/3  % +ExportG, ?File, +Opts
   ]
 ).
 
 /** <module> GraphViz file
 
 @author Wouter Beek
-@version 2015/07, 2015/10-2015/11
+@version 2015/07, 2015/10-2015/11, 2016/01
 */
 
 :- use_module(library(code_ext)).
@@ -23,7 +20,7 @@
 :- use_module(library(os/process_ext)).
 :- use_module(library(string_ext)).
 
-:- predicate_options(gv_export/3, 3, [
+:- predicate_options(graph_viz/3, 3, [
      pass_to(file_to_gv/3, 3)
    ]).
 :- predicate_options(file_to_gv/3, 3, [
@@ -40,14 +37,8 @@ user:module_uses(gv_file, program(dot)).
 
 
 
-%! gv_export(+ExportGraph:compound, ?File:atom) is det.
-% Wrapper around gv_export/3 with default options.
-
-gv_export(ExportG, File):-
-  gv_export(ExportG, File, []).
-
-
-%! gv_export(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
+%! graph_viz(+ExportGraph:compound, ?File:atom) is det.
+%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det.
 % Returns a file containing a GraphViz visualization of the given graph.
 %
 % The following options are supported:
@@ -60,7 +51,9 @@ gv_export(ExportG, File):-
 %     Default is `pdf`.
 %     For possible values see gv_output_type/1.
 
-gv_export(ExportG, File, Opts):-
+graph_viz(ExportG, File):-
+  graph_viz(ExportG, File, []).
+graph_viz(ExportG, File, Opts):-
   once(phrase(gv_graph(ExportG), Cs)),
 
   % Be thread-safe.
diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl
new file mode 100644
index 0000000..35430da
--- /dev/null
+++ b/prolog/tree/tree_viz.pl
@@ -0,0 +1,62 @@
+:- module(
+  gv_tree,
+  [
+    tree_export_graph/2, % +Tree, ExportG
+    tree_export_graph/3, % +Tree, ExportG, +Opts
+    tree_viz/2,          % +Tree, ?File
+    tree_viz/3           % +Tree, ?File, +Opts
+  ]
+).
+
+/** <module> Tree visualization
+
+Export trees to GraphViz.
+
+@author Wouter Beek
+@version 2016/01
+*/
+
+:- use_module(library(graph/build_export_graph)).
+:- use_module(library(gv/gv_file)).
+:- use_module(library(ordsets)).
+
+:- predicate_options(tree_export_graph/3, 3, [
+     pass_to(build_export_graph/4, 4)
+   ]).
+:- predicate_options(tree_viz/3, 3, [
+     pass_to(graph_viz/3, 3),
+     pass_to(tree_to_graph/3, 3)
+   ]).
+
+
+
+
+
+%! tree_export_graph(+Tree, -ExportG) is det.
+%! tree_export_graph(+Tree, -ExportG, +Opts) is det.
+% Opts are passed to build_export_graph/4.
+
+tree_export_graph(Tree, ExportG) :-
+  tree_export_graph(Tree, ExportG, []).
+tree_export_graph(t(H,Subtrees), ExportG, Opts) :-
+  maplist(tree_export_graph, Subtrees, ExportGs),
+  maplist(unpack_graph, ExportGs, SubVs, SubEs),
+  ord_union([[H]|SubVs], Vs),
+  ord_union(SubEs, Es),
+  build_export_graph(graph(Vs,Es), ExportG, Opts).
+
+unpack_graph(graph(Vs,Es), Vs, Es).
+
+
+
+%! tree_viz(+Tree, ?File) is det.
+%! tree_viz(+Tree, ?File, +Opts) is det.
+% Stores the given tree term into a GraphViz file.
+%
+% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3.
+
+tree_viz(Tree, File) :-
+  tree_viz(Tree, File, []).
+tree_viz(Tree, File, Opts) :-
+  tree_export_graph(Tree, ExportG, Opts),
+  graph_viz(ExportG, File, Opts).
 
```
 
<h2 id="150"> 150: 正在比较变动前 00537d0 和变动后 acadc39 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl
index 35430da..030dc0a 100644
--- a/prolog/tree/tree_viz.pl
+++ b/prolog/tree/tree_viz.pl
@@ -1,5 +1,5 @@
 :- module(
-  gv_tree,
+  tree_viz,
   [
     tree_export_graph/2, % +Tree, ExportG
     tree_export_graph/3, % +Tree, ExportG, +Opts
@@ -19,6 +19,7 @@ Export trees to GraphViz.
 :- use_module(library(graph/build_export_graph)).
 :- use_module(library(gv/gv_file)).
 :- use_module(library(ordsets)).
+:- use_module(library(tree/tree)).
 
 :- predicate_options(tree_export_graph/3, 3, [
      pass_to(build_export_graph/4, 4)
@@ -39,8 +40,8 @@ Export trees to GraphViz.
 tree_export_graph(Tree, ExportG) :-
   tree_export_graph(Tree, ExportG, []).
 tree_export_graph(t(H,Subtrees), ExportG, Opts) :-
-  maplist(tree_export_graph, Subtrees, ExportGs),
-  maplist(unpack_graph, ExportGs, SubVs, SubEs),
+  maplist(tree_to_graph, Subtrees, Gs),
+  maplist(unpack_graph, Gs, SubVs, SubEs),
   ord_union([[H]|SubVs], Vs),
   ord_union(SubEs, Es),
   build_export_graph(graph(Vs,Es), ExportG, Opts).
 
```
 
<h2 id="151"> 151: 正在比较变动前 acadc39 和变动后 51359c6 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index aecbe07..dacfbe9 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -24,7 +24,7 @@ a_list = ID "=" ID [","] [a_list]
 
 @author Wouter Beek
 @see http://www.graphviz.org/content/dot-language
-@version 2015/07-2015/08, 2015/10-2015/12
+@version 2015/07-2015/08, 2015/10-2016/01
 */
 
 :- use_module(library(apply)).
@@ -199,9 +199,7 @@ gv_id(double_quoted_string(Atom)) --> !,
   "\"", atom(Atom), "\"".
 % Numerals.
 gv_id(N) -->
-  {number(N)}, !,
-  % @tbd Use gv_numeral//1.
-  number(N).
+  gv_numeral(N), !.
 % Alpha-numeric strings.
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
@@ -264,6 +262,22 @@ gv_node_id(Id) --> {type_error(gv_node_id, Id)}.
 
 
 
+%! gv_numeral(-Number)// is det.
+% ```bnf
+% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
+% ```
+
+gv_numeral(N) -->
+  ("-" -> {Sg = -1} ; {Sg = 1}),
+  (   "."
+  ->  {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)}
+  ;   +(digit, Ds1), {pos_sum(Ds1, I)},
+      ("." -> *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0})
+  ),
+  {N is Sg * (I + Frac)}.
+
+
+
 %! gv_port// is det.
 
 gv_port --> gv_port_location, (gv_port_angle ; "").
@@ -279,7 +293,7 @@ gv_port_location --> ":[", gv_id(_), ",", gv_id(_), "]".
 
 %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// .
 % ```
-% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _)
+% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ )
 % ```
 
 gv_compass_pt('_') --> "_".
diff --git a/prolog/gv/gv_numeral.pl b/prolog/gv/gv_numeral.pl
deleted file mode 100644
index 4ba0d64..0000000
--- a/prolog/gv/gv_numeral.pl
+++ /dev/null
@@ -1,87 +0,0 @@
-:- module(
-  gv_numeral,
-  [
-    gv_numeral//1 % ?Value:number
-  ]
-).
-
-/** <module> GraphViz numeral
-
-@author Wouter Beek
-@version 2014/05-2014/06, 2015/01
-*/
-
-:- use_module(library(dcg/dcg_abnf)).
-:- use_module(library(dcg/dcg_abnf_common)).
-:- use_module(library(dcg/dcg_ascii)).
-:- use_module(library(math/math_ext)).
-:- use_module(library(math/positional)).
-:- use_module(library(math/radconv)).
-:- use_module(library(math/rational_ext)).
-
-
-
-
-
-%! gv_numeral(?Value:compound)// .
-%
-% # Syntax
-%
-% ```bnf
-% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? )
-% ```
-%
-% ## Generation
-%
-% In the generative case, three notations are allowed (also see below):
-%   1. (non-zero integer-part)
-%   2. (decimal-separator) (non-zero fractional)
-%   3. (non-zero integer-part) (decimal-separator) (non-zero fractional)
-%
-% The following notations are explicitly excluded due to verbosity:
-%   - (non-zero integer-part) (decimal-separator)
-%   - (non-zero integer-part) (decimal-separator) (zero fractional)
-%   - (zero integer-part) (decimal-separator) (non-zero fractional)
-%
-% The following notations are also excluded, but since they violate
-%  well-formedness:
-%   - (non-zero integer-part) (non-zero fractional)
-%   - (decimal-separator)
-
-gv_numeral(N) -->
-  (   {ground(N)}
-  ->  '[-]?'(N),
-      {N0 is abs(N)},
-      {rational_parts(N0, I, F)},
-      (   % [1] The fractional is zero, so only write the integer part
-          %     and do not write the decimal separator.
-          {F =:= 0}
-      ->  {positional(I, IW)},
-          '[0-9]+'(IW)
-      ;   % [2] The integer part is zero, so only write the fractional part,
-          %     preceded by the decimal separator.
-          {I =:= 0}
-      ->  ".",
-          {positional_fraction(FW, F)},
-          '[0-9]*'(FW)
-      ;   % [3] Both the integer part and the fractional are non-zero,
-          %     so write both of them, with the decimal separator in-between.
-          {positional(I, IW)},
-          '[0-9]+'(IW),
-          ".",
-          {positional_fraction(FW, F)},
-          '[0-9]*'(FW)
-      )
-  ;   '[-]?'(Sg),
-      (   ".",
-          '[0-9]+'(FW),
-          {IW = []}
-      ;   '[0-9]+'(IW),
-          (   ".",
-              '[0-9]*'(FW)
-          ;   {FW = []}
-          )
-      ),
-      {rational_parts_weights(N0, IW, FW)},
-      {N is copysign(N0, Sg)}
-  ).
 
```
 
<h2 id="152"> 152: 正在比较变动前 51359c6 和变动后 73047b3 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index caabaa0..6231cc3 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -50,18 +50,18 @@ Vertex coordinates:
 ---
 
 @author Wouter Beek
-@version 2015/07, 2015/09-2015/12
+@version 2015/07, 2015/09-2016/01
 */
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_call)).
 :- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(graph/s/s_graph)).
-:- use_module(library(lambda)).
 :- use_module(library(list_ext)).
 :- use_module(library(option_ext)).
 :- use_module(library(ordsets)).
 :- use_module(library(pairs)).
+:- use_module(library(yall)).
 
 :- predicate_options(build_export_graph/4, 4, [
      pass_to(edge_term/3, 3),
@@ -142,9 +142,9 @@ build_export_graph(G, ExportG):-
 build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):-
   graph_components(G, Vs, Es),
   meta_options(is_meta, Opts1, Opts2),
-  maplist(\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1),
+  maplist([V,VTerm]>>vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1),
   build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2),
-  maplist(\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms),
+  maplist([E,ETerm]>>edge_term(Vs, E, ETerm, Opts2), Es, ETerms),
   graph_attributes(GAttrs, Opts2).
 
 graph_components(graph(Vs,Es), Vs, Es):- !.
 
```
 
<h2 id="153"> 153: 正在比较变动前 73047b3 和变动后 e4c4586 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl
index 030dc0a..071d3c0 100644
--- a/prolog/tree/tree_viz.pl
+++ b/prolog/tree/tree_viz.pl
@@ -13,13 +13,14 @@
 Export trees to GraphViz.
 
 @author Wouter Beek
-@version 2016/01
+@version 2016/01-2016/02
 */
 
 :- use_module(library(graph/build_export_graph)).
 :- use_module(library(gv/gv_file)).
 :- use_module(library(ordsets)).
-:- use_module(library(tree/tree)).
+:- use_module(library(tree/l_tree)).
+:- use_module(library(tree/s_tree)).
 
 :- predicate_options(tree_export_graph/3, 3, [
      pass_to(build_export_graph/4, 4)
@@ -39,14 +40,14 @@ Export trees to GraphViz.
 
 tree_export_graph(Tree, ExportG) :-
   tree_export_graph(Tree, ExportG, []).
-tree_export_graph(t(H,Subtrees), ExportG, Opts) :-
-  maplist(tree_to_graph, Subtrees, Gs),
-  maplist(unpack_graph, Gs, SubVs, SubEs),
-  ord_union([[H]|SubVs], Vs),
-  ord_union(SubEs, Es),
-  build_export_graph(graph(Vs,Es), ExportG, Opts).
 
-unpack_graph(graph(Vs,Es), Vs, Es).
+tree_export_graph(Tree, ExportG, Opts) :-
+  (   is_s_tree(Tree)
+  ->  s_tree_to_graph(Tree, G)
+  ;   is_l_tree(Tree)
+  ->  l_tree_to_graph(Tree, G)
+  ),
+  build_export_graph(G, ExportG, Opts).
 
 
 
@@ -58,6 +59,7 @@ unpack_graph(graph(Vs,Es), Vs, Es).
 
 tree_viz(Tree, File) :-
   tree_viz(Tree, File, []).
+
 tree_viz(Tree, File, Opts) :-
   tree_export_graph(Tree, ExportG, Opts),
   graph_viz(ExportG, File, Opts).
 
```
 
<h2 id="154"> 154: 正在比较变动前 e4c4586 和变动后 7b991bb </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
index 8fa78af..d7f133e 100644
--- a/prolog/gv/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -46,10 +46,10 @@
 /** <module> GraphViz attribute types
 
 @author Wouter Beek
-@version 2015/07, 2015/11
+@version 2015/07, 2015/11, 2016/02
 */
 
-:- use_module(library(dcg/basics), except([string//1])).
+:- use_module(library(dcg/dcg_ext), except([string//1])).
 :- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(gv/gv_html)).
 
@@ -256,7 +256,7 @@ input_changeable(true) --> "!".
 %! pointList(+Points:list(compound))// .
 
 pointList(Points) -->
-  *(point, Points, []).
+  *(point, Points).
 
 
 
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index 3232c97..faa3828 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -14,11 +14,11 @@
 @author Wouter Beek
 @tbd Color value `transparent` is only available in the output formats
      ps, svg, fig, vmrl, and the bitmap formats.
-@version 2015/08, 2015/10
+@version 2015/08, 2015/10, 2016/02
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/basics)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(dcg/dcg_content)).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
@@ -40,7 +40,7 @@ color(rgbs(Red,Green,Blue,Alpha)) --> !,
   color(rgb(Red,Green,Blue)),
   hex_color(Alpha).
 color(hsv(Hue,Saturation,Value)) --> !,
-  '#'(3, hsv_color, [Hue,Saturation,Value], []).
+  '#'(3, hsv_color, [Hue,Saturation,Value]).
 color(Name) -->
   {gv_color(_, Name)},
   atom(Name).
@@ -56,7 +56,7 @@ hsv_color(D, Head, Tail):-
 %! colorList(+Pairs:list(pair(compound,float)))// .
 
 colorList(L) -->
-  '+'(wc, L, []).
+  '+'(wc, L).
 
 wc(Color-Float) -->
   color(Color),
diff --git a/test/test.pl b/test/test.pl
index c1bdca0..83dc023 100644
--- a/test/test.pl
+++ b/test/test.pl
@@ -6,8 +6,10 @@
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_attr_type)).
 :- use_module(library(gv/gv_color)).
+:- use_module(library(gv/gv_dom)).
 :- use_module(library(gv/gv_file)).
 :- use_module(library(gv/gv_graph)).
 :- use_module(library(gv/gv_graph_comp)).
 :- use_module(library(gv/gv_html)).
-:- use_module(library(gv/gv_numeral)).
+%/tree
+:- use_module(library(tree/tree_viz)).
 
```
 
<h2 id="155"> 155: 正在比较变动前 7b991bb 和变动后 fa1518f </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
index 190b988..75a83a0 100644
--- a/data/gv_attrs_scrape.pl
+++ b/data/gv_attrs_scrape.pl
@@ -25,8 +25,7 @@ gv_attr(
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/basics), except([string//1])).
-:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(gv/gv_attr_type)).
 :- use_module(library(http/http_download)).
 :- use_module(library(iostream)).
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
index 4d0f7d1..1392db9 100644
--- a/prolog/fca/fca_viz.pl
+++ b/prolog/fca/fca_viz.pl
@@ -16,7 +16,7 @@
 
 :- use_module(library(aggregate)).
 :- use_module(library(dcg/dcg_collection)).
-:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(dcg/dcg_pl)).
 :- use_module(library(fca/fca)).
 :- use_module(library(graph/build_export_graph)).
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index 6231cc3..ef74aa7 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -54,8 +54,7 @@ Vertex coordinates:
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/dcg_call)).
-:- use_module(library(dcg/dcg_phrase)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(graph/s/s_graph)).
 :- use_module(library(list_ext)).
 :- use_module(library(option_ext)).
diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl
index d7f133e..f55fce5 100644
--- a/prolog/gv/gv_attr_type.pl
+++ b/prolog/gv/gv_attr_type.pl
@@ -50,7 +50,6 @@
 */
 
 :- use_module(library(dcg/dcg_ext), except([string//1])).
-:- use_module(library(dcg/dcg_phrase)).
 :- use_module(library(gv/gv_html)).
 
 
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index b26af73..11230b9 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -14,7 +14,7 @@
 */
 
 :- use_module(library(apply)).
-:- use_module(library(dcg/dcg_call)).
+:- use_module(library(dcg/dcg_ext)).
 :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index faa3828..a63d9c4 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -19,7 +19,6 @@
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
-:- use_module(library(dcg/dcg_content)).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
 
diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl
index 5c937ce..c95c9cc 100644
--- a/prolog/gv/gv_graph.pl
+++ b/prolog/gv/gv_graph.pl
@@ -20,7 +20,6 @@ In GraphViz vertices are called 'nodes'.
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
-:- use_module(library(dcg/dcg_content)).
 :- use_module(library(gv/gv_graph_comp)).
 :- use_module(library(lists)).
 :- use_module(library(option)).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index dacfbe9..367534b 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -29,7 +29,6 @@ a_list = ID "=" ID [","] [a_list]
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
-:- use_module(library(dcg/dcg_content)).
 :- use_module(library(gv/gv_attrs)).
 :- use_module(library(gv/gv_html)).
 :- use_module(library(error)).
diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl
index 3e06db0..b5c1368 100644
--- a/prolog/gv/gv_html.pl
+++ b/prolog/gv/gv_html.pl
@@ -44,7 +44,6 @@ cell:   <TD> label </TD>
 */
 
 :- use_module(library(dcg/dcg_ext)).
-:- use_module(library(dcg/dcg_content)).
 :- use_module(library(html/html_dcg)).
 
 
 
```
 
<h2 id="156"> 156: 正在比较变动前 fa1518f 和变动后 8593ed6 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl
index ef74aa7..5134069 100644
--- a/prolog/graph/build_export_graph.pl
+++ b/prolog/graph/build_export_graph.pl
@@ -60,7 +60,6 @@ Vertex coordinates:
 :- use_module(library(option_ext)).
 :- use_module(library(ordsets)).
 :- use_module(library(pairs)).
-:- use_module(library(yall)).
 
 :- predicate_options(build_export_graph/4, 4, [
      pass_to(edge_term/3, 3),
@@ -141,11 +140,15 @@ build_export_graph(G, ExportG):-
 build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):-
   graph_components(G, Vs, Es),
   meta_options(is_meta, Opts1, Opts2),
-  maplist([V,VTerm]>>vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1),
+  maplist(vertex_term0(Vs, Opts2), Vs, VTerms1),
   build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2),
-  maplist([E,ETerm]>>edge_term(Vs, E, ETerm, Opts2), Es, ETerms),
+  maplist(edge_term0(Vs, Opts2), Es, ETerms),
   graph_attributes(GAttrs, Opts2).
 
+vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts).
+
+edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts).
+
 graph_components(graph(Vs,Es), Vs, Es):- !.
 graph_components(G, Vs, Es):-
   s_graph_components(G, Vs, Es).
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index 367534b..f316cb7 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -198,7 +198,9 @@ gv_id(double_quoted_string(Atom)) --> !,
   "\"", atom(Atom), "\"".
 % Numerals.
 gv_id(N) -->
-  gv_numeral(N), !.
+  {number(N)}, !,
+  {number_codes(N, Cs)},
+  Cs.
 % Alpha-numeric strings.
 gv_id(Atom) -->
   {atom_codes(Atom, [H|T])},
 
```
 
<h2 id="157"> 157: 正在比较变动前 8593ed6 和变动后 cc53b1e </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 11230b9..1e7c93b 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -10,11 +10,12 @@
 /** <module> GraphViz attributes
 
 @author Wouter Beek
-@version 2015/07-2015/08, 2015/10
+@version 2015/07-2015/08, 2015/10, 2016/03
 */
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
+:- use_module(library(error)).
 :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]).
 :- use_module(library(lists)).
 :- use_module(library(os/file_ext)).
@@ -33,11 +34,11 @@
 % Use the default if no value is given.
 gv_attr_value(Context, Name=Value) -->
   {
-    var(Value), !,
+    var(Value),
     gv_attr(Name, UsedBy, _, DefaultValue, _, _),
     % Check validity of context.
     memberchk(Context, UsedBy)
-  },
+  }, !,
   gv_attr_value(Context, Name=DefaultValue).
 gv_attr_value(Context, Name=Value) -->
   {
@@ -56,8 +57,10 @@ gv_attr_value(Context, Name=Value) -->
 
     % Check validity of Value w.r.t. minimum value -- if available.
     check_minimum(Value, Minimum)
-  },
+  }, !,
   dcg_call(gv_attr_type:Dcg, Value).
+gv_attr_value(_, Name=_) -->
+  {existence_error(gv_attr, Name)}.
 
 
 
 
```
 
<h2 id="158"> 158: 正在比较变动前 cc53b1e 和变动后 202a241 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl
index 071d3c0..4382aa6 100644
--- a/prolog/tree/tree_viz.pl
+++ b/prolog/tree/tree_viz.pl
@@ -43,7 +43,7 @@ tree_export_graph(Tree, ExportG) :-
 
 tree_export_graph(Tree, ExportG, Opts) :-
   (   is_s_tree(Tree)
-  ->  s_tree_to_graph(Tree, G)
+  ->  tree_to_graph(Tree, G)
   ;   is_l_tree(Tree)
   ->  l_tree_to_graph(Tree, G)
   ),
 
```
 
<h2 id="159"> 159: 正在比较变动前 202a241 和变动后 858b5fb </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
index 75a83a0..d43346f 100644
--- a/data/gv_attrs_scrape.pl
+++ b/data/gv_attrs_scrape.pl
@@ -30,8 +30,8 @@ gv_attr(
 :- use_module(library(http/http_download)).
 :- use_module(library(iostream)).
 :- use_module(library(lists)).
-:- use_module(library(msg_ext)).
 :- use_module(library(pl/pl_term)).
+:- use_module(library(print_ext)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
 
diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl
index 3ac5d44..5d220d9 100644
--- a/data/gv_color_scrape.pl
+++ b/data/gv_color_scrape.pl
@@ -15,8 +15,8 @@
 :- use_module(library(http/http_download)).
 :- use_module(library(iostream)).
 :- use_module(library(lists)).
-:- use_module(library(msg_ext)).
 :- use_module(library(pl/pl_term)).
+:- use_module(library(print_ext)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
 
 
```
 
<h2 id="160"> 160: 正在比较变动前 858b5fb 和变动后 260b62d </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl
index 1e7c93b..4a92d5b 100644
--- a/prolog/gv/gv_attrs.pl
+++ b/prolog/gv/gv_attrs.pl
@@ -2,7 +2,7 @@
   gv_attrs,
   [
     gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph])
-                     % +Attribute:nvpair
+                     % +Attr
   ]
 ).
 :- ensure_loaded(library('gv/gv_attrs.data')).
@@ -24,12 +24,11 @@
 
 
 
-%! gv_attr_value(
-%!   +Context:oneof([cluster,edge,graph,node,subgraph]),
-%!   +Attribute:compound
-%! )// is det.
+%! gv_attr_value(+Context, +Attr)// is det.
 % Uses the default value in case Value is uninstantiated.
 % Otherwise, performs a typecheck and converts the given value.
+%
+% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`.
 
 % Use the default if no value is given.
 gv_attr_value(Context, Name=Value) -->
diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl
index f316cb7..30ea9c5 100644
--- a/prolog/gv/gv_graph_comp.pl
+++ b/prolog/gv/gv_graph_comp.pl
@@ -85,7 +85,7 @@ gv_edge_operator(Dir) -->
 %! gv_generic_attributes_statement(
 %!   +Kind:oneof([edge,graph,node]),
 %!   +Indent:nonneg,
-%!   +CategoryAttributes:list(nvpair)
+%!   +CategoryAttrs
 %! )//
 % A GraphViz statement describing generic attributes for a category of items.
 %
 
```
 
<h2 id="161"> 161: 正在比较变动前 260b62d 和变动后 a6886ca </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl
index b0ece01..30c4263 100644
--- a/prolog/gv/gv_dom.pl
+++ b/prolog/gv/gv_dom.pl
@@ -1,9 +1,7 @@
 :- module(
   gv_dom,
   [
-    gv_dom/3 % +ExportGraph:compound
-             % -Dom:list(compound)
-             % +Options:list(compound)
+    gv_dom/3 % +ExportG, -Dom, +Opts
   ]
 ).
 
@@ -15,17 +13,13 @@
 
 :- use_module(library(gv/gv_file)).
 :- use_module(library(option)).
-:- use_module(library(svg/svg_dom)).
+:- use_module(library(svg/svg_ext)).
 
 
 
 
 
-%! gv_dom(
-%!   +ExportGraph:compound,
-%!   -Dom:list(compound),
-%!   +Options:list(compound)
-%! ) is det.
+%! gv_dom(+ExportG, -Dom, +Opts) is det.
 
 gv_dom(ExportG, Dom, Opts1):-
   % Make sure the file type of the output file is SvgDom.
 
```
 
<h2 id="162"> 162: 正在比较变动前 a6886ca 和变动后 41914a2 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/pack.pl b/pack.pl
index 203cbfc..989108a 100644
--- a/pack.pl
+++ b/pack.pl
@@ -4,6 +4,6 @@ home('https://github.com/wouterbeek/plGraphViz').
 maintainer('Wouter Beek', 'me@wouterbeek.com').
 name(plGraphViz).
 packager('Wouter Beek', 'me@wouterbeek.com').
-requires('Prolog_Library_Collection').
+requires('Prolog-Library-Collection').
 title(plGraphViz).
-version('0.0.17').
+version('0.0.1').
 
```
 
<h2 id="163"> 163: 正在比较变动前 41914a2 和变动后 05a5fd2 </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
index d43346f..8730e13 100644
--- a/data/gv_attrs_scrape.pl
+++ b/data/gv_attrs_scrape.pl
@@ -30,7 +30,7 @@ gv_attr(
 :- use_module(library(http/http_download)).
 :- use_module(library(iostream)).
 :- use_module(library(lists)).
-:- use_module(library(pl/pl_term)).
+:- use_module(library(pl_term)).
 :- use_module(library(print_ext)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl
index 5d220d9..7bfc290 100644
--- a/data/gv_color_scrape.pl
+++ b/data/gv_color_scrape.pl
@@ -15,7 +15,7 @@
 :- use_module(library(http/http_download)).
 :- use_module(library(iostream)).
 :- use_module(library(lists)).
-:- use_module(library(pl/pl_term)).
+:- use_module(library(pl_term)).
 :- use_module(library(print_ext)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl
index a63d9c4..ac319dc 100644
--- a/prolog/gv/gv_color.pl
+++ b/prolog/gv/gv_color.pl
@@ -34,12 +34,12 @@
 
 color(rgb(Red,Green,Blue)) --> !,
   "#",
-  '#'(3, hex_color, [Red,Green,Blue]).
+  #(3, hex_color, [Red,Green,Blue]).
 color(rgbs(Red,Green,Blue,Alpha)) --> !,
   color(rgb(Red,Green,Blue)),
   hex_color(Alpha).
 color(hsv(Hue,Saturation,Value)) --> !,
-  '#'(3, hsv_color, [Hue,Saturation,Value]).
+  #(3, hsv_color, [Hue,Saturation,Value]).
 color(Name) -->
   {gv_color(_, Name)},
   atom(Name).
 
```
 
<h2 id="164"> 164: 正在比较变动前 05a5fd2 和变动后 fd6c59b </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl
index 1392db9..083dbb2 100644
--- a/prolog/fca/fca_viz.pl
+++ b/prolog/fca/fca_viz.pl
@@ -15,7 +15,6 @@
 */
 
 :- use_module(library(aggregate)).
-:- use_module(library(dcg/dcg_collection)).
 :- use_module(library(dcg/dcg_ext)).
 :- use_module(library(dcg/dcg_pl)).
 :- use_module(library(fca/fca)).
 
```
 
<h2 id="165"> 165: 正在比较变动前 fd6c59b 和变动后 121e68f </h2>
[back to content](#compare)
 
``` diff
 
diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl
index 8730e13..bcc7654 100644
--- a/data/gv_attrs_scrape.pl
+++ b/data/gv_attrs_scrape.pl
@@ -1,7 +1,7 @@
 :- module(
   gv_attrs_scrape,
   [
-    gv_attrs_scrape/1 % +File:atom
+    gv_attrs_scrape/1 % +File
   ]
 ).
 
@@ -11,45 +11,41 @@ Writes compound terms of the following form to file:
 
 ```prolog
 gv_attr(
-  ?Name:atom,
+  ?Name,
   ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])),
   ?Types:list(atom),
   ?Default,
   ?Minimum,
-  ?Notes:atom
+  ?Notes
 ) is nondet.
 ```
 
 @author Wouter Beek
-@version 2015/10
+@version 2015/10, 2016/07
 */
 
 :- use_module(library(apply)).
 :- use_module(library(dcg/dcg_ext)).
+:- use_module(library(debug)).
 :- use_module(library(gv/gv_attr_type)).
 :- use_module(library(http/http_download)).
-:- use_module(library(iostream)).
 :- use_module(library(lists)).
+:- use_module(library(os/io)).
 :- use_module(library(pl_term)).
 :- use_module(library(print_ext)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
+:- use_module(library(yall)).
 
 
 
 
 
-%! gv_attrs_scrape(+File:atom) is det.
+%! gv_attrs_scrape(+File) is det.
 
 gv_attrs_scrape(File):-
-  setup_call_cleanup(
-    open_any(File, write, Write, Close, []),
-    verbose(
-      gv_attrs_download(Write),
-      "Updating the GraphViz attributes table."
-    ),
-    close_any(Close)
-  ).
+  debug(gv, "Updating the GraphViz attributes table.", []),
+  call_to_stream(File, [In,Meta,Meta]>>gv_attrs_download(In)).
 
 
 gv_attrs_download(Write):-
@@ -78,7 +74,7 @@ gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html').
 
 % HELPERS %
 
-%! translate_default(+Default1:atom, -Default2:atom) is det.
+%! translate_default(+Default1, -Default2) is det.
 
 % The empty string is represented by the empty atom.
 translate_default('""', ''):- !.
diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl
index 7bfc290..102a02a 100644
--- a/data/gv_color_scrape.pl
+++ b/data/gv_color_scrape.pl
@@ -1,40 +1,36 @@
 :- module(
   gv_color_scrape,
   [
-    gv_color_scrape/1 % +File:atom
+    gv_color_scrape/1 % +File
   ]
 ).
 
 /** <module> GraphViz: Scrape colors
 
 @author Wouter Beek
-@version 2015/10
+@version 2015/10, 2016/07
 */
 
 :- use_module(library(apply)).
+:- use_module(library(debug)).
 :- use_module(library(http/http_download)).
-:- use_module(library(iostream)).
 :- use_module(library(lists)).
+:- use_module(library(os/io)).
 :- use_module(library(pl_term)).
 :- use_module(library(print_ext)).
 :- use_module(library(xpath)).
 :- use_module(library(xpath/xpath_table)).
+:- use_module(library(yall)).
 
 
 
 
 
-%! gv_color_scrape(+File:atom) is det.
+%! gv_color_scrape(+File) is det.
 
 gv_color_scrape(File):-
-  setup_call_cleanup(
-    open_any(File, write, Write, Close, []),
-    verbose(
-      gv_color_download(Write),
-      "Updating the GraphViz color table."
-    ),
-    close_any(Close)
-  ).
+  debug(io, "Updating the GraphViz color table.", []),
+  call_to_stream(File, [In,Meta,Meta]>>gv_color_download(In)).
 
 
 gv_color_download(Write):-
 
```
 
总共进行了 166 次比较

<h2 id="time">3. 时间变化表</h2>




[1. 6ced089      Sun Jun 1 16:12:35 2014 +0200       2 years, 4 months ago3d8b517      Sun Jun 1 16:16:39 2014 +0200       2 years, 4 months ago](#1)

[2. ccd942c      Sun Jun 1 18:20:43 2014 +0200       2 years, 4 months ago](#2)

[3. 0b3607d      Wed Jun 4 08:57:28 2014 +0200       2 years, 4 months ago](#3)

[4. acf4ec3      Thu Jun 5 08:38:17 2014 +0200       2 years, 4 months ago](#4)

[5. c1ad93f      Fri Jun 6 10:15:07 2014 +0200       2 years, 4 months ago](#5)

[6. c7c8226      Sat Jun 14 05:01:29 2014 +0200       2 years, 3 months ago](#6)

[7. 0cd29ea      Sat Jun 14 15:55:52 2014 +0200       2 years, 3 months ago](#7)

[8. 13f7fbf      Mon Jun 16 07:40:22 2014 +0200       2 years, 3 months ago](#8)

[9. 5520d75      Thu Jun 19 12:39:17 2014 +0200       2 years, 3 months ago](#9)

[10. 8656a39      Thu Jun 19 13:08:10 2014 +0200       2 years, 3 months ago](#10)

[11. 7421981      Tue Jul 8 13:55:06 2014 +0200       2 years, 2 months ago](#11)

[12. bfcb63b      Tue Jul 22 20:14:34 2014 +0200       2 years, 2 months ago](#12)

[13. 84afd69      Sun Jul 27 21:09:43 2014 +0200       2 years, 2 months ago](#13)

[14. c2bfd3f      Sun Jul 27 23:12:11 2014 +0200       2 years, 2 months ago](#14)

[15. fa364fc      Mon Jul 28 10:20:16 2014 +0200       2 years, 2 months ago](#15)

[16. 3c900f4      Mon Jul 28 19:41:10 2014 +0200       2 years, 2 months ago](#16)

[17. 65cc1c3      Mon Jul 28 20:45:42 2014 +0200       2 years, 2 months ago](#17)

[18. 20e1f21      Mon Jul 28 21:27:58 2014 +0200       2 years, 2 months ago](#18)

[19. e2e9fc1      Tue Jul 29 06:03:54 2014 +0200       2 years, 2 months ago](#19)

[20. 4b72d15      Thu Jul 31 17:43:40 2014 +0200       2 years, 2 months ago](#20)

[21. 54248f7      Thu Jul 31 23:50:20 2014 +0200       2 years, 2 months ago](#21)

[22. 3b9a773      Sun Aug 3 13:57:00 2014 +0200       2 years, 2 months ago](#22)

[23. 1e9a910      Sun Aug 3 18:45:43 2014 +0200       2 years, 2 months ago](#23)

[24. 6dc1cf5      Sun Aug 3 21:37:53 2014 +0200       2 years, 2 months ago](#24)

[25. 76ea35d      Wed Aug 6 12:57:55 2014 +0200       2 years, 2 months ago](#25)

[26. 2a2728b      Wed Aug 6 12:59:11 2014 +0200       2 years, 2 months ago](#26)

[27. 7f9fc82      Wed Aug 6 13:03:10 2014 +0200       2 years, 2 months ago](#27)

[28. 5baddb5      Wed Aug 6 15:58:46 2014 +0200       2 years, 2 months ago](#28)

[29. 95bfe7f      Fri Aug 15 19:38:14 2014 +0200       2 years, 1 month ago](#29)

[30. f1322fa      Tue Aug 19 09:37:49 2014 +0200       2 years, 1 month ago](#30)

[31. 474bea8      Tue Aug 19 09:41:38 2014 +0200       2 years, 1 month ago](#31)

[32. 262cb2a      Tue Aug 19 10:29:37 2014 +0200       2 years, 1 month ago](#32)

[33. e7e6033      Fri Aug 22 09:46:08 2014 +0200       2 years, 1 month ago](#33)

[34. e17bf44      Wed Aug 27 16:55:24 2014 +0200       2 years, 1 month ago](#34)

[35. 6596aa1      Fri Sep 12 12:28:26 2014 +0200       2 years ago](#35)

[36. 87e8982      Sat Sep 13 19:35:04 2014 +0200       2 years ago](#36)

[37. cb6aada      Tue Sep 16 13:16:25 2014 +0200       2 years ago](#37)

[38. 7c8125b      Fri Oct 17 01:53:51 2014 +0200       1 year, 11 months ago](#38)

[39. 6a38f95      Sun Oct 19 01:24:45 2014 +0200       1 year, 11 months ago](#39)

[40. ebb86cd      Fri Oct 31 21:02:15 2014 +0100       1 year, 11 months ago](#40)

[41. 1549e44      Sun Nov 2 02:14:33 2014 +0100       1 year, 11 months ago](#41)

[42. 61ddca2      Mon Nov 3 16:24:02 2014 +0100       1 year, 11 months ago](#42)

[43. 26f07e7      Mon Nov 3 16:24:09 2014 +0100       1 year, 11 months ago](#43)

[44. f78b4f8      Tue Nov 4 09:03:10 2014 +0100       1 year, 11 months ago](#44)

[45. 3109362      Tue Nov 11 11:48:43 2014 +0100       1 year, 10 months ago](#45)

[46. df0ab09      Tue Nov 11 11:48:51 2014 +0100       1 year, 10 months ago](#46)

[47. 73e976b      Tue Nov 11 12:03:09 2014 +0100       1 year, 10 months ago](#47)

[48. 090c25d      Tue Nov 11 21:33:59 2014 +0100       1 year, 10 months ago](#48)

[49. daed8bf      Thu Nov 13 16:58:28 2014 +0100       1 year, 10 months ago](#49)

[50. 528b9af      Thu Nov 13 20:06:16 2014 +0100       1 year, 10 months ago](#50)

[51. e594ae6      Fri Nov 14 06:30:50 2014 +0100       1 year, 10 months ago](#51)

[52. bbefbf7      Tue Nov 18 21:35:37 2014 +0100       1 year, 10 months ago](#52)

[53. 0cc5421      Wed Nov 19 07:34:19 2014 +0100       1 year, 10 months ago](#53)

[54. dbc602d      Wed Nov 19 07:36:24 2014 +0100       1 year, 10 months ago](#54)

[55. a2456df      Wed Nov 19 07:50:35 2014 +0100       1 year, 10 months ago](#55)

[56. 20c6017      Thu Nov 20 13:22:27 2014 +0100       1 year, 10 months ago](#56)

[57. f694d77      Fri Nov 21 17:40:21 2014 +0100       1 year, 10 months ago](#57)

[58. af5d96d      Tue Nov 25 18:19:59 2014 +0100       1 year, 10 months ago](#58)

[59. ab4b616      Tue Nov 25 18:30:40 2014 +0100       1 year, 10 months ago](#59)

[60. 74bd19d      Tue Nov 25 19:26:26 2014 +0100       1 year, 10 months ago](#60)

[61. 8ffff6f      Tue Nov 25 19:54:56 2014 +0100       1 year, 10 months ago](#61)

[62. ac3423a      Tue Nov 25 19:55:05 2014 +0100       1 year, 10 months ago](#62)

[63. 57932e4      Tue Nov 25 19:55:29 2014 +0100       1 year, 10 months ago](#63)

[64. 315b16e      Wed Nov 26 10:37:08 2014 +0100       1 year, 10 months ago](#64)

[65. 898b5d2      Thu Nov 27 19:38:08 2014 +0100       1 year, 10 months ago](#65)

[66. 4279a49      Fri Nov 28 08:09:47 2014 +0100       1 year, 10 months ago](#66)

[67. c173073      Sat Nov 29 09:16:14 2014 +0100       1 year, 10 months ago](#67)

[68. 107c515      Sat Nov 29 14:46:11 2014 +0100       1 year, 10 months ago](#68)

[69. 8f574bb      Tue Dec 2 21:15:18 2014 +0100       1 year, 10 months ago](#69)

[70. d7088dd      Thu Dec 11 09:40:51 2014 +0100       1 year, 9 months ago](#70)

[71. 94ed05d      Sun Dec 14 17:06:03 2014 +0100       1 year, 9 months ago](#71)

[72. f481060      Tue Dec 16 13:41:32 2014 +0100       1 year, 9 months ago](#72)

[73. ce492ef      Tue Dec 16 19:44:03 2014 +0100       1 year, 9 months ago](#73)

[74. ddef555      Wed Dec 17 12:02:35 2014 +0100       1 year, 9 months ago](#74)

[75. af27fdd      Thu Dec 18 18:21:38 2014 +0100       1 year, 9 months ago](#75)

[76. f390238      Fri Jan 23 12:55:56 2015 +0100       1 year, 8 months ago](#76)

[77. c5f7d82      Fri Jan 23 13:27:31 2015 +0100       1 year, 8 months ago](#77)

[78. acf6467      Sun Jan 25 16:18:18 2015 +0100       1 year, 8 months ago](#78)

[79. 6656a2d      Sat Jan 31 15:45:06 2015 +0100       1 year, 8 months ago](#79)

[80. 256c9ce      Thu Feb 26 13:08:27 2015 +0100       1 year, 7 months ago](#80)

[81. bf4ebea      Thu Feb 26 13:13:50 2015 +0100       1 year, 7 months ago](#81)

[82. 70aec99      Sat Mar 7 08:53:44 2015 +0100       1 year, 7 months ago](#82)

[83. e06e6ba      Sat Mar 7 08:54:13 2015 +0100       1 year, 7 months ago](#83)

[84. 0fd12ca      Sat Mar 7 08:54:32 2015 +0100       1 year, 7 months ago](#84)

[85. 67c4157      Sat Mar 7 08:59:37 2015 +0100       1 year, 7 months ago](#85)

[86. b972e2b      Sun Mar 8 11:20:27 2015 +0100       1 year, 6 months ago](#86)

[87. 8bbc84c      Sat Mar 21 08:41:10 2015 +0100       1 year, 6 months ago](#87)

[88. 033fa14      Wed Mar 25 07:15:07 2015 +0100       1 year, 6 months ago](#88)

[89. fdb5a9e      Wed Apr 1 12:20:17 2015 +0200       1 year, 6 months ago](#89)

[90. 6ec582e      Thu Apr 2 01:08:43 2015 +0200       1 year, 6 months ago](#90)

[91. 68b53b8      Tue Apr 7 11:12:17 2015 +0200       1 year, 6 months ago](#91)

[92. 46e8f3c      Sat May 9 19:05:41 2015 +0200       1 year, 4 months ago](#92)

[93. 3162d88      Sun May 10 13:39:33 2015 +0200       1 year, 4 months ago](#93)

[94. 714b2e0      Wed May 27 14:23:39 2015 +0200       1 year, 4 months ago](#94)

[95. af7a387      Wed Jun 3 16:54:25 2015 +0200       1 year, 4 months ago](#95)

[96. 7b434e3      Wed Jun 10 10:08:40 2015 +0200       1 year, 3 months ago](#96)

[97. dcbcb4d      Thu Jul 16 16:17:22 2015 +0200       1 year, 2 months ago](#97)

[98. 50a3dbc      Fri Jul 17 00:31:37 2015 +0200       1 year, 2 months ago](#98)

[99. a97e8e1      Fri Jul 17 16:56:02 2015 +0200       1 year, 2 months ago](#99)

[100. 9513a9b      Sat Jul 18 23:46:30 2015 +0200       1 year, 2 months ago](#100)

[101. 7163f60      Sat Jul 18 23:55:52 2015 +0200       1 year, 2 months ago](#101)

[102. b2f4aef      Sat Jul 18 23:56:17 2015 +0200       1 year, 2 months ago](#102)

[103. ba30c25      Sun Jul 19 00:07:47 2015 +0200       1 year, 2 months ago](#103)

[104. 0eea41b      Sun Jul 19 00:16:37 2015 +0200       1 year, 2 months ago](#104)

[105. c1691bd      Mon Jul 20 17:00:42 2015 +0200       1 year, 2 months ago](#105)

[106. 3de9fc2      Mon Jul 20 18:25:07 2015 +0200       1 year, 2 months ago](#106)

[107. cb34d89      Mon Jul 20 22:42:07 2015 +0200       1 year, 2 months ago](#107)

[108. 7f0e20f      Mon Jul 20 22:59:24 2015 +0200       1 year, 2 months ago](#108)

[109. c16a7a7      Mon Jul 20 23:04:42 2015 +0200       1 year, 2 months ago](#109)

[110. 8bbb08c      Mon Jul 20 23:17:33 2015 +0200       1 year, 2 months ago](#110)

[111. 34c8b1a      Mon Aug 3 15:44:26 2015 +0200       1 year, 2 months ago](#111)

[112. d883d06      Mon Aug 3 16:16:42 2015 +0200       1 year, 2 months ago](#112)

[113. 66ac0a0      Mon Aug 3 16:33:28 2015 +0200       1 year, 2 months ago](#113)

[114. ab5a102      Mon Aug 3 16:40:48 2015 +0200       1 year, 2 months ago](#114)

[115. 65f43b8      Mon Aug 3 23:15:08 2015 +0200       1 year, 2 months ago](#115)

[116. c6de3d1      Tue Aug 4 22:58:51 2015 +0200       1 year, 2 months ago](#116)

[117. cab2231      Tue Aug 4 22:59:42 2015 +0200       1 year, 2 months ago](#117)

[118. 008c5e6      Thu Aug 6 10:21:06 2015 +0200       1 year, 2 months ago](#118)

[119. dba5c72      Thu Aug 6 10:22:03 2015 +0200       1 year, 2 months ago](#119)

[120. eff64ee      Thu Aug 6 10:22:14 2015 +0200       1 year, 2 months ago](#120)

[121. 89eb423      Mon Aug 17 16:44:01 2015 +0200       1 year, 1 month ago](#121)

[122. 2346997      Tue Aug 18 20:51:29 2015 +0200       1 year, 1 month ago](#122)

[123. d22d50e      Tue Sep 8 11:41:49 2015 +0200       1 year ago](#123)

[124. e64cc35      Wed Sep 23 21:43:10 2015 +0200       12 months ago](#124)

[125. 763a529      Tue Oct 13 23:03:01 2015 +0200       11 months ago](#125)

[126. d962f81      Tue Oct 13 23:03:13 2015 +0200       11 months ago](#126)

[127. 63a5cd7      Tue Oct 13 23:03:37 2015 +0200       11 months ago](#127)

[128. ce95c3c      Sat Oct 17 00:38:49 2015 +0200       11 months ago](#128)

[129. 44cd5a6      Fri Oct 23 16:09:04 2015 +0200       11 months ago](#129)

[130. c0c5e18      Fri Oct 30 17:02:09 2015 +0100       11 months ago](#130)

[131. 603344f      Fri Oct 30 21:35:33 2015 +0100       11 months ago](#131)

[132. 2679253      Wed Nov 4 20:52:30 2015 +0100       11 months ago](#132)

[133. a5e20f8      Wed Nov 4 21:59:20 2015 +0100       11 months ago](#133)

[134. bc3c502      Wed Nov 4 22:19:15 2015 +0100       11 months ago](#134)

[135. 7ec98aa      Wed Nov 4 23:36:40 2015 +0100       11 months ago](#135)

[136. 984d3b9      Thu Nov 5 08:27:05 2015 +0100       11 months ago](#136)

[137. 4401e20      Thu Nov 5 11:01:08 2015 +0100       11 months ago](#137)

[138. 2247466      Thu Nov 5 18:03:51 2015 +0100       11 months ago](#138)

[139. f4a9322      Sun Nov 15 23:56:27 2015 +0100       10 months ago](#139)

[140. 0d2712a      Sun Nov 22 09:56:29 2015 +0100       10 months ago](#140)

[141. 3518985      Sun Dec 6 12:45:05 2015 +0100       10 months ago](#141)

[142. 322ca62      Fri Dec 11 10:48:06 2015 +0100       10 months ago](#142)

[143. c4bf9ea      Fri Dec 11 23:00:58 2015 +0100       9 months ago](#143)

[144. 2a6dafd      Fri Dec 11 23:02:28 2015 +0100       9 months ago](#144)

[145. 145615e      Sat Dec 12 13:28:11 2015 +0100       9 months ago](#145)

[146. f16acca      Sun Dec 13 00:31:18 2015 +0100       9 months ago](#146)

[147. 4e2d9f1      Sun Dec 13 11:53:34 2015 +0100       9 months ago](#147)

[148. 6359c9c      Mon Dec 21 00:18:29 2015 +0100       9 months ago](#148)

[149. 00537d0      Mon Jan 4 18:45:14 2016 +0100       9 months ago](#149)

[150. acadc39      Mon Jan 4 19:04:12 2016 +0100       9 months ago](#150)

[151. 51359c6      Tue Jan 5 00:14:06 2016 +0100       9 months ago](#151)

[152. 73047b3      Fri Feb 5 10:25:43 2016 +0100       8 months ago](#152)

[153. e4c4586      Fri Feb 12 00:46:53 2016 +0100       7 months ago](#153)

[154. 7b991bb      Thu Feb 25 19:26:04 2016 +0000       7 months ago](#154)

[155. fa1518f      Tue Mar 1 21:13:23 2016 +0100       7 months ago](#155)

[156. 8593ed6      Wed Mar 2 21:05:20 2016 +0000       7 months ago](#156)

[157. cc53b1e      Wed Mar 2 21:07:13 2016 +0000       7 months ago](#157)

[158. 202a241      Sat Mar 5 21:45:52 2016 +0100       7 months ago](#158)

[159. 858b5fb      Sun Mar 20 09:13:59 2016 +0100       6 months ago](#159)

[160. 260b62d      Sun Mar 20 10:38:39 2016 +0100       6 months ago](#160)

[161. a6886ca      Sat Apr 2 10:22:32 2016 +0200       6 months ago](#161)

[162. 41914a2      Tue May 3 20:54:24 2016 +0200       5 months ago](#162)

[163. 05a5fd2      Tue Jun 21 08:36:10 2016 +0200       3 months ago](#163)

[164. fd6c59b      Wed Jul 13 00:04:57 2016 +0200       2 months ago](#164)

[165. 121e68f      Fri Jul 22 20:39:31 2016 +0200       9 weeks ago](#165)


<h2 id="short">4. 列出简要信息</h2>

``` vim
 
 13 files changed, 1618 insertions(+)
 load_project.pl           | 102 ++++++++++
 load.pl                   |  12 ++
 index.pl                  |   2 +
 gv_numeral.pl             |  71 +++++++
 gv_html.pl                |  60 ++++++
 gv_file.pl                | 250 +++++++++++++++++++++++
 gv_dot.pl                 | 496 ++++++++++++++++++++++++++++++++++++++++++++++
 gv_color.pl               |  96 +++++++++
 gv_attrs.pl               | 109 ++++++++++
 gv_attr_type.pl           | 415 ++++++++++++++++++++++++++++++++++++++
 Prolog-Library-Collection |   1 +
 .gitmodules               |   3 +
 .gitignore                |   1 +

    Initial commit.

```

[1. commit 6ced089ad776b55034adbd4a806db296bcb1229c](#1)

``` vim

 3 files changed, 5 insertions(+), 1 deletion(-)
 plHtml                    | 1 +
 Prolog-Library-Collection | 2 +-
 .gitmodules               | 3 +++

    Upped PLC,plHtml.

```

[2. commit 3d8b517ba04a977e793d64d240cc8169fec42606](#2)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 plHtml                    | 2 +-
 Prolog-Library-Collection | 2 +-

    Upped PLC,plHtml

```

[3. commit ccd942cd22b0bacee488b08a1756227759fa125d](#3)

``` vim

 3 files changed, 3 insertions(+), 3 deletions(-)
 gv_color.pl     | 2 +-
 gv_attrs.pl     | 2 +-
 gv_attr_type.pl | 2 +-

    * [GV_ATTRS,GV_COLOR,DEB] Summarize messages for downloading HTML.
    * [GV_ATTR_TYPE,FIX] Wrong module name.

```

[4. commit 0b3607d3305882967ec58a223d0dffb6a56d1b75](#4)

``` vim

 2 files changed, 142 insertions(+), 16 deletions(-)
 gv_color.pl | 61 ++++++++++++++++++++++++++++++++++----
 gv_attrs.pl | 97 ++++++++++++++++++++++++++++++++++++++++++++++++++++++-------

    * [GV_ATTRS,GV_COLOR,NEW] Added persistency, so GraphViz settings are (re)download only when the locally stored data dump is not fresh anymore.

```

[5. commit acf4ec31ef12d0de84f0496e621a90dcec5ae55c](#5)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 gv_color.pl | 2 +-
 gv_attrs.pl | 2 +-

    Freshness lifetime from 1H to 100D :-P

```

[6. commit c1ad93f719fe68580e65e748e8c45a43ad1649a9](#6)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 plHtml                    | 2 +-
 Prolog-Library-Collection | 2 +-

    Upped submodules

```

[7. commit c7c8226840bb23fa5bb0ae2e4f8371364d3f49fa](#7)

``` vim

 2 files changed, 29 insertions(+), 11 deletions(-)
 load_project.pl | 34 ++++++++++++++++++++++++++--------
 load.pl         |  6 +++---

    * [DEP] Alterations to startup procedure.

```

[8. commit 0cd29ea088b348bcb5c8162352c4ead1b3340568](#8)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 plHtml                    | 2 +-
 Prolog-Library-Collection | 2 +-

    Upped submodules

```

[9. commit 13f7fbf9548fb66541f600b9b728bde73fb9830e](#9)

``` vim

 6 files changed, 169 insertions(+), 45 deletions(-)
 gv_tree.pl      |  39 ++++++++++++++++++++
 gv_gif.pl       | 109 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 gv_file.pl      |  40 +++------------------
 gv_color.pl     |  10 ++++--
 gv_attrs.pl     |   2 +-
 gv_attr_type.pl |  14 ++++----

    * [GV_GIF,NEW] New module supporting the construction of GIF representations.
    * [GV_TREE,SC] Separate module for GV export of trees.
    * [GV_COLOR,FIX] Add support for GV color names.
    * [GV_ATTR_TYPE,NEW] Added string//1.
    * [GV_ATTRS,FIX] Parsing can be det here.

```

[10. commit 5520d7540db4ab0936ef3f65ccc36f2305235bf0](#10)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 gv_attr_type.pl | 2 +-

    * [GV_ATTR_TYPE,DOC] Fixed typo.

```

[11. commit 8656a39b30e28c3d00365c88a8e7ab1620bccce5](#11)

``` vim

 2 files changed, 78 insertions(+), 83 deletions(-)
 gv_tree.pl |  16 ++++---
 gv_file.pl | 145 +++++++++++++++++++++++++++++--------------------------------

    * [GV_FILE,SC] Added predicate options declarations.
    * [GV_FILE,EXT] Add file type support for exporting to plain DOT.
    * [GV_FILE,SC] Move options argument to the last position.

```

[12. commit 74219816f9f78f463cab91c4caba175ba66d4ff8](#12)

``` vim

 1 file changed, 6 insertions(+), 6 deletions(-)
 gv_file.pl | 12 ++++++------

    * [GV_FILE,SC] Renamed predicate.

```

[13. commit bfcb63b1206edd43cd6bb8d05d2884e2e49a463a](#13)

``` vim

 1 file changed, 77 insertions(+), 68 deletions(-)
 gv_file.pl | 145 ++++++++++++++++++++++++++++++++-----------------------------

    * [GV_FILE,FIX] Fix and cleanup for compiling GraphViz files.

```

[14. commit 84afd69f990121eb49b2a4de4562ef080b846aca](#14)

``` vim

 1 file changed, 54 insertions(+), 43 deletions(-)
 gv_gif.pl | 97 +++++++++++++++++++++++++++++++++++----------------------------

    * [GV_GIF,SC] Thorough cleanup of this module. We intend to extend its functionality with various optional predicates for assigning vertex, edges, and graph properties.

```

[15. commit c2bfd3fc20c95592d66362ac67aa70fabeb078af](#15)

``` vim

 2 files changed, 150 insertions(+), 39 deletions(-)
 gv_gif.pl | 145 ++++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 gv_dot.pl |  44 +++++++++----------

    * [GV_GIF,EXT] Added several options for setting vertex, edges, and graph properties.

```

[16. commit fa364fcd664277967e3fda7cb9db94bf5fc01fed](#16)

``` vim

 1 file changed, 5 insertions(+), 19 deletions(-)
 gv_gif.pl | 24 +++++-------------------

    minor

```

[17. commit 3c900f481412a5425124ee4e9b345b2d0fd51f50](#17)

``` vim

 1 file changed, 4 insertions(+)
 gv_gif.pl | 4 ++++

    * [GV_GIF,FIX] Added missing predication options declarations.

```

[18. commit 65cc1c3c03f790ca21e3b23424f467e258b9080a](#18)

``` vim

 2 files changed, 16 insertions(+), 23 deletions(-)
 gv_gif.pl  | 18 +++++++++---------
 gv_file.pl | 21 +++++++--------------

    Various small fixes.

```

[19. commit 20e1f2146881894d53c471f40ba74bf7fb99a21d](#19)

``` vim

 1 file changed, 2 insertions(+), 5 deletions(-)
 gv_file.pl | 7 ++-----

    * [GV_FILE,FIX] When not given an output file, create one based on the input file.

```

[20. commit e2e9fc1e79108306bb284a2b7adc5760dfeb2087](#20)

``` vim

 2 files changed, 1 insertion(+), 5 deletions(-)
 gv_gif.pl  | 2 +-
 gv_file.pl | 4 ----

    * [SC] Minor.

```

[21. commit 4b72d15e5999528c55d08ce04bd65622f328ec67](#21)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 gv_gif.pl | 2 +-

    * [SC] Sync to PLC.

```

[22. commit 54248f7423f80e8d756ce659667e218fba14b22c](#22)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 gv_gif.pl | 2 +-

    Sync to PLC.

```

[23. commit 3b9a7736d901f1382bbe83b9cb2304c6e6fc698a](#23)

``` vim

 1 file changed, 2 insertions(+), 2 deletions(-)
 gv_gif.pl | 4 ++--

    Sync to PLC.

```

[24. commit 1e9a91074ca1d64a6b07bb7197f41c88146c3aca](#24)

``` vim

 1 file changed, 3 insertions(+), 3 deletions(-)
 gv_gif.pl | 6 +++---

    Sync to PLC.

```

[25. commit 6dc1cf5ff51ce47e0917042dd8ba9c88750cc8fa](#25)

``` vim

 1 file changed, 109 deletions(-)
 gv_gif.pl | 109 --------------------------------------------------------------

    Moved GV_GIF to plGraph.

```

[26. commit 76ea35d03b83f0221658bb29491c90cf137fd377](#26)

``` vim

    merge

Merge: 76ea35d 6dc1cf5
```

[27. commit 2a2728b1d1699995d677889a6d958f1c4da87403](#27)

``` vim

 2 files changed, 2 insertions(+), 223 deletions(-)
 gv_tree.pl |   4 +-
 gv_gif.pl  | 221 -------------------------------------------------------------

    Removed gv_gif.

```

[28. commit 7f9fc826a469a17a3cb10db847e4e4836aad35b2](#28)

``` vim

 2 files changed, 16 insertions(+), 17 deletions(-)
 gv_file.pl |  3 +--
 gv_dot.pl  | 30 +++++++++++++++---------------

    minor

```

[29. commit 5baddb53811463c2e0b21abf2fd8ff8a85f0206c](#29)

``` vim

 2 files changed, 22 insertions(+), 10 deletions(-)
 gv_file.pl | 12 +++++-------
 gv_dot.pl  | 20 +++++++++++++++++---

    * [GV_FILE,FIX] Sometimes an output file need not be specified and is created on the fly.
    * [GV_DOT,FIX] In DOT files, no newline has to occur after global attribute assertions that are not followed by specific content (i.e., nodes and edges).

```

[30. commit 95bfe7fb78f8b4c24337d13dde25fe6df8197469](#30)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 plHtml                    | 2 +-
 Prolog-Library-Collection | 2 +-

    Upped submodules.

```

[31. commit f1322fad81caf9df086379e668520294ba9d7935](#31)

``` vim

 1 file changed, 2 deletions(-)
 index.pl | 2 --

    Removed index.

```

[32. commit 474bea8afd0c1a1837b296832e5ffa988df4551b](#32)

``` vim

 1 file changed, 43 deletions(-)
 gv_tree.pl | 43 -------------------------------------------

    * [SC] Relocated GV_TREE to plTree.

```

[33. commit 262cb2aa4ed4ed2f68100c3727f041a4cf82f8d0](#33)

``` vim

 6 files changed, 59 insertions(+), 51 deletions(-)
 gv_numeral.pl   |  7 ++++---
 gv_html.pl      |  2 +-
 gv_dot.pl       | 61 ++++++++++++++++++++++++++++++---------------------------
 gv_color.pl     | 21 +++++++++++---------
 gv_attrs.pl     |  5 +++--
 gv_attr_type.pl | 14 ++++++-------

    * [SC] Sync to plDcg,DCG_ABNF.

```

[34. commit e7e6033f6d88356193053d724b37550d441f4642](#34)

``` vim

    Merge branch 'master' of https://github.com/wouterbeek/plGraphViz

Merge: 2a2728b e7e6033
```

[35. commit e17bf44417fb2060c7648d47c24af161a3849199](#35)

``` vim

 1 file changed, 1 deletion(-)
 gv_file.pl | 1 -

    * [SC] Module input cleanup.

```

[36. commit 6596aa127934e47c89e39c7ad091be6da5fbefd0](#36)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 plHtml                    | 2 +-
 Prolog-Library-Collection | 2 +-

    Upped submodules.

```

[37. commit 87e8982ea1c86d70490d7eb713f01f024118035e](#37)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 gv_dot.pl   | 2 +-
 gv_attrs.pl | 2 +-

    Sync to plDcg.

```

[38. commit cb6aada737c0d58746811205cc753a53b7dc2301](#38)

``` vim

 2 files changed, 9 insertions(+), 13 deletions(-)
 gv_file.pl  | 18 ++++++++----------
 gv_color.pl |  4 +---

    WINDOWS-SPECIFIC HACK TO RUN DOT!

```

[39. commit 7c8125b1c80c092487f760dabd464b4a3a366414](#39)

``` vim

 1 file changed, 3 insertions(+), 2 deletions(-)
 gv_file.pl | 5 +++--

    FIXED: Reverted Windows-specific hack.

```

[40. commit 6a38f954ddaff61cbda0e191ceb514a84155ab3a](#40)

``` vim

 10 files changed, 98 insertions(+), 17 deletions(-)
 run.pl                    |  9 ++++++++
 plHtml                    |  2 +-
 plDcg                     |  1 +
 load_project.pl           | 22 ++++++++++---------
 load.pl                   | 11 +++++-----
 debug_project.pl          | 55 +++++++++++++++++++++++++++++++++++++++++++++++
 debug.pl                  |  7 ++++++
 Prolog-Library-Collection |  2 +-
 .gitmodules               |  3 +++
 .gitignore                |  3 +++

    DEPLOYMENT: Updated to modern startup architecture.

```

[41. commit ebb86cdfd67c1bc273905eb28be11d152520110e](#41)

``` vim

 2 files changed, 255 insertions(+), 91 deletions(-)
 gv_html.pl | 249 ++++++++++++++++++++++++++++++++++++++++++++++++++-----------
 gv_dot.pl  |  97 ++++++++++++------------

    ADDED: Rewrote the HTML-like labels grammar for GraphViz.

```

[42. commit 1549e4403d3f7e1b9896964adcfe0d0ec41dc72f](#42)

``` vim

 4 files changed, 16 insertions(+), 4 deletions(-)
 plHtml                    |  2 +-
 plDcg                     |  2 +-
 debug_project.pl          | 14 +++++++++++++-
 Prolog-Library-Collection |  2 +-

    Upped submodules.

```

[43. commit 61ddca2f413b7a5de86faf85cb8e3c2e189c2b42](#43)

``` vim

    Merge branch 'master' of https://github.com/wouterbeek/plGraphViz

Merge: 61ddca2 1549e44
```

[44. commit 26f07e7108914550f16186bbba55a4260eae44ff](#44)

``` vim

 4 files changed, 49 insertions(+), 31 deletions(-)
 plDcg                     |  2 +-
 gv_attrs.pl               | 40 +++++++++++++++++++++++++++++-----------
 gv_attr_type.pl           | 36 ++++++++++++++++++------------------
 Prolog-Library-Collection |  2 +-

    DOCUMENTATION: Added for GraphViz attributes processing.

```

[45. commit f78b4f859295fd561bef8b168034b563e6203300](#45)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 gv_file.pl | 2 +-

    Sync to PLC.

```

[46. commit 310936292c5fbbce7260ebe51380f829990dcc97](#46)

``` vim

     Merge branch 'temp'

Merge: f78b4f8 3109362
```

[47. commit df0ab09e882cc7b9ddc1d3fb12ef92612b9826ab](#47)

``` vim

 11 files changed, 25 insertions(+), 8 deletions(-)
 plUri                     | 1 +
 plSvg                     | 1 +
 plHttp                    | 1 +
 plHtml                    | 2 +-
 plDcg                     | 2 +-
 load.pl                   | 9 ++++++---
 gv_dot.pl                 | 2 +-
 gv_color.pl               | 3 ++-
 gv_attrs.pl               | 1 +
 Prolog-Library-Collection | 2 +-
 .gitmodules               | 9 +++++++++

    DEPLOYMENT: Added plHttp, plSvg, plUri.

```

[48. commit 73e976b27beeda081abfa60931b7d85bea79ab96](#48)

``` vim

 5 files changed, 5 insertions(+), 5 deletions(-)
 plUri                     | 2 +-
 plHttp                    | 2 +-
 plHtml                    | 2 +-
 plDcg                     | 2 +-
 Prolog-Library-Collection | 2 +-

    Upped submodules.

```

[49. commit 090c25dfb4bdd81e95818c65bc8a3b39bc5566d8](#49)

``` vim

 8 files changed, 7 insertions(+), 16 deletions(-)
 plUri                     | 1 -
 plSvg                     | 1 -
 plHttp                    | 1 -
 plHtml                    | 2 +-
 plDcg                     | 2 +-
 load_project.pl           | 5 ++++-
 Prolog-Library-Collection | 2 +-
 .gitmodules               | 9 ---------

    DEPLOYMENT: Removed several submodules.

```

[50. commit daed8bfe18cb686c77eb0c0fd2a1ae7443992204](#50)

``` vim

 13 files changed, 125 insertions(+), 124 deletions(-)
 plUri                     |   1 +
 plHtml                    |   2 +-
 plDcg                     |   2 +-
 load.pl                   |   2 -
 gv_numeral.pl             | 100 +++++++++++++++++++++++++---------------------
 gv_html.pl                |  75 +++++++++++++++++-----------------
 gv_file.pl                |  18 ---------
 gv_dot.pl                 |  39 ++++++++++--------
 gv_color.pl               |   1 +
 gv_attrs.pl               |   3 +-
 gv_attr_type.pl           |   1 +
 Prolog-Library-Collection |   2 +-
 .gitmodules               |   3 ++

    6. DEPLOYMENT: Added plUri.
    5. Sync to submodules.
    4. CLEANUP: Spacing in GraphViz HTML-like label syntax.
    3. CLEANUP: Markdown code block markup.
    2. CLEANUP: Rewrote part of the GraphViz numeral grammar to be easier to process.
    1. DOC: Added documentation for GraphViz numeral grammar.

```

[51. commit 528b9af184c39b53f8f5c6bc383a993f1400a71e](#51)

``` vim

 1 file changed, 4 insertions(+), 4 deletions(-)
 gv_color.pl | 8 ++++----

    minor

```

[52. commit e594ae6c5b4c633db0fef804161071337af3a78d](#52)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 gv_color.pl | 2 +-

    minor

```

[53. commit bbefbf7ce3c322755ce29a18c4cf1c0dd15ef57e](#53)

``` vim

 5 files changed, 98 insertions(+), 20 deletions(-)
 load_project.pl  | 25 ++++++++++++---------
 gv_color.pl      | 10 ---------
 debug_project.pl | 66 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 debug.pl         |  9 ++++++++
 README.md        |  8 +++++++

    Updated load procedure.

```

[54. commit 0cc5421aa59c8eac6e8fed89327f2b27bdbf43d2](#54)

``` vim

            debug_project.pl
            debug.pl
    Conflicts:
    
    Merge branch 'master' of https://github.com/wouterbeek/plGraphViz

Merge: 0cc5421 bbefbf7
```

[55. commit dbc602d82db54d2b604b86dde60b835b81021d0b](#55)

``` vim

 2 files changed, 3 insertions(+), 4 deletions(-)
 plHtml      | 2 +-
 gv_color.pl | 5 ++---

    CLEANUP: GraphViz color persistent store now reuses PLC support module.

```

[56. commit a2456df77c592e7303311540f9578c5c401a9cda](#56)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 gv_numeral.pl | 2 +-

    FIXED: Do not write the plus sign for positive integer GraphViz numberals.

```

[57. commit 20c60172730ce564528fad1ae6a43b6fdde21dac](#57)

``` vim

 3 files changed, 3 insertions(+), 3 deletions(-)
 plUri                     | 2 +-
 plDcg                     | 2 +-
 Prolog-Library-Collection | 2 +-

    Upped submodules.

```

[58. commit f694d776f9e329832a492602cf5161019d293f89](#58)

``` vim

 12 files changed, 545 insertions(+), 263 deletions(-)
 plUri                     |   2 +-
 plHtml                    |   2 +-
 plDcg                     |   2 +-
 gv_html.pl                | 221 ++++++++++++++++++++++++++++------------------
 gv_file.pl                | 202 +++++++++++++++++++++++++-----------------
 gv_dot.pl                 | 129 +++++++++++++++------------
 gv_attrs.pl               |  63 +++++++------
 gv_attr_type.pl           |  76 +++++++++++++---
 example2.png              | Bin 0 -> 8121 bytes
 example1.png              | Bin 0 -> 4166 bytes
 README.md                 | 109 ++++++++++++++++++++++-
 Prolog-Library-Collection |   2 +-

    6. FIXED: Various fixes while using HTML-like labels for the first time.
    5. CLEANUP: Simplified method and output options.
    4. ENHANCED: Added support for many more method and output values.
    3. CLEANUP: Simplified attribute value generation: write directly i.o. first typechecking.
    2. FIXED: Quote escString. Not clear from GV grammar.
    1. DOC: Added documentation on top-level use.

```

[59. commit af5d96dfda6172b8a13f3030d810bd2709031111](#59)

``` vim

 1 file changed, 38 insertions(+), 4 deletions(-)
 README.md | 42 ++++++++++++++++++++++++++++++++++++++----

    DOC: Added documentation.

```

[60. commit ab4b616bb9e2251a496c37afd0a7e56937b944b9](#60)

``` vim

 2 files changed, 3 insertions(+), 3 deletions(-)
 gv_dot.pl       | 4 ++--
 gv_attr_type.pl | 2 +-

    FIXED: GraphViz strings surrounded must be enclosed by double quotes.

```

[61. commit 74bd19d68c153b8ca75d5926b2a2131f7bb844d0](#61)

``` vim

 1 file changed, 8 insertions(+)
 README.md | 8 ++++++++

    DOC: Added installation.

```

[62. commit 8ffff6f0c98e4207c773ad995563f6a8433e3f73](#62)

``` vim

    Merge branch 'master' of https://github.com/wouterbeek/plGraphViz

Merge: 8ffff6f 74bd19d
```

[63. commit ac3423a3430ed91079209d895191cb911609cdc3](#63)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 Prolog-Library-Collection | 2 +-

    Upped submodules.

```

[64. commit 57932e48a824da4670dbaf89d8f8a2e238954b50](#64)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 gv_file.pl | 2 +-

    rename

```

[65. commit 315b16ed91a4138cbfe7c79aad89dad7e48f1870](#65)

``` vim

 1 file changed, 4 deletions(-)
 gv_file.pl | 4 ----

    CLEANUP: Removed redundant declaration and module import.

```

[66. commit 898b5d2ccb3dc13754a1de853bd62e3dda1ef6e9](#66)

``` vim

 1 file changed, 19 insertions(+), 11 deletions(-)
 gv_file.pl | 30 +++++++++++++++++++-----------

    CLEANUP: Renamed gif->export_graph.

```

[67. commit 4279a49aa9e92a73f702edd0c2b6c90131a50556](#67)

``` vim

 2 files changed, 10 insertions(+), 10 deletions(-)
 gv_html.pl | 16 ++++++++--------
 gv_dot.pl  |  4 ++--

    CEANUP: Use Markdown notation.

```

[68. commit c173073758805b29105db834aa14c51fea65156c](#68)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 gv_color.pl | 2 +-
 gv_attrs.pl | 2 +-

    Syc to plHtml.

```

[69. commit 107c515057dc9ef9d4b2fe7b6ed12923b7826eae](#69)

``` vim

 1 file changed, 4 insertions(+), 4 deletions(-)
 gv_attrs.pl | 8 ++++----

    minor

```

[70. commit 8f574bb2cbf341b17734a8269a329276148221e7](#70)

``` vim

 1 file changed, 2 insertions(+), 2 deletions(-)
 gv_dot.pl | 4 ++--

    Sync to plDcg.

```

[71. commit d7088dd180fdf3295f14e65c614f2e643235cdc2](#71)

``` vim

 1 file changed, 2 insertions(+), 2 deletions(-)
 README.md | 4 ++--

    DOC: Sync to self.

```

[72. commit 94ed05d9e4a46ca4b111e0312a31b1423c84495e](#72)

``` vim

 1 file changed, 1 insertion(+)
 gv_file.pl | 1 +

    deb

```

[73. commit f48106006fc0ea042800de086191c56ea939d324](#73)

``` vim

 3 files changed, 29 insertions(+), 53 deletions(-)
 gv_file.pl      |  8 +++----
 gv_dot.pl       | 65 +++++++++++++++++----------------------------------------
 gv_attr_type.pl |  9 ++++++--

    4. FIXED: Added PDF file type registration.
    3. FIXED: Removed the requirement of a given GraphViz output file having a file extension that matches its media type.
    2. FIXED: Double quoted string support for GraphViz was broken.
    1. FIXED: Dobule quotes are now auto-escaped in GraphViz escStrings.

```

[74. commit ce492efd1bb82bdbb7611d52ae3d1092b9cdcf8b](#74)

``` vim

 2 files changed, 1 insertion(+), 3 deletions(-)
 gv_html.pl      | 2 --
 gv_attr_type.pl | 2 +-

    2. FIXED: Use of HTML-like labels revealed typo.
    1. FIXED: Removed ambiguity for linebreak specification in GraphViz HTML-like labels.

```

[75. commit ddef555cdb626a0ab6afc9e3d727cb4149ba6ed0](#75)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 gv_dot.pl   | 2 +-
 gv_color.pl | 2 +-

    minor

```

[76. commit af27fdd8f2f08169cb445a48002894f088e4fa93](#76)

``` vim

 2 files changed, 43 insertions(+), 41 deletions(-)
 gv_numeral.pl   | 67 ++++++++++++++++++++++++++++++---------------------------
 gv_attr_type.pl | 17 +++++++--------

    ENHANCED: Rewrite of GraphViz numerals.

```

[77. commit f390238d2ec4965ca62f09850307fdc438e43ffb](#77)

``` vim

 1 file changed, 4 insertions(+), 1 deletion(-)
 gv_numeral.pl | 5 ++++-

    Sync to plDcg.

```

[78. commit c5f7d822cbc6ba77814581c071fb8f74130979af](#78)

``` vim

 3 files changed, 5 insertions(+), 2 deletions(-)
 gv_numeral.pl   | 2 +-
 gv_color.pl     | 3 ++-
 gv_attr_type.pl | 2 ++

    FIXED: Missing module imports.

```

[79. commit acf64671787994db76761c96da10a3eca42f0d65](#79)

``` vim

 2 files changed, 4 insertions(+), 3 deletions(-)
 gv_numeral.pl   | 2 ++
 gv_attr_type.pl | 5 ++---

    FIXED: Use float// i.o. detailed double implementation (scientific notation issue).

```

[80. commit 6656a2d769a8e2e7ec1a38a4f58fb6be58bdf735](#80)

``` vim

 4 files changed, 4 insertions(+), 4 deletions(-)
 plUri                     | 2 +-
 plHtml                    | 2 +-
 plDcg                     | 2 +-
 Prolog-Library-Collection | 2 +-

    Upped submodules.

```

[81. commit 256c9cec27b53f609ad80ab8f66cb0d0cb6b6530](#81)

``` vim

 11 files changed, 111 insertions(+), 73 deletions(-)
 plDcg            |  1 -
 load.pl          |  1 -
 gv_numeral.pl    | 15 +++++++--------
 gv_html.pl       |  6 +++---
 gv_file.pl       | 24 ++++++++++++------------
 gv_dot.pl        | 18 +++++++++---------
 gv_color.pl      | 27 +++++++++++++++------------
 gv_attrs.pl      | 23 ++++++++++++-----------
 gv_attr_type.pl  | 16 ++++++++--------
 debug_project.pl | 50 +++++++++++++++++++++++++++++++++++++++++++++-----
 .gitmodules      |  3 ---

    Sync to submodules.

```

[82. commit bf4ebead2a5fb2bb5772632676e636c756b256b5](#82)

``` vim

 6 files changed, 53 insertions(+), 18 deletions(-)
 plUri                     |  2 +-
 plHtml                    |  2 +-
 plDcg                     |  2 +-
 gv_attrs.pl               | 13 ++++--------
 debug_project.pl          | 50 ++++++++++++++++++++++++++++++++++++++++++-----
 Prolog-Library-Collection |  2 +-

    merge

```

[83. commit 70aec99207ccbb33e23b3af547346ef1a2923fc1](#83)

``` vim

    merge

Merge: 70aec99 bf4ebea
```

[84. commit e06e6ba9af125b82c1f19b4481e748559f847ba6](#84)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 plUri  | 2 +-
 plHtml | 2 +-

    Upped submodules

```

[85. commit 0fd12ca246d674d21d912881698711dde72bd0d3](#85)

``` vim

 1 file changed, 12 insertions(+), 15 deletions(-)
 README.md | 27 ++++++++++++---------------

    DOC: spacing

```

[86. commit 67c415721c41e9e05cbdba40bb4735f3951f11bb](#86)

``` vim

 2 files changed, 28 insertions(+), 16 deletions(-)
 gv_color.pl | 22 ++++++++++++++--------
 gv_attrs.pl | 22 ++++++++++++++--------

    ENHANCED: Print progress/problems of initializing GraphViz colors and attributes to the console.

```

[87. commit b972e2b2e40c6f50b3055873bdec06836d687c91](#87)

``` vim

 1 file changed, 10 insertions(+), 11 deletions(-)
 gv_file.pl | 21 ++++++++++-----------

    Sync to process update in PLC.

```

[88. commit 8bbc84c721b287890d8fa305e5b700b5ec4fa00b](#88)

``` vim

 7 files changed, 32 insertions(+), 40 deletions(-)
 run.pl                    |  2 ++
 plUri                     |  2 +-
 plHtml                    |  2 +-
 gv_file.pl                | 62 ++++++++++++++++++++---------------------------
 README.md                 |  1 -
 Prolog-Library-Collection |  2 +-
 .gitignore                |  1 +

    Sync to PLC.

```

[89. commit 033fa1448bea11bd52bbf85e1296b8788b313ede](#89)

``` vim

 2 files changed, 9 insertions(+), 3 deletions(-)
 gv_attrs.pl     | 4 ++--
 gv_attr_type.pl | 8 +++++++-

    Sync to PLC.

```

[90. commit fdb5a9e7bd35c963bc12c9cf2da47310576c981a](#90)

``` vim

    merge

Merge: 8bbc84c fdb5a9e
```

[91. commit 6ec582e33df1feff0eca315974a4daf7555e3878](#91)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 gv_color.pl | 2 +-
 gv_attrs.pl | 2 +-

    Sync to plHtml.

```

[92. commit 68b53b8f39e5500b7bf7f6527e358fcfe755e938](#92)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 gv_color.pl | 2 +-
 gv_attrs.pl | 2 +-

    Sync to plHtml.

```

[93. commit 46e8f3ce8458bae27a39985b7e2d6ab01c1e70a7](#93)

``` vim

 1 file changed, 2 insertions(+), 2 deletions(-)
 gv_file.pl | 4 ++--

    DOC: Small fix to documentation.

```

[94. commit 3162d883a592da6feb510bc183d89e03a88726d4](#94)

``` vim

 4 files changed, 4 insertions(+), 2 deletions(-)
 gv_dot.pl       | 1 +
 gv_color.pl     | 2 +-
 gv_attrs.pl     | 1 +
 gv_attr_type.pl | 2 +-

    FIXED: Module imports.

```

[95. commit 714b2e0424dbe8f892e9f1bbf288a3e76236d4a3](#95)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 gv_attr_type.pl | 2 +-

    FIXED: Module import conflict.

```

[96. commit af7a3871a7525e0c4c27905989ad6c12e1b3dcd9](#96)

``` vim

 2 files changed, 4 insertions(+), 3 deletions(-)
 gv_numeral.pl | 5 +++--
 gv_color.pl   | 2 +-

    FIXED: Sync to PLC.

```

[97. commit 7b434e315484e5160f9e0f9201bdb9643f47de08](#97)

``` vim

 3 files changed, 272 insertions(+), 285 deletions(-)
 gv_graph.pl | 229 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 gv_file.pl  | 127 ++++++++++-----------------------
 gv_dot.pl   | 201 ++--------------------------------------------------

    Started simplifying stuff.

```

[98. commit dcbcb4d01410d71b4e1cdf8e2ab7a6ce5cff96ca](#98)

``` vim

 8 files changed, 389 insertions(+), 137 deletions(-)
 gv_util.pl                | 260 ++++++++++++++++++++++++++++++++++++++++++++++
 gv_html.pl                |   4 +-
 gv_file.pl                |   9 +-
 gv_dot.pl                 | 102 +++++++++---------
 gv_color.pl               |  29 ++++--
 gv_attrs.pl               |  78 +++++++-------
 gv_attr_type.pl           |  42 ++++----
 Prolog-Library-Collection |   2 +-

    Many utils from PLC are needed...

```

[99. commit 50a3dbc39532e583ace2d71cfed7eeb0db813c87](#99)

``` vim

 17 files changed, 98 insertions(+), 630 deletions(-)
 run.pl                    |  11 --
 plUri                     |   1 -
 plHtml                    |   1 -
 load_project.pl           | 125 ----------------------
 load.pl                   |  13 ---
 gv_util.pl                | 260 ----------------------------------------------
 gv_numeral.pl             |  20 ++--
 gv_html.pl                |  17 ++-
 gv_graph.pl               |  26 ++---
 gv_file.pl                |   2 +
 gv_dot.pl                 |  57 +++++-----
 gv_color.pl               |  24 ++---
 gv_attrs.pl               |  13 ++-
 gv_attr_type.pl           |  44 ++++----
 debug_project.pl          | 106 -------------------
 debug.pl                  |   7 --
 Prolog-Library-Collection |   1 -

    Sync to updated PLC.

```

[100. commit a97e8e1fec071b7306a9aa6ad43749d08780d96f](#100)

``` vim

 12 files changed, 272 insertions(+), 216 deletions(-)
 test/test.pl                                 |  10 +
 test/debug.pl                                |  15 ++
 gv_numeral.pl => prolog/gv/gv_numeral.pl     |   1 -
 gv_html.pl => prolog/gv/gv_html.pl           |   2 +-
 gv_dot.pl => prolog/gv/gv_graph_comp.pl      | 264 ++++++++++++++-------------
 gv_graph.pl => prolog/gv/gv_graph.pl         |  19 +-
 gv_file.pl => prolog/gv/gv_file.pl           |   7 +-
 gv_color.pl => prolog/gv/gv_color.pl         |  34 +---
 gv_attrs.pl => prolog/gv/gv_attrs.pl         |  40 ++--
 gv_attr_type.pl => prolog/gv/gv_attr_type.pl |  66 +++----
 pack.pl                                      |   9 +
 LICENSE.txt                                  |  21 +++

    ADDED: Created full Prolog Pack.

```

[101. commit 9513a9be8a25ceb2ce966b3d4ed4b63407c42716](#101)

``` vim

 1 file changed, 9 insertions(+), 7 deletions(-)
 prolog/gv/gv_color.pl | 16 +++++++++-------

    FIXED: Non-determinism in downloading the GraphViz color table.

```

[102. commit 7163f602709cfede798f72fd36980cbbe8816545](#102)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 pack.pl | 2 +-

    Pack version 0.0.2

```

[103. commit b2f4aef718c0cd2f190a4bbea1855af89bae6cbe](#103)

``` vim

 2 files changed, 3 insertions(+), 2 deletions(-)
 prolog/gv/gv_graph_comp.pl | 3 ++-
 pack.pl                    | 2 +-

    FIXED: Attributes represented as compound terms.

```

[104. commit ba30c25127b0f70c041a4bf4c7c57a242591fdcf](#104)

``` vim

 2 files changed, 13 insertions(+), 7 deletions(-)
 prolog/gv/gv_file.pl | 18 ++++++++++++------
 pack.pl              |  2 +-

    ENHANCED: Make up an output file name in case none is given.

```

[105. commit 0eea41b6c6c2e70118b1921d5e531f6e2ed016ee](#105)

``` vim

 5 files changed, 41 insertions(+), 6 deletions(-)
 prolog/gv/gv_html.pl  |  2 +-
 prolog/gv/gv_dom.pl   | 35 +++++++++++++++++++++++++++++++++++
 prolog/gv/gv_color.pl |  4 ++--
 prolog/gv/gv_attrs.pl |  4 ++--
 pack.pl               |  2 +-

    ADDED: gv_dom/3.

```

[106. commit c1691bd808d6880f39fc486617c5faa1a3a68674](#106)

``` vim

 4 files changed, 373 insertions(+), 11 deletions(-)
 test/test.pl                       |  19 +-
 prolog/gv/gv_attrs.pl              |   3 +-
 prolog/graph/build_export_graph.pl | 360 +++++++++++++++++++++++++++++++++++++
 pack.pl                            |   2 +-

    ADDED: build_export_graph/3.

```

[107. commit 3de9fc2a336afab3994d30c3c4a2f98475ab9652](#107)

``` vim

 3 files changed, 17 insertions(+), 5 deletions(-)
 prolog/gv/gv_color.pl | 10 ++++++++--
 prolog/gv/gv_attrs.pl | 10 ++++++++--
 pack.pl               |  2 +-

    FIXED: No longer use persistency_ext which gave permission errors.

```

[108. commit cb34d89fd0cce9b5a4fbf3bf6434f6771081c67a](#108)

``` vim

 2 files changed, 4 insertions(+), 3 deletions(-)
 prolog/gv/gv_graph.pl | 5 +++--
 pack.pl               | 2 +-

    FIXED: Typo in GraphViz DOT generation.

```

[109. commit 7f0e20fd402f669cb59621a07203f08866cbff04](#109)

``` vim

 2 files changed, 19 insertions(+), 19 deletions(-)
 prolog/graph/build_export_graph.pl | 36 ++++++++++++++++++------------------
 pack.pl                            |  2 +-

    FIXED: Name-value pairs to option compounds.

```

[110. commit c16a7a7cd7bec0fa9f65e9835478c351d396677b](#110)

``` vim

 3 files changed, 5 insertions(+), 5 deletions(-)
 prolog/gv/gv_graph_comp.pl | 2 +-
 prolog/gv/gv_graph.pl      | 6 +++---
 pack.pl                    | 2 +-

    FIXED: Added determinism to GraphViz DOT generation.

```

[111. commit 8bbb08c76fac066a3fa22a840a3bd4bd64e7293c](#111)

``` vim

 4 files changed, 13 insertions(+), 8 deletions(-)
 prolog/gv/gv_file.pl  | 9 +++++++--
 prolog/gv/gv_color.pl | 6 +++---
 prolog/gv/gv_attrs.pl | 4 ++--
 pack.pl               | 2 +-

    Sync to PLC.

```

[112. commit 34c8b1a9c74ba8cbf8f5985638b220ad573fe6ce](#112)

``` vim

 2 files changed, 5 insertions(+), 2 deletions(-)
 prolog/graph/build_export_graph.pl | 5 ++++-
 pack.pl                            | 2 +-

    FIXED: Support for edge/2 besides edge/3 compound terms.

```

[113. commit d883d0607e5ba30ce42e845fdc6d4459ea2fab2f](#113)

``` vim

 2 files changed, 3 insertions(+), 2 deletions(-)
 prolog/graph/build_export_graph.pl | 3 ++-
 pack.pl                            | 2 +-

    FIXED: By default the label of a graph is the empty string.

```

[114. commit 66ac0a091089347967dcc64ee8832f30acb91ce2](#114)

``` vim

 2 files changed, 3 insertions(+), 3 deletions(-)
 prolog/gv/gv_attr_type.pl | 4 ++--
 pack.pl                   | 2 +-

    FIXED: escaping of double quotes labels was broken.

```

[115. commit ab5a1028be0707fea663d35fa1e76a9a62b78262](#115)

``` vim

 3 files changed, 971 insertions(+), 1 deletion(-)
 gv_color.log | 802 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 gv_attrs.log | 169 +++++++++++++
 .gitignore   |   1 -

    DEPLOYMENT: Include default version of settings files since GraphViz Web site is often offline.

```

[116. commit 65f43b8ebe93dd39c5a75f8506cc957ae817a8fe](#116)

``` vim

 7 files changed, 984 insertions(+), 15 deletions(-)
 test/gv_attrs.log          | 169 ++++++++++
 prolog/gv/gv_graph_comp.pl |  14 +-
 prolog/gv/gv_color.pl      |   4 +-
 prolog/gv/gv_color.log     | 802 +++++++++++++++++++++++++++++++++++++++++++++
 prolog/gv/gv_attrs.pl      |   6 +-
 pack.pl                    |   2 +-
 .gitignore                 |   2 -

    merge

```

[117. commit c6de3d1b6f875da1868a26b81855d96f9799196b](#117)

``` vim

    merge

Merge: c6de3d1 65f43b8
```

[118. commit cab2231f8ca7bc9ce02552cddcb74079ff3cb386](#118)

``` vim

 1 file changed, 169 insertions(+)
 prolog/gv/gv_attrs.log | 169 +++++++++++++++++++++++++++++++++++++++++++++++++

    ADDED: atts log.

```

[119. commit 008c5e632ccdcf0f58199ba24a24b06f7a73a87c](#119)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 pack.pl | 2 +-

    0.0.16

```

[120. commit dba5c72fafb666266f6494de7d8d6542c2e12e75](#120)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 pack.pl | 2 +-

    0.0.17

```

[121. commit eff64ee3c829d1ab86f734d36b6a9ebd0915f9bc](#121)

``` vim

 1 file changed, 15 deletions(-)
 test/debug.pl | 15 ---------------

    DEBUG: cleanup.

```

[122. commit 89eb423af6cf856a936e8c0cdcaa7ba667f0c9c6](#122)

``` vim

 4 files changed, 7 insertions(+), 9 deletions(-)
 test/test.pl               | 2 --
 prolog/gv/gv_graph_comp.pl | 4 ++--
 prolog/gv/gv_graph.pl      | 6 +++---
 prolog/gv/gv_attr_type.pl  | 4 ++--

             Thanks to Markus Triska.
    CLEANUP: Use * i.o. '*' for predicate names.

```

[123. commit 2346997feabccf63c0dde7abe7de810fbbf53f6b](#123)

``` vim

 2 files changed, 8 insertions(+), 10 deletions(-)
 prolog/graph/build_export_graph.pl | 9 ++++++++-
 .gitmodules                        | 9 ---------

    ADDED: Wrapper build_export_graph/2.

```

[124. commit d22d50e477d8b53eade745f23d64fc5c7177ac79](#124)

``` vim

 1 file changed, 218 insertions(+)
 install | 218 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    ADDED: Install script.

```

[125. commit e64cc3593e4a6d15a00d32b3dda690536d52c414](#125)

``` vim

 3 files changed, 27 insertions(+), 31 deletions(-)
 prolog/gv/gv_file.pl  | 48 ++++++++++++++++++++++--------------------------
 prolog/gv/gv_color.pl |  6 +++---
 prolog/gv/gv_attrs.pl |  4 ++--

    CLEAN: various cleanups.

```

[126. commit 763a529e2b01af1a5f8da6a89f19bc7d6d8119a2](#126)

``` vim

    Merge branch 'master' of https://github.com/wouterbeek/plGraphViz

Merge: 763a529 e64cc35
```

[127. commit d962f818fa3094e1f3ccab245a94232147a5e7cf](#127)

``` vim

 1 file changed, 218 deletions(-)
 install | 218 ----------------------------------------------------------------

    CLEAN: no install

```

[128. commit 63a5cd72e1751cb08e8a304e0eaefd6ba6454d82](#128)

``` vim

 2 files changed, 17 insertions(+), 15 deletions(-)
 prolog/gv/gv_color.pl |  5 +++--
 prolog/gv/gv_attrs.pl | 27 ++++++++++++++-------------

    Sync to PLC.

```

[129. commit ce95c3c892470ce2fe09bb364d428059c99e6ca0](#129)

``` vim

 2 files changed, 20 insertions(+), 15 deletions(-)
 prolog/gv/gv_graph_comp.pl | 28 +++++++++++++++-------------
 prolog/gv/gv_attr_type.pl  |  7 +++++--

    FIXED: Support for strings/atoms.
    DEBUG: Throw exceptions in several spots of the DOT grammar.

```

[130. commit 44cd5a661f0811904e11770a6388dd1495540620](#130)

``` vim

 1 file changed, 35 insertions(+), 30 deletions(-)
 prolog/graph/build_export_graph.pl | 65 ++++++++++++++++++++------------------

    EHANCED: `build_export_graph/[2,3]' support S-represented ugraphs.

```

[131. commit c0c5e1890ea65a0f67c37e4e9d4c2d29ccdf8111](#131)

``` vim

 10 files changed, 1154 insertions(+), 2166 deletions(-)
 prolog/gv/gv_color.pl   |  79 +----
 prolog/gv/gv_color.log  | 802 ------------------------------------------------
 prolog/gv/gv_color.data | 802 ++++++++++++++++++++++++++++++++++++++++++++++++
 prolog/gv/gv_attrs.pl   | 148 +--------
 prolog/gv/gv_attrs.log  | 169 ----------
 prolog/gv/gv_attrs.data | 169 ++++++++++
 gv_color.log            | 802 ------------------------------------------------
 gv_attrs.log            | 169 ----------
 data/gv_color_scrape.pl |  56 ++++
 data/gv_attrs_scrape.pl | 124 ++++++++

    Library percistency is too unreliable to do this, as is the GV Web site.
    DEPLOYMENT: Distribute scripts for scraping the GraphViz Web site.

```

[132. commit 603344fe57e9747bf1f2f7e90537ee2e4fe20c36](#132)

``` vim

 1 file changed, 9 insertions(+), 4 deletions(-)
 prolog/gv/gv_file.pl | 13 +++++++++----

    ENHANCED: Specify that module gv_file requires program dot to be installed.
    CLEAN: Use PLC supplied abstraction predicate for running an external process.
    Allows Prolog to show warnings when running a program that depends on DOT support when it's not currently installed.

```

[133. commit 267925349145c9919435cc83625479c87ceb904c](#133)

``` vim

 3 files changed, 103 insertions(+), 5 deletions(-)
 test/test.pl             |  2 ++
 prolog/gv/gv_file.pl     | 19 ++++++++---
 prolog/fca/fca_export.pl | 87 ++++++++++++++++++++++++++++++++++++++++++++++++

    ADDED: Module fca_export providing fca_export/[2,3] and three vertex label writers.
    DOC: Fixed mode for gv_export/[2,3]'s output file argument.
    ADDED: Wrapper gv_export/2.
    Added support for exporting FCA lattices.

```

[134. commit a5e20f86f351a3d8ab562fd3e0a76bf6c959ddbc](#134)

``` vim

 1 file changed, 7 insertions(+), 2 deletions(-)
 prolog/fca/fca_export.pl | 9 +++++++--

    ENHANCED: Do not display reflexive edges in FCA lattice export.

```

[135. commit bc3c50241b899b7201647cd475d66f74073c4b6f](#135)

``` vim

 4 files changed, 73 insertions(+), 52 deletions(-)
 prolog/gv/gv_graph_comp.pl         | 68 ++++++++++++++------------------------
 prolog/gv/gv_graph.pl              |  2 +-
 prolog/graph/build_export_graph.pl | 31 ++++++++++++++---
 prolog/fca/fca_export.pl           | 24 +++++++++++---

    ADDED: Generate ranks for exported graphs based on rank assignment function for vertices.

```

[136. commit 7ec98aac5f8783118fc4e1443cdd168bd2f854a1](#136)

``` vim

 1 file changed, 2 insertions(+), 17 deletions(-)
 prolog/fca/fca_export.pl | 19 ++-----------------

    Use the new FCA Hasse construction predicate from PLC for exporting FCA diagrams.

```

[137. commit 984d3b9ad1b22f5221e0d27ceccb6873e46b9ca5](#137)

``` vim

 2 files changed, 48 insertions(+), 47 deletions(-)
 prolog/graph/build_export_graph.pl |  8 ++--
 prolog/fca/fca_export.pl           | 87 +++++++++++++++++++-------------------

    Improved the way in which FCE-specific options are passed to FCA export.

```

[138. commit 4401e203e457575fedd614b8794360f3eb350cd5](#138)

``` vim

 1 file changed, 35 insertions(+), 14 deletions(-)
 prolog/fca/fca_export.pl | 49 ++++++++++++++++++++++++++++++++++--------------

    ADDED: Support for option `attribute_label/1'.

```

[139. commit 22474664404e3b42da3137dfb33983c82eb40d9a](#139)

``` vim

 2 files changed, 8 insertions(+), 8 deletions(-)
 prolog/gv/gv_graph_comp.pl | 12 ++++++------
 prolog/gv/gv_graph.pl      |  4 ++--

    CLEAN: Sync to indent/tab updates in PLC.

```

[140. commit f4a9322a1ff02370019c53e8c3ae673fe691010b](#140)

``` vim

 3 files changed, 138 insertions(+), 218 deletions(-)
 prolog/gv/gv_graph_comp.pl |  71 +++++-------
 prolog/gv/gv_color.pl      |   3 +-
 prolog/gv/gv_attr_type.pl  | 282 ++++++++++++++++++---------------------------

    Simplified DOT generating grammar.

```

[141. commit 0d2712a7b0e2b5d4c32fbdccc0829e645b4d1601](#141)

``` vim

 4 files changed, 86 insertions(+), 108 deletions(-)
 prolog/gv/gv_html.pl               | 83 ++++++++++++++------------------------
 prolog/gv/gv_graph_comp.pl         | 14 +++----
 prolog/gv/gv_graph.pl              | 70 +++++++++++++++++++-------------
 prolog/graph/build_export_graph.pl | 27 ++++---------

    CLEAN: Use dcg_ext to simplify grammars in gv_graph, gv_html and gv_graph_comp.
    CLEAN: Reuse option_has_var_value/1 from PLC to simplify code.
    Cleanups to sync with improved DCG support in PLC.

```

[142. commit 35189854afd8cfb82985a6a1c40742f18ef0c671](#142)

``` vim

 2 files changed, 46 insertions(+), 22 deletions(-)
 test/test.pl                             |  2 +-
 prolog/fca/{fca_export.pl => fca_viz.pl} | 66 ++++++++++++++++++++++----------

    ADDED: `fca_export/[2,3]' which can be reused by plRdf.
    CLEAN: Renamed `fca_export' -> `fca_viz' for consistency with other modules.

```

[143. commit 322ca62bb5509825b5ccb1688ba9303bdeae9ead](#143)

``` vim

 4 files changed, 57 insertions(+), 35 deletions(-)
 test/test.pl                             | 20 +++++-----
 prolog/gv/gv_graph_comp.pl               |  2 +-
 prolog/graph/build_export_graph.pl       |  5 +--
 prolog/fca/{fca_export.pl => fca_viz.pl} | 65 +++++++++++++++++++++-----------

    various

```

[144. commit c4bf9eacf0960339a5dce8ca0d422f3e1ab829d0](#144)

``` vim

    #       test/test.pl
    #       prolog/fca/fca_viz.pl
    # Conflicts:
    
    Merge branch 'master' of https://github.com/wouterbeek/plGraphViz

Merge: c4bf9ea 322ca62
```

[145. commit 2a6dafd998ef482cf9ea80003822f3b07ab9251e](#145)

``` vim

 1 file changed, 4 insertions(+), 3 deletions(-)
 prolog/fca/fca_viz.pl | 7 ++++---

    FIXED: Expand meta-options correctly.

```

[146. commit 145615e02046b65d1fbf061dfa77fea462fb3b4f](#146)

``` vim

 1 file changed, 15 insertions(+), 48 deletions(-)
 prolog/fca/fca_viz.pl | 63 ++++++++++++---------------------------------------

    CLEAN: Simplified FCA concept label writing.

```

[147. commit f16acca2418fbb9e0d879e9ef5e90bbf48fdb41e](#147)

``` vim

 2 files changed, 22 insertions(+), 50 deletions(-)
 prolog/graph/build_export_graph.pl | 62 ++++++++++++--------------------------
 prolog/fca/fca_viz.pl              | 10 ++----

    CLEAN: Simplified vertex label API.

```

[148. commit 4e2d9f122f66784ae362c054118cc39ffa9f7f7c](#148)

``` vim

 1 file changed, 6 insertions(+), 1 deletion(-)
 prolog/gv/gv_html.pl | 7 ++++++-

    DOC: Added attributes supported for FONT.

```

[149. commit 6359c9ca232b6fbdeac6b75b6ac36576ce7ab6ac](#149)

``` vim

 4 files changed, 87 insertions(+), 28 deletions(-)
 prolog/tree/tree_viz.pl | 62 +++++++++++++++++++++++++++++++++++++++++++++++++
 prolog/gv/gv_file.pl    | 25 +++++++-------------
 prolog/gv/gv_dom.pl     |  4 ++--
 prolog/fca/fca_viz.pl   | 24 +++++++++++--------

    CLEAN: Renamed some predicates for consistency.
    ADDED: Tree visualization module.
    ADDED: Options number_of_vertices/1 and process_cputime/1 for fca_viz/3.

```

[150. commit 00537d0e997b0759cbd2494eaedb0a688a7ba270](#150)

``` vim

 1 file changed, 4 insertions(+), 3 deletions(-)
 prolog/tree/tree_viz.pl | 7 ++++---

    minor

```

[151. commit acadc3940eb3822bbc1ae02a9dfbab2d0f7a8aab](#151)

``` vim

 2 files changed, 19 insertions(+), 92 deletions(-)
 prolog/gv/gv_numeral.pl    | 87 ----------------------------------------------
 prolog/gv/gv_graph_comp.pl | 24 ++++++++++---

    ENHANCED: Now using the grammar for GraphViz numberals.

```

[152. commit 51359c6bc9865b90c02fce32e1fcbd3e37406982](#152)

``` vim

 1 file changed, 4 insertions(+), 4 deletions(-)
 prolog/graph/build_export_graph.pl | 8 ++++----

    CLEAN: lambda -> yall.

```

[153. commit 73047b3b8e12f4a922a3ac73fa515b983b9fc8ee](#153)

``` vim

 1 file changed, 11 insertions(+), 9 deletions(-)
 prolog/tree/tree_viz.pl | 20 +++++++++++---------

    ENHANCED: Support both labeled and unlabeled trees in tree-2-graphviz conversion.

```

[154. commit e4c4586bf31c358724bc00e6c0805682df0ab249](#154)

``` vim

 3 files changed, 10 insertions(+), 8 deletions(-)
 test/test.pl              | 4 +++-
 prolog/gv/gv_color.pl     | 8 ++++----
 prolog/gv/gv_attr_type.pl | 6 +++---

    FIXED: Sync to updated to DCGs in PLC.

```

[155. commit 7b991bb4cc9e47c2651023295ef20cdc268f8c6a](#155)

``` vim

 9 files changed, 4 insertions(+), 11 deletions(-)
 prolog/gv/gv_html.pl               | 1 -
 prolog/gv/gv_graph_comp.pl         | 1 -
 prolog/gv/gv_graph.pl              | 1 -
 prolog/gv/gv_color.pl              | 1 -
 prolog/gv/gv_attrs.pl              | 2 +-
 prolog/gv/gv_attr_type.pl          | 1 -
 prolog/graph/build_export_graph.pl | 3 +--
 prolog/fca/fca_viz.pl              | 2 +-
 data/gv_attrs_scrape.pl            | 3 +--

    Sync to PLC.

```

[156. commit fa1518fbfb15aec820ab5d54b452ec4fce811899](#156)

``` vim

 2 files changed, 9 insertions(+), 4 deletions(-)
 prolog/gv/gv_graph_comp.pl         | 4 +++-
 prolog/graph/build_export_graph.pl | 9 ++++++---

    FIXED: gv_id should write numbers.
    FIXED: Yall does not work.

```

[157. commit 8593ed6499a6b6a58ebf0cce4602aea05ca639de](#157)

``` vim

 1 file changed, 7 insertions(+), 4 deletions(-)
 prolog/gv/gv_attrs.pl | 11 +++++++----

    DEBUG: Exception when unknown GV attr encountered.

```

[158. commit cc53b1ea7fbf553c17b191ce6b1af3fac33133da](#158)

``` vim

 1 file changed, 1 insertion(+), 1 deletion(-)
 prolog/tree/tree_viz.pl | 2 +-

    FIXED: Typo in predicate name.

```

[159. commit 202a241a884c68a46b1dd77e95929bfa31e9e9f8](#159)

``` vim

 2 files changed, 2 insertions(+), 2 deletions(-)
 data/gv_color_scrape.pl | 2 +-
 data/gv_attrs_scrape.pl | 2 +-

    Sync to PLC.

```

[160. commit 858b5fb43ded8c4df92935df002bf15586dd9569](#160)

``` vim

 2 files changed, 5 insertions(+), 6 deletions(-)
 prolog/gv/gv_graph_comp.pl | 2 +-
 prolog/gv/gv_attrs.pl      | 9 ++++-----

    Sync to PLC.

```

[161. commit 260b62d34b352c2ccae4c085321497aa30f670ba](#161)

``` vim

 1 file changed, 3 insertions(+), 9 deletions(-)
 prolog/gv/gv_dom.pl | 12 +++---------

    minor cleanup

```

[162. commit a6886ca8272a99b4d14f866b54fe16993b714011](#162)

``` vim

 1 file changed, 2 insertions(+), 2 deletions(-)
 pack.pl | 4 ++--

    pack

```

[163. commit 41914a2d39ceca347ebcc4785cf5615c9c7f8376](#163)

``` vim

 3 files changed, 4 insertions(+), 4 deletions(-)
 prolog/gv/gv_color.pl   | 4 ++--
 data/gv_color_scrape.pl | 2 +-
 data/gv_attrs_scrape.pl | 2 +-

    sync

```

[164. commit 05a5fd2488c4e28c0eae9db4d9c9df4f550f4c3d](#164)

``` vim

 1 file changed, 1 deletion(-)
 prolog/fca/fca_viz.pl | 1 -

    cleanup

```

[165. commit fd6c59b31ebd0ac9927495460dcd4c762ac5681d](#165)

``` vim

 2 files changed, 19 insertions(+), 27 deletions(-)
 data/gv_color_scrape.pl | 20 ++++++++------------
 data/gv_attrs_scrape.pl | 26 +++++++++++---------------

    CLEAN: Use module io for simplified stream calling @gv_attrs_scrape,gv_color_scrape

```

[166. commit 121e68f9ab3b47128c9fb365aed6891f9e91a568](#166)


<h2 id="code"> The shell code for generate navigation for source Tree </h2>


``` sh
# git log --help  特别有用
#bash /e/gethead.sh > graph.log

## first part
echo "+ [1. 源码比较目录](#compare)"
echo "+ [2. 文件细节](#detail)"
echo "+ [3. 时间变化表](#time)"
echo "+ [4. 列出简要信息](#short)"

## second part
echo ""
echo "<h2 id=\"compare\">1. 比较目录</h2>"
echo ""
sign=0
count=1
for i in `git log --decorate --oneline|awk '{print $1}'|tac`;
do if (( sign<1 ))
then 
	sign=2; 
        before=$i; 
else 
	#content[$count]="\[$count: 正在比较变动前 $before 和变动后 $i\]\[$count\]"
	echo "+ [$count: 正在比较变动前 $before 和变动后 $i](#$count)"
	#content[$count]='[$count: 正在比较变动前 $before 和变动后 $i][$count]'
	count=$(($count+1))
    before=$i; 
fi
done;


## third part
echo ""
echo "<h2 id=\"detail\">2. 文件细节</h2>"
echo ""
sign=0
count=1
for i in `git log --decorate --oneline|awk '{print $1}'|tac`;
do if (( sign<1 ))
then 
	sign=2; 
        before=$i; 
else 
	echo \<h2 id=\"$count\"\> $count: "正在比较变动前" $before "和变动后" $i \<\/h2\>
    echo "[back to content](#compare)"

	#content[$count]="\[$count: 正在比较变动前 $before 和变动后 $i\]\[$count\]"
	#echo "[$count: 正在比较变动前 $before 和变动后 $i][$count]"
	#content[$count]='[$count: 正在比较变动前 $before 和变动后 $i][$count]'
    echo " "
    echo "\`\`\` diff"
    echo " "
	git diff $before $i
    echo " "
    echo "\`\`\`"
    echo " "
	count=$(($count+1))
    before=$i; 
fi
done;

echo "总共进行了" $count "次比较"

## fourth part
#echo "时间变化表:"

echo ""
echo "<h2 id=\"time\">3. 时间变化表</h2>"

echo ""
#git log --pretty=format:"%h      %cd       %cr"|awk '{print "["NR". "$0"](#"NR")\n"}'|tac 
git log --pretty=format:"%h      %cd       %cr"|tac|awk '{print "["NR". "$0"](#"NR")\n"}'

## fifth part
echo ""
echo "<h2 id=\"short\">4. 列出简要信息</h2>"
echo ""

echo "\`\`\` vim"
echo " "

git log --stat|tac|awk -v count=1 '{if(/^commit/){gsub(/$/,"](#"count")");count=count+1}; print $0} ' |sed '/^Date/d'|sed '/^Author/d'|sed /^commit/'i```\n'|sed /^commit/'a \\n``` vim' |awk -v count=1 '{if(/^commit/){gsub(/commit/,"["count". commit");count=count+1};print $0;}'

## one bug ,you need to delete the last sentence generate by the code



```


[1]: http://github.com/ 
[2]: https://www.sourcetreeapp.com/ 
[3]: http://pygments.org/docs/lexers/  



